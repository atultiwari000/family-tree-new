var vb=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var $L=vb((JL,Rp)=>{function yb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ov(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dv={exports:{}},zu={},Uv={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=Symbol.for("react.element"),_b=Symbol.for("react.portal"),wb=Symbol.for("react.fragment"),bb=Symbol.for("react.strict_mode"),xb=Symbol.for("react.profiler"),Eb=Symbol.for("react.provider"),Sb=Symbol.for("react.context"),Ib=Symbol.for("react.forward_ref"),Cb=Symbol.for("react.suspense"),Ab=Symbol.for("react.memo"),Tb=Symbol.for("react.lazy"),Mm=Symbol.iterator;function kb(t){return t===null||typeof t!="object"?null:(t=Mm&&t[Mm]||t["@@iterator"],typeof t=="function"?t:null)}var Vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fv=Object.assign,Bv={};function Is(t,e,n){this.props=t,this.context=e,this.refs=Bv,this.updater=n||Vv}Is.prototype.isReactComponent={};Is.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Is.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jv(){}jv.prototype=Is.prototype;function Np(t,e,n){this.props=t,this.context=e,this.refs=Bv,this.updater=n||Vv}var Pp=Np.prototype=new jv;Pp.constructor=Np;Fv(Pp,Is.prototype);Pp.isPureReactComponent=!0;var Om=Array.isArray,zv=Object.prototype.hasOwnProperty,Lp={current:null},$v={key:!0,ref:!0,__self:!0,__source:!0};function Hv(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)zv.call(e,r)&&!$v.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:sl,type:t,key:o,ref:s,props:i,_owner:Lp.current}}function Rb(t,e){return{$$typeof:sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===sl}function Nb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dm=/\/+/g;function Wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nb(""+t.key):e.toString(36)}function _c(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case sl:case _b:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Wd(s,0):r,Om(i)?(n="",t!=null&&(n=t.replace(Dm,"$&/")+"/"),_c(i,e,n,"",function(d){return d})):i!=null&&(Mp(i)&&(i=Rb(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Dm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Om(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+Wd(o,l);s+=_c(o,e,n,c,i)}else if(c=kb(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+Wd(o,l++),s+=_c(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Bl(t,e,n){if(t==null)return t;var r=[],i=0;return _c(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Pb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},wc={transition:null},Lb={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:wc,ReactCurrentOwner:Lp};function qv(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Bl,forEach:function(t,e,n){Bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bl(t,function(){e++}),e},toArray:function(t){return Bl(t,function(e){return e})||[]},only:function(t){if(!Mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Is;Ce.Fragment=wb;Ce.Profiler=xb;Ce.PureComponent=Np;Ce.StrictMode=bb;Ce.Suspense=Cb;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lb;Ce.act=qv;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Lp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)zv.call(e,c)&&!$v.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:sl,type:t.type,key:i,ref:o,props:r,_owner:s}};Ce.createContext=function(t){return t={$$typeof:Sb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Eb,_context:t},t.Consumer=t};Ce.createElement=Hv;Ce.createFactory=function(t){var e=Hv.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:Ib,render:t}};Ce.isValidElement=Mp;Ce.lazy=function(t){return{$$typeof:Tb,_payload:{_status:-1,_result:t},_init:Pb}};Ce.memo=function(t,e){return{$$typeof:Ab,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=wc.transition;wc.transition={};try{t()}finally{wc.transition=e}};Ce.unstable_act=qv;Ce.useCallback=function(t,e){return Zt.current.useCallback(t,e)};Ce.useContext=function(t){return Zt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Zt.current.useEffect(t,e)};Ce.useId=function(){return Zt.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Zt.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};Ce.useRef=function(t){return Zt.current.useRef(t)};Ce.useState=function(t){return Zt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Zt.current.useTransition()};Ce.version="18.3.1";Uv.exports=Ce;var D=Uv.exports;const Jn=Ov(D),Mb=yb({__proto__:null,default:Jn},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob=D,Db=Symbol.for("react.element"),Ub=Symbol.for("react.fragment"),Vb=Object.prototype.hasOwnProperty,Fb=Ob.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bb={key:!0,ref:!0,__self:!0,__source:!0};function Wv(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Vb.call(e,r)&&!Bb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Db,type:t,key:o,ref:s,props:i,_owner:Fb.current}}zu.Fragment=Ub;zu.jsx=Wv;zu.jsxs=Wv;Dv.exports=zu;var $=Dv.exports,Xv={exports:{}},Sn={},Kv={exports:{}},Yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,B){var z=F.length;F.push(B);e:for(;0<z;){var X=z-1>>>1,Y=F[X];if(0<i(Y,B))F[X]=B,F[z]=Y,z=X;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var B=F[0],z=F.pop();if(z!==B){F[0]=z;e:for(var X=0,Y=F.length,q=Y>>>1;X<q;){var K=2*(X+1)-1,H=F[K],te=K+1,Z=F[te];if(0>i(H,z))te<Y&&0>i(Z,H)?(F[X]=Z,F[te]=z,X=te):(F[X]=H,F[K]=z,X=K);else if(te<Y&&0>i(Z,z))F[X]=Z,F[te]=z,X=te;else break e}}return B}function i(F,B){var z=F.sortIndex-B.sortIndex;return z!==0?z:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,v=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=F)r(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(d)}}function b(F){if(y=!1,_(F),!v)if(n(c)!==null)v=!0,O(A);else{var B=n(d);B!==null&&M(b,B.startTime-F)}}function A(F,B){v=!1,y&&(y=!1,g(x),x=-1),m=!0;var z=f;try{for(_(B),h=n(c);h!==null&&(!(h.expirationTime>B)||F&&!R());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Y=X(h.expirationTime<=B);B=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(c)&&r(c),_(B)}else r(c);h=n(c)}if(h!==null)var q=!0;else{var K=n(d);K!==null&&M(b,K.startTime-B),q=!1}return q}finally{h=null,f=z,m=!1}}var k=!1,C=null,x=-1,S=5,T=-1;function R(){return!(t.unstable_now()-T<S)}function N(){if(C!==null){var F=t.unstable_now();T=F;var B=!0;try{B=C(!0,F)}finally{B?P():(k=!1,C=null)}}else k=!1}var P;if(typeof w=="function")P=function(){w(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,j=V.port2;V.port1.onmessage=N,P=function(){j.postMessage(null)}}else P=function(){E(N,0)};function O(F){C=F,k||(k=!0,P())}function M(F,B){x=E(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,O(A))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var z=f;f=B;try{return F()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=f;f=F;try{return B()}finally{f=z}},t.unstable_scheduleCallback=function(F,B,z){var X=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,F={id:u++,callback:B,priorityLevel:F,startTime:z,expirationTime:Y,sortIndex:-1},z>X?(F.sortIndex=z,e(d,F),n(c)===null&&F===n(d)&&(y?(g(x),x=-1):y=!0,M(b,z-X))):(F.sortIndex=Y,e(c,F),v||m||(v=!0,O(A))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var B=f;return function(){var z=f;f=B;try{return F.apply(this,arguments)}finally{f=z}}}})(Yv);Kv.exports=Yv;var jb=Kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb=D,En=jb;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gv=new Set,Pa={};function yo(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(Pa[t]=e,t=0;t<e.length;t++)Gv.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wh=Object.prototype.hasOwnProperty,$b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Um={},Vm={};function Hb(t){return Wh.call(Vm,t)?!0:Wh.call(Um,t)?!1:$b.test(t)?Vm[t]=!0:(Um[t]=!0,!1)}function qb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wb(t,e,n,r){if(e===null||typeof e>"u"||qb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var Op=/[\-:]([a-z])/g;function Dp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Op,Dp);Dt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Op,Dp);Dt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Op,Dp);Dt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function Up(t,e,n,r){var i=Dt.hasOwnProperty(e)?Dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wb(e,n,i,r)&&(n=null),r||i===null?Hb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jr=zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),Vp=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),Qv=Symbol.for("react.provider"),Jv=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),Yh=Symbol.for("react.suspense_list"),Bp=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),Zv=Symbol.for("react.offscreen"),Fm=Symbol.iterator;function Xs(t){return t===null||typeof t!="object"?null:(t=Fm&&t[Fm]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,Xd;function oa(t){if(Xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xd=e&&e[1]||""}return`
`+Xd+t}var Kd=!1;function Yd(t,e){if(!t||Kd)return"";Kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=l);break}}}finally{Kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oa(t):""}function Xb(t){switch(t.tag){case 5:return oa(t.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function Gh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case Do:return"Portal";case Xh:return"Profiler";case Vp:return"StrictMode";case Kh:return"Suspense";case Yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jv:return(t.displayName||"Context")+".Consumer";case Qv:return(t._context.displayName||"Context")+".Provider";case Fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bp:return e=t.displayName||null,e!==null?e:Gh(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Gh(t(e))}catch{}}return null}function Kb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gh(e);case 8:return e===Vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ey(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Yb(t){var e=ey(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zl(t){t._valueTracker||(t._valueTracker=Yb(t))}function ty(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ey(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qh(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ny(t,e){e=e.checked,e!=null&&Up(t,"checked",e,!1)}function Jh(t,e){ny(t,e);var n=bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zh(t,e.type,bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zh(t,e,n){(e!=="number"||Wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ef(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(sa(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bi(n)}}function ry(t,e){var n=bi(e.value),r=bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $m(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $l,oy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function La(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gb=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(t){Gb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ga[e]=ga[t]})});function sy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ga.hasOwnProperty(t)&&ga[t]?(""+e).trim():e+"px"}function ay(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Qb=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nf(t,e){if(e){if(Qb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function rf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=null;function jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sf=null,Go=null,Qo=null;function Hm(t){if(t=cl(t)){if(typeof sf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Xu(e),sf(t.stateNode,t.type,e))}}function ly(t){Go?Qo?Qo.push(t):Qo=[t]:Go=t}function cy(){if(Go){var t=Go,e=Qo;if(Qo=Go=null,Hm(t),e)for(t=0;t<e.length;t++)Hm(e[t])}}function uy(t,e){return t(e)}function dy(){}var Gd=!1;function hy(t,e,n){if(Gd)return t(e,n);Gd=!0;try{return uy(t,e,n)}finally{Gd=!1,(Go!==null||Qo!==null)&&(dy(),cy())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var r=Xu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var af=!1;if(Nr)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){af=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{af=!1}function Jb(t,e,n,r,i,o,s,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(u){this.onError(u)}}var va=!1,Xc=null,Kc=!1,lf=null,Zb={onError:function(t){va=!0,Xc=t}};function e7(t,e,n,r,i,o,s,l,c){va=!1,Xc=null,Jb.apply(Zb,arguments)}function t7(t,e,n,r,i,o,s,l,c){if(e7.apply(this,arguments),va){if(va){var d=Xc;va=!1,Xc=null}else throw Error(ee(198));Kc||(Kc=!0,lf=d)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qm(t){if(_o(t)!==t)throw Error(ee(188))}function n7(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qm(i),t;if(o===r)return qm(i),e;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function py(t){return t=n7(t),t!==null?my(t):null}function my(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=my(t);if(e!==null)return e;t=t.sibling}return null}var gy=En.unstable_scheduleCallback,Wm=En.unstable_cancelCallback,r7=En.unstable_shouldYield,i7=En.unstable_requestPaint,ft=En.unstable_now,o7=En.unstable_getCurrentPriorityLevel,zp=En.unstable_ImmediatePriority,vy=En.unstable_UserBlockingPriority,Yc=En.unstable_NormalPriority,s7=En.unstable_LowPriority,yy=En.unstable_IdlePriority,$u=null,rr=null;function a7(t){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot($u,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:u7,l7=Math.log,c7=Math.LN2;function u7(t){return t>>>=0,t===0?32:31-(l7(t)/c7|0)|0}var Hl=64,ql=4194304;function aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=aa(l):(o&=s,o!==0&&(r=aa(o)))}else s=n&~i,s!==0?r=aa(s):o!==0&&(r=aa(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),i=1<<n,r|=t[n],e&=~i;return r}function d7(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h7(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-zn(o),l=1<<s,c=i[s];c===-1?(!(l&n)||l&r)&&(i[s]=d7(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _y(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function Qd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function f7(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function $p(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ze=0;function wy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var by,Hp,xy,Ey,Sy,uf=!1,Wl=[],ci=null,ui=null,di=null,Oa=new Map,Da=new Map,ei=[],p7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xm(t,e){switch(t){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(e.pointerId)}}function Ys(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=cl(e),e!==null&&Hp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function m7(t,e,n,r,i){switch(e){case"focusin":return ci=Ys(ci,t,e,n,r,i),!0;case"dragenter":return ui=Ys(ui,t,e,n,r,i),!0;case"mouseover":return di=Ys(di,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Oa.set(o,Ys(Oa.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Da.set(o,Ys(Da.get(o)||null,t,e,n,r,i)),!0}return!1}function Iy(t){var e=qi(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=fy(n),e!==null){t.blockedOn=e,Sy(t.priority,function(){xy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=df(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);of=r,n.target.dispatchEvent(r),of=null}else return e=cl(n),e!==null&&Hp(e),t.blockedOn=n,!1;e.shift()}return!0}function Km(t,e,n){bc(t)&&n.delete(e)}function g7(){uf=!1,ci!==null&&bc(ci)&&(ci=null),ui!==null&&bc(ui)&&(ui=null),di!==null&&bc(di)&&(di=null),Oa.forEach(Km),Da.forEach(Km)}function Gs(t,e){t.blockedOn===e&&(t.blockedOn=null,uf||(uf=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,g7)))}function Ua(t){function e(i){return Gs(i,t)}if(0<Wl.length){Gs(Wl[0],t);for(var n=1;n<Wl.length;n++){var r=Wl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ci!==null&&Gs(ci,t),ui!==null&&Gs(ui,t),di!==null&&Gs(di,t),Oa.forEach(e),Da.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)Iy(n),n.blockedOn===null&&ei.shift()}var Jo=jr.ReactCurrentBatchConfig,Qc=!0;function v7(t,e,n,r){var i=ze,o=Jo.transition;Jo.transition=null;try{ze=1,qp(t,e,n,r)}finally{ze=i,Jo.transition=o}}function y7(t,e,n,r){var i=ze,o=Jo.transition;Jo.transition=null;try{ze=4,qp(t,e,n,r)}finally{ze=i,Jo.transition=o}}function qp(t,e,n,r){if(Qc){var i=df(t,e,n,r);if(i===null)ah(t,e,r,Jc,n),Xm(t,r);else if(m7(i,t,e,n,r))r.stopPropagation();else if(Xm(t,r),e&4&&-1<p7.indexOf(t)){for(;i!==null;){var o=cl(i);if(o!==null&&by(o),o=df(t,e,n,r),o===null&&ah(t,e,r,Jc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ah(t,e,r,null,n)}}var Jc=null;function df(t,e,n,r){if(Jc=null,t=jp(r),t=qi(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jc=t,null}function Cy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o7()){case zp:return 1;case vy:return 4;case Yc:case s7:return 16;case yy:return 536870912;default:return 16}default:return 16}}var si=null,Wp=null,xc=null;function Ay(){if(xc)return xc;var t,e=Wp,n=e.length,r,i="value"in si?si.value:si.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return xc=i.slice(t,1<r?1-r:void 0)}function Ec(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xl(){return!0}function Ym(){return!1}function In(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xl:Ym,this.isPropagationStopped=Ym,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=In(Cs),ll=ot({},Cs,{view:0,detail:0}),_7=In(ll),Jd,Zd,Qs,Hu=ot({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Jd=t.screenX-Qs.screenX,Zd=t.screenY-Qs.screenY):Zd=Jd=0,Qs=t),Jd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),Gm=In(Hu),w7=ot({},Hu,{dataTransfer:0}),b7=In(w7),x7=ot({},ll,{relatedTarget:0}),eh=In(x7),E7=ot({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),S7=In(E7),I7=ot({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C7=In(I7),A7=ot({},Cs,{data:0}),Qm=In(A7),T7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N7(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R7[t])?!!e[t]:!1}function Kp(){return N7}var P7=ot({},ll,{key:function(t){if(t.key){var e=T7[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k7[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kp,charCode:function(t){return t.type==="keypress"?Ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L7=In(P7),M7=ot({},Hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jm=In(M7),O7=ot({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kp}),D7=In(O7),U7=ot({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),V7=In(U7),F7=ot({},Hu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B7=In(F7),j7=[9,13,27,32],Yp=Nr&&"CompositionEvent"in window,ya=null;Nr&&"documentMode"in document&&(ya=document.documentMode);var z7=Nr&&"TextEvent"in window&&!ya,Ty=Nr&&(!Yp||ya&&8<ya&&11>=ya),Zm=" ",eg=!1;function ky(t,e){switch(t){case"keyup":return j7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ry(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function $7(t,e){switch(t){case"compositionend":return Ry(e);case"keypress":return e.which!==32?null:(eg=!0,Zm);case"textInput":return t=e.data,t===Zm&&eg?null:t;default:return null}}function H7(t,e){if(Vo)return t==="compositionend"||!Yp&&ky(t,e)?(t=Ay(),xc=Wp=si=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ty&&e.locale!=="ko"?null:e.data;default:return null}}var q7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q7[t.type]:e==="textarea"}function Ny(t,e,n,r){ly(r),e=Zc(e,"onChange"),0<e.length&&(n=new Xp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _a=null,Va=null;function W7(t){zy(t,0)}function qu(t){var e=jo(t);if(ty(e))return t}function X7(t,e){if(t==="change")return e}var Py=!1;if(Nr){var th;if(Nr){var nh="oninput"in document;if(!nh){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),nh=typeof ng.oninput=="function"}th=nh}else th=!1;Py=th&&(!document.documentMode||9<document.documentMode)}function rg(){_a&&(_a.detachEvent("onpropertychange",Ly),Va=_a=null)}function Ly(t){if(t.propertyName==="value"&&qu(Va)){var e=[];Ny(e,Va,t,jp(t)),hy(W7,e)}}function K7(t,e,n){t==="focusin"?(rg(),_a=e,Va=n,_a.attachEvent("onpropertychange",Ly)):t==="focusout"&&rg()}function Y7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(Va)}function G7(t,e){if(t==="click")return qu(e)}function Q7(t,e){if(t==="input"||t==="change")return qu(e)}function J7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:J7;function Fa(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wh.call(e,i)||!Wn(t[i],e[i]))return!1}return!0}function ig(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function og(t,e){var n=ig(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ig(n)}}function My(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?My(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Oy(){for(var t=window,e=Wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wc(t.document)}return e}function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Z7(t){var e=Oy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&My(n.ownerDocument.documentElement,n)){if(r!==null&&Gp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=og(n,o);var s=og(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var e8=Nr&&"documentMode"in document&&11>=document.documentMode,Fo=null,hf=null,wa=null,ff=!1;function sg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ff||Fo==null||Fo!==Wc(r)||(r=Fo,"selectionStart"in r&&Gp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Fa(wa,r)||(wa=r,r=Zc(hf,"onSelect"),0<r.length&&(e=new Xp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fo)))}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bo={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},rh={},Dy={};Nr&&(Dy=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Wu(t){if(rh[t])return rh[t];if(!Bo[t])return t;var e=Bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dy)return rh[t]=e[n];return t}var Uy=Wu("animationend"),Vy=Wu("animationiteration"),Fy=Wu("animationstart"),By=Wu("transitionend"),jy=new Map,ag="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){jy.set(t,e),yo(e,[t])}for(var ih=0;ih<ag.length;ih++){var oh=ag[ih],t8=oh.toLowerCase(),n8=oh[0].toUpperCase()+oh.slice(1);Ni(t8,"on"+n8)}Ni(Uy,"onAnimationEnd");Ni(Vy,"onAnimationIteration");Ni(Fy,"onAnimationStart");Ni("dblclick","onDoubleClick");Ni("focusin","onFocus");Ni("focusout","onBlur");Ni(By,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r8=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function lg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,t7(r,e,void 0,t),t.currentTarget=null}function zy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;lg(i,l,d),o=c}else for(s=0;s<r.length;s++){if(l=r[s],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;lg(i,l,d),o=c}}}if(Kc)throw t=lf,Kc=!1,lf=null,t}function Qe(t,e){var n=e[yf];n===void 0&&(n=e[yf]=new Set);var r=t+"__bubble";n.has(r)||($y(e,t,2,!1),n.add(r))}function sh(t,e,n){var r=0;e&&(r|=4),$y(n,t,r,e)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Ba(t){if(!t[Yl]){t[Yl]=!0,Gv.forEach(function(n){n!=="selectionchange"&&(r8.has(n)||sh(n,!1,t),sh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yl]||(e[Yl]=!0,sh("selectionchange",!1,e))}}function $y(t,e,n,r){switch(Cy(e)){case 1:var i=v7;break;case 4:i=y7;break;default:i=qp}n=i.bind(null,e,n,t),i=void 0,!af||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ah(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;l!==null;){if(s=qi(l),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}l=l.parentNode}}r=r.return}hy(function(){var d=o,u=jp(n),h=[];e:{var f=jy.get(t);if(f!==void 0){var m=Xp,v=t;switch(t){case"keypress":if(Ec(n)===0)break e;case"keydown":case"keyup":m=L7;break;case"focusin":v="focus",m=eh;break;case"focusout":v="blur",m=eh;break;case"beforeblur":case"afterblur":m=eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=b7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=D7;break;case Uy:case Vy:case Fy:m=S7;break;case By:m=V7;break;case"scroll":m=_7;break;case"wheel":m=B7;break;case"copy":case"cut":case"paste":m=C7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Jm}var y=(e&4)!==0,E=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var w=d,_;w!==null;){_=w;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,g!==null&&(b=Ma(w,g),b!=null&&y.push(ja(w,b,_)))),E)break;w=w.return}0<y.length&&(f=new m(f,v,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==of&&(v=n.relatedTarget||n.fromElement)&&(qi(v)||v[Pr]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=d,v=v?qi(v):null,v!==null&&(E=_o(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(y=Gm,b="onMouseLeave",g="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Jm,b="onPointerLeave",g="onPointerEnter",w="pointer"),E=m==null?f:jo(m),_=v==null?f:jo(v),f=new y(b,w+"leave",m,n,u),f.target=E,f.relatedTarget=_,b=null,qi(u)===d&&(y=new y(g,w+"enter",v,n,u),y.target=_,y.relatedTarget=E,b=y),E=b,m&&v)t:{for(y=m,g=v,w=0,_=y;_;_=ko(_))w++;for(_=0,b=g;b;b=ko(b))_++;for(;0<w-_;)y=ko(y),w--;for(;0<_-w;)g=ko(g),_--;for(;w--;){if(y===g||g!==null&&y===g.alternate)break t;y=ko(y),g=ko(g)}y=null}else y=null;m!==null&&cg(h,f,m,y,!1),v!==null&&E!==null&&cg(h,E,v,y,!0)}}e:{if(f=d?jo(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var A=X7;else if(tg(f))if(Py)A=Q7;else{A=Y7;var k=K7}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=G7);if(A&&(A=A(t,d))){Ny(h,A,n,u);break e}k&&k(t,f,d),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Zh(f,"number",f.value)}switch(k=d?jo(d):window,t){case"focusin":(tg(k)||k.contentEditable==="true")&&(Fo=k,hf=d,wa=null);break;case"focusout":wa=hf=Fo=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,sg(h,n,u);break;case"selectionchange":if(e8)break;case"keydown":case"keyup":sg(h,n,u)}var C;if(Yp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Vo?ky(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Ty&&n.locale!=="ko"&&(Vo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Vo&&(C=Ay()):(si=u,Wp="value"in si?si.value:si.textContent,Vo=!0)),k=Zc(d,x),0<k.length&&(x=new Qm(x,t,null,n,u),h.push({event:x,listeners:k}),C?x.data=C:(C=Ry(n),C!==null&&(x.data=C)))),(C=z7?$7(t,n):H7(t,n))&&(d=Zc(d,"onBeforeInput"),0<d.length&&(u=new Qm("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=C))}zy(h,e)})}function ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ma(t,n),o!=null&&r.unshift(ja(t,o,i)),o=Ma(t,e),o!=null&&r.push(ja(t,o,i))),t=t.return}return r}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cg(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=Ma(n,o),c!=null&&s.unshift(ja(n,c,l))):i||(c=Ma(n,o),c!=null&&s.push(ja(n,c,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var i8=/\r\n?/g,o8=/\u0000|\uFFFD/g;function ug(t){return(typeof t=="string"?t:""+t).replace(i8,`
`).replace(o8,"")}function Gl(t,e,n){if(e=ug(e),ug(t)!==e&&n)throw Error(ee(425))}function eu(){}var pf=null,mf=null;function gf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vf=typeof setTimeout=="function"?setTimeout:void 0,s8=typeof clearTimeout=="function"?clearTimeout:void 0,dg=typeof Promise=="function"?Promise:void 0,a8=typeof queueMicrotask=="function"?queueMicrotask:typeof dg<"u"?function(t){return dg.resolve(null).then(t).catch(l8)}:vf;function l8(t){setTimeout(function(){throw t})}function lh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ua(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ua(e)}function hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var As=Math.random().toString(36).slice(2),er="__reactFiber$"+As,za="__reactProps$"+As,Pr="__reactContainer$"+As,yf="__reactEvents$"+As,c8="__reactListeners$"+As,u8="__reactHandles$"+As;function qi(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hg(t);t!==null;){if(n=t[er])return n;t=hg(t)}return e}t=n,n=t.parentNode}return null}function cl(t){return t=t[er]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Xu(t){return t[za]||null}var _f=[],zo=-1;function Pi(t){return{current:t}}function Je(t){0>zo||(t.current=_f[zo],_f[zo]=null,zo--)}function Xe(t,e){zo++,_f[zo]=t.current,t.current=e}var xi={},Xt=Pi(xi),an=Pi(!1),no=xi;function cs(t,e){var n=t.type.contextTypes;if(!n)return xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function tu(){Je(an),Je(Xt)}function fg(t,e,n){if(Xt.current!==xi)throw Error(ee(168));Xe(Xt,e),Xe(an,n)}function Hy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,Kb(t)||"Unknown",i));return ot({},n,r)}function nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xi,no=Xt.current,Xe(Xt,t),Xe(an,an.current),!0}function pg(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=Hy(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,Je(an),Je(Xt),Xe(Xt,t)):Je(an),Xe(an,n)}var br=null,Ku=!1,ch=!1;function qy(t){br===null?br=[t]:br.push(t)}function d8(t){Ku=!0,qy(t)}function Li(){if(!ch&&br!==null){ch=!0;var t=0,e=ze;try{var n=br;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Ku=!1}catch(i){throw br!==null&&(br=br.slice(t+1)),gy(zp,Li),i}finally{ze=e,ch=!1}}return null}var $o=[],Ho=0,ru=null,iu=0,Tn=[],kn=0,ro=null,Er=1,Sr="";function ji(t,e){$o[Ho++]=iu,$o[Ho++]=ru,ru=t,iu=e}function Wy(t,e,n){Tn[kn++]=Er,Tn[kn++]=Sr,Tn[kn++]=ro,ro=t;var r=Er;t=Sr;var i=32-zn(r)-1;r&=~(1<<i),n+=1;var o=32-zn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Er=1<<32-zn(e)+i|n<<i|r,Sr=o+t}else Er=1<<o|n<<i|r,Sr=t}function Qp(t){t.return!==null&&(ji(t,1),Wy(t,1,0))}function Jp(t){for(;t===ru;)ru=$o[--Ho],$o[Ho]=null,iu=$o[--Ho],$o[Ho]=null;for(;t===ro;)ro=Tn[--kn],Tn[kn]=null,Sr=Tn[--kn],Tn[kn]=null,Er=Tn[--kn],Tn[kn]=null}var wn=null,vn=null,et=!1,jn=null;function Xy(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:Er,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function wf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bf(t){if(et){var e=vn;if(e){var n=e;if(!mg(t,e)){if(wf(t))throw Error(ee(418));e=hi(n.nextSibling);var r=wn;e&&mg(t,e)?Xy(r,n):(t.flags=t.flags&-4097|2,et=!1,wn=t)}}else{if(wf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,et=!1,wn=t}}}function gg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Ql(t){if(t!==wn)return!1;if(!et)return gg(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gf(t.type,t.memoizedProps)),e&&(e=vn)){if(wf(t))throw Ky(),Error(ee(418));for(;e;)Xy(t,e),e=hi(e.nextSibling)}if(gg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?hi(t.stateNode.nextSibling):null;return!0}function Ky(){for(var t=vn;t;)t=hi(t.nextSibling)}function us(){vn=wn=null,et=!1}function Zp(t){jn===null?jn=[t]:jn.push(t)}var h8=jr.ReactCurrentBatchConfig;function Js(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Jl(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vg(t){var e=t._init;return e(t._payload)}function Yy(t){function e(g,w){if(t){var _=g.deletions;_===null?(g.deletions=[w],g.flags|=16):_.push(w)}}function n(g,w){if(!t)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=gi(g,w),g.index=0,g.sibling=null,g}function o(g,w,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<w?(g.flags|=2,w):_):(g.flags|=2,w)):(g.flags|=1048576,w)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,w,_,b){return w===null||w.tag!==6?(w=gh(_,g.mode,b),w.return=g,w):(w=i(w,_),w.return=g,w)}function c(g,w,_,b){var A=_.type;return A===Uo?u(g,w,_.props.children,b,_.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Jr&&vg(A)===w.type)?(b=i(w,_.props),b.ref=Js(g,w,_),b.return=g,b):(b=Rc(_.type,_.key,_.props,null,g.mode,b),b.ref=Js(g,w,_),b.return=g,b)}function d(g,w,_,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=vh(_,g.mode,b),w.return=g,w):(w=i(w,_.children||[]),w.return=g,w)}function u(g,w,_,b,A){return w===null||w.tag!==7?(w=Ji(_,g.mode,b,A),w.return=g,w):(w=i(w,_),w.return=g,w)}function h(g,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gh(""+w,g.mode,_),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jl:return _=Rc(w.type,w.key,w.props,null,g.mode,_),_.ref=Js(g,null,w),_.return=g,_;case Do:return w=vh(w,g.mode,_),w.return=g,w;case Jr:var b=w._init;return h(g,b(w._payload),_)}if(sa(w)||Xs(w))return w=Ji(w,g.mode,_,null),w.return=g,w;Jl(g,w)}return null}function f(g,w,_,b){var A=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:l(g,w,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case jl:return _.key===A?c(g,w,_,b):null;case Do:return _.key===A?d(g,w,_,b):null;case Jr:return A=_._init,f(g,w,A(_._payload),b)}if(sa(_)||Xs(_))return A!==null?null:u(g,w,_,b,null);Jl(g,_)}return null}function m(g,w,_,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(_)||null,l(w,g,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jl:return g=g.get(b.key===null?_:b.key)||null,c(w,g,b,A);case Do:return g=g.get(b.key===null?_:b.key)||null,d(w,g,b,A);case Jr:var k=b._init;return m(g,w,_,k(b._payload),A)}if(sa(b)||Xs(b))return g=g.get(_)||null,u(w,g,b,A,null);Jl(w,b)}return null}function v(g,w,_,b){for(var A=null,k=null,C=w,x=w=0,S=null;C!==null&&x<_.length;x++){C.index>x?(S=C,C=null):S=C.sibling;var T=f(g,C,_[x],b);if(T===null){C===null&&(C=S);break}t&&C&&T.alternate===null&&e(g,C),w=o(T,w,x),k===null?A=T:k.sibling=T,k=T,C=S}if(x===_.length)return n(g,C),et&&ji(g,x),A;if(C===null){for(;x<_.length;x++)C=h(g,_[x],b),C!==null&&(w=o(C,w,x),k===null?A=C:k.sibling=C,k=C);return et&&ji(g,x),A}for(C=r(g,C);x<_.length;x++)S=m(C,g,x,_[x],b),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?x:S.key),w=o(S,w,x),k===null?A=S:k.sibling=S,k=S);return t&&C.forEach(function(R){return e(g,R)}),et&&ji(g,x),A}function y(g,w,_,b){var A=Xs(_);if(typeof A!="function")throw Error(ee(150));if(_=A.call(_),_==null)throw Error(ee(151));for(var k=A=null,C=w,x=w=0,S=null,T=_.next();C!==null&&!T.done;x++,T=_.next()){C.index>x?(S=C,C=null):S=C.sibling;var R=f(g,C,T.value,b);if(R===null){C===null&&(C=S);break}t&&C&&R.alternate===null&&e(g,C),w=o(R,w,x),k===null?A=R:k.sibling=R,k=R,C=S}if(T.done)return n(g,C),et&&ji(g,x),A;if(C===null){for(;!T.done;x++,T=_.next())T=h(g,T.value,b),T!==null&&(w=o(T,w,x),k===null?A=T:k.sibling=T,k=T);return et&&ji(g,x),A}for(C=r(g,C);!T.done;x++,T=_.next())T=m(C,g,x,T.value,b),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?x:T.key),w=o(T,w,x),k===null?A=T:k.sibling=T,k=T);return t&&C.forEach(function(N){return e(g,N)}),et&&ji(g,x),A}function E(g,w,_,b){if(typeof _=="object"&&_!==null&&_.type===Uo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case jl:e:{for(var A=_.key,k=w;k!==null;){if(k.key===A){if(A=_.type,A===Uo){if(k.tag===7){n(g,k.sibling),w=i(k,_.props.children),w.return=g,g=w;break e}}else if(k.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Jr&&vg(A)===k.type){n(g,k.sibling),w=i(k,_.props),w.ref=Js(g,k,_),w.return=g,g=w;break e}n(g,k);break}else e(g,k);k=k.sibling}_.type===Uo?(w=Ji(_.props.children,g.mode,b,_.key),w.return=g,g=w):(b=Rc(_.type,_.key,_.props,null,g.mode,b),b.ref=Js(g,w,_),b.return=g,g=b)}return s(g);case Do:e:{for(k=_.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(g,w.sibling),w=i(w,_.children||[]),w.return=g,g=w;break e}else{n(g,w);break}else e(g,w);w=w.sibling}w=vh(_,g.mode,b),w.return=g,g=w}return s(g);case Jr:return k=_._init,E(g,w,k(_._payload),b)}if(sa(_))return v(g,w,_,b);if(Xs(_))return y(g,w,_,b);Jl(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(g,w.sibling),w=i(w,_),w.return=g,g=w):(n(g,w),w=gh(_,g.mode,b),w.return=g,g=w),s(g)):n(g,w)}return E}var ds=Yy(!0),Gy=Yy(!1),ou=Pi(null),su=null,qo=null,e1=null;function t1(){e1=qo=su=null}function n1(t){var e=ou.current;Je(ou),t._currentValue=e}function xf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zo(t,e){su=t,e1=qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(e1!==t)if(t={context:t,memoizedValue:e,next:null},qo===null){if(su===null)throw Error(ee(308));qo=t,su.dependencies={lanes:0,firstContext:t}}else qo=qo.next=t;return e}var Wi=null;function r1(t){Wi===null?Wi=[t]:Wi.push(t)}function Qy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,r1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function i1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Lr(t,n)}return i=r.interleaved,i===null?(e.next=e,r1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Lr(t,n)}function Sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$p(t,n)}}function yg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function au(t,e,n,r){var i=t.updateQueue;Zr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==s&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var h=i.baseState;s=0,u=d=c=null,l=o;do{var f=l.lane,m=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(f=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=ot({},h,f);break e;case 2:Zr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,s|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);oo|=s,t.lanes=s,t.memoizedState=h}}function _g(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var ul={},ir=Pi(ul),$a=Pi(ul),Ha=Pi(ul);function Xi(t){if(t===ul)throw Error(ee(174));return t}function o1(t,e){switch(Xe(Ha,e),Xe($a,t),Xe(ir,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tf(e,t)}Je(ir),Xe(ir,e)}function hs(){Je(ir),Je($a),Je(Ha)}function Zy(t){Xi(Ha.current);var e=Xi(ir.current),n=tf(e,t.type);e!==n&&(Xe($a,t),Xe(ir,n))}function s1(t){$a.current===t&&(Je(ir),Je($a))}var rt=Pi(0);function lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uh=[];function a1(){for(var t=0;t<uh.length;t++)uh[t]._workInProgressVersionPrimary=null;uh.length=0}var Ic=jr.ReactCurrentDispatcher,dh=jr.ReactCurrentBatchConfig,io=0,it=null,xt=null,At=null,cu=!1,ba=!1,qa=0,f8=0;function Bt(){throw Error(ee(321))}function l1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function c1(t,e,n,r,i,o){if(io=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ic.current=t===null||t.memoizedState===null?v8:y8,t=n(r,i),ba){o=0;do{if(ba=!1,qa=0,25<=o)throw Error(ee(301));o+=1,At=xt=null,e.updateQueue=null,Ic.current=_8,t=n(r,i)}while(ba)}if(Ic.current=uu,e=xt!==null&&xt.next!==null,io=0,At=xt=it=null,cu=!1,e)throw Error(ee(300));return t}function u1(){var t=qa!==0;return qa=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=t:At=At.next=t,At}function Ln(){if(xt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=At===null?it.memoizedState:At.next;if(e!==null)At=e,xt=t;else{if(t===null)throw Error(ee(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},At===null?it.memoizedState=At=t:At=At.next=t}return At}function Wa(t,e){return typeof e=="function"?e(t):e}function hh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=xt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,c=null,d=o;do{var u=d.lane;if((io&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,s=r):c=c.next=h,it.lanes|=u,oo|=u}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=l,Wn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,it.lanes|=o,oo|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Wn(o,e.memoizedState)||(sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function e3(){}function t3(t,e){var n=it,r=Ln(),i=e(),o=!Wn(r.memoizedState,i);if(o&&(r.memoizedState=i,sn=!0),r=r.queue,d1(i3.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Xa(9,r3.bind(null,n,r,i,e),void 0,null),Tt===null)throw Error(ee(349));io&30||n3(n,e,i)}return i}function n3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function r3(t,e,n,r){e.value=n,e.getSnapshot=r,o3(e)&&s3(t)}function i3(t,e,n){return n(function(){o3(e)&&s3(t)})}function o3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function s3(t){var e=Lr(t,1);e!==null&&$n(e,t,1,-1)}function wg(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=g8.bind(null,it,t),[e.memoizedState,t]}function Xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function a3(){return Ln().memoizedState}function Cc(t,e,n,r){var i=Qn();it.flags|=t,i.memoizedState=Xa(1|e,n,void 0,r===void 0?null:r)}function Yu(t,e,n,r){var i=Ln();r=r===void 0?null:r;var o=void 0;if(xt!==null){var s=xt.memoizedState;if(o=s.destroy,r!==null&&l1(r,s.deps)){i.memoizedState=Xa(e,n,o,r);return}}it.flags|=t,i.memoizedState=Xa(1|e,n,o,r)}function bg(t,e){return Cc(8390656,8,t,e)}function d1(t,e){return Yu(2048,8,t,e)}function l3(t,e){return Yu(4,2,t,e)}function c3(t,e){return Yu(4,4,t,e)}function u3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function d3(t,e,n){return n=n!=null?n.concat([t]):null,Yu(4,4,u3.bind(null,e,t),n)}function h1(){}function h3(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&l1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function f3(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&l1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function p3(t,e,n){return io&21?(Wn(n,e)||(n=_y(),it.lanes|=n,oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function p8(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=dh.transition;dh.transition={};try{t(!1),e()}finally{ze=n,dh.transition=r}}function m3(){return Ln().memoizedState}function m8(t,e,n){var r=mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},g3(t))v3(e,n);else if(n=Qy(t,e,n,r),n!==null){var i=Jt();$n(n,t,r,i),y3(n,e,r)}}function g8(t,e,n){var r=mi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(g3(t))v3(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Wn(l,s)){var c=e.interleaved;c===null?(i.next=i,r1(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Qy(t,e,i,r),n!==null&&(i=Jt(),$n(n,t,r,i),y3(n,e,r))}}function g3(t){var e=t.alternate;return t===it||e!==null&&e===it}function v3(t,e){ba=cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function y3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$p(t,n)}}var uu={readContext:Pn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},v8={readContext:Pn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:bg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4194308,4,u3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cc(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=m8.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:wg,useDebugValue:h1,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=wg(!1),e=t[0];return t=p8.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Qn();if(et){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Tt===null)throw Error(ee(349));io&30||n3(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,bg(i3.bind(null,r,o,t),[t]),r.flags|=2048,Xa(9,r3.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Qn(),e=Tt.identifierPrefix;if(et){var n=Sr,r=Er;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=f8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},y8={readContext:Pn,useCallback:h3,useContext:Pn,useEffect:d1,useImperativeHandle:d3,useInsertionEffect:l3,useLayoutEffect:c3,useMemo:f3,useReducer:hh,useRef:a3,useState:function(){return hh(Wa)},useDebugValue:h1,useDeferredValue:function(t){var e=Ln();return p3(e,xt.memoizedState,t)},useTransition:function(){var t=hh(Wa)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:e3,useSyncExternalStore:t3,useId:m3,unstable_isNewReconciler:!1},_8={readContext:Pn,useCallback:h3,useContext:Pn,useEffect:d1,useImperativeHandle:d3,useInsertionEffect:l3,useLayoutEffect:c3,useMemo:f3,useReducer:fh,useRef:a3,useState:function(){return fh(Wa)},useDebugValue:h1,useDeferredValue:function(t){var e=Ln();return xt===null?e.memoizedState=t:p3(e,xt.memoizedState,t)},useTransition:function(){var t=fh(Wa)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:e3,useSyncExternalStore:t3,useId:m3,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ef(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gu={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=mi(t),o=Rr(r,i);o.payload=e,n!=null&&(o.callback=n),e=fi(t,o,i),e!==null&&($n(e,t,i,r),Sc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=mi(t),o=Rr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=fi(t,o,i),e!==null&&($n(e,t,i,r),Sc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=mi(t),i=Rr(n,r);i.tag=2,e!=null&&(i.callback=e),e=fi(t,i,r),e!==null&&($n(e,t,r,n),Sc(e,t,r))}};function xg(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Fa(n,r)||!Fa(i,o):!0}function _3(t,e,n){var r=!1,i=xi,o=e.contextType;return typeof o=="object"&&o!==null?o=Pn(o):(i=ln(e)?no:Xt.current,r=e.contextTypes,o=(r=r!=null)?cs(t,i):xi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Eg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gu.enqueueReplaceState(e,e.state,null)}function Sf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},i1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Pn(o):(o=ln(e)?no:Xt.current,i.context=cs(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ef(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gu.enqueueReplaceState(i,i.state,null),au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fs(t,e){try{var n="",r=e;do n+=Xb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ph(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function If(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var w8=typeof WeakMap=="function"?WeakMap:Map;function w3(t,e,n){n=Rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hu||(hu=!0,Of=r),If(t,e)},n}function b3(t,e,n){n=Rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){If(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){If(t,e),typeof r!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Sg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new w8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=M8.bind(null,t,e,n),e.then(t,t))}function Ig(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rr(-1,1),e.tag=2,fi(n,e,1))),n.lanes|=1),t)}var b8=jr.ReactCurrentOwner,sn=!1;function Qt(t,e,n,r){e.child=t===null?Gy(e,null,n,r):ds(e,t.child,n,r)}function Ag(t,e,n,r,i){n=n.render;var o=e.ref;return Zo(e,i),r=c1(t,e,n,r,o,i),n=u1(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(et&&n&&Qp(e),e.flags|=1,Qt(t,e,r,i),e.child)}function Tg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!w1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,x3(t,e,o,r,i)):(t=Rc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Fa,n(s,r)&&t.ref===e.ref)return Mr(t,e,i)}return e.flags|=1,t=gi(o,r),t.ref=e.ref,t.return=e,e.child=t}function x3(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Fa(o,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Mr(t,e,i)}return Cf(t,e,n,r,i)}function E3(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Xo,mn),mn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(Xo,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Xe(Xo,mn),mn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Xe(Xo,mn),mn|=r;return Qt(t,e,i,n),e.child}function S3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cf(t,e,n,r,i){var o=ln(n)?no:Xt.current;return o=cs(e,o),Zo(e,i),n=c1(t,e,n,r,o,i),r=u1(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(et&&r&&Qp(e),e.flags|=1,Qt(t,e,n,i),e.child)}function kg(t,e,n,r,i){if(ln(n)){var o=!0;nu(e)}else o=!1;if(Zo(e,i),e.stateNode===null)Ac(t,e),_3(e,n,r),Sf(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Pn(d):(d=ln(n)?no:Xt.current,d=cs(e,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Eg(e,s,r,d),Zr=!1;var f=e.memoizedState;s.state=f,au(e,r,s,i),c=e.memoizedState,l!==r||f!==c||an.current||Zr?(typeof u=="function"&&(Ef(e,n,u,r),c=e.memoizedState),(l=Zr||xg(e,n,l,r,f,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Jy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Fn(e.type,l),s.props=d,h=e.pendingProps,f=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Pn(c):(c=ln(n)?no:Xt.current,c=cs(e,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Eg(e,s,r,c),Zr=!1,f=e.memoizedState,s.state=f,au(e,r,s,i);var v=e.memoizedState;l!==h||f!==v||an.current||Zr?(typeof m=="function"&&(Ef(e,n,m,r),v=e.memoizedState),(d=Zr||xg(e,n,d,r,f,v,c)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Af(t,e,n,r,o,i)}function Af(t,e,n,r,i,o){S3(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&pg(e,n,!1),Mr(t,e,o);r=e.stateNode,b8.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=ds(e,t.child,null,o),e.child=ds(e,null,l,o)):Qt(t,e,l,o),e.memoizedState=r.state,i&&pg(e,n,!0),e.child}function I3(t){var e=t.stateNode;e.pendingContext?fg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fg(t,e.context,!1),o1(t,e.containerInfo)}function Rg(t,e,n,r,i){return us(),Zp(i),e.flags|=256,Qt(t,e,n,r),e.child}var Tf={dehydrated:null,treeContext:null,retryLane:0};function kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function C3(t,e,n){var r=e.pendingProps,i=rt.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Xe(rt,i&1),t===null)return bf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Zu(s,r,0,null),t=Ji(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=kf(n),e.memoizedState=Tf,t):f1(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return x8(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gi(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=gi(l,o):(o=Ji(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?kf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Tf,r}return o=t.child,t=o.sibling,r=gi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function f1(t,e){return e=Zu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zl(t,e,n,r){return r!==null&&Zp(r),ds(e,t.child,null,n),t=f1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x8(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=ph(Error(ee(422))),Zl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Zu({mode:"visible",children:r.children},i,0,null),o=Ji(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ds(e,t.child,null,s),e.child.memoizedState=kf(s),e.memoizedState=Tf,o);if(!(e.mode&1))return Zl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ee(419)),r=ph(o,r,void 0),Zl(t,e,s,r)}if(l=(s&t.childLanes)!==0,sn||l){if(r=Tt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Lr(t,i),$n(r,t,i,-1))}return _1(),r=ph(Error(ee(421))),Zl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=O8.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,vn=hi(i.nextSibling),wn=e,et=!0,jn=null,t!==null&&(Tn[kn++]=Er,Tn[kn++]=Sr,Tn[kn++]=ro,Er=t.id,Sr=t.overflow,ro=e),e=f1(e,r.children),e.flags|=4096,e)}function Ng(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xf(t.return,e,n)}function mh(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function A3(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Qt(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ng(t,n,e);else if(t.tag===19)Ng(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(rt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mh(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mh(e,!0,n,null,o);break;case"together":mh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function E8(t,e,n){switch(e.tag){case 3:I3(e),us();break;case 5:Zy(e);break;case 1:ln(e.type)&&nu(e);break;case 4:o1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xe(ou,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?C3(t,e,n):(Xe(rt,rt.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);Xe(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return A3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,E3(t,e,n)}return Mr(t,e,n)}var T3,Rf,k3,R3;T3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rf=function(){};k3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xi(ir.current);var o=null;switch(n){case"input":i=Qh(t,i),r=Qh(t,r),o=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),o=[];break;case"textarea":i=ef(t,i),r=ef(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eu)}nf(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Pa.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Pa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Qe("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};R3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zs(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function S8(t,e,n){var r=e.pendingProps;switch(Jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return ln(e.type)&&tu(),jt(e),null;case 3:return r=e.stateNode,hs(),Je(an),Je(Xt),a1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Vf(jn),jn=null))),Rf(t,e),jt(e),null;case 5:s1(e);var i=Xi(Ha.current);if(n=e.type,t!==null&&e.stateNode!=null)k3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return jt(e),null}if(t=Xi(ir.current),Ql(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[er]=e,r[za]=o,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<la.length;i++)Qe(la[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Bm(r,o),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qe("invalid",r);break;case"textarea":zm(r,o),Qe("invalid",r)}nf(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Gl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Gl(r.textContent,l,t),i=["children",""+l]):Pa.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Qe("scroll",r)}switch(n){case"input":zl(r),jm(r,o,!0);break;case"textarea":zl(r),$m(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=eu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[er]=e,t[za]=r,T3(t,e,!1,!1),e.stateNode=t;e:{switch(s=rf(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<la.length;i++)Qe(la[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":Bm(t,r),i=Qh(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":zm(t,r),i=ef(t,r),Qe("invalid",t);break;default:i=r}nf(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?ay(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oy(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&La(t,c):typeof c=="number"&&La(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pa.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Qe("scroll",t):c!=null&&Up(t,o,c,s))}switch(n){case"input":zl(t),jm(t,r,!1);break;case"textarea":zl(t),$m(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Yo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)R3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Xi(Ha.current),Xi(ir.current),Ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(o=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Gl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return jt(e),null;case 13:if(Je(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&vn!==null&&e.mode&1&&!(e.flags&128))Ky(),us(),e.flags|=98560,o=!1;else if(o=Ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[er]=e}else us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),o=!1}else jn!==null&&(Vf(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?St===0&&(St=3):_1())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return hs(),Rf(t,e),t===null&&Ba(e.stateNode.containerInfo),jt(e),null;case 10:return n1(e.type._context),jt(e),null;case 17:return ln(e.type)&&tu(),jt(e),null;case 19:if(Je(rt),o=e.memoizedState,o===null)return jt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Zs(o,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=lu(t),s!==null){for(e.flags|=128,Zs(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(rt,rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ft()>ps&&(e.flags|=128,r=!0,Zs(o,!1),e.lanes=4194304)}else{if(!r)if(t=lu(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!et)return jt(e),null}else 2*ft()-o.renderingStartTime>ps&&n!==1073741824&&(e.flags|=128,r=!0,Zs(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ft(),e.sibling=null,n=rt.current,Xe(rt,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return y1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function I8(t,e){switch(Jp(e),e.tag){case 1:return ln(e.type)&&tu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hs(),Je(an),Je(Xt),a1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return s1(e),null;case 13:if(Je(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(rt),null;case 4:return hs(),null;case 10:return n1(e.type._context),null;case 22:case 23:return y1(),null;case 24:return null;default:return null}}var ec=!1,qt=!1,C8=typeof WeakSet=="function"?WeakSet:Set,se=null;function Wo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function Nf(t,e,n){try{n()}catch(r){ct(t,e,r)}}var Pg=!1;function A8(t,e){if(pf=Qc,t=Oy(),Gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(l=s+i),h!==o||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++d===i&&(l=s),f===o&&++u===r&&(c=s),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mf={focusedElem:t,selectionRange:n},Qc=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,E=v.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Fn(e.type,y),E);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(b){ct(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return v=Pg,Pg=!1,v}function xa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Nf(e,n,o)}i=i.next}while(i!==r)}}function Qu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function N3(t){var e=t.alternate;e!==null&&(t.alternate=null,N3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[za],delete e[yf],delete e[c8],delete e[u8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function P3(t){return t.tag===5||t.tag===3||t.tag===4}function Lg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eu));else if(r!==4&&(t=t.child,t!==null))for(Lf(t,e,n),t=t.sibling;t!==null;)Lf(t,e,n),t=t.sibling}function Mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}var Nt=null,Bn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)L3(t,e,n),n=n.sibling}function L3(t,e,n){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount($u,n)}catch{}switch(n.tag){case 5:qt||Wo(n,e);case 6:var r=Nt,i=Bn;Nt=null,Xr(t,e,n),Nt=r,Bn=i,Nt!==null&&(Bn?(t=Nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Bn?(t=Nt,n=n.stateNode,t.nodeType===8?lh(t.parentNode,n):t.nodeType===1&&lh(t,n),Ua(t)):lh(Nt,n.stateNode));break;case 4:r=Nt,i=Bn,Nt=n.stateNode.containerInfo,Bn=!0,Xr(t,e,n),Nt=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Nf(n,e,s),i=i.next}while(i!==r)}Xr(t,e,n);break;case 1:if(!qt&&(Wo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ct(n,e,l)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,Xr(t,e,n),qt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function Mg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C8),e.forEach(function(r){var i=D8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Nt=l.stateNode,Bn=!1;break e;case 3:Nt=l.stateNode.containerInfo,Bn=!0;break e;case 4:Nt=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(Nt===null)throw Error(ee(160));L3(o,s,i),Nt=null,Bn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){ct(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)M3(e,t),e=e.sibling}function M3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),Gn(t),r&4){try{xa(3,t,t.return),Qu(3,t)}catch(y){ct(t,t.return,y)}try{xa(5,t,t.return)}catch(y){ct(t,t.return,y)}}break;case 1:Dn(e,t),Gn(t),r&512&&n!==null&&Wo(n,n.return);break;case 5:if(Dn(e,t),Gn(t),r&512&&n!==null&&Wo(n,n.return),t.flags&32){var i=t.stateNode;try{La(i,"")}catch(y){ct(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&ny(i,o),rf(l,s);var d=rf(l,o);for(s=0;s<c.length;s+=2){var u=c[s],h=c[s+1];u==="style"?ay(i,h):u==="dangerouslySetInnerHTML"?oy(i,h):u==="children"?La(i,h):Up(i,u,h,d)}switch(l){case"input":Jh(i,o);break;case"textarea":ry(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Yo(i,!!o.multiple,m,!1):f!==!!o.multiple&&(o.defaultValue!=null?Yo(i,!!o.multiple,o.defaultValue,!0):Yo(i,!!o.multiple,o.multiple?[]:"",!1))}i[za]=o}catch(y){ct(t,t.return,y)}}break;case 6:if(Dn(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){ct(t,t.return,y)}}break;case 3:if(Dn(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ua(e.containerInfo)}catch(y){ct(t,t.return,y)}break;case 4:Dn(e,t),Gn(t);break;case 13:Dn(e,t),Gn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(g1=ft())),r&4&&Mg(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(d=qt)||u,Dn(e,t),qt=d):Dn(e,t),Gn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(se=t,u=t.child;u!==null;){for(h=se=u;se!==null;){switch(f=se,m=f.child,f.tag){case 0:case 11:case 14:case 15:xa(4,f,f.return);break;case 1:Wo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){ct(r,n,y)}}break;case 5:Wo(f,f.return);break;case 22:if(f.memoizedState!==null){Dg(h);continue}}m!==null?(m.return=f,se=m):Dg(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=sy("display",s))}catch(y){ct(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){ct(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dn(e,t),Gn(t),r&4&&Mg(t);break;case 21:break;default:Dn(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(P3(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(La(i,""),r.flags&=-33);var o=Lg(t);Mf(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Lg(t);Lf(t,l,s);break;default:throw Error(ee(161))}}catch(c){ct(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T8(t,e,n){se=t,O3(t)}function O3(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ec;if(!s){var l=i.alternate,c=l!==null&&l.memoizedState!==null||qt;l=ec;var d=qt;if(ec=s,(qt=c)&&!d)for(se=i;se!==null;)s=se,c=s.child,s.tag===22&&s.memoizedState!==null?Ug(i):c!==null?(c.return=s,se=c):Ug(i);for(;o!==null;)se=o,O3(o),o=o.sibling;se=i,ec=l,qt=d}Og(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,se=o):Og(t)}}function Og(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||Qu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&_g(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_g(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ua(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}qt||e.flags&512&&Pf(e)}catch(f){ct(e,e.return,f)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Dg(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Ug(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qu(4,e)}catch(c){ct(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ct(e,i,c)}}var o=e.return;try{Pf(e)}catch(c){ct(e,o,c)}break;case 5:var s=e.return;try{Pf(e)}catch(c){ct(e,s,c)}}}catch(c){ct(e,e.return,c)}if(e===t){se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,se=l;break}se=e.return}}var k8=Math.ceil,du=jr.ReactCurrentDispatcher,p1=jr.ReactCurrentOwner,Nn=jr.ReactCurrentBatchConfig,De=0,Tt=null,yt=null,Mt=0,mn=0,Xo=Pi(0),St=0,Ka=null,oo=0,Ju=0,m1=0,Ea=null,nn=null,g1=0,ps=1/0,wr=null,hu=!1,Of=null,pi=null,tc=!1,ai=null,fu=0,Sa=0,Df=null,Tc=-1,kc=0;function Jt(){return De&6?ft():Tc!==-1?Tc:Tc=ft()}function mi(t){return t.mode&1?De&2&&Mt!==0?Mt&-Mt:h8.transition!==null?(kc===0&&(kc=_y()),kc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Cy(t.type)),t):1}function $n(t,e,n,r){if(50<Sa)throw Sa=0,Df=null,Error(ee(185));al(t,n,r),(!(De&2)||t!==Tt)&&(t===Tt&&(!(De&2)&&(Ju|=n),St===4&&ti(t,Mt)),cn(t,r),n===1&&De===0&&!(e.mode&1)&&(ps=ft()+500,Ku&&Li()))}function cn(t,e){var n=t.callbackNode;h7(t,e);var r=Gc(t,t===Tt?Mt:0);if(r===0)n!==null&&Wm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wm(n),e===1)t.tag===0?d8(Vg.bind(null,t)):qy(Vg.bind(null,t)),a8(function(){!(De&6)&&Li()}),n=null;else{switch(wy(r)){case 1:n=zp;break;case 4:n=vy;break;case 16:n=Yc;break;case 536870912:n=yy;break;default:n=Yc}n=$3(n,D3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D3(t,e){if(Tc=-1,kc=0,De&6)throw Error(ee(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var r=Gc(t,t===Tt?Mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pu(t,r);else{e=r;var i=De;De|=2;var o=V3();(Tt!==t||Mt!==e)&&(wr=null,ps=ft()+500,Qi(t,e));do try{P8();break}catch(l){U3(t,l)}while(!0);t1(),du.current=o,De=i,yt!==null?e=0:(Tt=null,Mt=0,e=St)}if(e!==0){if(e===2&&(i=cf(t),i!==0&&(r=i,e=Uf(t,i))),e===1)throw n=Ka,Qi(t,0),ti(t,r),cn(t,ft()),n;if(e===6)ti(t,r);else{if(i=t.current.alternate,!(r&30)&&!R8(i)&&(e=pu(t,r),e===2&&(o=cf(t),o!==0&&(r=o,e=Uf(t,o))),e===1))throw n=Ka,Qi(t,0),ti(t,r),cn(t,ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:zi(t,nn,wr);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=g1+500-ft(),10<e)){if(Gc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vf(zi.bind(null,t,nn,wr),e);break}zi(t,nn,wr);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-zn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k8(r/1960))-r,10<r){t.timeoutHandle=vf(zi.bind(null,t,nn,wr),r);break}zi(t,nn,wr);break;case 5:zi(t,nn,wr);break;default:throw Error(ee(329))}}}return cn(t,ft()),t.callbackNode===n?D3.bind(null,t):null}function Uf(t,e){var n=Ea;return t.current.memoizedState.isDehydrated&&(Qi(t,e).flags|=256),t=pu(t,e),t!==2&&(e=nn,nn=n,e!==null&&Vf(e)),t}function Vf(t){nn===null?nn=t:nn.push.apply(nn,t)}function R8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~m1,e&=~Ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function Vg(t){if(De&6)throw Error(ee(327));es();var e=Gc(t,0);if(!(e&1))return cn(t,ft()),null;var n=pu(t,e);if(t.tag!==0&&n===2){var r=cf(t);r!==0&&(e=r,n=Uf(t,r))}if(n===1)throw n=Ka,Qi(t,0),ti(t,e),cn(t,ft()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,nn,wr),cn(t,ft()),null}function v1(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(ps=ft()+500,Ku&&Li())}}function so(t){ai!==null&&ai.tag===0&&!(De&6)&&es();var e=De;De|=1;var n=Nn.transition,r=ze;try{if(Nn.transition=null,ze=1,t)return t()}finally{ze=r,Nn.transition=n,De=e,!(De&6)&&Li()}}function y1(){mn=Xo.current,Je(Xo)}function Qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s8(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(Jp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tu();break;case 3:hs(),Je(an),Je(Xt),a1();break;case 5:s1(r);break;case 4:hs();break;case 13:Je(rt);break;case 19:Je(rt);break;case 10:n1(r.type._context);break;case 22:case 23:y1()}n=n.return}if(Tt=t,yt=t=gi(t.current,null),Mt=mn=e,St=0,Ka=null,m1=Ju=oo=0,nn=Ea=null,Wi!==null){for(e=0;e<Wi.length;e++)if(n=Wi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Wi=null}return t}function U3(t,e){do{var n=yt;try{if(t1(),Ic.current=uu,cu){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cu=!1}if(io=0,At=xt=it=null,ba=!1,qa=0,p1.current=null,n===null||n.return===null){St=1,Ka=e,yt=null;break}e:{var o=t,s=n.return,l=n,c=e;if(e=Mt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Ig(s);if(m!==null){m.flags&=-257,Cg(m,s,l,o,e),m.mode&1&&Sg(o,d,e),e=m,c=d;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){Sg(o,d,e),_1();break e}c=Error(ee(426))}}else if(et&&l.mode&1){var E=Ig(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Cg(E,s,l,o,e),Zp(fs(c,l));break e}}o=c=fs(c,l),St!==4&&(St=2),Ea===null?Ea=[o]:Ea.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=w3(o,c,e);yg(o,g);break e;case 1:l=c;var w=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(pi===null||!pi.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=b3(o,l,e);yg(o,b);break e}}o=o.return}while(o!==null)}B3(n)}catch(A){e=A,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function V3(){var t=du.current;return du.current=uu,t===null?uu:t}function _1(){(St===0||St===3||St===2)&&(St=4),Tt===null||!(oo&268435455)&&!(Ju&268435455)||ti(Tt,Mt)}function pu(t,e){var n=De;De|=2;var r=V3();(Tt!==t||Mt!==e)&&(wr=null,Qi(t,e));do try{N8();break}catch(i){U3(t,i)}while(!0);if(t1(),De=n,du.current=r,yt!==null)throw Error(ee(261));return Tt=null,Mt=0,St}function N8(){for(;yt!==null;)F3(yt)}function P8(){for(;yt!==null&&!r7();)F3(yt)}function F3(t){var e=z3(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?B3(t):yt=e,p1.current=null}function B3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=I8(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,yt=null;return}}else if(n=S8(n,e,mn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);St===0&&(St=5)}function zi(t,e,n){var r=ze,i=Nn.transition;try{Nn.transition=null,ze=1,L8(t,e,n,r)}finally{Nn.transition=i,ze=r}return null}function L8(t,e,n,r){do es();while(ai!==null);if(De&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(f7(t,o),t===Tt&&(yt=Tt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tc||(tc=!0,$3(Yc,function(){return es(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Nn.transition,Nn.transition=null;var s=ze;ze=1;var l=De;De|=4,p1.current=null,A8(t,n),M3(n,t),Z7(mf),Qc=!!pf,mf=pf=null,t.current=n,T8(n),i7(),De=l,ze=s,Nn.transition=o}else t.current=n;if(tc&&(tc=!1,ai=t,fu=i),o=t.pendingLanes,o===0&&(pi=null),a7(n.stateNode),cn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hu)throw hu=!1,t=Of,Of=null,t;return fu&1&&t.tag!==0&&es(),o=t.pendingLanes,o&1?t===Df?Sa++:(Sa=0,Df=t):Sa=0,Li(),null}function es(){if(ai!==null){var t=wy(fu),e=Nn.transition,n=ze;try{if(Nn.transition=null,ze=16>t?16:t,ai===null)var r=!1;else{if(t=ai,ai=null,fu=0,De&6)throw Error(ee(331));var i=De;for(De|=4,se=t.current;se!==null;){var o=se,s=o.child;if(se.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:xa(8,u,o)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var f=u.sibling,m=u.return;if(N3(u),u===d){se=null;break}if(f!==null){f.return=m,se=f;break}se=m}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}se=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,se=s;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xa(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,se=g;break e}se=o.return}}var w=t.current;for(se=w;se!==null;){s=se;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,se=_;else e:for(s=w;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qu(9,l)}}catch(A){ct(l,l.return,A)}if(l===s){se=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,se=b;break e}se=l.return}}if(De=i,Li(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot($u,t)}catch{}r=!0}return r}finally{ze=n,Nn.transition=e}}return!1}function Fg(t,e,n){e=fs(n,e),e=w3(t,e,1),t=fi(t,e,1),e=Jt(),t!==null&&(al(t,1,e),cn(t,e))}function ct(t,e,n){if(t.tag===3)Fg(t,t,n);else for(;e!==null;){if(e.tag===3){Fg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pi===null||!pi.has(r))){t=fs(n,t),t=b3(e,t,1),e=fi(e,t,1),t=Jt(),e!==null&&(al(e,1,t),cn(e,t));break}}e=e.return}}function M8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Mt&n)===n&&(St===4||St===3&&(Mt&130023424)===Mt&&500>ft()-g1?Qi(t,0):m1|=n),cn(t,e)}function j3(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=Jt();t=Lr(t,e),t!==null&&(al(t,e,n),cn(t,n))}function O8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j3(t,n)}function D8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),j3(t,n)}var z3;z3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,E8(t,e,n);sn=!!(t.flags&131072)}else sn=!1,et&&e.flags&1048576&&Wy(e,iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ac(t,e),t=e.pendingProps;var i=cs(e,Xt.current);Zo(e,n),i=c1(null,e,r,t,i,n);var o=u1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(o=!0,nu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i1(e),i.updater=Gu,e.stateNode=i,i._reactInternals=e,Sf(e,r,t,n),e=Af(null,e,r,!0,o,n)):(e.tag=0,et&&o&&Qp(e),Qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=V8(r),t=Fn(r,t),i){case 0:e=Cf(null,e,r,t,n);break e;case 1:e=kg(null,e,r,t,n);break e;case 11:e=Ag(null,e,r,t,n);break e;case 14:e=Tg(null,e,r,Fn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Cf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),kg(t,e,r,i,n);case 3:e:{if(I3(e),t===null)throw Error(ee(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Jy(t,e),au(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=fs(Error(ee(423)),e),e=Rg(t,e,r,n,i);break e}else if(r!==i){i=fs(Error(ee(424)),e),e=Rg(t,e,r,n,i);break e}else for(vn=hi(e.stateNode.containerInfo.firstChild),wn=e,et=!0,jn=null,n=Gy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(us(),r===i){e=Mr(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return Zy(e),t===null&&bf(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,gf(r,i)?s=null:o!==null&&gf(r,o)&&(e.flags|=32),S3(t,e),Qt(t,e,s,n),e.child;case 6:return t===null&&bf(e),null;case 13:return C3(t,e,n);case 4:return o1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ds(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Ag(t,e,r,i,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Xe(ou,r._currentValue),r._currentValue=s,o!==null)if(Wn(o.value,s)){if(o.children===i.children&&!an.current){e=Mr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Rr(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),xf(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ee(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xf(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zo(e,n),i=Pn(i),r=r(i),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),Tg(t,e,r,i,n);case 15:return x3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Ac(t,e),e.tag=1,ln(r)?(t=!0,nu(e)):t=!1,Zo(e,n),_3(e,r,i),Sf(e,r,i,n),Af(null,e,r,!0,t,n);case 19:return A3(t,e,n);case 22:return E3(t,e,n)}throw Error(ee(156,e.tag))};function $3(t,e){return gy(t,e)}function U8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new U8(t,e,n,r)}function w1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function V8(t){if(typeof t=="function")return w1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fp)return 11;if(t===Bp)return 14}return 2}function gi(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")w1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Uo:return Ji(n.children,i,o,e);case Vp:s=8,i|=8;break;case Xh:return t=Rn(12,n,e,i|2),t.elementType=Xh,t.lanes=o,t;case Kh:return t=Rn(13,n,e,i),t.elementType=Kh,t.lanes=o,t;case Yh:return t=Rn(19,n,e,i),t.elementType=Yh,t.lanes=o,t;case Zv:return Zu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qv:s=10;break e;case Jv:s=9;break e;case Fp:s=11;break e;case Bp:s=14;break e;case Jr:s=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Rn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ji(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function Zu(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=Zv,t.lanes=n,t.stateNode={isHidden:!1},t}function gh(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function vh(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qd(0),this.expirationTimes=Qd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function b1(t,e,n,r,i,o,s,l,c){return t=new F8(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Rn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},i1(o),t}function B8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function H3(t){if(!t)return xi;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(ln(n))return Hy(t,n,e)}return e}function q3(t,e,n,r,i,o,s,l,c){return t=b1(n,r,!0,t,i,o,s,l,c),t.context=H3(null),n=t.current,r=Jt(),i=mi(n),o=Rr(r,i),o.callback=e??null,fi(n,o,i),t.current.lanes=i,al(t,i,r),cn(t,r),t}function ed(t,e,n,r){var i=e.current,o=Jt(),s=mi(i);return n=H3(n),e.context===null?e.context=n:e.pendingContext=n,e=Rr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fi(i,e,s),t!==null&&($n(t,i,s,o),Sc(t,i,s)),s}function mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function x1(t,e){Bg(t,e),(t=t.alternate)&&Bg(t,e)}function j8(){return null}var W3=typeof reportError=="function"?reportError:function(t){console.error(t)};function E1(t){this._internalRoot=t}td.prototype.render=E1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));ed(t,e,null,null)};td.prototype.unmount=E1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){ed(null,t,null,null)}),e[Pr]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ey();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&Iy(t)}};function S1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jg(){}function z8(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=mu(s);o.call(d)}}var s=q3(e,r,t,0,null,!1,!1,"",jg);return t._reactRootContainer=s,t[Pr]=s.current,Ba(t.nodeType===8?t.parentNode:t),so(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=mu(c);l.call(d)}}var c=b1(t,0,!1,null,null,!1,!1,"",jg);return t._reactRootContainer=c,t[Pr]=c.current,Ba(t.nodeType===8?t.parentNode:t),so(function(){ed(e,c,n,r)}),c}function rd(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var c=mu(s);l.call(c)}}ed(e,s,t,i)}else s=z8(n,e,t,i,r);return mu(s)}by=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=aa(e.pendingLanes);n!==0&&($p(e,n|1),cn(e,ft()),!(De&6)&&(ps=ft()+500,Li()))}break;case 13:so(function(){var r=Lr(t,1);if(r!==null){var i=Jt();$n(r,t,1,i)}}),x1(t,1)}};Hp=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Jt();$n(e,t,134217728,n)}x1(t,134217728)}};xy=function(t){if(t.tag===13){var e=mi(t),n=Lr(t,e);if(n!==null){var r=Jt();$n(n,t,e,r)}x1(t,e)}};Ey=function(){return ze};Sy=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};sf=function(t,e,n){switch(e){case"input":if(Jh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xu(r);if(!i)throw Error(ee(90));ty(r),Jh(r,i)}}}break;case"textarea":ry(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};uy=v1;dy=so;var $8={usingClientEntryPoint:!1,Events:[cl,jo,Xu,ly,cy,v1]},ea={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H8={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=py(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||j8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{$u=nc.inject(H8),rr=nc}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$8;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S1(e))throw Error(ee(200));return B8(t,e,null,n)};Sn.createRoot=function(t,e){if(!S1(t))throw Error(ee(299));var n=!1,r="",i=W3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=b1(t,1,!1,null,null,n,!1,r,i),t[Pr]=e.current,Ba(t.nodeType===8?t.parentNode:t),new E1(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=py(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return so(t)};Sn.hydrate=function(t,e,n){if(!nd(e))throw Error(ee(200));return rd(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!S1(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=W3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=q3(e,null,t,1,n??null,i,!1,o,s),t[Pr]=e.current,Ba(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new td(e)};Sn.render=function(t,e,n){if(!nd(e))throw Error(ee(200));return rd(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!nd(t))throw Error(ee(40));return t._reactRootContainer?(so(function(){rd(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};Sn.unstable_batchedUpdates=v1;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nd(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return rd(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function X3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X3)}catch(t){console.error(t)}}X3(),Xv.exports=Sn;var wo=Xv.exports;const q8=Ov(wo);var K3,zg=wo;K3=zg.createRoot,zg.hydrateRoot;var a=function(t,e){var n=this;if((typeof t=="string"||t instanceof String)&&(t=document.querySelector(t)),this.element=t,this.config=a.mergeDeep(a._defaultConfig(e),e),this._layoutConfigs={base:{orientation:this.config.orientation,levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:this.config.assistantSeparation,subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:this.config.siblingSeparation,layout:this.config.layout,columns:this.config.columns,collapse:this.config.collapse,partnerNodeSeparation:this.config.partnerNodeSeparation}},this.config.tags)for(var r in this.config.tags){var i=this.config.tags[r];i.subTreeConfig!=null&&(this._layoutConfigs[r]={orientation:i.subTreeConfig.orientation!=null?i.subTreeConfig.orientation:this.config.orientation,levelSeparation:i.subTreeConfig.levelSeparation!=null?i.subTreeConfig.levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:i.subTreeConfig.mixedHierarchyNodesSeparation!=null?i.subTreeConfig.mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:i.subTreeConfig.assistantSeparation!=null?i.subTreeConfig.assistantSeparation:this.config.assistantSeparation,subtreeSeparation:i.subTreeConfig.subtreeSeparation!=null?i.subTreeConfig.subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:i.subTreeConfig.siblingSeparation!=null?i.subTreeConfig.siblingSeparation:this.config.siblingSeparation,layout:i.subTreeConfig.layout!=null?i.subTreeConfig.layout:this.config.layout,columns:i.subTreeConfig.columns!=null?i.subTreeConfig.columns:this.config.columns,collapse:i.subTreeConfig.collapse!=null?i.subTreeConfig.collapse:this.config.collapse,partnerNodeSeparation:i.subTreeConfig.partnerNodeSeparation!=null?i.subTreeConfig.partnerNodeSeparation:this.config.partnerNodeSeparation})}this._event_id=a._guid(),a._validateConfig(this.config)&&(this._vScroll={},this.config.ui||(this.ui=a.ui),this.config.editUI?this.editUI=this.config.editUI:this.editUI=new a.editUI,this.editUI.init(this),this.config.filterUI?this.filterUI=this.config.filterUI:this.filterUI=new a.filterUI,this.filterUI.init(this),this.manager=new a.manager(this),this.config.searchUI?this.searchUI=this.config.searchUI:this.searchUI=new a.searchUI,this.config.nodeMenuUI?this.nodeMenuUI=this.config.nodeMenuUI:this.nodeMenuUI=new a.menuUI,this.nodeMenuUI.init(this,this.config.nodeMenu),this.config.nodeCircleMenuUI?this.nodeCircleMenuUI=this.config.nodeCircleMenuUI:this.nodeCircleMenuUI=new a.circleMenuUI,this.nodeCircleMenuUI.init(this,this.config.nodeCircleMenu),this.config.nodeContextMenuUI?this.nodeContextMenuUI=this.config.nodeContextMenuUI:this.nodeContextMenuUI=new a.menuUI,this.nodeContextMenuUI.init(this,this.config.nodeContextMenu),this.config.toolbarUI?this.toolbarUI=this.config.toolbarUI:this.toolbarUI=new a.toolbarUI,this.config.notifierUI?this.notifierUI=this.config.notifierUI:this.notifierUI=new a.notifierUI,this.notifierUI.init(this),this.config.menuUI?this.menuUI=this.config.menuUI:this.menuUI=new a.menuUI,this.menuUI.init(this,this.config.menu),this.config.xScrollUI||(this.xScrollUI=new a.xScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(o){n.setViewBox(o)},function(){n._draw(!0,a.action.xScroll)})),this.config.yScrollUI||(this.yScrollUI=new a.yScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(o){n.setViewBox(o)},function(){n._draw(!0,a.action.xScroll)})),this.config.undoRedoUI?this.undoRedoUI=this.config.undoRedoUI:this.undoRedoUI=new a.undoRedoUI,this.element.classList.add("bft-"+this.config.mode),this._gragStartedId=null,this._timeout=null,this._touch=null,this._initialized=!1,this._loaded=!1,this._moveInterval=null,this._movePosition=null,this.response=null,this.nodes=null,this.isVisible=null,a._intersectionObserver(this.element,function(o){n.isVisible=o,a.events.publish("visibility-change",[n])!==!1&&a.LAZY_LOADING&&n.isVisible&&(n._loaded?n._draw(!1,a.action.update):(n._setInitialSizeIfNotSet(),n._draw(!1,a.action.init)))}))};a._defaultConfig=function(t){return{interactive:!0,mode:"light",lazyLoading:!0,enableDragDrop:!1,enableSearch:!0,enableTouch:!1,enablePan:!0,keyNavigation:!1,miniMap:!1,nodeMenu:null,nodeCircleMenu:null,nodeContextMenu:null,menu:null,toolbar:!1,sticky:!0,nodeMouseClick:a.action.details,nodeMouseDbClick:a.none,mouseScrool:a.action.zoom,showXScroll:a.none,showYScroll:a.none,template:"ana",tags:{},min:!1,nodeBinding:{},linkBinding:{},searchFields:null,searchDisplayField:null,searchFieldsWeight:null,searchFieldsAbbreviation:null,nodes:[],clinks:[],slinks:[],backdrops:[],groupDottedLines:[],dottedLines:[],undoRedoStorageName:null,levelSeparation:60,siblingSeparation:20,subtreeSeparation:40,backdropSeparation:15,mixedHierarchyNodesSeparation:15,assistantSeparation:100,minPartnerSeparation:50,partnerChildrenSplitSeparation:20,partnerNodeSeparation:15,columns:10,padding:30,orientation:a.orientation.top,layout:a.layout.normal,layoutGridColumns:"dynamic",scaleInitial:1,movable:null,scaleMin:.1,scaleMax:5,orderBy:null,editUI:null,filterUI:null,searchUI:null,xScrollUI:null,yScrollUI:null,nodeMenuUI:null,nodeCircleMenuUI:null,nodeContextMenuUI:null,toolbarUI:null,notifierUI:null,menuUI:null,undoRedoUI:null,exportUrl:"https://balkan.app/export",collapse:{},expand:{},align:a.CENTER,UI:null,anim:{func:a.anim.outPow,duration:200},zoom:{speed:120,smooth:12},roots:null,state:null,editForm:{readOnly:!1,titleBinding:"name",photoBinding:"img",addMore:"Add more fields",addMoreBtn:"Add",addMoreFieldName:"Field name",saveAndCloseBtn:"Save and close",cancelBtn:"Cancel",generateElementsFromFields:!0,focusBinding:null,buttons:{edit:{icon:a.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},share:{icon:a.icon.share(24,24,"#fff"),text:"Share"},pdf:{icon:a.icon.pdf(24,24,"#fff"),text:"Save as PDF"},remove:{icon:a.icon.remove(24,24,"#fff"),text:"Remove",hideIfDetailsMode:!0}},elements:[]}}},a.prototype.load=function(t,e){var n=this;return this.config.nodes=t,this._draw(!1,a.action.init,void 0,function(){n.filterUI.update(),e&&e()}),this},a.prototype.loadXML=function(t,e){var n=a._xml2json(t);return this.load(n,e)},a.prototype.getXML=function(){return a._json2xml(this.config.nodes)},a.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.prototype.removeListener=function(t,e){return a.events.remove(t,e,this._event_id)},a.prototype.draw=function(t,e,n){t==null&&(t=a.action.update),this._draw(!1,t,e,n)},a.prototype._draw=function(t,e,n,r){var i=this;if(!a.LAZY_LOADING||this.isVisible)if(a.LAZY_LOADING||this._initialized||(this._setInitialSizeIfNotSet(),this.width()!=0&&this.height()!=0)){this._hideBeforeAnimationCompleted=!1;var o=e==a.action.init?null:this.getViewBox();this.manager.read(t,this.width(),this.height(),o,e,n,function(s){if(!i.notifierUI.show(s.notif)){e!=a.action.exporting&&(i.nodes=s.nodes,i.visibleNodeIds=s.visibleNodeIds,i.roots=s.roots),i.editUI.fields=s.allFields;var l={defs:""};a.events.publish("renderdefs",[i,l]);var c=i.ui.defs(l.defs),d=i.getScale(s.viewBox);c+=i.ui.pointer(i.config,e,d);var u=i.getViewBox(),h=s.viewBox;l={content:c,res:s},a.events.publish("prerender",[i,l]),c=l.content;var f=[];if(a.RENDER_LINKS_BEFORE_NODES)for(var m=0;m<s.visibleNodeIds.length;m++){var v=s.nodes[s.visibleNodeIds[m]];a.getRootOf(v).stParent?f.push(v.id):c+=i.ui.link(v,i,d,s.bordersByRootIdAndLevel,s.nodes,e)}for(m=0;m<s.visibleNodeIds.length;m++){v=s.nodes[s.visibleNodeIds[m]];var y=i._get(v.id);a.RENDER_LINKS_BEFORE_NODES&&f.includes(v.id)&&(c+=i.ui.link(v,i,d,s.bordersByRootIdAndLevel,s.nodes,e)),c+=i.ui.node(v,y,s.animations,i.config,void 0,void 0,void 0,e,d,i)}for(m=0;m<s.visibleNodeIds.length;m++)v=s.nodes[s.visibleNodeIds[m]],a.RENDER_LINKS_BEFORE_NODES||(c+=i.ui.link(v,i,d,s.bordersByRootIdAndLevel,s.nodes,e)),c+=i.ui.expandCollapseBtn(i,v,i._layoutConfigs,e,d);if(l={content:c,res:s},a.events.publish("render",[i,l]),c=l.content,s=l.res,c+=i.ui.lonely(i.config),e!==a.action.exporting){if(e!==a.action.centernode&&e!==a.action.insert&&e!==a.action.expand&&e!==a.action.collapse&&e!==a.action.update||(h=u),e===a.action.init&&u!=null&&(h=u),i.response=s,C=i.ui.svg(i.width(),i.height(),h,i.config,c),i._initialized){var E=i.getSvg(),g=E.parentNode;g.removeChild(E),g.insertAdjacentHTML("afterbegin",C),i._attachEventHandlers(),i.xScrollUI.addListener(i.getSvg()),i.yScrollUI.addListener(i.getSvg()),i.xScrollUI.setPosition(),i.yScrollUI.setPosition()}else i.element.innerHTML=i.ui.css()+C+i.ui.menuButton(i.config),i._attachInitEventHandlers(),i._attachEventHandlers(),i.xScrollUI.create(i.width(),i.config.padding),i.xScrollUI.setPosition(),i.xScrollUI.addListener(i.getSvg()),i.yScrollUI.create(i.height(),i.config.padding),i.yScrollUI.setPosition(),i.yScrollUI.addListener(i.getSvg()),i.config.enableSearch&&i.searchUI.init(i),i.toolbarUI.init(i,i.config.toolbar),i.undoRedoUI.init(i);var w=!1,_=i.response.animations;if(_[0].length>0){for(i._hideBeforeAnimation(_[0].length),m=0;m<_[0].length;m++)_[0][m]=i.getNodeElement(_[0][m]);a.animate(_[0],_[1],_[2],i.config.anim.duration,i.config.anim.func,function(){w||(r&&r(),a.events.publish("redraw",[i]),i._showAfterAnimation(),w=!0)})}e===a.action.centerNode?a.animate(i.getSvg(),{viewbox:u},{viewbox:i.response.viewBox},i.config.anim.duration,i.config.anim.func,function(){i.ripple(n.options.rippleId),w||(r&&r(),a.events.publish("redraw",[i]),i._showAfterAnimation(),w=!0)},function(){i.xScrollUI.setPosition(),i.yScrollUI.setPosition()}):!u||!i.response||u[0]==i.response.viewBox[0]&&u[1]==i.response.viewBox[1]&&u[2]==i.response.viewBox[2]&&u[3]==i.response.viewBox[3]||e!==a.action.insert&&e!==a.action.expand&&e!==a.action.collapse&&e!==a.action.update&&e!==a.action.init?_[0].length==0&&(w||(r&&r(),a.events.publish("redraw",[i]),w=!0)):a.animate(i.getSvg(),{viewbox:u},{viewbox:i.response.viewBox},2*i.config.anim.duration,i.config.anim.func,function(){i.xScrollUI.setPosition(),i.yScrollUI.setPosition(),w||(r&&r(),a.events.publish("redraw",[i]),w=!0)}),i._initialized||(i._initialized=!0,i.filterUI.update(),a.events.publish("init",[i])),!i._loaded&&s&&s.nodes&&Object.keys(s.nodes).length&&(i._loaded=!0)}else{var b=s.boundary,A=b.maxX-b.minX,k=b.maxY-b.minY,C=i.ui.svg(A,k,[b.minX,b.minY,A,k],i.config,c,d);r(C,s)}}},function(s){a.events.publish("ready",[i,s])})}else console.error("Cannot load the family with size 0! If you are using the FamilyTree within tabs set FamilyTree.LAZY_LOADING to true! ")},a.prototype._setInitialSizeIfNotSet=function(){this.element.style.overflow="hidden",this.element.style.position="relative",this.element.offsetHeight==0&&(this.element.style.height="100%",this.element.offsetHeight==0&&(this.element.style.height="700px")),this.element.offsetWidth==0&&(this.element.style.width="100%",this.element.offsetWidth==0&&(this.element.style.width="700px"))},a.prototype.width=function(){return this.element.offsetWidth},a.prototype.height=function(){return this.element.offsetHeight},a.prototype.getViewBox=function(){var t=this.getSvg();return a._getViewBox(t)},a.prototype.setViewBox=function(t){this.getSvg().setAttribute("viewBox",t.toString())},a.prototype.getScale=function(t){return t||(t=this.getViewBox()),a.getScale(t,this.width(),this.height(),this.config.scaleInitial,this.config.scaleMax,this.config.scaleMin)},a.prototype.setScale=function(t){t>this.config.scaleMax&&(t=this.config.scaleMax),t<this.config.scaleMin&&(t=this.config.scaleMin);var e=this.getViewBox().slice(0),n=this.width(),r=this.height(),i=n/e[2],o=r/e[3],s=i>o?o:i,l=e,c=e[2],d=e[3];return e[2]=e[2]/(t/s),e[3]=e[3]/(t/s),e[0]=l[0]-(e[2]-c)/2,e[1]=l[1]-(e[3]-d)/2,this.setViewBox(e),a.events.publish("redraw",[this]),t},a.prototype.ripple=function(t,e,n){var r=this.getNode(t);if(r!=null){var i=this.getNodeElement(t);if(i!=null){var o=this.getScale(),s=r.w/2,l=r.h/2;if(e!==void 0&&n!==void 0){var c=i.getBoundingClientRect();s=e/o-c.left/o,l=n/o-c.top/o}var d=r.w,u=r.h,h=d-s>s?d-s:s,f=u-l>l?u-l:l,m=h>f?h:f,v=document.createElementNS("http://www.w3.org/2000/svg","g"),y=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),E=document.createElementNS("http://www.w3.org/2000/svg","rect"),g=document.createElementNS("http://www.w3.org/2000/svg","circle"),w=a.randomId();y.setAttribute("id",w);var _={ripple:a.t(r.templateName,r.min,this.getScale()).ripple,node:r};a.events.publish("ripple",[this,_]),E.setAttribute("x",_.ripple.rect?_.ripple.rect.x:0),E.setAttribute("y",_.ripple.rect?_.ripple.rect.y:0),E.setAttribute("width",_.ripple.rect?_.ripple.rect.width:r.w),E.setAttribute("height",_.ripple.rect?_.ripple.rect.height:r.h),E.setAttribute("rx",_.ripple.radius),E.setAttribute("ry",_.ripple.radius),g.setAttribute("clip-path","url(#"+w+")"),g.setAttribute("cx",s),g.setAttribute("cy",l),g.setAttribute("r",0),g.setAttribute("fill",_.ripple.color),g.setAttribute("class","bft-ripple"),y.appendChild(E),v.appendChild(y),v.appendChild(g),i.appendChild(v),a.animate(g,{r:0,opacity:1},{r:m,opacity:0},500,a.anim.outPow,function(){i.removeChild(v)})}}},a.prototype.center=function(t,e,n){var r,i,o=t,s=!0,l=!0;e&&e.parentState!=null&&(r=e.parentState),e&&e.childrenState!=null&&(i=e.childrenState),e&&e.rippleId!=null&&(o=e.rippleId),e&&e.vertical!=null&&(s=e.vertical),e&&e.horizontal!=null&&(l=e.horizontal);var c={parentState:r,childrenState:i,rippleId:o,vertical:s,horizontal:l};this._draw(!1,a.action.centerNode,{id:t,options:c},n)},a.prototype.fit=function(t){this.config.scaleInitial=a.match.boundary,this._draw(!0,a.action.init,{method:"fit"},t)},a.prototype.toggleFullScreen=function(){var t=document.querySelector("["+a.attr.tlbr+"r='fullScreen']");document.fullscreenElement==this.element||document.webkitFullscreenElement==this.element||document.mozFullScreenElement==this.element||document.msFullscreenElement==this.element?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),t&&(t.innerHTML=a.toolbarUI.openFullScreenIcon)):(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),t&&(t.innerHTML=a.toolbarUI.closeFullScreenIcon))},a.prototype.getNode=function(t){return this.nodes[t]},a.prototype.setLayout=function(t,e){e||(e="base"),this._layoutConfigs[e].layout=t,e=="base"&&(this.config.layout=t),this._draw(!1,a.action.update)},a.prototype.setOrientation=function(t,e,n){var r=this;e||(e="base"),this._layoutConfigs[e].orientation=t,e=="base"&&(this.config.orientation=t),this._draw(!1,a.action.update,void 0,function(){a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary,function(){r._draw(!0,a.action.pan),n&&n()})})},a.prototype.search=function(t,e,n){return a.isNEU(e)&&(e=this.searchUI._searchFields),a.isNEU(n)&&(n=e),a._search.search(this.config.nodes,t,e,n,this.config.searchDisplayField,this.config.searchFieldsWeight,this.searchUI._searchFieldsAbbreviation)},a.prototype._hideBeforeAnimation=function(t){if(this._hideBeforeAnimationCompleted!=1&&!(t&&t<a.ANIM_THRESHOLD)){var e=this.element.getElementsByTagName("text");if(e.length>a.TEXT_THRESHOLD)for(var n=0;n<e.length;n++)e[n].style.display="none";var r=this.element.getElementsByTagName("image");if(r.length>a.IMAGES_THRESHOLD)for(n=0;n<r.length;n++)r[n].style.display="none";var i=this.element.querySelectorAll("["+a.attr.link_id+"]");if(i.length>a.LINKS_THRESHOLD)for(n=0;n<i.length;n++)i[n].style.display="none";var o=this.element.querySelectorAll("["+a.attr.control_expcoll_id+"]");if(o.length>a.BUTTONS_THRESHOLD)for(n=0;n<o.length;n++)o[n].style.display="none";var s=this.element.querySelectorAll("["+a.attr.control_up_id+"]");if(s.length>a.BUTTONS_THRESHOLD)for(n=0;n<s.length;n++)s[n].style.display="none";this._hideBeforeAnimationCompleted=!0}},a.prototype._showAfterAnimation=function(){for(var t=this.element.getElementsByTagName("text"),e=0;e<t.length;e++)t[e].style.display="";var n=this.element.getElementsByTagName("image");for(e=0;e<n.length;e++)n[e].style.display="";var r=this.element.querySelectorAll("["+a.attr.link_id+"]");for(e=0;e<r.length;e++)r[e].style.display="";var i=this.element.querySelectorAll("["+a.attr.control_expcoll_id+"]");for(e=0;e<i.length;e++)i[e].style.display="";var o=this.element.querySelectorAll("["+a.attr.control_up_id+"]");for(e=0;e<o.length;e++)o[e].style.display="";this._hideBeforeAnimationCompleted=!1},a.prototype.isChild=function(t,e){for(var n=this.getNode(e);n;){if(n.id==t)return!0;n=n.parent?n.parent:n.stParent}return!1},a.prototype.getCollapsedIds=function(t){for(var e=[],n=0;n<t.childrenIds.length;n++){var r=this.getNode(t.childrenIds[n]);r.collapsed==1&&e.push(r.id)}return e},a.prototype.stateToUrl=function(){if(this.manager.state){var t={};return t.exp=this.manager.state.exp.join("*"),t.min=this.manager.state.min.join("*"),t.adjustify=this.manager.state.adjustify.x+"*"+this.manager.state.adjustify.y,t.scale=this.manager.state.scale,t.y=this.manager.state.x,t.x=this.manager.state.y,new URLSearchParams(t).toString()}return""},a.prototype.generateId=function(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(this.nodes==null||!this.nodes.hasOwnProperty(t))return t}},a.prototype.moveNodesToVisibleArea=function(t,e){for(var n=this,r=this.getSvg(),i=this.getViewBox(),o=null,s=null,l=null,c=null,d=0;d<t.length;d++){var u=this.nodes[t[d]];(o===null||o<u.x+u.w)&&(o=u.x+u.w),(s===null||s<u.y+u.h)&&(s=u.y+u.h),(l===null||l>u.x)&&(l=u.x),(c===null||c>u.y)&&(c=u.y)}var h=this.width(),f=this.height(),m=h/(w=o-l+2*this.config.padding),v=f/(_=s-c+2*this.config.padding),y=m>v?v:m,E=Math.ceil(h/y),g=Math.ceil(f/y),w=0,_=0;if(E-2*this.config.padding>=o-l)w=(o+l)/2-E/2;else switch(w=firstRoot.x-E/2+a.manager._getNodeWidth(firstRoot,this.config)/2,this.config.orientation){case a.orientation.right:case a.orientation.right_top:(w=-(E/2-(l-o)/2))<this.config.padding-E&&(w=this.config.padding-E);break;case a.orientation.left:case a.orientation.bottom_left:case a.orientation.top_left:case a.orientation.left_top:(w=-(E/2-(o-l)/2))>-this.config.padding&&(w=-this.config.padding)}if(g-2*this.config.padding>=s-c)_=(s+c)/2-g/2;else switch((_=-(g/2-(s-c)/2))>-this.config.padding&&(_=-this.config.padding),this.config.orientation){case a.orientation.bottom:case a.orientation.bottom_left:(_=-(g/2-(c-s)/2))<this.config.padding-g&&(_=this.config.padding-g);break;case a.orientation.left:case a.orientation.right:_=firstRoot.y-g/2+a.manager._getNodeWidth(firstRoot,this.config)/2}var b=[w,_,E,g];i[0]!==b[0]||i[1]!==b[1]?a.animate(r,{viewBox:i},{viewBox:b},this.config.anim.duration,this.config.anim.func,function(){n.draw(a.action.update,void 0,e)}):e&&e()},a.prototype._nodeHasHiddenParent=function(t){return!t.parent&&!a.isNEU(t.pid)&&this.getNode(t.pid)},a.prototype.destroy=function(){this._removeEvent(window,"resize"),a.events.removeForEventId(this._event_id),this.element.innerHTML=null},a.__defaultConfig=a._defaultConfig,a._defaultConfig=function(t){var e=a.__defaultConfig();return e.nodeTreeMenu=null,e.template="tommy",e.mode="light",e.minPartnerSeparation=30,e.partnerChildrenSplitSeparation=10,e.siblingSeparation=35,e.tags["children-group"]={template:"cgroup",subTreeConfig:{siblingSeparation:7,columns:1}},t&&t.template?(e.tags.male={template:t.template+"_male"},e.tags.female={template:t.template+"_female"}):(e.tags.male={template:e.template+"_male"},e.tags.female={template:e.template+"_female"}),e},a.prototype.load=function(t,e){var n=this;return this.config.nodes=t,this.config.roots=null,this._draw(!1,a.action.init,void 0,function(){n.filterUI.update(),e&&e()}),this},a.prototype.getRecentRootsByNodeId=function(t){this.recentRoots||(this.recentRoots=[]);var e=this.recentRoots,n=this.getNode(t);return n?(n.rids.sort(function(r,i){var o=e.indexOf(r),s=e.indexOf(i);return o==-1?1e3:s==-1?-1e3:o-s}),n.rids):[]},a.prototype._nodeHasHiddenParent=function(t){return!(t.parent||a.isNEU(t.pid)||!this.getNode(t.pid))||!(!t.isPartner||a.isNEU(t.mid)||!this.getNode(t.mid))||!(!t.isPartner||a.isNEU(t.fid)||!this.getNode(t.fid))||!!(t.isPartner&&t.pids.length>1)},a.prototype._center=a.prototype.center,a.prototype.center=function(t,e,n){var r=this.getRecentRootsByNodeId(t);Array.isArray(this.config.roots)||(roots=[]),a._changeRootOption(this.config.roots,r,this.manager.rootList),this._center(t,e,n)},a.localStorage={},a.localStorage.getItem=function(t){var e=localStorage.getItem("to_date");if(e){if((e=new Date(e))<new Date){for(var n=0,r=localStorage.length;n<r;++n){var i=localStorage.key(n);i&&i.startsWith&&i.startsWith('{"n"')&&localStorage.removeItem(i)}localStorage.removeItem("to_date")}}else(e=new Date).setDate(e.getDate()+5),e=e.toISOString(),localStorage.setItem("to_date",e);return localStorage.getItem(t)},a.localStorage.setItem=function(t,e){try{localStorage.setItem(t,e)}catch(n){n.code==n.QUOTA_EXCEEDED_ERR?(console.warn("Local storage quota exceeded"),localStorage.clear()):(console.error("Local storage error code:"+n.code),console.error(n))}},a.prototype.canUpdateLink=function(t,e){if(e==null||e==null||t==null||t==null||t==e)return!1;var n=this.getNode(e),r=this.getNode(t);return!(n&&r&&(n.isPartner||n.hasPartners&&r.isAssistant||n.hasAssistants&&r.isPartner))&&!this.isChild(t,e)},a.prototype._canUpdateLink=a.prototype.canUpdateLink,a.prototype.updateNode=function(t,e,n){var r=this,i=this.get(t.id);if(n===!0&&a.events.publish("update",[this,i,t])===!1)return!1;this.update(t),a.events.publish("updated",[this]),this.filterUI.update();var o=this.getNode(t.id),s=o.pid;s==null&&(s=o.stpid),this._draw(!1,a.action.update,{id:s},function(){r.ripple(t.id),e&&e()})},a.prototype.update=function(t){for(var e=0;e<this.config.nodes.length;e++)if(this.config.nodes[e].id==t.id){this._putInUndoStack(),this.clearRedo(),this.config.nodes[e]=t;break}return this},a.prototype.removeNode=function(t,e,n){var r=this;if(!this.canRemove(t))return!1;var i=this._getNewPidsAndStpidsForIds(t);return n===!0&&a.events.publish("remove",[this,t,i])===!1?!1:(this.remove(t),a.events.publish("updated",[this]),this.filterUI.update(),this._draw(!1,a.action.update,null,function(){r.config.sticky&&a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),e&&e()}),!0)},a.prototype.remove=function(t){var e=this.get(t);if(e){this._putInUndoStack(),this.clearRedo();for(var n=this.config.nodes.length-1;n>=0;n--)this.config.nodes[n].pid!=t&&this.config.nodes[n].stpid!=t||(this.config.nodes[n].pid=e.pid,this.config.nodes[n].stpid=e.stpid),this.config.nodes[n].id==t&&this.config.nodes.splice(n,1)}return this},a.prototype._getNewPidsAndStpidsForIds=function(t){var e=this.get(t),n={},r={};if(e)for(var i=this.config.nodes.length-1;i>=0;i--)this.config.nodes[i].pid==t?n[this.config.nodes[i].id]=e.pid:this.config.nodes[i].stpid==t&&(r[this.config.nodes[i].id]=e.stpid);return{newPidsForIds:n,newStpidsForIds:r}},a.prototype.addNode=function(t,e,n){var r=this;if(n===!0&&a.events.publish("add",[this,t])===!1)return!1;this.add(t),a.events.publish("updated",[this]),this.filterUI.update(),r._draw(!1,a.action.insert,{id:t.pid,insertedNodeId:t.id},function(){r.ripple(t.id),e&&e()})},a.prototype.add=function(t){if(t.id==null&&console.error("Call addNode without id"),this._putInUndoStack(),this.clearRedo(),this.config.movable&&!a.isNEU(t.pid)){var e=this._get(t.pid);e&&(e.movex!=null&&(t.movex=e.movex),e.movey!=null&&(t.movey=e.movey))}return this.config.nodes.push(t),this},a.prototype.replaceIds=function(t,e){this._replaceIds(t),this._draw(!1,a.action.update,void 0,e)},a.prototype._replaceIds=function(t){for(var e=function(c){for(var d=0;d<c.length;d++){var u=c[d];for(var h in t){var f=t[h];u.from==h&&(u.from=f),u.to==h&&(u.to=f)}}},n=0;n<this.config.nodes.length;n++){var r=this.config.nodes[n];for(var i in t){var o=t[i];r.id==i&&(r.id=o),r.pid==i&&(r.pid=o),r.stpid==i&&(r.stpid=o),r.ppid==i&&(r.ppid=o)}}if(Array.isArray(this.config.roots))for(n=0;n<this.config.roots.length;n++)a.isNEU(t[this.config.roots[n]])||(this.config.roots[n]=t[this.config.roots[n]]);if(this.nodes)for(var s in this.nodes)a.isNEU(t[s])||(o=t[s],(l=this.nodes[s]).id=o,this.nodes[o]=l);if(this.manager.oldNodes)for(var s in this.manager.oldNodes)a.isNEU(t[s])||(o=t[s],(l=this.manager.oldNodes[s]).id=o,this.manager.oldNodes[o]=l);if(this.roots){for(var s in this.roots)if(!a.isNEU(t[s])){var l;o=t[s],(l=this.roots[s]).id=o,this.roots[o]=l}}e(this.config.clinks),e(this.config.slinks),e(this.config.groupDottedLines),e(this.config.dottedLines)},a.prototype._get=function(t){var e=this.__get(t);if(e)return e;if((this.config.groupDottedLines.length||this.config.dottedLines.length)&&!a.isNEU(t)&&typeof t=="string"&&(t.indexOf("balkan_group_dotted_")!=-1||t.indexOf("balkan_dotted_")!=-1)){var n=(t=(t=t.replace("balkan_group_dotted_","")).replace("balkan_dotted_","")).indexOf("_balkan_id_");if(t=t.substring(n+11),e=this.__get(t))return e}return null},a.prototype.__get=function(t){for(var e=0;e<this.config.nodes.length;e++)if(this.config.nodes[e].id==t)return this.config.nodes[e];return null},a.prototype.get=function(t){var e=this._get(t);return e==null?null:JSON.parse(JSON.stringify(e))},a.prototype.canRemove=function(t){var e=this.getNode(t);return!!e&&!e.hasPartners&&!e.hasAssistants},a.prototype.addChildNode=function(t,e,n){this.hideTreeMenu(!1);var r=this;if(!t||a.isNEU(t.mid)&&a.isNEU(t.fid))console.error("addSonNode invalid data");else{a.isNEU(t.id)&&(t.id=this.generateId());var i={addNodesData:[t],updateNodesData:[],removeNodeId:null};if(n===!0&&a.events.publish("update",[this,i])===!1)return!1;r._fireUpdate_addUpdateRemove(i,n);var o="";a.isNEU(i.addNodesData[0].pid)?a.isNEU(i.addNodesData[0].mid)?a.isNEU(i.addNodesData[0].fid)||(o=i.addNodesData[0].fid):o=i.addNodesData[0].mid:o=i.addNodesData[0].pid,r._draw(!1,a.action.insert,{id:o,insertedNodeId:i.addNodesData[0].id},function(){r.ripple(i.addNodesData[0].id),e&&e(),n===!0&&a.events.publish("updated",[r,i]),r.filterUI.update()})}},a.prototype.addChildAndPartnerNodes=function(t,e,n,r,i){this.hideTreeMenu(!1);var o=this;if(!e||a.isNEU(e.mid)&&a.isNEU(e.fid))console.error("addChildAndPartnerNodes invalid childData");else if(n){a.isNEU(e.id)&&(e.id=this.generateId()),a.isNEU(n.id)&&(n.id=this.generateId()),e.mid=="_ft_partner"?e.mid=n.id:e.fid=="_ft_partner"&&(e.fid=n.id);var s=[],l=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),l=this.get(n.pids[0]),Array.isArray(l.pids)||(l.pids=[]),l.pids.push(n.id),s.push(l));var c={addNodesData:[e,n],updateNodesData:s,removeNodeId:null};if(i===!0&&a.events.publish("update",[this,c])===!1)return!1;o._fireUpdate_addUpdateRemove(c,i);var d=o.getRecentRootsByNodeId(t);a._changeRootOption(o.config.roots,d,o.manager.rootList);var u="";l?u=l.id:a.isNEU(e.pid)?a.isNEU(e.mid)?a.isNEU(e.fid)||(u=e.fid):u=e.mid:u=e.pid,o._draw(!1,a.action.update,{id:u},function(){o.ripple(e.id),o.ripple(n.id),r&&r(),i===!0&&a.events.publish("updated",[o,c]),o.filterUI.update()}),i===!0&&a.events.publish("updating",[o,c])}else console.error("addChildAndPartnerNodes invalid data")},a.prototype.addPartnerAndParentNodes=function(t,e,n,r,i){this.hideTreeMenu(!1);var o=this;if(!a.isNEU(e)&&e.length)if(n){a.isNEU(n.id)&&(n.id=this.generateId());for(var s=[],l=0;l<e.length;l++){var c=this.get(e[l]);if(!a.isNEU(c.mid)&&!a.isNEU(c.fid))return void console.error("father id (fid) or mather id (mid) has to be null or undefined");a.isNEU(c.mid)?c.mid=n.id:a.isNEU(c.mid)||(c.fid=n.id),s.push(c)}var d=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),d=this.get(n.pids[0]),Array.isArray(d.pids)||(d.pids=[]),d.pids.push(n.id),s.push(d));var u={addNodesData:[n],updateNodesData:s,removeNodeId:null};if(i===!0&&a.events.publish("update",[this,u])===!1)return!1;o._fireUpdate_addUpdateRemove(u,i);var h=o.getRecentRootsByNodeId(t);a._changeRootOption(o.config.roots,h,o.manager.rootList);var f="";d&&(f=d.id),o._draw(!1,a.action.update,{id:f},function(){o.ripple(n.id),r&&r(),i===!0&&a.events.publish("updated",[o,u]),o.filterUI.update()}),i===!0&&a.events.publish("updating",[o,u])}else console.error("addPartnerAndParentNodes invalid data");else console.error("addPartnerAndParentNodes invalid data")},a.prototype.addPartnerNode=function(t,e,n){this.hideTreeMenu(!1);var r=this;if(t&&Array.isArray(t.pids)&&t.pids.length==1){a.isNEU(t.id)&&(t.id=this.generateId());var i=this.get(t.pids[0]);Array.isArray(i.pids)||(i.pids=[]),i.pids.push(t.id);var o={removeNodeId:null,updateNodesData:[i],addNodesData:[t]};if(n===!0&&a.events.publish("update",[this,o])===!1)return!1;r._fireUpdate_addUpdateRemove(o,n);var s=r.getRecentRootsByNodeId(o.updateNodesData[0].id);a._changeRootOption(r.config.roots,s,r.manager.rootList);var l=o.updateNodesData[0].id;r._draw(!1,a.action.insert,{id:l,insertedNodeId:o.addNodesData[0].id},function(){r.ripple(o.addNodesData[0].id),e&&e(),n===!0&&a.events.publish("updated",[r,o]),r.filterUI.update()}),n===!0&&a.events.publish("updating",[r,o])}else console.error("addPartnerNode invalid data")},a.prototype.addParentNode=function(t,e,n,r,i){this.hideTreeMenu(!1);var o=this;if(n)if(["mid","fid"].has(e))if(a.isNEU(t))console.error("addParentNode invalid childId");else{a.isNEU(n.id)&&(n.id=this.generateId());var s=[],l=this.get(t);l[e]=n.id,s.push(l);var c=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addParentNode: data has to have one partner"),c=this.get(n.pids[0]),Array.isArray(c.pids)||(c.pids=[]),c.pids.push(n.id),s.push(c));var d={removeNodeId:null,updateNodesData:s,addNodesData:[n]};if(i===!0&&a.events.publish("update",[this,d])===!1)return!1;o._fireUpdate_addUpdateRemove(d,i);var u=t;o.config.roots=[d.addNodesData[0].id],o._draw(!1,a.action.insert,{id:u,insertedNodeId:d.addNodesData[0].id},function(){o.ripple(d.addNodesData[0].id),r&&r(),i===!0&&a.events.publish("updated",[o,d]),o.filterUI.update()}),i===!0&&a.events.publish("updating",[o,d])}else console.error("addParentNode invalid type");else console.error("addParentNode invalid data")},a.prototype.canRemove=function(t){var e=this.getNode(t);if(!e)return!1;var n=this.getNode(e.mid),r=this.getNode(e.fid),i=e.ftChildrenIds.length>0,o=!1,s=e.pids.length>0,l=e.pids.length>1;if(e.pids.length==1){var c=this.getNode(e.pids[0]);o=e.ftChildrenIds.compare(c.ftChildrenIds)}return!(!n&&!r||i||s)||!(n||r||i||l||!s||o)||!(n||r||!i||!o)||!(n||r||!i||o)||!(n||r||i||!o)},a.prototype.removeNode=function(t,e,n){var r=this;if(this.canRemove(t)){var i=this.getNode(t),o=[];if(Array.isArray(i.pids))for(var s=0;s<i.pids.length;s++){var l=this.get(i.pids[s]);l&&(d=l.pids.indexOf(i.id))!=-1&&(l.pids.splice(d,1),o.push(l))}if(Array.isArray(i.ftChildrenIds))for(s=0;s<i.ftChildrenIds.length;s++){var c=this.get(i.ftChildrenIds[s]);c&&(c.mid==i.id?(c.mid=void 0,o.push(c)):c.fid==i.id&&(c.fid=void 0,o.push(c)))}var d,u={removeNodeId:t,updateNodesData:o,addNodesData:[]};if(n===!0&&a.events.publish("update",[this,u])===!1)return!1;r._fireUpdate_addUpdateRemove(u,n),(d=r.config.roots.indexOf(t))!=-1&&r.config.roots.splice(d,1),r._draw(!1,a.action.update,null,function(){r.config.sticky&&a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),e&&e(),n===!0&&a.events.publish("updated",[r,u]),r.filterUI.update()}),n===!0&&a.events.publish("updating",[r,u])}},a.prototype.updateNode=function(t,e,n){var r=this,i=this.getNode(t.id);t.pids||(t.pids=[]);var o=[];o.push(t);for(var s=0;s<i.pids.length;s++)if(!t.pids.has(i.pids[s])&&(c=this._get(i.pids[s]))&&c.pids){var l=c.pids.indexOf(t.id);l!=-1&&(c.pids.splice(l,1),o.push(t)),i.pids.splice(s,1),o.push(c)}for(s=0;s<t.pids.length;s++){var c;(!i.pids||!i.pids.has(t.pids[s]))&&((c=this._get(t.pids[s])).pids||(c.pids=[]),c.pids.push(t.pids[s]),o.push(c))}var d={removeNodeId:null,updateNodesData:o,addNodesData:[]};if(n===!0&&a.events.publish("update",[this,d])===!1)return!1;r._fireUpdate_addUpdateRemove(d,n),r._draw(!1,a.action.update,null,function(){r.config.sticky&&a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),e&&e(),n===!0&&a.events.publish("updated",[r,d]),r.filterUI.update()})},a.prototype._fireUpdate_addUpdateRemove=function(t,e){for(var n=0;n<t.addNodesData.length;n++)this.add(t.addNodesData[n]);for(n=0;n<t.updateNodesData.length;n++)this.update(t.updateNodesData[n]);a.isNEU(t.removeNodeId)||this.remove(t.removeNodeId),e===!0&&a.events.publish("updating",[this,t])},a.prototype.__replaceIds=a.prototype._replaceIds,a.prototype._replaceIds=function(t){this.__replaceIds(t);for(var e=0;e<this.config.nodes.length;e++){var n=this.config.nodes[e];for(var r in t){var i=t[r];if(n.fid==r&&(n.fid=i),n.mid==r&&(n.mid=i),Array.isArray(n.pids))for(var o=0;o<n.pids.length;o++)n.pids[o]==r&&(n.pids[o]=i)}}},a===void 0&&(a={}),a._ajax=function(t,e,n,r,i){r==null&&(r="arraybuffer");var o=new XMLHttpRequest;o.onload=function(s){o.readyState==4&&this.status===200&&(s.target==null?i(this.response):i(s.target.response))},o.onerror=function(s){i({error:s})},o.open(e,t),o.responseType=r,o.setRequestHeader("Content-Type","application/json"),n==null?o.send():o.send(n)},a===void 0&&(a={}),a.animate=function(t,e,n,r,i,o,s){var l,c=10,d=1,u=r/c+1;return document.getElementsByTagName("g"),Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),l=setInterval(function(){for(var h=0;h<t.length;h++)for(var f in n[h]){var m=a._arrayContains(["top","left","right","bottom","width","height"],f.toLowerCase())?"px":"";switch(f.toLowerCase()){case"d":var v=i((d*c-c)/r)*(n[h][f][0]-e[h][f][0])+e[h][f][0],y=i((d*c-c)/r)*(n[h][f][1]-e[h][f][1])+e[h][f][1];t[h].setAttribute("d",t[h].getAttribute("d")+" L"+v+" "+y);break;case"r":var E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f];t[h].setAttribute("r",E);break;case"x1":E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f],t[h].setAttribute("x1",E);break;case"x2":E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f],t[h].setAttribute("x2",E);break;case"y1":E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f],t[h].setAttribute("y1",E);break;case"y2":E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f],t[h].setAttribute("y2",E);break;case"rotate3d":if(n[h][f]){var g=e[h][f],w=n[h][f],_=[0,0,0,0];for(var b in g)_[b]=i((d*c-c)/r)*(w[b]-g[b])+g[b];t[h].style.transform="rotate3d("+_.toString()+"deg)"}break;case"transform":if(n[h][f]){g=e[h][f],w=n[h][f],_=[0,0,0,0,0,0];for(var b in g)_[b]=i((d*c-c)/r)*(w[b]-g[b])+g[b];t[h].hasAttribute("transform")?t[h].setAttribute("transform","matrix("+_.toString()+")"):t[h].style.transform="matrix("+_.toString()+")"}break;case"viewbox":if(n[h][f]){g=e[h][f],w=n[h][f],_=[0,0,0,0];for(var b in g)_[b]=i((d*c-c)/r)*(w[b]-g[b])+g[b];t[h].setAttribute("viewBox",_.toString())}break;case"margin":if(n[h][f]){g=e[h][f],w=n[h][f],_=[0,0,0,0];for(var b in g)_[b]=i((d*c-c)/r)*(w[b]-g[b])+g[b];var A="";for(b=0;b<_.length;b++)A+=parseInt(_[b])+"px ";t[h]&&t[h].style&&(t[h].style[f]=A)}break;case"scrolly":E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f],t[h].scrollTo(0,E);break;default:E=i((d*c-c)/r)*(n[h][f]-e[h][f])+e[h][f],t[h]&&t[h].style&&(t[h].style[f]=E+m)}}s&&s(),(d+=1)>u+1&&(clearInterval(l),o&&o(t))},c)},a.anim={},a.anim.inPow=function(t){return t<0?0:t>1?1:Math.pow(t,2)},a.anim.outPow=function(t){return t<0?0:t>1?1:-1*(Math.pow(t-1,2)+-1)},a.anim.inOutPow=function(t){return t<0?0:t>1?1:(t*=2)<1?a.anim.inPow(t,2)/2:-.5*(Math.pow(t-2,2)+-2)},a.anim.inSin=function(t){return t<0?0:t>1?1:1-Math.cos(t*(Math.PI/2))},a.anim.outSin=function(t){return t<0?0:t>1?1:Math.sin(t*(Math.PI/2))},a.anim.inOutSin=function(t){return t<0?0:t>1?1:-.5*(Math.cos(Math.PI*t)-1)},a.anim.inExp=function(t){return t<0?0:t>1?1:Math.pow(2,10*(t-1))},a.anim.outExp=function(t){return t<0?0:t>1?1:1-Math.pow(2,-10*t)},a.anim.inOutExp=function(t){return t<0?0:t>1?1:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,10*(-2*t+1)))},a.anim.inCirc=function(t){return t<0?0:t>1?1:-(Math.sqrt(1-t*t)-1)},a.anim.outCirc=function(t){return t<0?0:t>1?1:Math.sqrt(1-(t-1)*(t-1))},a.anim.inOutCirc=function(t){return t<0?0:t>1?1:t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(2*t-2)*(2*t-2))+1)},a.anim.rebound=function(t){return t<0?0:t>1?1:t<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-1.5/2.75)*(t-1.5/2.75)+.75):t<2.5/2.75?1-(7.5625*(t-2.25/2.75)*(t-2.25/2.75)+.9375):1-(7.5625*(t-2.625/2.75)*(t-2.625/2.75)+.984375)},a.anim.inBack=function(t){return t<0?0:t>1?1:t*t*(2.70158*t-1.70158)},a.anim.outBack=function(t){return t<0?0:t>1?1:(t-1)*(t-1)*(2.70158*(t-1)+1.70158)+1},a.anim.inOutBack=function(t){return t<0?0:t>1?1:t<.5?4*t*t*(7.1898*t-2.5949)*.5:.5*((2*t-2)*(2*t-2)*(3.5949*(2*t-2)+2.5949)+2)},a.anim.impulse=function(t){var e=2*t;return e*Math.exp(1-e)},a.anim.expPulse=function(t){return Math.exp(-2*Math.pow(t,2))},a===void 0&&(a={}),a.prototype._attachInitEventHandlers=function(t){this._addEvent(window,"resize",this._resizeHandler)},a.prototype._attachEventHandlers=function(t){if(this.config.interactive){t=this.getSvg(),this.config.enableTouch||a.isMobile()?(this._addEvent(t,"touchstart",this._globalMouseDownHandler),this._addEvent(t,"touchend",this._globalClickHandler)):(this._addEvent(t,"mousedown",this._globalMouseDownHandler),this._addEvent(t,"click",this._globalClickHandler),this._addEvent(t,"contextmenu",this._globalContextHandler),this._addEvent(t,"dblclick",this._globalDbClickHandler),this.config.mouseScrool!=a.action.none&&this._addEvent(t,"wheel",this._mouseScrollHandler));var e=this.getMenuButton();e&&this._addEvent(e,"click",this._menuClickHandler)}},a.prototype._addEvent=function(t,e,n,r){var i,o;r||(r=""),t.getListenerList||(t.getListenerList={}),t.getListenerList[e+r]||(i=this,o=n,n=function(){if(o)return o.apply(i,[this,arguments[0]])},t.addEventListener?e=="mousewheel"?t.addEventListener(e,s,{passive:!1}):t.addEventListener(e,s,!1):t.attachEvent("on"+e,function(){var l=n.call(t,window.event);return l===!1&&(window.event.returnValue=!1,window.event.cancelBubble=!0),l}),t.getListenerList[e+r]=s);function s(l){var c=n.apply(this,arguments);return c===!1&&(l.stopPropagation(),l.preventDefault()),c}},a.prototype._removeEvent=function(t,e){if(t.getListenerList[e]){var n=t.getListenerList[e];t.removeEventListener(e,n,!1),delete t.getListenerList[e]}},a===void 0&&(a={}),a.VERSION="8.14.46",a.orientation={},a.orientation.top=0,a.orientation.bottom=1,a.orientation.right=2,a.orientation.left=3,a.orientation.top_left=4,a.orientation.bottom_left=5,a.orientation.right_top=6,a.orientation.left_top=7,a.align={},a.align.center=a.CENTER=8,a.align.orientation=a.ORIENTATION=9,a.attr={},a.attr.l="data-l",a.attr.id="data-id",a.attr.sl="data-sl",a.attr.lbl="data-lbl",a.attr.val="data-val",a.attr.tlbr="data-tlbr",a.attr.item="data-item",a.attr.layout="data-layout",a.attr.node_id="data-n-id",a.attr.link_id="data-l-id",a.attr.field_name="data-f-name",a.attr.c_link_to="data-c-l-to",a.attr.c_link_from="data-c-l-from",a.attr.s_link_to="data-s-l-to",a.attr.s_link_from="data-s-l-from",a.attr.control_add="data-ctrl-add",a.attr.control_expcoll_id="data-ctrl-ec-id",a.attr.control_up_id="data-ctrl-up-id",a.attr.control_export_menu="data-ctrl-menu",a.attr.control_node_menu_id="data-ctrl-n-menu-id",a.attr.control_node_circle_menu_id="data-ctrl-n-c-menu-id",a.attr.control_node_circle_menu_name="data-ctrl-n-c-menu-name",a.attr.control_node_circle_menu_wrraper_id="data-ctrl-n-c-menu-wrapper-id",a.attr.width="data-width",a.attr.text_overflow="data-text-overflow",a.ID="id",a.PID="pid",a.STPID="stpid",a.TAGS="tags",a.NODES="nodes",a.ELASTIC="elastic",a.ASSISTANT="Assistant",a.action={},a.action.expand=0,a.action.collapse=1,a.action.maximize=101,a.action.minimize=102,a.action.expandCollapse=501,a.action.edit=1,a.action.zoom=2,a.action.ctrlZoom=22,a.action.scroll=41,a.action.xScroll=3,a.action.yScroll=4,a.action.none=5,a.action.init=6,a.action.update=7,a.action.move=70,a.action.pan=8,a.action.centerNode=9,a.action.resize=10,a.action.insert=11,a.action.insertfirst=12,a.action.details=13,a.action.exporting=14,a.none=400001,a.scroll={},a.scroll.visible=!0,a.scroll.smooth=12,a.scroll.speed=120,a.scroll.safari={smooth:12,speed:250},a.match={},a.match.height=100001,a.match.width=100002,a.match.boundary=100003,a.movable={},a.movable.node="node",a.movable.tree="tree",a.movable.detachTree="detachTree",a.layout={},a.layout.normal=a.normal=0,a.layout.mixed=a.mixed=1,a.layout.tree=a.tree=2,a.layout.treeLeftOffset=a.treeLeftOffset=3,a.layout.treeRightOffset=a.treeRightOffset=4,a.layout.treeLeft=5,a.layout.treeRight=6,a.layout.grid=-1,a.nodeOpenTag="<g "+a.attr.node_id+'="{id}" style="opacity: {opacity}" transform="matrix(1,0,0,1,{x},{y})" class="{class}" '+a.attr.sl+'="{sl}" '+a.attr.l+"={level} {lcn}>",a.linkOpenTag="<g "+a.attr.link_id+'="[{id}][{child-id}]" class="{class}">',a.expcollOpenTag="<g "+a.attr.control_expcoll_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})"  style="cursor:pointer;">',a.upOpenTag="<g "+a.attr.control_up_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})" style="cursor:pointer;">',a.linkFieldsOpenTag='<g transform="matrix(1,0,0,1,{x},{y}) rotate({rotate})">',a.grCloseTag="</g>",a.A5w=420,a.A5h=595,a.A4w=595,a.A4h=842,a.A3w=842,a.A3h=1191,a.A2w=1191,a.A2h=1684,a.A1w=1684,a.A1h=2384,a.Letterw=612,a.Letterh=791,a.Legalw=612,a.Legalh=1009,a.COLLAPSE_PARENT_NEIGHBORS=1,a.COLLAPSE_SUB_CHILDRENS=2,a.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED=3,a.TEXT_THRESHOLD=400,a.IMAGES_THRESHOLD=100,a.LINKS_THRESHOLD=200,a.BUTTONS_THRESHOLD=70,a.ANIM_THRESHOLD=50,a.IT_IS_LONELY_HERE='<g transform="translate(-100, 0)" style="cursor:pointer;"  '+a.attr.control_add+'="control-add"><text fill="#039be5">{link}</text></g>',a.RES={},a.RES.IT_IS_LONELY_HERE_LINK="It's lonely here, add your first node",a.FIRE_DRAG_NOT_CLICK_IF_MOVE=3,a.STRING_TAGS=!1,a.MAX_NODES_MESS="The trial has expired or 200 nodes limit was reached! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",a.OFFLINE_MESS="The evaluation version requires internet connection! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",a.SEARCH_PLACEHOLDER="Search... type ? to get help.",a.SEARCH_HELP_SYMBOL="?",a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE=!1,a.SEARCH_RESULT_LIMIT=10,a.IMPORT_MESSAGE="Choose the columns (fields) in your data file that contain the required information.",a.FIXED_POSITION_ON_CLICK=!1,a.RENDER_LINKS_BEFORE_NODES=!1,a.RENDER_CLINKS_BEFORE_NODES=!1,a.MIXED_LAYOUT_ALL_NODES=!0,a.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN=!1,a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN=1,a.LINK_ROUNDED_CORNERS=5,a.MOVE_STEP=5,a.CLINK_CURVE=1,a.MAX_DEPTH=200,a.SCALE_FACTOR=1.44,a.LAZY_LOADING_FACTOR=500,a.HIDE_EDIT_FORM_ON_PAN=!0,a.LAZY_LOADING=!0,a.ARRAY_FIELDS=["tags"],a.CSV_DELIMITER=",",a.EDITFORM_CLOSE_BTN='<svg data-edit-from-close class="bft-edit-form-close"><path style="fill:#ffffff;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111 C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587 c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z"></path></svg>',a.ESCAPE_HTML=!1,a.VERTICAL_CHILDREN_ASSISTANT=!1,a.EXPORT_PAGES_CUT_NODES=!1,a.RESET_MOVABLE_ONEXPANDCOLLAPSE=!1,a.FILTER_ALPHABETICALLY=!0,a.SERVER_PREFIX=".azurewebsites.net/api/OrgChartJS",a.FUNC_URL_NAME="func-url-orgfamilyjs",typeof Rp<"u"&&(Rp.exports=a),a.SERVER_PREFIX=".azurewebsites.net/api/FamilyTreeJS",a.FUNC_URL_NAME="func-url-familytreejs",a.OC_VERSION=a.VERSION,a.VERSION="1.09.41",a.RENDER_LINKS_BEFORE_NODES=!0,a.ARRAY_FIELDS=["tags","pids"],a._intersects=function(t,e,n){var r=t.x-n.siblingSeparation/4,i=t.y,o=t.x+t.w+n.siblingSeparation/4,s=t.y;switch(n.orientation){case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:r=t.x,i=t.y-n.siblingSeparation/4,o=t.x,s=t.y+t.h+n.siblingSeparation/4}var l,c,d,u=e.p,h=e.q,f=e.r,m=e.s;return(l=(o-r)*(m-h)-(f-u)*(s-i))!==0&&(c=((i-s)*(f-r)+(o-r)*(m-i))/l,0<(d=((m-h)*(f-r)+(u-f)*(m-i))/l)&&d<1&&0<c&&c<1)},a._addPoint=function(t,e,n,r,i){switch(n.orientation){case a.orientation.top:case a.orientation.top_left:return a._addPointTop(t,e,n,r,i);case a.orientation.bottom:case a.orientation.bottom_left:return a._addPointBottom(t,e,n,r,i);case a.orientation.left:case a.orientation.left_top:return a._addPointLeft(t,e,n,r,i);case a.orientation.right:case a.orientation.right_top:return a._addPointRight(t,e,n,r,i)}},a._addPointTop=function(t,e,n,r,i){var o,s,l;return i=="left"?o=t.leftNeighbor?t.x+(t.leftNeighbor.x+t.leftNeighbor.w-t.x)/2:t.x-n.siblingSeparation/2:i=="right"&&(o=t.rightNeighbor?t.x+t.w+(t.rightNeighbor.x-(t.x+t.w))/2:t.x+t.w+n.siblingSeparation/2),e.push([o,e[e.length-1][1]]),e.push([o,t.y-n.levelSeparation/3]),s=e[e.length-1][1],l=o,r.p=o,r.q=s,r.r=l,r},a._addPointBottom=function(t,e,n,r,i){var o,s,l;return i=="left"?o=t.leftNeighbor?t.x+(t.leftNeighbor.x+t.leftNeighbor.w-t.x)/2:t.x-n.siblingSeparation/2:i=="right"&&(o=t.rightNeighbor?t.x+t.w+(t.rightNeighbor.x-(t.x+t.w))/2:t.x+t.w+n.siblingSeparation/2),e.push([o,e[e.length-1][1]]),e.push([o,t.y+t.h+n.levelSeparation/3]),s=e[e.length-1][1],l=o,r.p=o,r.q=s,r.r=l,r},a._addPointLeft=function(t,e,n,r,i){var o,s=e[e.length-1][0];i=="bottom"?o=t.rightNeighbor?t.y+t.h+(t.rightNeighbor.y-(t.y+t.h))/2:t.y+t.h+n.siblingSeparation/2:i=="top"&&(o=t.leftNeighbor?t.y+(t.leftNeighbor.y+t.leftNeighbor.h-t.y)/2:t.y-n.siblingSeparation/2),e.push([e[e.length-1][0],o]),e.push([t.x-n.levelSeparation/3,o]),s=e[e.length-1][0];var l=o;return r.p=s,r.q=o,r.s=l,r},a._addPointRight=function(t,e,n,r,i){var o,s=e[e.length-1][0];i=="bottom"?o=t.rightNeighbor?t.y+t.h+(t.rightNeighbor.y-(t.y+t.h))/2:t.y+t.h+n.siblingSeparation/2:i=="top"&&(o=t.leftNeighbor?t.y+(t.leftNeighbor.y+t.leftNeighbor.h-t.y)/2:t.y-n.siblingSeparation/2),e.push([e[e.length-1][0],o]),e.push([t.x+t.w+n.levelSeparation/3,o]),s=e[e.length-1][0];var l=o;return r.p=s,r.q=o,r.s=l,r},a.editUI=function(){},a.editUI.prototype.init=function(t){this.obj=t,this.fields=null,this._event_id=a._guid()},a.editUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.editUI.prototype.show=function(t,e,n){if(this.hide(),a.events.publish("show",[this,t])===!1)return!1;var r=this,i=this.content(t,e,n);this.obj.element.appendChild(i.element),a.input.init(this.obj.element),n?e||this._focusElement(i.focusId):this.interval=a.animate(i.element,{right:-20,opacity:0},{right:0,opacity:1},300,a.anim.outSin,function(){e||r._focusElement(i.focusId)}),this.obj.element.querySelector("[data-edit-from-close]").addEventListener("click",function(l){l.preventDefault(),a.events.publish("cancel",[r,{id:t}])!==!1&&r.hide()}),this.obj.element.querySelector("[data-edit-from-cancel]").addEventListener("click",function(l){l.preventDefault(),a.events.publish("cancel",[r,{id:t}])!==!1&&r.hide()}),this.obj.element.querySelector("[data-edit-from-save]").addEventListener("click",function(l){l.preventDefault();var c=a.input.validateAndGetData(i.element);if(c!==!1){var d=r.obj.get(t),u={data:a.mergeDeep(d,c)};if(a.events.publish("save",[r,u])===!1)return;r.obj.updateNode(u.data,null,!0),r.hide()}});for(var o=this.obj.element.querySelectorAll("[data-input-btn]"),s=0;s<o.length;s++)o[s].addEventListener("click",function(l){l.preventDefault(),a.events.publish("element-btn-click",[r,{input:this.parentNode.querySelector("input"),nodeId:t,event:l}])});this.obj.element.querySelector("[data-add-more-fields-btn]").addEventListener("click",function(l){l.stopPropagation(),l.preventDefault();var c=this,d=a.elements.textbox({},{type:"textbox",label:r.obj.config.editForm.addMoreFieldName,btn:r.obj.config.editForm.addMoreBtn},"280px");c.parentNode.insertAdjacentHTML("beforebegin",d.html),c.style.display="none",a.input.init(c.parentNode.previousSibling);var u=document.getElementById(d.id);u.focus(),u.nextElementSibling.addEventListener("click",function(h){h.stopPropagation(),h.preventDefault();var f=u.value,m=r.obj.element.querySelector('[data-binding="'+a._escapeDoubleQuotes(u.value)+'"]');if(a.isNEU(f)||m)u.focus();else{var v=a.elements.textbox({},{type:"textbox",label:f,binding:f},"280px");u.parentNode.parentNode.parentNode.removeChild(u.parentNode.parentNode),c.parentNode.insertAdjacentHTML("beforebegin",v.html),c.style.display="",a.input.init(c.parentNode.previousSibling),document.getElementById(v.id).focus()}})}),this.obj.element.querySelector("[data-bft-edit-from-btns]").addEventListener("click",function(l){for(var c=l.target;c&&c.hasAttribute&&!c.hasAttribute("data-edit-from-btn");)c=c.parentNode;if(c&&c.hasAttribute){var d=c.getAttribute("data-edit-from-btn"),u={button:r.obj.config.editForm.buttons[d],name:d,nodeId:t,event:l};if(a.events.publish("button-click",[r,u])===!1)return!1;switch(d){case"edit":r.obj.editUI.show(t,!1,!0);break;case"pdf":r.obj.exportPDFProfile({id:t,filename:i.title}),r.hide();break;case"png":r.obj.exportPNGProfile({id:t,filename:i.title}),r.hide();break;case"share":r.obj.shareProfile(t);break;case"remove":r.obj.removeNode(t,null,!0),r.hide()}}})},a.editUI.prototype._focusElement=function(t){var e=null;a.isNEU(this.obj.config.editForm.focusBinding)?a.isNEU(t)||(e=document.getElementById(t)):e=this.obj.element.querySelector('[data-binding="'+this.obj.config.editForm.focusBinding+'"]'),e&&(e.value&&e.value.length&&e.setSelectionRange(e.value.length,e.value.length),e.focus())},a.editUI.prototype.setAvatar=function(t){var e=this.obj.element.querySelector("#bft-avatar");a.isNEU(t)?e.innerHTML=a.icon.user(150,150,"#8C8C8C",0,0):e.innerHTML=`<img style="width: 100%;height:100%;object-fit:cover;border-radius: 50%;" src="${t}"></img>`},a.editUI.prototype.content=function(t,e,n,r,i){var o,s=this.obj.config.editForm.readOnly,l=JSON.parse(JSON.stringify(this.obj.config.editForm.elements)),c=this.obj.config.editForm.addMore,d=this.obj.config.editForm.saveAndCloseBtn,u=this.obj.config.editForm.cancelBtn,h=this.obj.config.editForm.buttons,f=this.obj.config.editForm.titleBinding,m=this.obj.config.editForm.photoBinding,v=this.obj.getNode(t),y=this.obj._get(t),E=a.t(v.templateName,v.min,this.obj.getScale()),g=y[f],w=y[m];if(this.obj.config.editForm.generateElementsFromFields)for(var _=0;_<this.fields.length;_++){var b=this.fields[_];if(b!="tags"){for(var A=!1,k=0;k<l.length;k++){if(Array.isArray(l[k])){for(var C=0;C<l[k].length;C++)if(b==l[k][C].binding){A=!0;break}}else if(b==l[k].binding){A=!0;break}if(A)break}A||l.push({type:"textbox",label:b,binding:b})}}a.isNEU(g)&&(g=""),w=a.isNEU(w)?a.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;object-fit:cover;" src="${w}"></img>`;var x=!e,S=e?"display:none;":"",T=e||!c?"display:none;":"",R=E.editFormHeaderColor?`style="background-color:${E.editFormHeaderColor};"`:"",N=document.createElement("form");if(N.setAttribute("data-bft-edit-form",""),N.classList.add("bft-edit-form"),N.classList.add(this.obj.config.mode),N.classList.add(v.templateName.replaceAll(" ","")),N.classList.add(a.ui._defsIds[v.templateName]),Array.isArray(v.tags)&&v.tags.length)for(_=0;_<v.tags.length;_++)N.classList.add(v.tags[_].replaceAll(" ",""));N.style.display="flex",N.style.opacity=n?1:0,N.style.right=n?0:"-20px",r&&(N.style.width=r);var P=[],V=i?"":a.EDITFORM_CLOSE_BTN;return N.innerHTML=`<div>
                        <div class="bft-edit-form-header" ${R}>
                            ${V}
                            ${a.editUI.renderHeaderContent(g,w,v,y)}
                        </div>
                        <div data-bft-edit-from-btns class="bft-edit-form-instruments">
                        ${function(){if(i)return"";var j="";for(var O in h){var M=h[O];a.isNEU(M)||x&&M.hideIfEditMode||e&&M.hideIfDetailsMode||s&&M.text=="Edit"||(j+=`<div data-edit-from-btn='${O}' class="bft-img-button" ${R} title="${M.text}">${M.icon}</div>`)}return j}()}    
                        </div>
                    </div>
                    <div class="bft-edit-form-fields">
                        <div class="bft-edit-form-fields-inner">
                            <div class="bft-form-fieldset">
                                ${function(){for(var j="",O=0;O<l.length;O++){var M=l[O];if(Array.isArray(M)){j+='<div class="bft-form-field-100 bft-form-fieldset">';for(var F=0;F<M.length;F++){var B=M[F],z=a.elements[B.type](y,B,"unset",e);!a.isNEU(z.id)&&a.isNEU(o)&&a.isNEU(z.value)&&(o=z.id),a.isNEU(z.value)||P.push(`${B.label}: ${z.value}`),j+=z.html}j+="</div>"}else z=a.elements[M.type](y,M,"280px",e),!a.isNEU(z.id)&&a.isNEU(o)&&a.isNEU(z.value)&&(o=z.id),a.isNEU(z.value)||P.push(`${M.label}: ${z.value}`),j+=z.html}return j}()}

                                <div class="bft-form-field" style="min-width: 280px; text-align:center; ${T}">
                                    <a data-add-more-fields-btn href="#" class="bft-link">${c}</a>
                                </div>
                            </div>        
                        </div>
                    </div>
                    <div class="bft-form-fieldset" style="padding: 14px 10px; ${S}">
                        <div class="bft-form-field" style="min-width: initial;">
                            <button data-edit-from-cancel type="button" class="bft-button transparent">${u}</button>
                        </div>
                        <div class="bft-form-field" style="min-width: initial;">
                            <button type="submit" data-edit-from-save type="button" class="bft-button">${d}</button>
                        </div>
                    </div>`,{element:N,focusId:o,title:g,shareText:P.join(`
`)}},a.editUI.prototype.hide=function(){if(a.events.publish("hide",[this])===!1)return!1;a.isNEU(this.interval)&&(clearInterval(this.interval),this.interval=null);var t=this.obj.element.querySelector("[data-bft-edit-form]");t&&t.parentNode&&t.parentNode.removeChild(t)},a.editUI.renderHeaderContent=function(t,e,n,r){return`<h1 class="bft-edit-form-title">${a._escapeGreaterLessSign(t)}</h1>
                <div id="bft-avatar" class="bft-edit-form-avatar">${e}</div>`},a.prototype.getSvg=function(){var t=this.element.getElementsByTagName("svg");return t&&t.length?t[0]:null},a.prototype.getPointerElement=function(){return this.element.querySelector("g[data-pointer]")},a.prototype.getNodeElement=function(t){return this.element.querySelector("["+a.attr.node_id+"='"+t+"']")},a.prototype.getMenuButton=function(){return this.element.querySelector("["+a.attr.control_export_menu+"]")},a.menuUI=function(){},a.menuUI.prototype.init=function(t,e){this.obj=t,this.wrapper=null,this.menu=e,this._event_id=a._guid()},a.menuUI.prototype.showStickIn=function(t,e,n,r){this._show(t,null,e,n,r)},a.menuUI.prototype.show=function(t,e,n,r,i){this._show(t,e,n,r,i)},a.menuUI.prototype._show=function(t,e,n,r,i){var o=this;this.hide();var s="";i||(i=this.menu);var l={firstNodeId:n,secondNodeId:r,menu:i};if(a.events.publish("show",[this,l])===!1)return!1;for(var c in i=l.menu){var d=i[c].icon,u=i[c].text;d===void 0&&(d=a.icon[c]?a.icon[c](24,24,"#7A7A7A"):""),typeof u=="function"&&(u=u()),typeof d=="function"&&(d=d()),s+="<div "+a.attr.item+'="'+c+'">'+d+"<span>&nbsp;&nbsp;"+u+"</span></div>"}if(s!=""){if(this.wrapper=document.createElement("div"),this.wrapper.className="bft-family-menu",this.wrapper.style.left="-99999px",this.wrapper.style.top="-99999px",this.wrapper.innerHTML=s,this.obj.element.appendChild(this.wrapper),e==null){var h=a._menuPosition(t,this.wrapper,this.obj.getSvg());t=h.x,e=h.y}var f=t+45;this.wrapper.style.left=f+"px",this.wrapper.style.top=e+"px",this.wrapper.style.left=f-this.wrapper.offsetWidth+"px";var m=t-this.wrapper.offsetWidth;a.animate(this.wrapper,{opacity:0,left:f-this.wrapper.offsetWidth},{opacity:1,left:m},300,a.anim.inOutPow);for(var v=this.wrapper.getElementsByTagName("div"),y=0;y<v.length;y++)(c=v[y]).addEventListener("click",function(E){var g,w=this.getAttribute(a.attr.item);if(i[w].onClick===void 0)if(w==="add"){var _={id:o.obj.generateId(),pid:n};o.obj.addNode(_,null,!0)}else if(w==="edit"){var b=o.obj.getNode(n);o.obj.editUI.show(b.id)}else w==="details"?(b=o.obj.getNode(n),o.obj.editUI.show(b.id,!0)):w==="remove"?o.obj.removeNode(n,null,!0):w==="svg"?o.obj.exportSVG({filename:"FamilyTree.svg",expandChildren:!1,nodeId:n}):w==="pdf"?o.obj.exportPDF({filename:"FamilyTree.pdf",expandChildren:!1,nodeId:n}):w==="png"?o.obj.exportPNG({filename:"FamilyTree.png",expandChildren:!1,nodeId:n}):w==="csv"?o.obj.exportCSV({nodeId:n}):w==="xml"?o.obj.exportXML({nodeId:n}):w==="json"&&o.obj.exportJSON({nodeId:n});else g=i[w].onClick.call(o.obj,n,r);g!=0&&o.hide()})}},a.menuUI.prototype.isVisible=function(){return this.wrapper!=null},a.menuUI.prototype.hide=function(){this.wrapper!=null&&(this.obj.element.removeChild(this.wrapper),this.wrapper=null)},a.menuUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.circleMenuUI=function(){},a.circleMenuUI.prototype.init=function(t,e){this.obj=t,this.menu=e,this._menu=null,this._buttonsInterval=[],this._linesInterval=[],this._event_id=a._guid()},a.circleMenuUI.prototype.show=function(t,e){this._show(t,e)},a.circleMenuUI.prototype._show=function(t,e){var n=this,r=this.obj.getNode(t),i=a.t(r.templateName,r.min,this.obj.getScale());if(!a.isNEU(i.nodeCircleMenuButton)){var o=this.obj.getSvg(),s=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_id+'="'+t+'"]'),l=this.obj.getNodeElement(t),c=a._getTransform(s),d=a._getTransform(l),u=c[4]+d[4],h=c[5]+d[5],f=s.querySelectorAll("line"),m=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_wrraper_id+"]");if(a.isNEU(m)||m.getAttribute(a.attr.control_node_circle_menu_wrraper_id)!=t){this.hide(),e||(e=this.menu);var v={nodeId:t,menu:e},y=a.events.publish("show",[this,v]);if(this._menu=e,y===!1)return!1;for(var E=0,g=Object.keys(v.menu).length,w=2*i.nodeCircleMenuButton.radius+4,_=2*Math.PI*w,b=_/g-(2*i.nodeCircleMenuButton.radius+2);b<0;)w+=8,b=(_=2*Math.PI*w)/g-(2*i.nodeCircleMenuButton.radius+2);for(var A in(m=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute(a.attr.control_node_circle_menu_wrraper_id,t),m.setAttribute("transform","matrix(1,0,0,1,"+u+","+h+")"),o.appendChild(m),v.menu){var k=v.menu[A].icon,C=v.menu[A].color,x=v.menu[A].text;typeof k=="function"&&(k=k()),typeof C=="function"&&(C=C()),typeof x=="function"&&(x=x());var S=document.createElementNS("http://www.w3.org/2000/svg","g");S.setAttribute("transform","matrix(1,0,0,1,0,0)"),S.setAttribute(a.attr.control_node_circle_menu_name,A),S.style.cursor="pointer";var T=document.createElementNS("http://www.w3.org/2000/svg","title");a.isNEU(x)||(T.innerHTML=x);var R=document.createElementNS("http://www.w3.org/2000/svg","circle");R.setAttribute("cx",0),R.setAttribute("cy",0),R.setAttribute("r",i.nodeCircleMenuButton.radius),R.setAttribute("fill",C),R.setAttribute("stroke-width","1"),R.setAttribute("stroke",i.nodeCircleMenuButton.stroke),S.appendChild(R),S.appendChild(T),S.innerHTML+=k,m.appendChild(S);var N=S.getElementsByTagName("svg")[0];if(N.setAttribute("pointer-events","none"),N){var P=parseInt(N.getAttribute("width")),V=parseInt(N.getAttribute("height"));N.setAttribute("x",-P/2),N.setAttribute("y",-V/2)}var j=E*Math.PI/(g/2);E++;var O=Math.cos(j)*w,M=Math.sin(j)*w;this._buttonsInterval.push(a.animate(S,{transform:[1,0,0,1,0,0]},{transform:[1,0,0,1,O,M]},250,a.anim.outBack,function(F){var B=F[0].getAttribute(a.attr.control_node_circle_menu_name),z=F[0].parentNode.getAttribute(a.attr.control_node_circle_menu_wrraper_id);F[0].addEventListener("mouseenter",function(X){a.events.publish("mouseenter",[n,{from:z,menuItem:v.menu[B],menuItemName:B,event:X}])}),F[0].addEventListener("mouseout",function(X){a.events.publish("mouseout",[n,{from:z,menuItem:v.menu[B],menuItemName:B,event:X}])})}))}this._linesInterval.push(a.animate(f[0],{x1:-i.nodeCircleMenuButton.radius/2,y1:-6,x2:i.nodeCircleMenuButton.radius/2,y2:-6},{x1:-7,y1:-7,x2:7,y2:7},500,a.anim.inOutSin)),this._linesInterval.push(a.animate(f[1],{x1:-i.nodeCircleMenuButton.radius/2,y1:0,x2:i.nodeCircleMenuButton.radius/2,y2:0},{x1:0,y1:0,x2:0,y2:0},500,a.anim.inOutSin)),this._linesInterval.push(a.animate(f[2],{x1:-i.nodeCircleMenuButton.radius/2,y1:6,x2:i.nodeCircleMenuButton.radius/2,y2:6},{x1:-7,y1:7,x2:7,y2:-7},500,a.anim.inOutSin))}else this.hide()}},a.circleMenuUI.prototype.hide=function(){for(var t=this._buttonsInterval.length-1;t>=0;t--)clearInterval(this._buttonsInterval[t]),this._buttonsInterval.splice(t,1);for(this._buttonsInterval=[],t=this._linesInterval.length-1;t>=0;t--)clearInterval(this._linesInterval[t]),this._linesInterval.splice(t,1);this._linesInterval=[];var e=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_wrraper_id+"]");if(e!=null){var n=e.getAttribute(a.attr.control_node_circle_menu_wrraper_id),r=this.obj.getNode(n),i=a.t(r.templateName,r.min,this.obj.getScale()),o=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_id+'="'+n+'"]').querySelectorAll("line");o[0].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),o[0].setAttribute("x2",i.nodeCircleMenuButton.radius/2),o[0].setAttribute("y1",-6),o[0].setAttribute("y2",-6),o[1].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),o[1].setAttribute("x2",i.nodeCircleMenuButton.radius/2),o[1].setAttribute("y1",0),o[1].setAttribute("y2",0),o[2].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),o[2].setAttribute("x2",i.nodeCircleMenuButton.radius/2),o[2].setAttribute("y1",6),o[2].setAttribute("y2",6),e.parentElement.removeChild(e),e=null}},a.circleMenuUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a===void 0&&(a={}),a.idb={version:1,dbName:"BALKAN",tableName:"familytree-js",keyPath:"id"},a.idb.db=null,a.idb._open=function(t){if(a._browser().msie)t&&t(!1);else if((navigator.userAgent.toLowerCase().indexOf("safari")>0||navigator.userAgent.toLowerCase().indexOf("firefox")>0)&&window.location!==window.parent.location)t&&t(!1);else{if(!window.indexedDB)return console.error("Your browser doesn't support a stable version of IndexedDB."),void(t&&t(!1));if(a.idb.db==null){var e=indexedDB.open(a.idb.dbName,a.idb.version);e.onerror=function(n){console.error("Cannot open database!"),t&&t(!1)},e.onsuccess=function(n){a.idb.db=n.target.result,t&&t(!0)},e.onupgradeneeded=function(n){var r=n.target.result;r.objectStoreNames.contains(a.idb.tableName)&&r.deleteObjectStore(a.idb.tableName),r.createObjectStore(a.idb.tableName,{keyPath:a.idb.keyPath})}}else t&&t(!0)}},a.idb.read=function(t,e){a.idb._open(function(n){if(n){var r=a.idb.db.transaction([a.idb.tableName]).objectStore(a.idb.tableName).get(t);r.onerror=function(i){console.error("Unable to retrieve data from database!"),e&&e(!1)},r.onsuccess=function(i){r.result?e&&e(!0,r.result):e&&e(null)}}else e&&e(!1)})},a.idb.write=function(t,e){a.idb.read(t.id,function(n){if(n==null){var r=a.idb.db.transaction([a.idb.tableName],"readwrite").objectStore(a.idb.tableName).add(t);r.onerror=function(i){console.error("Unable to add data to database!"),e&&e(!1)},r.onsuccess=function(i){e&&e(!0)}}else e&&e(n)})},a.idb.put=function(t,e){a.idb._open(function(n){if(n){var r=a.idb.db.transaction([a.idb.tableName],"readwrite").objectStore(a.idb.tableName).put(t);r.onerror=function(i){console.error("Unable to put data to database!"),e&&e(!1)},r.onsuccess=function(i){e&&e(!0)}}else e&&e(!1)})},a.idb.delete=function(t,e){a.idb._open(function(n){if(n){var r=a.idb.db.transaction([a.idb.tableName],"readwrite").objectStore(a.idb.tableName).delete(t);r.onerror=function(i){console.error("Unable to retrieve data from database!"),e&&e(!1)},r.onsuccess=function(i){r.error?e&&e(!1):e&&e(!0)}}else e&&e(!1)})},a.toolbarUI=function(){},a.toolbarUI.expandAllIcon='<svg style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#757575" /></marker><line x1="11" y1="11" x2="6" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="11" x2="26" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="21" x2="26" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="11" y1="21" x2="6" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><rect x="12" y="12" width="8" height="8" fill="#757575"></rect></svg>',a.toolbarUI.fitIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><circle cx="16" cy="16" r="5" fill="#757575"></circle></svg>',a.toolbarUI.openFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><line x1="5" y1="5" x2="27" y2="27" stroke-width="3" stroke="#757575"></line><line x1="5" y1="27" x2="27" y2="5" stroke-width="3" stroke="#757575"></line></svg>',a.toolbarUI.closeFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><rect x="11" y="11" width="10" height="10" stroke-width="3" fill="none" stroke="#757575" ></rect></svg>',a.toolbarUI.zoomInIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-top: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line><line x1="16" y1="8" x2="16" y2="24" stroke-width="3" stroke="#757575"></line></g><line x1="4" y1="32" x2="28" y2="32" stroke-width="1" stroke="#cacaca"></line></svg>',a.toolbarUI.zoomOutIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); margin-bottom:7px; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-bottom: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line></g></svg>',a.toolbarUI.layoutIcon="<svg "+a.attr.tlbr+'="layout" style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M8,24 L16,14 L24,24"></path><path stroke-width="3" fill="none" stroke="#757575" d="M8,16 L16,8 L24,16"></path></svg>',a.toolbarUI.prototype.init=function(t,e){if(e){this.obj=t,this.toolbar=e,this._visible=!1,this.div=document.createElement("div"),this.div.classList.add("bft-toolbar-container"),Object.assign(this.div.style,{position:"absolute",padding:"3px",right:this.obj.config.padding-10+"px",bottom:this.obj.config.padding-10+"px"}),e.expandAll&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="expand">'+a.toolbarUI.expandAllIcon+"</div>"),e.fit&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="fit">'+a.toolbarUI.fitIcon+"</div>"),e.zoom&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="plus">'+a.toolbarUI.zoomInIcon+"</div>",this.div.innerHTML+="<div "+a.attr.tlbr+'="minus">'+a.toolbarUI.zoomOutIcon+"</div>"),e.layout&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="layout">'+a.toolbarUI.layoutIcon+"</div>",this.layouts=document.createElement("div"),this.layouts.classList.add("bft-toolbar-layout"),this.layouts.innerHTML=`<svg data-layout="normal" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line></svg>
            <svg data-layout="treeRightOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="treeLeftOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="mixed" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line><line stroke="#000000" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line></svg>
            <svg data-layout="tree" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="73" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="grid" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="39" y2="39" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="71" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="39" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="39" y2="41" stroke-width="1"></line></svg>`,this.obj.element.appendChild(this.layouts)),e.fullScreen&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="fullScreen">'+a.toolbarUI.openFullScreenIcon+"</div>"),this.obj.element.appendChild(this.div),this.layoutBtn=this.div.querySelector("["+a.attr.tlbr+'="layout"]');var n=this.div.querySelector("["+a.attr.tlbr+'="plus"]'),r=this.div.querySelector("["+a.attr.tlbr+'="minus"]'),i=this.div.querySelector("["+a.attr.tlbr+'="fit"]'),o=this.div.querySelector("["+a.attr.tlbr+'="fullScreen"]'),s=this.div.querySelector("["+a.attr.tlbr+'="expand"]'),l=this;n&&n.addEventListener("click",function(){l.obj.zoom(!0,null,!0)}),r&&r.addEventListener("click",function(){l.obj.zoom(!1,null,!0)}),i&&i.addEventListener("click",function(){l.obj.fit()}),o&&o.addEventListener("click",function(){l.obj.toggleFullScreen()}),s&&s.addEventListener("click",function(){l.obj.expand(null,"all")}),this.layoutBtn&&this.layoutBtn.addEventListener("click",function(){l._visible?l.hideLayout():l.showLayout()}),this.layouts&&this.layouts.addEventListener("click",function(c){for(var d=c.target;d;){if(d.hasAttribute&&d.hasAttribute(a.attr.layout)){d=d.getAttribute(a.attr.layout),l.obj.setLayout(a.layout[d]);break}d=d.parentNode}})}},a.toolbarUI.prototype.showLayout=function(){this._visible=!0,this.layoutBtn.style.transform="rotate(180deg) translateX(0px) translateY(0px)",a.animate(this.div,{bottom:this.obj.config.padding-10},{bottom:this.obj.config.padding+135},this.obj.config.anim.duration,this.obj.config.anim.func),a.animate(this.layouts,{bottom:-145},{bottom:0},this.obj.config.anim.duration,this.obj.config.anim.func)},a.toolbarUI.prototype.hideLayout=function(){this._visible=!1,this.layoutBtn.style.transform="rotate(0deg) translateX(0px) translateY(0px)",a.animate(this.div,{bottom:this.obj.config.padding+135},{bottom:this.obj.config.padding-10},this.obj.config.anim.duration,this.obj.config.anim.func),a.animate(this.layouts,{bottom:0},{bottom:-145},this.obj.config.anim.duration,this.obj.config.anim.func)},a.notifierUI=function(){},a.notifierUI.prototype.init=function(t){this.obj=t},a.notifierUI.prototype.show=function(t,e){if(t==null)return!1;t==1&&(t=a.MAX_NODES_MESS,e="#FFCA28"),t==2&&(t=a.OFFLINE_MESS,e="#FFCA28");var n=document.createElement("div");n.innerHTML=t,Object.assign(n.style,{position:"absolute","background-color":e,color:"#ffffff",padding:"15px","border-radius":"40px",opacity:0,overflow:"hidden","white-space":"nowrap","text-align":"center"}),this.obj.element.appendChild(n);var r=this.obj.width()/2-n.offsetWidth/2,i=this.obj.height()/2-n.offsetHeight/2;n.style.left=r+"px",n.style.top=i+"px";var o=n.offsetWidth;return n.style.width="20px",a.animate(n,{opacity:0,width:10},{opacity:1,width:o},this.obj.config.anim.duration,this.obj.config.anim.func),!0},a===void 0&&(a={}),a._validateConfig=function(t){return!!t||(console.error("config is not defined"),!1)},a._arrayContains=function(t,e){if(t&&Array.isArray(t)){for(var n=t.length;n--;)if(t[n]===e)return!0}return!1},a._interceptions=function(t,e){if(!t)return[];if(!e)return[];var n=[];if(Array.isArray(t)&&Array.isArray(e))for(var r in t)for(var i in e)t[r]==e[i]&&n.push(t[r]);else if(Array.isArray(t)&&!Array.isArray(e))for(var r in t)for(var i in e)t[r]==i&&n.push(t[r]);else if(!Array.isArray(t)&&Array.isArray(e))for(var r in t)for(var i in e)r==e[i]&&n.push(e[i]);return n},a._getTags=function(t){return t.tags&&!Array.isArray(t.tags)?t.tags.split(","):t.tags&&Array.isArray(t.tags)?t.tags:[]},a._centerPointInPercent=function(t,e,n){var r=t.getBoundingClientRect(),i=e-r.left,o=n-r.top;return[i/(r.width/100),o/(r.height/100)]},a._trim=function(t){return t.replace(/^\s+|\s+$/g,"")},a._getTransform=function(t){var e=t.getAttribute("transform");return e=e.replace("matrix","").replace("(","").replace(")",""),a._browser().msie&&(e=e.replace(/ /g,",")),e="["+(e=a._trim(e))+"]",e=JSON.parse(e)},a.getScale=function(t,e,n,r,i,o,s,l){var c=1;if(t||r!==a.match.boundary)if(t||r!==a.match.width)if(t||r!==a.match.height)if(t){var d,u;c=(d=e/t[2])>(u=n/t[3])?u:d}else c=r;else c=n/l;else c=e/s;else c=(d=e/s)>(u=n/l)?u:d;return c&&c>i&&(c=i),c&&c<o&&(c=o),c},a.isObject=function(t){return t&&typeof t=="object"&&!Array.isArray(t)&&t!==null},a.fileUploadDialog=function(t){var e=document.createElement("INPUT");e.setAttribute("type","file"),e.style.display="none",e.onchange=function(){var n=this.files[0];t(n)},document.body.appendChild(e),e.click()},a.mergeDeep=function(t,e){if(a.isObject(t)&&a.isObject(e))for(var n in e)a.isObject(e[n])?(t[n]||Object.assign(t,{[n]:{}}),a.mergeDeep(t[n],e[n])):Object.assign(t,{[n]:e[n]});return t},a._lblIsImg=function(t,e){return!(!t.nodeBinding||typeof e!="string"||e.indexOf("img")==-1||!t.nodeBinding[e])},a._getFistImgField=function(t){if(t.nodeBinding){for(var e in t.nodeBinding)if(e.indexOf("img")!=-1)return t.nodeBinding[e]}return!1},a._fieldIsImg=function(t,e){if(t.nodeBinding){for(var n in t.nodeBinding)if(t.nodeBinding[n]==e)return a._lblIsImg(t,n)}return!1},a._guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},a.htmlRipple=function(t){var e=document.createElement("style");e.type="text/css",e.innerHTML=" .bft-ripple-container {position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .bft-ripple-container span {transform: scale(0);border-radius:100%;position:absolute;opacity:0.75;background-color:#fff;animation: bft-ripple 1000ms; }@-moz-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-webkit-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-o-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}",document.head.appendChild(e);var n,r,i,o=document.createElement("div");o.className="bft-ripple-container",t.addEventListener("mousedown",function(s){var l,c,d,u,h;return c=document.createElement("span"),d=this.offsetWidth,l=this.getBoundingClientRect(),h=s.pageX-l.left-d/2,u="top:"+(s.pageY-l.top-d/2)+"px; left: "+h+"px; height: "+d+"px; width: "+d+"px;",t.rippleContainer.appendChild(c),c.setAttribute("style",u)}),t.addEventListener("mouseup",(n=function(){for(;this.rippleContainer.firstChild;)this.rippleContainer.removeChild(this.rippleContainer.firstChild)},r=2e3,i=void 0,function(){var s,l;return l=this,s=arguments,clearTimeout(i),i=setTimeout(function(){return n.apply(l,s)},r)})),t.rippleContainer=o,t.appendChild(o)},a._moveToBoundaryArea=function(t,e,n,r){var i=e.slice(0);e[0]<n.left&&e[0]<n.right&&(i[0]=n.left>n.right?n.right:n.left),e[0]>n.right&&e[0]>n.left&&(i[0]=n.left>n.right?n.left:n.right),e[1]<n.top&&e[1]<n.bottom&&(i[1]=n.top>n.bottom?n.bottom:n.top),e[1]>n.bottom&&e[1]>n.top&&(i[1]=n.top>n.bottom?n.top:n.bottom),e[0]!==i[0]||e[1]!==i[1]?a.animate(t,{viewBox:e},{viewBox:i},300,a.anim.outPow,function(){r&&r()}):r&&r()},a.randomId=function(){return"_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)},a._getClientXY=function(t){return t.type.indexOf("touch")==-1?{x:t.clientX,y:t.clientY}:t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:void 0},a._getClientTouchesXY=function(t,e){return t.type.indexOf("touch")!=-1?t.touches.length<e+1?{x:null,y:null}:{x:t.touches[e].clientX,y:t.touches[e].clientY}:{x:t.clientX,y:t.clientY}},a._getOffset=function(t,e){t&&(e.x+=t.offsetLeft,e.y+=t.offsetTop,a._getOffset(t.offsetParent,e))},a._getTopLeft=function(t){var e={x:0,y:0};return a._getOffset(t,e),e},a._getOffsetXY=function(t,e){if(e.type.indexOf("touch")==-1)return{x:e.offsetX,y:e.offsetY};if(e.touches.length){var n=a._getTopLeft(t);return{x:e.touches[0].pageX-n.x,y:e.touches[0].pageY-n.y}}if(e.changedTouches.length)return n=a._getTopLeft(t),{x:e.changedTouches[0].pageX-n.x,y:e.changedTouches[0].pageY-n.y}},a._pinchMiddlePointInPercent=function(t,e,n,r){var i=a._getTopLeft(t),o=r.touches[0].pageX-i.x,s=r.touches[0].pageY-i.y,l=r.touches[1].pageX-i.x,c=r.touches[1].pageY-i.y;return[((o-l)/2+l)/(e/100),((s-c)/2+c)/(n/100)]},a._browser=function(){var t=!!window.opr&&!!window.opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e=typeof InstallTrigger<"u",n=/constructor/i.test(window.HTMLElement)||(!window.safari||window.safari!==void 0&&safari.pushNotification).toString()==="[object SafariRemoteNotification]",r=!!document.documentMode,i=!r&&!!window.StyleMedia,o=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{opera:t,firefox:e,safari:n,msie:r,edge:i,chrome:o,blink:(o||t)&&!!window.CSS}},a._menuPosition=function(t,e,n){var r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=e.getBoundingClientRect(),s=r.left-i.left,l=r.top-i.top;return r.top+o.height>i.top+i.height&&(l-=o.height),r.left-o.width<i.left&&(s+=o.width),{x:s,y:l}},a._getTemplate=function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=e[t[r]];if(i&&i.template)return i.template}return n},a._getMin=function(t,e){if(t.tags&&t.tags.length&&e.tags)for(var n=0;n<t.tags.length;n++){var r=e.tags[t.tags[n]];if(r&&r.min===!0)return!0}return e.min},a._getSubLevels=function(t,e){if(t&&t.length)for(var n=0;n<t.length;n++){var r=e[t[n]];if(r&&r.subLevels)return r.subLevels}return 0},a._isHTML=function(t){var e=new DOMParser().parseFromString(t,"text/html");return Array.from(e.body.childNodes).some(n=>n.nodeType===1)},a._getTestDiv=function(){var t=document.getElementById("orgfamily_js_test_div");return t||((t=document.createElement("div")).id="orgfamily_js_test_div",t.style.position="fixed",t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t)),t},a._getLabelSize=function(t){var e=a._getTestDiv();return e.innerHTML="<svg>"+t+"</svg>",e.querySelector("text").getBoundingClientRect()},a.wrapText=function(t,e){var n=e.toLowerCase();if(n.indexOf("<text")==-1||n.indexOf(a.attr.width)==-1||n.indexOf("foreignobject")!=-1||e.indexOf(a.attr.width)==-1||a.ESCAPE_HTML&&typeof str=="string"&&a._isHTML(t))return a._escapeHtml(t);if(!a.ESCAPE_HTML&&a._isHTML(t))return t;var r=a._getTestDiv();e=e.replaceAll("{cw}",0),r.innerHTML="<svg>"+e+"</svg>";var i,o,s=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("text")[0],l=parseFloat(s.getAttribute("x")),c=parseFloat(s.getAttribute("y")),d=s.getAttribute("text-anchor"),u=s.getAttribute(a.attr.width),h=s.getAttribute(a.attr.text_overflow),f="http://www.w3.org/2000/svg",m=r.getElementsByTagName("svg")[0].getElementsByTagName("text")[0];h||(h="ellipsis");var v=h.split("-");if(v.length>1&&(i=parseInt(h.split("-")[1]),v.length>2&&v[2]=="ellipsis"&&(o=!0)),!u)return a._escapeHtml(t);if(u=parseFloat(u),l||(l=0),c||(c=0),l||(d="start"),h=="ellipsis"){m.removeChild(m.firstChild),m.textContent=t;for(var y=m.getComputedTextLength(),E=2;y>u;)m.textContent=t.substring(0,t.length-E),m.textContent+="...",y=m.getComputedTextLength(),E++;return E>2?`<title>${a._escapeHtml(t)}</title>${m.textContent}`:a._escapeHtml(t)}if(h.indexOf("multiline")!=-1){var g=t.split(" "),w=m.getBBox().height;m.textContent="";var _=document.createElementNS(f,"tspan"),b=document.createTextNode(g[0]);_.setAttributeNS(null,"x",l),_.setAttributeNS(null,"y",c),_.setAttributeNS(null,"text-anchor",d),_.appendChild(b),m.appendChild(_),E=1;for(var A=1,k=!1,C=1;C<g.length;C++){var x=_.firstChild.data.length;if(_.firstChild.data+=" "+g[C],_.getComputedTextLength()>u){if(_.firstChild.data=_.firstChild.data.slice(0,x),A++,i&&A>i){if(o&&m.children.length==i){var S=m.children[i-1].textContent;m.children[i-1].textContent=S.substring(0,S.length-3)+"...",k=!0}break}(_=document.createElementNS(f,"tspan")).setAttributeNS(null,"x",l),_.setAttributeNS(null,"y",c+w*E),_.setAttributeNS(null,"text-anchor",d),b=document.createTextNode(g[C]),_.appendChild(b),m.appendChild(_),E++}}var T="";if(m.innerHTML!=null)T=m.innerHTML,m.innerHTML="";else{var R="";for(C=m.childNodes.length-1;C>=0;C--)R=XMLSerializer().serializeToString(m.childNodes[C])+R,m.removeChild(m.childNodes[C]);T=R}return k?`<title>${a._escapeHtml(t)}</title>${T}`:T}},a._downloadFile=function(t,e,n,r,i){var o=new Blob([e],{type:t});if(r==1){var s=URL.createObjectURL(o);window.open(s,"_blank").focus()}else if(navigator.msSaveBlob)navigator.msSaveBlob(o,n);else{var l=document.createElement("a");if(l.download!==void 0){s=URL.createObjectURL(o),l.setAttribute("href",s);var c=n;c.toLowerCase().endsWith(i.toLowerCase())||(c=c+"."+i),l.setAttribute("download",c),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},a._getPosition=function(t,e,n,r){var i={x:e.x,y:e.y};if(n!=null&&(i.x=n),r!=null&&(i.y=n),t&&t.length==3){var o=t[0].indexOf(e.id);o!=-1&&t[1][o].transform!=null&&(n==null&&(i.x=t[1][o].transform[4]),r==null&&(i.y=t[1][o].transform[5]))}return i},a._getOpacity=function(t,e){var n=1;if(t&&t.length==3){var r=t[0].indexOf(e.id);r!=-1&&t[1][r].opacity!=null&&(n=t[1][r].opacity)}return n},a.t=function(t,e,n){var r=a.templates[t];r==null&&console.error(`Template "${t}" does not exist!`);var i=null;if(n!=null&&r.scaleLessThen){var o=[];for(var s in r.scaleLessThen){var l=parseFloat(s);n<l&&o.push(l)}if(o.length>0){o.sort(function(u,h){return u-h});var c=r.scaleLessThen[o[0]];for(var d in c)i==null&&(i=Object.assign({},r)),i[d]=c[d]}}return e?i==null?r.min?r.min:r:i.min?i.min:i:i??r},a.setNodeSize=function(t){var e=a.t(t.templateName,t.min);t.w=e&&e.size?e.size[0]:0,t.h=e&&e.size?e.size[1]:0},a._imgs2base64=function(t,e,n,r){var i=t.getElementsByTagName(e),o=i.length;o==0&&r();for(var s=0;s<o;s++)(function(){var l=s,c=i[l];a._getDataUri(c.getAttribute(n),function(d){d.success&&c.setAttribute(n,d.result),l==o-1&&r()})})()},a._getDataUri=function(t,e){if(t.indexOf("base64")!=-1)e({success:!1});else{var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){n.status===200?r.readAsDataURL(n.response):n.status===404&&e({success:!1,result:n.status})};var r=new FileReader;r.onloadend=function(){e({success:!0,result:r.result})},n.send()}},a._convertStringToArray=function(t,e){return a.ARRAY_FIELDS.indexOf(t)!=-1?a.isNEU(e)?[]:e.split(","):e},a._convertArrayToString=function(t){return!a.isNEU(t)&&Array.isArray(t)?t.join():t},a._csvToArray=function(t,e){e=e||a.CSV_DELIMITER;for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],i=null;i=n.exec(t);){var o,s=i[1];s.length&&s!==e&&r.push([]),o=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],r[r.length-1].push(o)}return r},a._json2xml=function(t){for(var e=document.implementation.createDocument("","",null),n=e.createElement("nodes"),r=0;r<t.length;r++){var i=e.createElement("node"),o=t[r];for(var s in o){var l=o[s];i.setAttribute(s,a._convertArrayToString(l))}n.appendChild(i)}return e.appendChild(n),'<?xml version="1.0" encoding="utf-8" ?>'+new XMLSerializer().serializeToString(e.documentElement)},a._xml2json=function(t){for(var e=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("node"),n=[],r=0;r<e.length;r++){for(var i=e[r],o={},s=0;s<i.attributes.length;s++){var l=i.attributes[s];o[l.name]=a._convertStringToArray(l.name,l.value)}n.push(o)}return n},a.convertNodesToCsv=function(t){return a._json2csv(t)},a._json2csv=function(t){for(var e=[],n=function(s){for(var l="",c=0;c<e.length;c++){var d;(d=e[c]=="reportsTo"?null:s[e[c]]==null?"":s[e[c]])instanceof Date&&(d=d.toLocaleString());var u=(d=d===null?"":d.toString()).replace(/"/g,'""'),h=new RegExp(`("|;|
)`,"g");u.search(h)>=0&&(u='"'+u+'"'),c>0&&(l+=a.CSV_DELIMITER),l+=u}return l+`
`},r="",i=0;i<t.length;i++)for(var o in t[i])a._arrayContains(e,o)||(e.push(o),r+=o+a.CSV_DELIMITER);for(r=r.substring(0,r.length-1),r+=`
`,i=0;i<t.length;i++)r+=n(t[i]);return r=r.substring(0,r.length-1)},a.accentFold=function(t){return(t=t.toString().toLowerCase()).replace(/([Ã Ã¡Ã¢Ã£Ã¤Ã¥])|([Ã§])|([Ã¨Ã©ÃªÃ«])|([Ã¬Ã­Ã®Ã¯])|([Ã±])|([Ã²Ã³Ã´ÃµÃ¶Ã¸])|([ÃŸ])|([Ã¹ÃºÃ»Ã¼])|([Ã¿])|([Ã¦])/g,function(e,n,r,i,o,s,l,c,d,u,h){return n?"a":r?"c":i?"e":o?"i":s?"n":l?"o":c?"s":d?"u":u?"y":h?"ae":void 0})},a.copy=function(t){if(t===null||typeof t!="object"||"isActiveClone"in t)return t;if(t instanceof Date)var e=new t.constructor;else e=t.constructor();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,e[n]=a.copy(t[n]),delete t.isActiveClone);return e},a._getScrollSensitivity=function(){var t=a._browser();return t.msie&&a.scroll.ie?a.scroll.ie:t.edge&&a.scroll.edge?a.scroll.edge:t.safari&&a.scroll.safari?a.scroll.safari:t.chrome&&a.scroll.chrome?a.scroll.chrome:t.firefox&&a.scroll.firefox?a.scroll.firefox:t.opera&&a.scroll.opera?a.scroll.opera:{smooth:a.scroll.smooth,speed:a.scroll.speed}},a.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a.isTrial=function(){return a.remote!==void 0},a.childrenCount=function(t,e){for(var n=0,r=0;r<e.childrenIds.length;r++)t.nodes[e.childrenIds[r]]&&n++;return n},a.childrenTotalCount=function(t,e){for(var n=0,r=0;r<e.childrenIds.length;r++){var i=t.nodes[e.childrenIds[r]];i&&(n++,n+=a.childrenTotalCount(t,i))}return n},a.collapsedChildrenCount=function(t,e){for(var n=0,r=0;r<e.childrenIds.length;r++){var i=t.nodes[e.childrenIds[r]];i&&i.collapsed===!0&&n++}return n},a.collapsedChildrenTotalCount=function(t,e,n){for(var r=0,i=0;i<e.childrenIds.length;i++){var o=t.nodes[e.childrenIds[i]];o&&((n||o.collapsed===!0)&&r++,r+=a.collapsedChildrenTotalCount(t,o,!0))}return r},a._setMinMaxXY=function(t,e){(e.minX==null||t.x!=null&&t.x<e.minX)&&(e.minX=t.x),(e.minY==null||t.y!=null&&t.y<e.minY)&&(e.minY=t.y),(e.maxX==null||t.x!=null&&t.x+t.w>e.maxX)&&(e.maxX=t.x+t.w),(e.maxY==null||t.y!=null&&t.y+t.h>e.maxY)&&(e.maxY=t.y+t.h)},a.getStParentNodes=function(t,e){for(e||(e=[]);t.parent;)t=t.parent;return t.stParent&&(e.push(t.stParent),a.getStParentNodes(t.stParent,e)),e},a.getRootOf=function(t){for(;t&&t.parent;)t=t.parent;return t},a._getViewBox=function(t){var e=null;return t?(e=(e="["+(e=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),e=JSON.parse(e)):null},a.isNEU=function(t){return t==null||t===""},a.gradientCircleForDefs=function(t,e,n,r){function i(s,l,c,d){var u=(d-90)*Math.PI/180;return{x:s+c*Math.cos(u),y:l+c*Math.sin(u)}}function o(s,l,c,d,u){var h=i(s,l,c,u),f=i(s,l,c,d),m=u-d<=180?"0":"1";return["M",h.x,h.y,"A",c,c,0,m,0,f.x,f.y].join(" ")}return Array.isArray(e)||(e=[e,e,e,e,e,e]),`<linearGradient id="${t}_linearColors1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="${e[0]}"></stop>
            <stop offset="100%" stop-color="${e[1]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors2" x1="0.5" y1="0" x2="0.5" y2="1">
            <stop offset="0%" stop-color="${e[1]}"></stop>
            <stop offset="100%" stop-color="${e[2]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors3" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="${e[2]}"></stop>
            <stop offset="100%" stop-color="${e[3]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors4" x1="1" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="${e[3]}"></stop>
            <stop offset="100%" stop-color="${e[4]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors5" x1="0.5" y1="1" x2="0.5" y2="0">
            <stop offset="0%" stop-color="${e[4]}"></stop>
            <stop offset="100%" stop-color="${e[5]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors6" x1="0" y1="1" x2="1" y2="0">
            <stop offset="0%" stop-color="${e[5]}"></stop>
            <stop offset="100%" stop-color="${e[0]}"></stop>
        </linearGradient>        
        <g id="${t}">
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors1)" d="${o(n,n,n,1,60)}"  />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors2)" d="${o(n,n,n,60,120)}"/>
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors3)" d="${o(n,n,n,120,180)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors4)" d="${o(n,n,n,180,240)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors5)" d="${o(n,n,n,240,300)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors6)" d="${o(n,n,n,300,1)}"/>
        </g>`},a._intersectionObserver=function(t,e){typeof IntersectionObserver=="function"?new IntersectionObserver(function(n,r){n.forEach(function(i){var o=i.intersectionRatio>0;i.intersectionRatio==0&&(o=i.isIntersecting),e(o)})}).observe(t):e(!0)},a.convertCsvToNodes=function(t){for(var e=a._csvToArray(t),n=e[0],r=[],i=1;i<e.length;i++){for(var o={},s=0;s<e[i].length;s++){var l=n[s],c=e[i][s];o[n[s]]=a._convertStringToArray(l,c)}o.id.trim()!=""&&r.push(o)}return r},a._escapeHtml=function(t){return a.ESCAPE_HTML&&typeof t=="string"?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},a._escapeDoubleQuotes=function(t){return typeof t=="string"?t.replace(/"/g,"&quot;"):t},a._escapeGreaterLessSign=function(t){return typeof t=="string"?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},a.roundPathCorners=function(t,e,n){function r(C,x,S){var T=x.x-C.x,R=x.y-C.y,N=Math.sqrt(T*T+R*R);return i(C,x,Math.min(1,S/N))}function i(C,x,S){return{x:C.x+(x.x-C.x)*S,y:C.y+(x.y-C.y)*S}}function o(C,x){C.length>2&&(C[C.length-2]=x.x,C[C.length-1]=x.y)}function s(C){return{x:parseFloat(C[C.length-2]),y:parseFloat(C[C.length-1])}}Array.isArray(t)||(t=(t=t.split(/[,\s]/).reduce(function(C,x){var S=x.match("([a-zA-Z])(.+)");return S?(C.push(S[1]),C.push(S[2])):C.push(x),C},[])).reduce(function(C,x){return parseFloat(x)==x&&C.length?C[C.length-1].push(x):C.push([x]),C},[]));var l=[];if(t.length>1){var c=s(t[0]),d=null;t[t.length-1][0]=="Z"&&t[0].length>2&&(d=["L",c.x,c.y],t[t.length-1]=d),l.push(t[0]);for(var u=1;u<t.length;u++){var h=l[l.length-1],f=t[u],m=f==d?t[1]:t[u+1];if(m&&h&&h.length>2&&f[0]=="L"&&m.length>2&&m[0]=="L"){var v,y,E=s(h),g=s(f),w=s(m);n?(v=i(g,h.origPoint||E,e),y=i(g,m.origPoint||w,e)):(v=r(g,E,e),y=r(g,w,e)),o(f,v),f.origPoint=g,l.push(f);var _=i(v,g,.5),b=i(g,y,.5),A=["C",_.x,_.y,b.x,b.y,y.x,y.y];A.origPoint=g,l.push(A)}else l.push(f)}if(d){var k=s(l[l.length-1]);l.push(["Z"]),o(l[0],k)}}else l=t;return l.reduce(function(C,x){return C+x.join(" ")+" "},"")},a._isMoved=function(t){return t.movex!=null||t.movey!=null},a._getDynamicGridCoulumns=function(t){for(var e=1;e<t&&!(t/e-e<=0);e++);return e%2!=0&&e>2&&e--,e},a._changeRootOption=function(t,e,n){for(var r=[],i=0;i<e.length;i++)for(var o=0;o<n.length;o++)if(n[o].has(e[i])){r=n[o];break}for(i=0;i<r.length;i++){var s=t.indexOf(r[i]);s!=-1&&t.splice(s,1)}e.length&&t.push(e[0])},a._convertStringToArrayOnImport=function(t,e){return t=="tags"||t=="pids"?a.isNEU(e)?[]:e.split(","):e},a===void 0&&(a={}),a.icon={},a.icon.png=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M146.747,276.708c0-13.998-9.711-22.352-26.887-22.352c-6.99,0-11.726,0.675-14.204,1.355v44.927 c2.932,0.676,6.539,0.896,11.52,0.896C135.449,301.546,146.747,292.28,146.747,276.708z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M234.344,335.86v45.831h-31.601V229.524h40.184 l31.611,55.759c9.025,16.031,18.064,34.983,24.825,52.154h0.675c-2.257-20.103-2.933-40.643-2.933-63.44v-44.473h31.614v152.167 h-36.117l-32.516-58.703c-9.049-16.253-18.971-35.892-26.438-53.727l-0.665,0.222C233.906,289.58,234.344,311.027,234.344,335.86z M71.556,381.691V231.56c10.613-1.804,25.516-3.159,46.506-3.159c21.215,0,36.353,4.061,46.509,12.192 c9.698,7.673,16.255,20.313,16.255,35.219c0,14.897-4.959,27.549-13.999,36.123c-11.738,11.063-29.123,16.031-49.441,16.031 c-4.522,0-8.593-0.231-11.736-0.675v54.411H71.556V381.691z M453.601,523.353H97.2V419.302h356.4V523.353z M485.652,374.688 c-10.61,3.607-30.713,8.585-50.805,8.585c-27.759,0-47.872-7.003-61.857-20.545c-13.995-13.1-21.684-32.97-21.452-55.318 c0.222-50.569,37.03-79.463,86.917-79.463c19.644,0,34.783,3.829,42.219,7.446l-7.214,27.543c-8.369-3.617-18.752-6.55-35.458-6.55 c-28.656,0-50.341,16.256-50.341,49.22c0,31.382,19.649,49.892,47.872,49.892c7.895,0,14.218-0.901,16.934-2.257v-31.835h-23.493 v-26.869h56.679V374.688z"/></svg>'},a.icon.pdf=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6 c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z"/><path fill="'+n+'" d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729 c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333 c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346 c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365 c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328 c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7 V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593 V232.216h98.582V262.127z"/></svg>'},a.icon.svg=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M338.871,225.672L284.545,386.96h-42.591 l-51.69-161.288h39.967l19.617,68.196c5.508,19.143,10.531,37.567,14.36,57.67h0.717c4.061-19.385,9.089-38.527,14.592-56.953 l20.585-68.918h38.77V225.672z M68.458,379.54l7.415-30.153c9.811,5.021,24.888,10.051,40.439,10.051 c16.751,0,25.607-6.935,25.607-17.465c0-10.052-7.662-15.795-27.05-22.734c-26.8-9.328-44.263-24.168-44.263-47.611 c0-27.524,22.971-48.579,61.014-48.579c18.188,0,31.591,3.823,41.159,8.131l-8.126,29.437c-6.465-3.116-17.945-7.657-33.745-7.657 c-15.791,0-23.454,7.183-23.454,15.552c0,10.296,9.089,14.842,29.917,22.731c28.468,10.536,41.871,25.365,41.871,48.094 c0,27.042-20.812,50.013-65.09,50.013C95.731,389.349,77.538,384.571,68.458,379.54z M453.601,523.353H97.2V419.302h356.4V523.353z M488.911,379.54c-11.243,3.823-32.537,9.103-53.831,9.103c-29.437,0-50.73-7.426-65.57-21.779 c-14.839-13.875-22.971-34.942-22.738-58.625c0.253-53.604,39.255-84.235,92.137-84.235c20.81,0,36.852,4.073,44.74,7.896 l-7.657,29.202c-8.859-3.829-19.849-6.95-37.567-6.95c-30.396,0-53.357,17.233-53.357,52.173c0,33.265,20.81,52.882,50.73,52.882 c8.375,0,15.072-0.96,17.94-2.395v-33.745h-24.875v-28.471h60.049V379.54L488.911,379.54z" /></svg>'},a.icon.csv=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 548.29 548.291" ><path fill="'+n+'" d="M486.2,196.121h-13.164V132.59c0-0.399-0.064-0.795-0.116-1.2c-0.021-2.52-0.824-5-2.551-6.96L364.656,3.677 c-0.031-0.034-0.064-0.044-0.085-0.075c-0.629-0.707-1.364-1.292-2.141-1.796c-0.231-0.157-0.462-0.286-0.704-0.419 c-0.672-0.365-1.386-0.672-2.121-0.893c-0.199-0.052-0.377-0.134-0.576-0.188C358.229,0.118,357.4,0,356.562,0H96.757 C84.893,0,75.256,9.649,75.256,21.502v174.613H62.093c-16.972,0-30.733,13.756-30.733,30.73v159.81 c0,16.966,13.761,30.736,30.733,30.736h13.163V526.79c0,11.854,9.637,21.501,21.501,21.501h354.777 c11.853,0,21.502-9.647,21.502-21.501V417.392H486.2c16.966,0,30.729-13.764,30.729-30.731v-159.81 C516.93,209.872,503.166,196.121,486.2,196.121z M96.757,21.502h249.053v110.006c0,5.94,4.818,10.751,10.751,10.751h94.973v53.861 H96.757V21.502z M258.618,313.18c-26.68-9.291-44.063-24.053-44.063-47.389c0-27.404,22.861-48.368,60.733-48.368 c18.107,0,31.447,3.811,40.968,8.107l-8.09,29.3c-6.43-3.107-17.862-7.632-33.59-7.632c-15.717,0-23.339,7.149-23.339,15.485 c0,10.247,9.047,14.769,29.78,22.632c28.341,10.479,41.681,25.239,41.681,47.874c0,26.909-20.721,49.786-64.792,49.786 c-18.338,0-36.449-4.776-45.497-9.77l7.38-30.016c9.772,5.014,24.775,10.006,40.264,10.006c16.671,0,25.488-6.908,25.488-17.396 C285.536,325.789,277.909,320.078,258.618,313.18z M69.474,302.692c0-54.781,39.074-85.269,87.654-85.269 c18.822,0,33.113,3.811,39.549,7.149l-7.392,28.816c-7.38-3.084-17.632-5.939-30.491-5.939c-28.822,0-51.206,17.375-51.206,53.099 c0,32.158,19.051,52.4,51.456,52.4c10.947,0,23.097-2.378,30.241-5.238l5.483,28.346c-6.672,3.34-21.674,6.919-41.208,6.919 C98.06,382.976,69.474,348.424,69.474,302.692z M451.534,520.962H96.757v-103.57h354.777V520.962z M427.518,380.583h-42.399 l-51.45-160.536h39.787l19.526,67.894c5.479,19.046,10.479,37.386,14.299,57.397h0.709c4.048-19.298,9.045-38.352,14.526-56.693 l20.487-68.598h38.599L427.518,380.583z" /></svg>'},a.icon.json=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 32 32" ><polygon fill="'+n+'"  points="31 11 31 21 29 21 27 15 27 21 25 21 25 11 27 11 29 17 29 11 31 11"/><path fill="'+n+'"  d="M21.3335,21h-2.667A1.6684,1.6684,0,0,1,17,19.3335v-6.667A1.6684,1.6684,0,0,1,18.6665,11h2.667A1.6684,1.6684,0,0,1,23,12.6665v6.667A1.6684,1.6684,0,0,1,21.3335,21ZM19,19h2V13H19Z"/><path fill="'+n+'"  d="M13.3335,21H9V19h4V17H11a2.002,2.002,0,0,1-2-2V12.6665A1.6684,1.6684,0,0,1,10.6665,11H15v2H11v2h2a2.002,2.002,0,0,1,2,2v2.3335A1.6684,1.6684,0,0,1,13.3335,21Z"/><path fill="'+n+'"  d="M5.3335,21H2.6665A1.6684,1.6684,0,0,1,1,19.3335V17H3v2H5V11H7v8.3335A1.6684,1.6684,0,0,1,5.3335,21Z"/><rect fill="'+n+'"  id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/></svg>'},a.icon.excel=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="#ECEFF1" d="M496,432.011H272c-8.832,0-16-7.168-16-16s0-311.168,0-320s7.168-16,16-16h224 c8.832,0,16,7.168,16,16v320C512,424.843,504.832,432.011,496,432.011z" /><path fill="'+n+'" d="M336,176.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,176.011,336,176.011z" /><path fill="'+n+'" d="M336,240.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,240.011,336,240.011z" /><path fill="'+n+'" d="M336,304.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,304.011,336,304.011z" /><path fill="'+n+'" d="M336,368.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,368.011,336,368.011z" /><path fill="'+n+'" d="M432,176.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,176.011,432,176.011z" /><path fill="'+n+'" d="M432,240.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,240.011,432,240.011z" /><path fill="'+n+'" d="M432,304.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,304.011,432,304.011z" /><path fill="'+n+'" d="M432,368.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,368.011,432,368.011z" /><path fill="'+n+'"  d="M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352 c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68 c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z" /><path fill="#FAFAFA" d="M220.032,309.483l-50.592-57.824l51.168-65.792c5.44-6.976,4.16-17.024-2.784-22.464 c-6.944-5.44-16.992-4.16-22.464,2.784l-47.392,60.928l-39.936-45.632c-5.856-6.72-15.968-7.328-22.56-1.504 c-6.656,5.824-7.328,15.936-1.504,22.56l44,50.304L83.36,310.187c-5.44,6.976-4.16,17.024,2.784,22.464 c2.944,2.272,6.432,3.36,9.856,3.36c4.768,0,9.472-2.112,12.64-6.176l40.8-52.48l46.528,53.152 c3.168,3.648,7.584,5.504,12.032,5.504c3.744,0,7.488-1.312,10.528-3.968C225.184,326.219,225.856,316.107,220.032,309.483z" /></svg>'},a.icon.edit=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 528.899 528.899"><path fill="'+n+'" d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981 c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611 C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069 L27.473,390.597L0.3,512.69z" /></svg>'},a.icon.details=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008 C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237 h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931 l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278 c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239 h66.527V486.763z"/><path fill="'+n+'" d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/><path fill="'+n+'" d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/><path fill="'+n+'" d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/><path fill="'+n+'" d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256 c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/></svg>'},a.icon.remove=function(t,e,n){return'<svg width="'+t+'" height="'+e+'"  viewBox="0 0 900.5 900.5"><path fill="'+n+'" d="M176.415,880.5c0,11.046,8.954,20,20,20h507.67c11.046,0,20-8.954,20-20V232.487h-547.67V880.5L176.415,880.5z M562.75,342.766h75v436.029h-75V342.766z M412.75,342.766h75v436.029h-75V342.766z M262.75,342.766h75v436.029h-75V342.766z"/><path fill="'+n+'" d="M618.825,91.911V20c0-11.046-8.954-20-20-20h-297.15c-11.046,0-20,8.954-20,20v71.911v12.5v12.5H141.874 c-11.046,0-20,8.954-20,20v50.576c0,11.045,8.954,20,20,20h34.541h547.67h34.541c11.046,0,20-8.955,20-20v-50.576 c0-11.046-8.954-20-20-20H618.825v-12.5V91.911z M543.825,112.799h-187.15v-8.389v-12.5V75h187.15v16.911v12.5V112.799z"/></svg>'},a.icon.add=function(t,e,n){return'<svg width="'+t+'" height="'+e+'"   viewBox="0 0 922 922"><path fill="'+n+'" d="M922,453V81c0-11.046-8.954-20-20-20H410c-11.045,0-20,8.954-20,20v149h318c24.812,0,45,20.187,45,45v198h149 C913.046,473.001,922,464.046,922,453z" /><path fill="'+n+'" d="M557,667.001h151c11.046,0,20-8.954,20-20v-174v-198c0-11.046-8.954-20-20-20H390H216c-11.045,0-20,8.954-20,20v149h194 h122c24.812,0,45,20.187,45,45v4V667.001z" /><path fill="'+n+'" d="M0,469v372c0,11.046,8.955,20,20,20h492c11.046,0,20-8.954,20-20V692v-12.501V667V473v-4c0-11.046-8.954-20-20-20H390H196 h-12.5H171H20C8.955,449,0,457.955,0,469z" /></svg>'},a.icon.search=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 485.213 485.213"><path fill="'+n+'" d="M471.882,407.567L360.567,296.243c-16.586,25.795-38.536,47.734-64.331,64.321l111.324,111.324 c17.772,17.768,46.587,17.768,64.321,0C489.654,454.149,489.654,425.334,471.882,407.567z" /><path fill="'+n+'" d="M363.909,181.955C363.909,81.473,282.44,0,181.956,0C81.474,0,0.001,81.473,0.001,181.955s81.473,181.951,181.955,181.951 C282.44,363.906,363.909,282.437,363.909,181.955z M181.956,318.416c-75.252,0-136.465-61.208-136.465-136.46 c0-75.252,61.213-136.465,136.465-136.465c75.25,0,136.468,61.213,136.468,136.465 C318.424,257.208,257.206,318.416,181.956,318.416z" /><path fill="'+n+'" d="M75.817,181.955h30.322c0-41.803,34.014-75.814,75.816-75.814V75.816C123.438,75.816,75.817,123.437,75.817,181.955z" /></svg>'},a.icon.xml=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'"  d="M488.426,197.019H475.2v-63.816c0-0.401-0.063-0.799-0.116-1.205c-0.021-2.534-0.827-5.023-2.562-6.992L366.325,3.691 c-0.032-0.031-0.063-0.042-0.085-0.073c-0.633-0.707-1.371-1.298-2.151-1.804c-0.231-0.158-0.464-0.287-0.706-0.422 c-0.676-0.366-1.393-0.675-2.131-0.896c-0.2-0.053-0.38-0.135-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.87v160.542 c0,17.044,13.824,30.876,30.873,30.876h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87V227.89C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.51c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M369.531,374.53h-32.058l-2.156-55.519 c-0.644-17.434-1.298-38.518-1.298-59.611h-0.633c-4.514,18.516-10.547,39.166-16.137,56.162l-17.645,56.601h-25.618 l-15.494-56.157c-4.725-16.996-9.671-37.658-13.123-56.6h-0.43c-0.854,19.585-1.508,41.961-2.586,60.038l-2.576,55.086h-30.343 l9.26-145.035h43.677l14.207,48.421c4.517,16.774,9.041,34.847,12.258,51.843h0.654c4.081-16.77,9.038-35.923,13.774-52.064 l15.493-48.199h42.82L369.531,374.53z M69.992,374.53l41.955-73.385l-40.444-71.65h37.655l12.688,26.465 c4.316,8.828,7.533,15.928,10.99,24.092h0.422c3.438-9.242,6.23-15.694,9.893-24.092l12.274-26.465h37.434l-40.89,70.796 l43.044,74.239h-37.866l-13.134-26.257c-5.376-10.108-8.817-17.639-12.909-26.04h-0.433c-3.009,8.401-6.674,15.932-11.19,26.04 l-12.042,26.257H69.992z M453.601,523.353H97.2V419.302h356.4V523.353z M485.325,374.53h-90.608V229.495h32.933v117.497h57.682 v27.538H485.325z"/></svg>'},a.icon.link=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512.092 512.092"  ><path fill="'+n+'" d="M312.453,199.601c-6.066-6.102-12.792-11.511-20.053-16.128c-19.232-12.315-41.59-18.859-64.427-18.859 c-31.697-0.059-62.106,12.535-84.48,34.987L34.949,308.23c-22.336,22.379-34.89,52.7-34.91,84.318 c-0.042,65.98,53.41,119.501,119.39,119.543c31.648,0.11,62.029-12.424,84.395-34.816l89.6-89.6 c1.628-1.614,2.537-3.816,2.524-6.108c-0.027-4.713-3.87-8.511-8.583-8.484h-3.413c-18.72,0.066-37.273-3.529-54.613-10.581 c-3.195-1.315-6.867-0.573-9.301,1.877l-64.427,64.512c-20.006,20.006-52.442,20.006-72.448,0 c-20.006-20.006-20.006-52.442,0-72.448l108.971-108.885c19.99-19.965,52.373-19.965,72.363,0 c13.472,12.679,34.486,12.679,47.957,0c5.796-5.801,9.31-13.495,9.899-21.675C322.976,216.108,319.371,206.535,312.453,199.601z" /><path fill="'+n+'" d="M477.061,34.993c-46.657-46.657-122.303-46.657-168.96,0l-89.515,89.429c-2.458,2.47-3.167,6.185-1.792,9.387 c1.359,3.211,4.535,5.272,8.021,5.205h3.157c18.698-0.034,37.221,3.589,54.528,10.667c3.195,1.315,6.867,0.573,9.301-1.877 l64.256-64.171c20.006-20.006,52.442-20.006,72.448,0c20.006,20.006,20.006,52.442,0,72.448l-80.043,79.957l-0.683,0.768 l-27.989,27.819c-19.99,19.965-52.373,19.965-72.363,0c-13.472-12.679-34.486-12.679-47.957,0 c-5.833,5.845-9.35,13.606-9.899,21.845c-0.624,9.775,2.981,19.348,9.899,26.283c9.877,9.919,21.433,18.008,34.133,23.893 c1.792,0.853,3.584,1.536,5.376,2.304c1.792,0.768,3.669,1.365,5.461,2.048c1.792,0.683,3.669,1.28,5.461,1.792l5.035,1.365 c3.413,0.853,6.827,1.536,10.325,2.133c4.214,0.626,8.458,1.025,12.715,1.195h5.973h0.512l5.12-0.597 c1.877-0.085,3.84-0.512,6.059-0.512h2.901l5.888-0.853l2.731-0.512l4.949-1.024h0.939c20.961-5.265,40.101-16.118,55.381-31.403 l108.629-108.629C523.718,157.296,523.718,81.65,477.061,34.993z" /></svg>'},a.icon.happy=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M176,176c17.673,0,32,14.327,32,32h32c0-35.346-28.654-64-64-64c-35.346,0-64,28.654-64,64h32 C144,190.327,158.327,176,176,176z"/><path fill="'+n+'" d="M336,144c-35.346,0-64,28.654-64,64h32c0-17.673,14.327-32,32-32c17.673,0,32,14.327,32,32h32 C400,172.654,371.346,144,336,144z"/><path fill="'+n+'" d="M256,368c-53.019,0-96-42.981-96-96h-32c0,70.692,57.308,128,128,128s128-57.308,128-128h-32 C352,325.019,309.019,368,256,368z"/></svg>'},a.icon.sad=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M336,192c-17.673,0-32-14.327-32-32h-32c0,35.346,28.654,64,64,64c35.346,0,64-28.654,64-64h-32 C368,177.673,353.673,192,336,192z"/><path fill="'+n+'" d="M176,224c35.346,0,64-28.654,64-64h-32c0,17.673-14.327,32-32,32s-32-14.327-32-32h-32C112,195.346,140.654,224,176,224z "/><path fill="'+n+'" d="M256,256c-70.692,0-128,57.308-128,128h32c0-53.019,42.981-96,96-96s96,42.981,96,96h32C384,313.308,326.692,256,256,256 z"/></svg>'},a.icon.share=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512">
                <path fill="${n}" d="M406,332c-29.641,0-55.761,14.581-72.167,36.755L191.99,296.124c2.355-8.027,4.01-16.346,4.01-25.124
                    c0-11.906-2.441-23.225-6.658-33.636l148.445-89.328C354.307,167.424,378.589,180,406,180c49.629,0,90-40.371,90-90
                    c0-49.629-40.371-90-90-90c-49.629,0-90,40.371-90,90c0,11.437,2.355,22.286,6.262,32.358l-148.887,89.59
                    C156.869,193.136,132.937,181,106,181c-49.629,0-90,40.371-90,90c0,49.629,40.371,90,90,90c30.13,0,56.691-15.009,73.035-37.806
                    l141.376,72.395C317.807,403.995,316,412.75,316,422c0,49.629,40.371,90,90,90c49.629,0,90-40.371,90-90
                    C496,372.371,455.629,332,406,332z"/>
                </svg>`},a.icon.user=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 24 24">
                <path fill="${n}" d="M12 11.796C14.7189 11.796 16.9231 9.60308 16.9231 6.89801C16.9231 4.19294 14.7189 2.00005 12 2.00005C9.28106 2.00005 7.07692 4.19294 7.07692 6.89801C7.07692 9.60308 9.28106 11.796 12 11.796Z" fill="#030D45"/>
                <path fill="${n}" d="M14.5641 13.8369H9.4359C6.46154 13.8369 4 16.2859 4 19.245C4 19.9593 4.30769 20.5716 4.92308 20.8777C5.84615 21.3879 7.89744 22.0001 12 22.0001C16.1026 22.0001 18.1538 21.3879 19.0769 20.8777C19.5897 20.5716 20 19.9593 20 19.245C20 16.1838 17.5385 13.8369 14.5641 13.8369Z" fill="#030D45"/>
            </svg>`},a.icon.close=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512">
    <path fill="${n}" d="m256 0c-141.49 0-256 114.5-256 256 0 141.49 114.5 256 256 256 141.49 0 256-114.5 256-256 0-141.49-114.5-256-256-256zm-12.284 317.397-58.121 58.132c-6.565 6.553-15.283 10.166-24.557 10.166-19.196 0-34.734-15.526-34.734-34.734 0-9.274 3.612-17.992 10.166-24.557l58.132-58.121c6.785-6.784 6.785-17.783 0-24.568l-58.132-58.121c-6.553-6.565-10.166-15.283-10.166-24.557 0-19.196 15.526-34.734 34.734-34.734 9.274 0 17.992 3.613 24.557 10.166l58.121 58.132c6.785 6.773 17.784 6.773 24.568 0l58.121-58.132c6.565-6.553 15.283-10.166 24.557-10.166 19.196 0 34.734 15.526 34.734 34.734 0 9.274-3.612 17.992-10.166 24.557l-58.132 58.121c-6.785 6.784-6.785 17.783 0 24.568l58.132 58.121c6.553 6.565 10.166 15.283 10.166 24.557 0 19.196-15.526 34.734-34.734 34.734-9.274 0-17.992-3.613-24.557-10.166l-58.121-58.132c-6.784-6.784-17.784-6.773-24.568 0z"/>
    </svg>`},a.icon.undo=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 24 24">
    <path fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM9.25871 7.97395C9.56308 7.693 9.58205 7.21851 9.3011 6.91414C9.02015 6.60978 8.54565 6.5908 8.24129 6.87175L5.99129 8.94867C5.83748 9.09065 5.75 9.29045 5.75 9.49977C5.75 9.7091 5.83748 9.9089 5.99129 10.0509L8.24129 12.1278C8.54565 12.4088 9.02015 12.3898 9.3011 12.0854C9.58205 11.781 9.56308 11.3065 9.25871 11.0256L8.41824 10.2498H14.0385C14.7376 10.2498 15.2069 10.2506 15.5652 10.2862C15.9116 10.3205 16.0724 10.3813 16.1787 10.4501C16.3272 10.5461 16.4537 10.6726 16.5497 10.8211C16.6184 10.9274 16.6793 11.0882 16.7136 11.4345C16.7491 11.7929 16.75 12.2622 16.75 12.9613C16.75 13.6604 16.7491 14.1298 16.7136 14.4881C16.6793 14.8344 16.6185 14.9952 16.5497 15.1015C16.4537 15.2501 16.3272 15.3765 16.1787 15.4726C16.0724 15.5413 15.9116 15.6021 15.5652 15.6365C15.2069 15.672 14.7376 15.6729 14.0385 15.6729H9.5C9.08579 15.6729 8.75 16.0086 8.75 16.4229C8.75 16.8371 9.08579 17.1729 9.5 17.1729H14.0758C14.7279 17.1729 15.2721 17.1729 15.7133 17.1291C16.1748 17.0834 16.6038 16.9839 16.9931 16.7322C17.3199 16.5209 17.5981 16.2427 17.8094 15.916C18.0611 15.5266 18.1605 15.0976 18.2063 14.6361C18.25 14.195 18.25 13.6508 18.25 12.9987V12.924C18.25 12.2718 18.25 11.7276 18.2063 11.2865C18.1605 10.825 18.0611 10.396 17.8093 10.0067C17.5981 9.6799 17.3199 9.40169 16.9931 9.19042C16.6038 8.9387 16.1748 8.83927 15.7133 8.7935C15.2721 8.74975 14.7279 8.74976 14.0758 8.74977L8.41824 8.74977L9.25871 7.97395Z" />
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>
    </svg>`},a.icon.redo=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 24 24" >
    <path fill="#f9f9f9" fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM15.7587 6.87273C15.4543 6.59177 14.9799 6.61075 14.6989 6.91512C14.4179 7.21948 14.4369 7.69398 14.7413 7.97493L15.5818 8.75075H9.96155C7.63558 8.75075 5.75 10.6363 5.75 12.9623C5.75 15.2883 7.63557 17.1738 9.96154 17.1738H14.5C14.9142 17.1738 15.25 16.838 15.25 16.4238C15.25 16.0096 14.9142 15.6738 14.5 15.6738H9.96154C8.464 15.6738 7.25 14.4598 7.25 12.9623C7.25 11.4647 8.464 10.2508 9.96155 10.2508H15.5818L14.7413 11.0266C14.4369 11.3075 14.4179 11.782 14.6989 12.0864C14.9799 12.3908 15.4543 12.4097 15.7587 12.1288L18.0087 10.0519C18.1625 9.90987 18.25 9.71007 18.25 9.50075C18.25 9.29143 18.1625 9.09163 18.0087 8.94965L15.7587 6.87273Z"/>
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>    
    </svg>`},a.icon.ft=function(t,e,n,r,i){return`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512"  >
                <path fill="${n}" d="m336.061 377.731c-5.086-6.54-14.511-7.717-21.049-2.631l-44.012 34.231v-200.331c0-8.284-6.716-15-15-15s-15 6.716-15 15v200.331l-44.011-34.231c-6.538-5.086-15.962-3.908-21.049 2.631-5.086 6.539-3.908 15.963 2.631 21.049l62.429 48.556v49.664c0 8.284 6.716 15 15 15s15-6.716 15-15v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.632-21.049z" />
                <path fill="${n}" d="m271 497v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.631-21.049-5.086-6.54-14.511-7.717-21.049-2.631l-44.011 34.231v-200.331c0-8.284-6.716-15-15-15v318c8.284 0 15-6.716 15-15z" />
                <path fill="${n}" d="m320 512h-128c-8.284 0-15-6.716-15-15s6.716-15 15-15h128c8.284 0 15 6.716 15 15s-6.716 15-15 15z" />
                <path fill="${n}" d="m320 482h-64v30h64c8.284 0 15-6.716 15-15s-6.716-15-15-15z" />
                <path fill="${n}" d="m400 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m112 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m256 222c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m367 111c0-61.206-49.794-111-111-111v222c61.206 0 111-49.794 111-111z" />
            </svg>`},a.icon.addUser=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512" >
                <path fill="${n}" d="M300.434,257.599c-25.945,27.304-60.622,43.875-98.602,43.875c-37.979,0-72.656-16.571-98.602-43.875 c-45.617,28.738-77.826,76.818-85.092,132.736c-1.659,12.77,8.291,24.107,21.201,24.107h225.846 c0-53.371,32.011-99.402,77.838-119.914C330.812,280.165,316.452,267.69,300.434,257.599z"/>
                <ellipse fill="${n}" cx="201.828" cy="133.868" rx="112.229" ry="133.868"/>
                <path fill="${n}" d="M396.486,316.885c-53.794,0-97.558,43.764-97.558,97.558S342.693,512,396.486,512c53.792,0,97.557-43.764,97.557-97.558 S450.279,316.885,396.486,316.885z M435.199,431.315h-21.841v21.841c0,9.318-7.554,16.872-16.872,16.872 c-9.318,0-16.872-7.554-16.872-16.872v-21.841h-21.842c-9.318,0-16.872-7.554-16.872-16.872c0-9.319,7.554-16.872,16.872-16.872 h21.842v-21.841c0-9.318,7.554-16.872,16.872-16.872c9.318,0,16.872,7.554,16.872,16.872v21.841h21.841 c9.318,0,16.872,7.554,16.872,16.872C452.072,423.761,444.518,431.315,435.199,431.315z"/>
            </svg>`},a.icon.daughter=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.879 512.879">
                <path fill="${n}" d="M213.773,238.933c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.872-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C205.239,235.11,209.062,238.933,213.773,238.933z"/>
                <path fill="${n}" d="M256.439,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.568,0.043-11.913 c-3.234-3.354-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.933,322.893,236.412,332.8,256.439,332.8z"/>
                <path fill="${n}" d="M365.666,293.547c-49.826-66.441-75.093-133.623-75.093-199.68c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,68.369,25.31,137.489,75.255,205.542c-12.228,21.623-50.483,76.058-92.322,76.058c-45.218,0-86.255-63.59-94.763-80.614 c-8.388-16.768-24.704-66.765-24.704-98.586v-25.754c20.378-0.572,73.404-3.405,121.813-17.246 c4.531-1.289,7.151-6.016,5.854-10.547c-1.289-4.531-6.008-7.159-10.547-5.854C196.254,153.387,129.114,153.6,128.439,153.6 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,34.935,17.254,87.723,26.496,106.214c0.452,0.905,46.797,90.052,110.037,90.052 s109.585-89.148,110.037-90.052C367.919,299.588,367.603,296.132,365.666,293.547z"/>
                <path fill="${n}" d="M316.173,392.533c-4.71,0-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171 c0,0.051-0.034,0.094-0.034,0.154c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533v8.687c-116.028,1.638-168.917,35.9-178.765,65.417l-8.533,25.6 c-1.493,4.471,0.93,9.301,5.402,10.795C7.172,511.863,8.085,512,8.973,512c3.575,0,6.903-2.261,8.098-5.837l8.533-25.6 c6.076-18.227,48.034-52.335,163.132-53.845c3.106,24.422,19.721,59.682,67.704,59.682c53.999,0,68.267-44.425,68.267-67.917 c0-0.06-0.034-0.111-0.034-0.171c0-0.068,0.034-0.119,0.034-0.179v-17.067C324.706,396.356,320.883,392.533,316.173,392.533z"/>
                <path fill="${n}" d="M256.695,273.067h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.719,0,8.533-3.823,8.533-8.533C265.229,276.89,261.414,273.067,256.695,273.067z"/>
                <path fill="${n}" d="M512.004,501.641l-8.533-25.591c-4.659-13.978-22.34-28.228-49.792-40.141c-4.318-1.877-9.352,0.102-11.23,4.429 c-1.869,4.318,0.111,9.353,4.437,11.221c26.266,11.401,38.178,23.219,40.388,29.884l8.533,25.6 c1.195,3.575,4.523,5.837,8.098,5.837c0.887,0,1.801-0.145,2.697-0.444C511.074,510.942,513.498,506.112,512.004,501.641z"/>
                <path fill="${n}" d="M256.439,0c-115.558,0-179.2,63.642-179.2,179.2V256c0,66.039-24.909,141.611-25.165,142.37 c-1.485,4.471,0.93,9.301,5.402,10.795c4.48,1.476,9.301-0.93,10.795-5.402c1.058-3.191,26.035-78.908,26.035-147.763v-76.8 c0-134.008,88.175-162.133,162.133-162.133c100.454,0,162.133,94.43,162.133,162.133v17.067 c0,34.458-21.111,74.163-41.532,112.572c-18.133,34.116-35.268,66.338-35.268,92.228c0,54.11,35.14,89.873,36.634,91.366 c1.596,1.604,3.772,2.5,6.033,2.5c2.261,0,4.437-0.896,6.033-2.5c1.493-1.493,36.634-37.257,36.634-91.366 c0-53.197-17.562-72.303-19.567-74.3c-3.285-3.285-8.559-3.285-11.904-0.051c-3.354,3.234-3.439,8.61-0.265,12.015 c0.145,0.154,14.669,16.256,14.669,62.336c0,33.937-16.444,60.16-25.617,72.149c-9.19-11.947-25.583-38.05-25.583-72.149 c0-21.632,16.162-52.036,33.271-84.215c21.402-40.252,43.529-81.869,43.529-120.585V179.2C435.639,94.438,362.04,0,256.439,0z"/>
            </svg>`},a.icon.son=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}"  viewBox="0 0 512.002 512.002">
                <path fill="${n}" d="M238.934,213.334c0-4.71-3.823-8.533-8.533-8.533h-34.133c-4.71,0-8.533,3.823-8.533,8.533 c0,4.71,3.823,8.533,8.533,8.533h8.533c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533h8.533 C235.111,221.867,238.934,218.044,238.934,213.334z"/>
                <path fill="${n}" d="M121.601,255.19c4.565,13.466,17.178,49.98,24.371,64.358c13.551,27.11,51.977,72.986,110.029,72.986 s96.478-45.875,110.037-72.986c7.185-14.379,19.797-50.893,24.371-64.358c11.025-2.85,19.191-12.885,19.191-24.789v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-33.69-17.741-95.923-83.354-101.931c-0.137-4.028-1.476-7.27-2.953-9.668 c-8.38-13.559-31.94-16.401-50.227-16.401c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.525,8.525h0.009 c4.702,0,8.525-3.806,8.533-8.516c0.017-5.222,1.937-128.009,136.533-128.009c24.132,0,33.801,5.222,35.703,8.311 c0.282,0.435,0.998,1.604-0.666,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.553,2.509,4.301,4.045,7.253,4.045 c75.656,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.823,8.533,8.533,8.533c4.702,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.831,8.533-8.533,8.533c-3.669,0-6.929,2.347-8.098,5.837c-0.162,0.503-16.964,50.816-25.131,67.149 c-1.297,2.594-32.495,63.548-94.771,63.548s-93.466-60.954-94.763-63.548c-8.166-16.333-24.977-66.645-25.139-67.149 c-1.161-3.49-4.42-5.837-8.098-5.837c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-2.313,0.93-4.412,2.423-5.948 c3.396,7.62,10.607,14.481,23.177,14.481c3.234,0,6.187-1.826,7.637-4.719c7.535-15.061,15.283-30.575,17.399-46.652 c43.665-1.758,108.979-17.323,139.742-41.105c8.201,29.764,32.742,54.596,33.988,55.842c3.337,3.337,8.738,3.337,12.066,0 c3.337-3.336,3.337-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234c0-3.831-2.56-7.202-6.255-8.226 c-3.703-1.024-7.62,0.546-9.591,3.831c-14.549,24.243-94.746,47.061-146.287,47.061c-4.71,0-8.533,3.823-8.533,8.533 c0,13.295-6.127,27.102-13.286,41.6c-2.901-1.604-3.703-4.753-3.78-7.467c0-4.71-3.823-8.533-8.533-8.533 c-14.114,0-25.6,11.486-25.6,25.6v34.133C102.401,242.305,110.576,252.34,121.601,255.19z"/>
                <path fill="${n}" d="M256.001,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.243-3.354-8.619-3.439-12.023-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.328,3.337-3.328,8.73,0,12.066C225.503,322.893,235.982,332.801,256.001,332.801z"/>
                <path fill="${n}" d="M264.79,281.601c0-4.71-3.814-8.533-8.533-8.533h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 C260.976,290.134,264.79,286.311,264.79,281.601z"/>
                <path fill="${n}" d="M511.745,501.394l-8.713-34.756c-4.386-13.158-30.285-55.484-178.765-56.636v-8.934c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171c0,0.051-0.034,0.094-0.034,0.154 c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v8.619C77.168,410.556,21.786,428.203,8.79,467.26l-8.533,34.133 c-1.143,4.574,1.638,9.207,6.212,10.351c4.557,1.143,9.199-1.638,10.342-6.204l8.354-33.51 c9.916-29.739,63.309-44.595,163.132-45.338c3.098,24.431,19.712,59.708,67.704,59.708c47.983,0,64.597-35.063,67.703-59.366 c116.958,0.862,157.628,28.467,162.953,44.373l8.533,34.133c0.973,3.874,4.446,6.46,8.269,6.46c0.691,0,1.382-0.077,2.082-0.256 C510.115,510.601,512.888,505.968,511.745,501.394z"/>
                <path fill="${n}" d="M298.668,230.401c4.71,0,8.533-3.823,8.533-8.533h8.533c4.71,0,8.533-3.823,8.533-8.533c0-4.71-3.823-8.533-8.533-8.533 h-34.133c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h8.533 C290.134,226.578,293.957,230.401,298.668,230.401z"/>
            </svg>`},a.icon.wife=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512" >
                <path fill="${n}" d="M128,307.2c4.719,0,8.533-3.823,8.533-8.533V281.6c0-4.71-3.814-8.533-8.533-8.533c-4.719,0-8.533,3.823-8.533,8.533 v17.067C119.467,303.377,123.281,307.2,128,307.2z"/>
                <path fill="${n}" d="M384,273.067c-4.719,0-8.533,3.823-8.533,8.533v17.067c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533 V281.6C392.533,276.89,388.719,273.067,384,273.067z"/>
                <path fill="${n}" d="M392.183,433.109c-0.162-0.606-0.418-1.152-0.7-1.715c-0.162-0.299-0.196-0.64-0.384-0.93 c-0.094-0.128-0.23-0.196-0.324-0.324c-0.358-0.469-0.802-0.845-1.254-1.246c-0.418-0.375-0.819-0.742-1.306-1.016 c-0.145-0.094-0.23-0.23-0.392-0.316l-34.133-17.067c-2.748-1.357-6.008-1.161-8.55,0.538l-51.209,34.133 c-2.372,1.587-3.797,4.25-3.797,7.1v30.259c-5.077,4.062-17.545,12.407-34.133,12.407c-16.427,0-29.013-8.388-34.133-12.433 v-30.234c0-2.85-1.425-5.513-3.797-7.1l-51.2-34.133c-2.543-1.698-5.803-1.894-8.55-0.538l-34.133,17.067 c-0.154,0.077-0.239,0.213-0.375,0.299c-0.512,0.29-0.939,0.674-1.374,1.075c-0.435,0.384-0.853,0.734-1.186,1.178 c-0.102,0.137-0.256,0.213-0.35,0.35c-0.205,0.307-0.239,0.657-0.401,0.99c-0.265,0.529-0.521,1.05-0.674,1.63 c-0.137,0.529-0.179,1.05-0.205,1.596c-0.034,0.538-0.06,1.058,0.008,1.604c0.068,0.597,0.265,1.143,0.461,1.707 c0.119,0.341,0.111,0.7,0.273,1.024c0.077,0.154,0.222,0.247,0.307,0.393c0.282,0.495,0.666,0.913,1.058,1.348 c0.384,0.427,0.742,0.853,1.186,1.195c0.137,0.102,0.213,0.256,0.35,0.35l51.2,34.133c1.459,0.973,3.106,1.434,4.727,1.434 c2.756,0,5.47-1.331,7.108-3.797c2.62-3.925,1.562-9.225-2.364-11.836l-38.972-25.975l16.555-8.277l43.281,28.851V486.4 c0,2.261,0.896,4.437,2.5,6.033C208.102,493.235,227.2,512,256,512s47.898-18.765,48.7-19.567c1.604-1.596,2.5-3.772,2.5-6.033 v-29.568l43.29-28.851l16.546,8.277l-38.972,25.975c-3.925,2.611-4.983,7.91-2.364,11.836c1.638,2.466,4.352,3.797,7.108,3.797 c1.621,0,3.268-0.461,4.727-1.434l51.2-34.133c0.137-0.094,0.205-0.239,0.333-0.341c0.478-0.35,0.853-0.794,1.254-1.246 c0.358-0.427,0.725-0.811,0.998-1.289c0.085-0.154,0.239-0.247,0.324-0.41c0.171-0.35,0.171-0.725,0.29-1.084 c0.179-0.538,0.367-1.05,0.435-1.613c0.077-0.58,0.051-1.126,0.009-1.698C392.354,434.108,392.32,433.613,392.183,433.109z"/>
                <path fill="${n}" d="M57.037,409.165c0.896,0.29,1.809,0.435,2.697,0.435c3.575,0,6.903-2.261,8.09-5.837 C68.89,400.572,93.867,324.855,93.867,256v-76.8C93.867,45.193,182.033,17.067,256,17.067c25.199,0,77.636,0,85.649,11.128 c0.333,0.452,0.828,1.135,0.128,3.243c-0.956,2.842-0.341,5.965,1.604,8.235c1.946,2.278,4.932,3.362,7.885,2.876 c10.863-1.792,20.412,0.93,29.184,8.354c22.895,19.396,37.683,69.76,37.683,128.299V256c0,77.457,25.071,145.22,26.138,148.062 c1.656,4.412,6.571,6.639,10.991,5.001c4.412-1.655,6.647-6.571,5.001-10.991C460.006,397.406,435.2,330.257,435.2,256v-76.8 c0-50.415-11.486-114.014-43.716-141.321c-9.745-8.243-20.932-12.621-32.836-12.902c-0.683-2.773-1.903-5.035-3.149-6.767 C343.356,1.374,303.258,0,256,0C140.442,0,76.8,63.642,76.8,179.2V256c0,66.039-24.909,141.611-25.156,142.37 C50.15,402.842,52.565,407.672,57.037,409.165z"/>
                <path fill="${n}" d="M91.802,426.923C19.814,444.919,1.195,498.492,0.444,500.77c-1.493,4.471,0.922,9.301,5.393,10.795 C6.733,511.864,7.646,512,8.533,512c3.576,0,6.904-2.261,8.09-5.837c0.162-0.469,16.316-46.942,79.309-62.686 c4.574-1.143,7.356-5.777,6.212-10.351C101.001,428.561,96.367,425.771,91.802,426.923z"/>
                <path fill="${n}" d="M213.333,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.985,2.261,9.148,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564C204.8,235.11,208.614,238.933,213.333,238.933 z"/>
                <path fill="${n}" d="M511.556,500.77c-0.751-2.278-19.371-55.851-91.358-73.847c-4.574-1.161-9.199,1.638-10.342,6.204 c-1.143,4.574,1.638,9.207,6.212,10.351c62.524,15.633,78.66,60.809,79.309,62.686c1.186,3.576,4.514,5.837,8.09,5.837 c0.888,0,1.801-0.137,2.697-0.435C510.635,510.071,513.05,505.242,511.556,500.77z"/>
                <path fill="${n}" d="M256,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.251-3.345-8.61-3.439-12.015-0.247c-0.273,0.247-6.707,6.127-19.669,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.32-3.251-8.67-3.226-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.493,322.893,235.972,332.8,256,332.8z"/>
                <path fill="${n}" d="M298.667,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.994,2.261,9.156,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564 C290.133,235.11,293.948,238.933,298.667,238.933z"/>
                <path fill="${n}" d="M389.129,189.449c-8.542-6.443-30.729-26.957-30.729-44.382c0-4.71-3.814-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,24.678,24.354,47.249,34.014,55.228c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548 s-78.575-48.23-86.229-63.548c-8.542-17.084-33.237-83.379-33.237-115.652v-25.728c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.54-11.947-1.707C279.561,152.994,129.51,153.6,128,153.6 c-4.719,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.385,20.77,55.834,72.986,101.504,72.986 s91.119-52.216,101.504-72.986c8.158-16.316,35.029-86.656,35.029-123.281C392.533,193.587,391.27,191.061,389.129,189.449z"/>
            </svg>`},a.icon.husband=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.007 512.007" >
                <path fill="${n}" d="M121.835,255.249c6.229,16.196,26.803,68.42,41.737,90.82l1.348,2.039c10.957,16.614,29.295,44.425,91.085,44.425 c61.79,0,80.128-27.81,91.085-44.425l1.348-2.039c14.933-22.4,35.507-74.624,41.737-90.82c11.145-2.773,19.43-12.86,19.43-24.849 v-34.133c0-11.127-7.134-20.617-17.067-24.141V128c0-33.69-17.741-95.923-83.362-101.931c-0.128-4.028-1.459-7.27-2.944-9.668 C297.844,2.85,274.292,0,256.005,0c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.516,8.525h0.017 c4.702,0,8.516-3.806,8.533-8.508c0.017-5.231,1.937-128.017,136.533-128.017c24.132,0,33.801,5.222,35.712,8.311 c0.265,0.435,0.99,1.604-0.683,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.562,2.509,4.301,4.045,7.262,4.045 c75.657,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533V230.4 c0,4.702-3.823,8.533-8.533,8.533c-3.558,0-6.741,2.21-7.996,5.538c-0.247,0.674-25.446,67.644-41.771,92.126l-1.399,2.116 c-10.223,15.514-24.235,36.753-76.834,36.753c-52.599,0-66.611-21.239-76.834-36.753l-1.399-2.116 c-16.324-24.482-41.523-91.452-41.771-92.126c-1.254-3.328-4.437-5.538-7.996-5.538c-4.71,0-8.533-3.831-8.533-8.533v-34.133 c0-2.313,0.922-4.412,2.423-5.948c3.089,6.955,9.421,13.21,20.053,14.268l29.193,21.897c2.27,16.623,16.418,29.517,33.664,29.517 h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133h17.067 c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.548-11.947-1.707 l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133c-14.114,0-25.6,11.486-25.6,25.6 c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.469,0-21.077,7.62-24.328,18.022l-16.282-12.211 c6.716-16.23,12.8-40.235,14.524-57.088c26.897-0.478,104.713-3.763,139.332-25.37c7.851,30.31,33.058,55.817,34.321,57.08 c3.336,3.336,8.73,3.336,12.066,0c3.336-3.337,3.336-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234 c0-3.831-2.56-7.202-6.255-8.226c-3.661-1.016-7.629,0.546-9.591,3.831c-12.425,20.693-93.022,29.995-146.287,29.995 c-4.719,0-8.533,3.823-8.533,8.533c0,13.858-6.554,41.515-13.508,58.539c-2.722-1.638-3.49-4.693-3.558-7.339 c0-4.71-3.814-8.533-8.533-8.533c-14.114,0-25.6,11.486-25.6,25.6V230.4C102.405,242.389,110.691,252.476,121.835,255.249z M273.071,213.333c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533 c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067V213.333z M187.738,213.333 c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067V213.333z"/>
                <path fill="${n}" d="M298.663,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.182,7.629-30.319,7.629c-4.719,0-8.533,3.823-8.533,8.533 s3.814,8.533,8.533,8.533c0.725,0,16.853-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.84,315.733,298.646,311.927,298.663,307.226z"/>
                <path fill="${n}" d="M247.471,324.267c-4.719,0-8.533,3.823-8.533,8.533c0,4.71,3.814,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.471z"/>
                <path fill="${n}" d="M511.749,501.393l-8.721-34.756c-12.706-38.135-73.114-56.687-184.67-56.687c-0.879,0-1.758,0-2.645,0.009 c-4.053,0.009-7.544,2.867-8.337,6.852l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052 c4.608,0.896,9.114-2.074,10.044-6.69l15.693-78.114c97.724,0.452,154.436,15.957,163.934,44.373l8.533,34.133 c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256C510.11,510.601,512.892,505.976,511.749,501.393z"/>
                <path fill="${n}" d="M204.634,416.461c-0.794-3.994-4.292-6.861-8.363-6.861c-116.386,0-174.148,17.596-187.477,57.66l-8.533,34.133 c-1.152,4.582,1.638,9.207,6.212,10.351C7.164,511.923,7.864,512,8.547,512c3.823,0,7.296-2.586,8.269-6.46l8.346-33.51 c9.95-29.841,63.667-44.689,164.122-45.338l15.693,78.447c0.913,4.617,5.367,7.629,10.035,6.699 c4.617-0.93,7.62-5.427,6.69-10.044L204.634,416.461z"/>
                <path fill="${n}" d="M256.005,409.6c-14.114,0-25.6,11.486-25.6,25.6c0,11.11,7.159,20.489,17.067,24.021v44.245 c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533V459.23c9.907-3.541,17.067-12.919,17.067-24.03 C281.605,421.086,270.119,409.6,256.005,409.6z M256.005,443.733c-4.71,0-8.533-3.831-8.533-8.533 c0-4.702,3.823-8.533,8.533-8.533c4.71,0,8.533,3.831,8.533,8.533C264.538,439.902,260.715,443.733,256.005,443.733z"/>
            </svg>`},a.icon.father=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.002 512.002" >
                <path fill="${n}" d="M366.934,128.001c0-4.71-3.814-8.533-8.533-8.533c-2.091,0-51.2-0.683-51.2-59.733c0-4.71-3.814-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,75.921,67.584,76.8,68.267,76.8C363.12,136.534,366.934,132.711,366.934,128.001z"/>
                <path fill="${n}" d="M256.001,196.268c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.46,0-21.069,7.62-24.329,18.022l-21.751-16.316 c-3.772-2.825-9.114-2.048-11.947,1.707c-2.825,3.772-2.065,9.122,1.707,11.947l31.189,23.39 c2.278,16.623,16.418,29.517,33.664,29.517h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133 h17.067c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947 c-2.825-3.772-8.175-4.548-11.947-1.707l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133 C267.487,170.668,256.001,182.153,256.001,196.268z M238.934,204.801c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067v-8.533c0-4.702,3.831-8.533,8.533-8.533h34.133c4.702,0,8.533,3.831,8.533,8.533V204.801z M324.268,196.268v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067v-8.533 c0-4.702,3.823-8.533,8.533-8.533h34.133C320.445,187.734,324.268,191.566,324.268,196.268z"/>
                <path fill="${n}" d="M298.659,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.191,7.629-30.319,7.629c-4.71,0-8.533,3.823-8.533,8.533 s3.823,8.533,8.533,8.533c0.725,0,16.845-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.836,315.734,298.642,311.928,298.659,307.226z"/>
                <path fill="${n}" d="M120.986,237.953c4.378,18.611,18.91,76.877,34.048,99.584c10.974,16.452,36.668,54.997,100.966,54.997 s89.993-38.545,100.966-54.997c15.138-22.707,29.67-80.973,34.048-99.584c10.718-3.055,18.586-12.937,18.586-24.619v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-1.109-1.562-110.933-136.533-110.933c-151.842,0-153.6,126.72-153.6,128 c0,4.702,3.806,8.516,8.516,8.525h0.017c4.693,0,8.516-3.806,8.533-8.499c0.017-4.54,2.048-110.959,136.533-110.959 c117.581,0,119.441,90.061,119.467,93.867v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.823,8.533-8.533,8.533c-4.002,0-7.458,2.782-8.337,6.682c-0.162,0.751-16.896,75.52-32.896,99.516 c-10.257,15.386-31.599,47.403-86.767,47.403s-76.51-32.017-86.767-47.403c-15.992-23.979-32.734-98.765-32.905-99.516 c-0.87-3.9-4.326-6.682-8.329-6.682c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-4.702,3.831-8.533,8.533-8.533 c1.323,0,2.637-0.307,3.814-0.896c2.978-1.493,72.986-37.333,72.986-110.037c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,56.678-52.523,88.636-62.08,93.978c-13.022,1.186-23.253,12.169-23.253,25.489v34.133 C102.401,225.016,110.269,234.898,120.986,237.953z"/>
                <path fill="${n}" d="M196.097,416.462c-0.794-3.994-4.292-6.861-8.363-6.861c-140.399,0-168.892,27.409-178.944,57.66l-8.533,34.133 c-1.143,4.582,1.638,9.207,6.204,10.351c0.7,0.179,1.391,0.256,2.082,0.256c3.823,0,7.296-2.586,8.269-6.46l8.354-33.51 c7.339-22.025,31.718-44.527,155.58-45.338l15.693,78.447c0.913,4.617,5.393,7.603,10.035,6.699 c4.625-0.93,7.62-5.427,6.69-10.044L196.097,416.462z"/>
                <path fill="${n}" d="M511.745,501.394l-8.721-34.756c-7.117-21.342-39.689-57.216-178.782-56.678c-4.062,0.009-7.544,2.867-8.337,6.852 l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052c4.591,0.896,9.114-2.074,10.044-6.69l15.693-78.114 c103.714,0.674,148.412,23.484,155.401,44.373l8.533,34.133c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256 C510.106,510.601,512.888,505.976,511.745,501.394z"/>
                <path fill="${n}" d="M256.257,426.668h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,426.668,256.257,426.668z"/>
                <path fill="${n}" d="M256.257,494.934h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,494.934,256.257,494.934z"/>
                <path fill="${n}" d="M247.468,324.268c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.468z"/>
                <path fill="${n}" d="M256.257,460.801h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.71,0,8.533-3.823,8.533-8.533C264.79,464.624,260.967,460.801,256.257,460.801z"/>
            </svg>`},a.icon.mother=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.011 512.011" >
                <path fill="${n}" d="M299.355,445.356c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475c2.304,0,4.523-0.853,6.059-2.475c1.621-1.536,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-5.973C308.23,442.113,302.512,442.199,299.355,445.356z"/>
                <path fill="${n}" d="M276.23,458.668c-1.621,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,5.973 c1.621,1.621,3.84,2.56,6.059,2.56c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.56-3.755,2.56-5.973 c0-2.304-0.939-4.437-2.56-6.059C285.104,455.511,279.387,455.511,276.23,458.668z"/>
                <path fill="${n}" d="M392.539,196.268c0-2.68-1.263-5.205-3.405-6.818c-8.55-6.443-30.729-26.957-30.729-44.382 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533c0,24.678,24.354,47.249,34.014,55.228 c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548s-78.575-48.23-86.229-63.548 c-8.542-17.084-33.237-83.379-33.237-115.652V170.54c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.531-8.175,1.707-11.947c-2.825-3.763-8.166-4.531-11.947-1.707c-65.186,48.887-215.236,49.493-216.747,49.493 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.394,20.77,55.834,72.986,101.504,72.986 s91.11-52.215,101.504-72.986C365.668,303.233,392.539,232.893,392.539,196.268z"/>
                <path fill="${n}" d="M249.947,463.276c-1.536,1.621-2.475,3.84-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475s4.437-0.939,6.059-2.475c1.536-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.939-4.437-2.475-6.059C258.907,460.119,253.104,460.119,249.947,463.276z"/>
                <path fill="${n}" d="M34.139,230.401c0,18.85,6.75,36.659,19.098,50.688c-1.348,5.76-2.031,11.648-2.031,17.579 c0,42.342,34.458,76.8,76.8,76.8c6.494,0,12.954-0.819,19.191-2.432c4.565-1.178,7.305-5.828,6.127-10.394 c-1.178-4.565-5.828-7.305-10.394-6.127c-4.847,1.254-9.865,1.886-14.925,1.886c-32.939,0-59.733-26.795-59.733-59.733 c0-5.922,0.879-11.793,2.603-17.459c0.922-3.021,0.102-6.298-2.133-8.525c-11.307-11.298-17.536-26.308-17.536-42.283 c0-19.251,9.421-37.453,25.199-48.674c3.78-2.688,4.719-7.893,2.116-11.742c-6.707-9.89-10.249-21.461-10.249-33.451 c0-28.843,20.591-53.53,48.947-58.701c2.432-0.452,4.557-1.929,5.811-4.053c18.987-32.137,40.892-56.713,133.888-56.713 c71.714,0,128.947,23.484,142.413,58.436c0.888,2.304,2.731,4.105,5.052,4.949c23.535,8.559,39.356,31.095,39.356,56.081 c0,11.989-3.541,23.561-10.249,33.451c-2.603,3.849-1.664,9.054,2.116,11.742c15.778,11.221,25.199,29.423,25.199,48.674 c0,15.974-6.229,30.984-17.536,42.283c-2.236,2.227-3.055,5.504-2.133,8.525c1.724,5.666,2.603,11.537,2.603,17.459 c0,32.939-26.795,59.733-59.733,59.733c-5.018,0-10.001-0.623-14.814-1.852c-4.574-1.186-9.207,1.579-10.377,6.144 c-1.169,4.574,1.587,9.216,6.153,10.385c6.195,1.587,12.595,2.389,19.038,2.389c42.342,0,76.8-34.458,76.8-76.8 c0-5.931-0.683-11.819-2.031-17.579c12.348-14.029,19.098-31.838,19.098-50.688c0-22.11-9.643-43.128-26.138-57.643 c5.956-11.102,9.071-23.475,9.071-36.224c0-30.865-18.748-58.82-47.044-70.733C395.475,25.704,334.598,0.001,256.919,0.001 c-90.172,0-121.984,21.7-146.62,61.85c-34.475,8.115-59.093,38.921-59.093,74.684c0,12.749,3.115,25.122,9.071,36.224 C43.782,187.274,34.139,208.291,34.139,230.401z"/>
                <path fill="${n}" d="M316.507,424.876c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 c1.621,1.536,3.755,2.475,5.973,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C325.382,421.719,319.664,421.719,316.507,424.876z"/>
                <path fill="${n}" d="M223.664,458.668c-1.536,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C232.624,455.511,226.907,455.511,223.664,458.668z"/>
                <path fill="${n}" d="M337.67,411.905c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.072-12.032,0.085c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475C333.915,414.38,336.048,413.527,337.67,411.905z"/>
                <path fill="${n}" d="M213.339,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C204.806,235.112,208.629,238.935,213.339,238.935z"/>
                <path fill="${n}" d="M256.006,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.043-11.913 c-3.234-3.345-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.336-3.337,8.73,0,12.066C225.499,322.894,235.978,332.801,256.006,332.801z"/>
                <path fill="${n}" d="M298.672,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124s-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.165,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C290.139,235.112,293.962,238.935,298.672,238.935z"/>
                <path fill="${n}" d="M511.571,500.771l-8.533-25.6c-8.883-26.658-62.464-65.212-136.098-65.212c-3.482,0-6.613,2.116-7.919,5.333 c-0.316,0.802-33.015,79.642-103.014,79.642c-69.99,0-102.69-79.181-103.014-79.983c-1.306-3.226-4.437-5.35-7.919-5.35 c-106.001,0-130.97,50.185-136.098,65.57l-8.533,25.6c-1.493,4.471,0.93,9.301,5.402,10.795c4.48,1.502,9.301-0.93,10.795-5.402 l8.533-25.6c8.465-25.412,42.974-52.514,114.381-53.845c9.293,19.703,45.577,85.282,116.454,85.282 c70.827,0,107.102-65.229,116.437-84.898c64.051,1.835,108.339,35.294,114.398,53.461l8.533,25.6 c1.195,3.576,4.523,5.837,8.098,5.837c0.887,0,1.801-0.137,2.697-0.435C510.64,510.073,513.064,505.243,511.571,500.771z"/>
                <path fill="${n}" d="M375.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533C379.295,273.068,375.472,276.891,375.472,281.601z"/>
                <path fill="${n}" d="M188.934,405.847c0-2.219-0.939-4.437-2.56-5.973c-3.157-3.243-8.875-3.243-12.032,0 c-1.621,1.536-2.475,3.755-2.475,5.973c0,2.304,0.853,4.437,2.475,6.059s3.755,2.475,6.059,2.475 c2.219,0,4.437-0.853,5.973-2.475C187.995,410.284,188.934,408.151,188.934,405.847z"/>
                <path fill="${n}" d="M189.531,439.468c2.219,0,4.437-0.939,5.973-2.475c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.157-12.032,0c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 C185.008,438.529,187.227,439.468,189.531,439.468z"/>
                <path fill="${n}" d="M200.624,445.356c-1.621,1.621-2.56,3.755-2.56,6.059c0,2.219,0.939,4.437,2.56,5.973c1.621,1.621,3.755,2.56,6.059,2.56 c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.475-3.755,2.475-5.973c0-2.304-0.853-4.523-2.475-6.059 C209.499,442.199,203.782,442.199,200.624,445.356z"/>
                <path fill="${n}" d="M119.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533S119.472,276.891,119.472,281.601z"/>
            </svg>`},a.icon.teddy=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512">
                <path fill="${n}" d="M234.513,246.613c9.378-1.929,16.555-9.02,21.487-15.863c4.932,6.844,12.109,13.935,21.487,15.863 c1.459,0.299,3.089,0.486,4.873,0.486c6.118,0,13.978-2.304,22.34-10.667c3.337-3.337,3.337-8.73,0-12.066s-8.73-3.337-12.066,0 c-4.361,4.369-8.337,6.212-11.699,5.53c-6.912-1.408-13.611-12.203-16.401-18.364c9.523-3.866,17.067-13.577,17.067-23.799 c0-9.353-9.566-14.933-25.6-14.933c-16.026,0-25.6,5.581-25.6,14.933c0,10.223,7.535,19.934,17.067,23.799 c-2.807,6.178-9.498,16.956-16.401,18.364c-3.405,0.666-7.339-1.178-11.699-5.53c-3.336-3.337-8.73-3.337-12.066,0 s-3.337,8.73,0,12.066C218.104,247.236,228.062,247.91,234.513,246.613z M263.748,190.669c-1.502,2.944-4.873,5.598-7.748,5.598	s-6.246-2.654-7.748-5.598C251.793,189.833,260.207,189.833,263.748,190.669z"/>
                <path fill="${n}" d="M390.033,53.7c1.621,1.613,2.5,3.755,2.5,6.033s-0.879,4.42-2.5,6.025c-3.337,3.337-3.337,8.738,0,12.075 c1.664,1.664,3.849,2.5,6.033,2.5s4.369-0.836,6.033-2.492c4.838-4.838,7.501-11.273,7.501-18.108s-2.662-13.269-7.501-18.099 c-9.984-9.984-26.214-9.984-36.198,0c-3.337,3.328-3.337,8.73,0,12.066s8.73,3.337,12.066,0 C381.303,50.372,386.697,50.372,390.033,53.7z"/>
                <path fill="${n}" d="M311.467,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C298.667,130.79,304.41,136.533,311.467,136.533z"/>
                <path fill="${n}" d="M200.533,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C187.733,130.79,193.476,136.533,200.533,136.533z"/>
                <path fill="${n}" d="M115.934,80.333c2.185,0,4.369-0.836,6.042-2.5c3.328-3.337,3.328-8.738-0.009-12.075c-1.613-1.604-2.5-3.746-2.5-6.025 s0.887-4.42,2.509-6.033c3.209-3.226,8.841-3.226,12.058,0c3.328,3.337,8.738,3.328,12.066,0 c3.337-3.328,3.337-8.738,0.009-12.066c-9.677-9.677-26.539-9.668-36.207-0.009c-4.838,4.838-7.501,11.273-7.501,18.108 s2.662,13.269,7.501,18.108C111.565,79.497,113.749,80.333,115.934,80.333z"/>
                <path fill="${n}" d="M498.552,286.191c-28.262-23.945-91.742-14.2-98.884-13.005c-4.651,0.768-7.791,5.171-7.014,9.813 c0.777,4.651,5.171,7.799,9.813,7.014c17.246-2.867,66.133-6.827,85.052,9.199c5.06,4.284,7.415,9.54,7.415,16.521 c0,3.977-1.476,6.946-4.779,9.626c-24.098,19.567-114.33,5.982-147.063-0.913c-3.703-0.776-7.441,0.981-9.242,4.275 c-1.801,3.311-1.212,7.424,1.434,10.095c0.12,0.119,8.499,8.755,12.493,19.951c-2.125-0.222-4.267-0.367-6.443-0.367 c-37.641,0-68.267,34.458-68.267,76.8c0,7.629,1.024,14.993,2.884,21.956c-3.823,1.715-10.197,3.644-19.951,3.644 c-10.052,0-16.367-2.082-19.908-3.814c1.826-6.912,2.842-14.217,2.842-21.786c0-42.342-30.626-76.8-68.267-76.8 c-2.176,0-4.318,0.145-6.443,0.367c3.994-11.196,12.373-19.831,12.476-19.934c2.671-2.671,3.268-6.775,1.468-10.095 c-1.792-3.319-5.521-5.069-9.259-4.292c-32.725,6.895-122.974,20.48-147.063,0.913c-3.302-2.68-4.779-5.649-4.779-9.626 c0-6.98,2.355-12.228,7.407-16.512c18.867-15.991,67.806-12.066,85.06-9.208c4.651,0.794,9.045-2.364,9.813-7.014 c0.776-4.651-2.364-9.045-7.006-9.813c-7.151-1.195-70.613-10.957-98.884,13.005C4.651,293.649,0,303.863,0,315.733 c0,9.079,3.831,16.998,11.093,22.886c27.179,22.05,102.818,12.783,140.535,6.426c-2.825,5.47-5.188,11.896-6.11,18.825 c-25.216,11.29-43.119,38.98-43.119,71.33c0,42.342,30.626,76.8,68.267,76.8c25.446,0,47.642-15.778,59.383-39.057 c5.743,2.56,14.174,4.924,25.95,4.924c11.674,0,20.164-2.287,26.035-4.77C293.794,496.29,315.938,512,341.333,512 c37.641,0,68.267-34.458,68.267-76.8c0-32.35-17.903-60.041-43.119-71.33c-0.922-6.929-3.277-13.355-6.101-18.825 c37.717,6.357,113.365,15.633,140.527-6.426c7.262-5.888,11.093-13.807,11.093-22.886 C512,303.863,507.349,293.649,498.552,286.191z M170.667,494.933c-28.237,0-51.2-26.795-51.2-59.733s22.963-59.733,51.2-59.733 s51.2,26.795,51.2,59.733S198.904,494.933,170.667,494.933z M392.533,435.2c0,32.939-22.963,59.733-51.2,59.733 c-20.983,0-39.04-14.814-46.942-35.942c-0.145-0.614-0.324-1.186-0.606-1.766c-2.338-6.818-3.652-14.242-3.652-22.025 c0-32.939,22.963-59.733,51.2-59.733C369.57,375.467,392.533,402.261,392.533,435.2z"/>
                <path fill="${n}" d="M307.2,443.733c0,18.825,15.309,34.133,34.133,34.133c18.825,0,34.133-15.309,34.133-34.133 c0-18.825-15.309-34.133-34.133-34.133C322.509,409.6,307.2,424.909,307.2,443.733z M358.4,443.733 c0,9.412-7.654,17.067-17.067,17.067c-9.404,0-17.067-7.654-17.067-17.067c0-9.412,7.663-17.067,17.067-17.067 C350.746,426.667,358.4,434.321,358.4,443.733z"/>
                <path fill="${n}" d="M115.541,118.161c-8.619,21.709-13.141,45.525-13.141,69.572c0,67.849,52.762,136.533,153.6,136.533 s153.6-68.685,153.6-136.533c0-24.491-4.412-47.846-13.107-69.581c26.957-5.76,47.24-29.764,47.24-58.419 C443.733,26.795,416.93,0,384,0c-24.67,0-46.14,14.916-55.108,36.745C307.115,23.859,282.368,17.067,256,17.067 c-26.615,0-51.2,6.716-73.259,19.925C174.08,14.754,153.088,0,128,0C95.061,0,68.267,26.795,68.267,59.733 C68.267,88.397,88.559,112.41,115.541,118.161z M128,17.067c19.226,0,35.021,12.177,40.115,30.054 c-11.085,8.61-21.163,18.816-29.901,30.592c-2.807,3.789-2.014,9.131,1.775,11.938c3.789,2.816,9.139,2.022,11.938-1.766 c8.9-12.006,19.26-22.281,30.788-30.507C204.288,41.95,228.949,34.133,256,34.133c41.429,0,78.396,19.098,104.098,53.786 c1.681,2.253,4.25,3.447,6.869,3.447c1.766,0,3.55-0.546,5.077-1.681c3.78-2.799,4.574-8.149,1.775-11.938 c-8.969-12.092-19.157-22.485-30.345-31.104c5.427-17.374,21.632-29.577,40.525-29.577c23.526,0,42.667,19.14,42.667,42.667 S407.526,102.4,384,102.4c-2.935,0-5.658,1.502-7.228,3.985c-1.553,2.483-1.732,5.589-0.461,8.243 c10.761,22.443,16.222,47.044,16.222,73.105C392.533,247.1,345.634,307.2,256,307.2s-136.533-60.1-136.533-119.467 c0-25.617,5.615-50.901,16.23-73.122c1.263-2.637,1.084-5.751-0.478-8.226c-1.562-2.483-4.292-3.985-7.219-3.985 c-23.526,0-42.667-19.14-42.667-42.667S104.474,17.067,128,17.067z"/>
                <path fill="${n}" d="M256,290.133c47.053,0,85.333-30.626,85.333-68.267c0-36.258-36.489-76.8-85.333-76.8s-85.333,40.542-85.333,76.8 C170.667,259.507,208.947,290.133,256,290.133z M256,162.133c38.451,0,68.267,32.111,68.267,59.733 c0,28.237-30.626,51.2-68.267,51.2c-37.641,0-68.267-22.963-68.267-51.2C187.733,194.244,217.557,162.133,256,162.133z"/>
                <path fill="${n}" d="M170.667,409.6c-18.825,0-34.133,15.309-34.133,34.133c0,18.825,15.309,34.133,34.133,34.133 s34.133-15.309,34.133-34.133C204.8,424.909,189.491,409.6,170.667,409.6z M170.667,460.8c-9.412,0-17.067-7.654-17.067-17.067 c0-9.412,7.654-17.067,17.067-17.067c9.412,0,17.067,7.654,17.067,17.067C187.733,453.146,180.079,460.8,170.667,460.8z"/>
            </svg>`},a.prototype.exportPDFProfile=function(t,e){t=this._defaultExportProfileOptions(t,"pdf"),this._exportProfile(t,e)},a.prototype.exportPDFPreview=function(t){a.pdfPrevUI.show(this,t)},a.prototype.exportPNGProfile=function(t,e){t=this._defaultExportProfileOptions(t,"png"),this._exportProfile(t,e)},a.prototype.shareProfile=function(t){var e;typeof t=="object"?t=(e=t).focusId:e=this.editUI.content(t,!0,!0,"100%",!0);var n=new URL(window.location.href);n.searchParams.append("nodeId",t);var r={title:e.title,text:e.shareText,url:n.href};try{navigator.share(r)}catch(i){console.error("error: "+i)}},a.prototype.exportPDF=function(t,e){t=this._defaultExportOptions(t,"pdf"),this._export(t,e)},a.prototype.exportPNG=function(t,e){t=this._defaultExportOptions(t,"png"),this._export(t,e)},a.prototype.exportSVG=function(t,e){t=this._defaultExportOptions(t,"svg"),this._export(t,e)},a.prototype._defaultExportOptions=function(t,e){return t==null&&(t={}),e=="svg"?(t.ext="svg",t.mime="image/svg+xml"):e=="pdf"?(t.mime="application/pdf",t.ext="pdf"):e=="png"&&(t.mime="image/png",t.ext="png"),t.margin==null&&(t.margin=[50,40,50,40]),t.padding==null&&(t.padding=0),t.landscape==null&&(t.landscape=!1),t.filename==null&&(t.filename="FamilyTree."+t.ext),t.scale==null&&(t.scale="fit"),t.format==null&&(t.format="fit"),t.header==null&&(t.header=""),e=="pdf"&&t.footer==null?t.footer="Page {current-page} of {total-pages}":t.footer==null&&(t.footer=""),t.openInNewTab==null&&(t.openInNewTab=!1),t.mode==null&&(t.mode="bft-"+this.config.mode),t},a.prototype._export=function(t,e){var n=this,r={id:t.nodeId,expandChildren:t.expandChildren,min:t.min};t.margin&&t.margin[0]<2&&(t.margin[0]=2),t.margin&&t.margin[1]<2&&(t.margin[1]=2),t.margin&&t.margin[2]<2&&(t.margin[2]=2),t.margin&&t.margin[3]<2&&(t.margin[3]=2),this._draw(!1,a.action.exporting,r,function(i,o){var s=document.createElement("div");if(s.innerHTML=i,t.padding>0){var l=s.querySelector("svg"),c=a._getViewBox(l);c[0]-=t.padding,c[1]-=t.padding,c[2]+=2*t.padding,c[3]+=2*t.padding,l.setAttribute("viewBox",c.join()),l.setAttribute("width",c[2]),l.setAttribute("height",c[3])}if(t.ext=="svg")if(e)e(t,s.innerHTML);else{(l=s.querySelector("svg")).classList.add("bft-"+n.config.mode);var d={content:s.innerHTML,options:t,styles:""},u=a.events.publish("exportstart",[n,d]),h=n.element.querySelector("[data-bft-styles]");if(h&&(d.styles+=h.outerHTML),d.styles&&(s.childNodes[0].insertAdjacentHTML("afterbegin",d.styles),d.content=s.innerHTML),u===!1||(u=a.events.publish("exportend",[n,d]))===!1)return!1;a._downloadFile(t.mime,d.content,d.options.filename,d.options.openInNewTab,d.options.ext)}else n._pages(t,s.querySelector("svg"),o,function(f){var m={content:s.innerHTML,options:t,pages:f,styles:""},v=a.events.publish("exportstart",[n,m]),y=n.element.querySelector("[data-bft-styles]");if(y&&(m.styles+=y.outerHTML),v===!1)return!1;e||a.loading.show(n),e?e(n,m,s.querySelector("svg")):(m=JSON.stringify(m),a._ajax(n.config.exportUrl+"/v3","POST",m,"arraybuffer",function(E){var g=a.events.publish("exportend",[n,E]);if(a.loading.hide(n),g===!1)return!1;a._downloadFile(t.mime,E,t.filename,t.openInNewTab,t.ext)}))})})},a.prototype.exportCSV=function(t){var e=a._defaultExportProfileOptionsForCSV_SVG_JSON(t,"csv"),n=this.getNode(e.nodeId),r=null;n?(r=[],a._exportIterateForJSON_XML_CSV(this,n,e,r)):e.min===!1||e.expandChildren===!1?a._exportIterateForJSON_XML_CSV(this,this.roots,e,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"csv",filename:t,options:e,nodes:r};if(a.events.publish("exportstart",[this,i])===!1)return!1;var o=a._json2csv(i.nodes),s={ext:i.ext,filename:i.filename,options:e,nodes:i.nodes,content:o};if(a.events.publish("exportend",[this,s])===!1)return!1;a._downloadFile("text/csv;charset=utf-8;","\uFEFF"+s.content,s.options.filename,s.options.openInNewTab,s.ext)},a.prototype.exportXML=function(t){var e=a._defaultExportProfileOptionsForCSV_SVG_JSON(t,"xml"),n=this.getNode(e.nodeId),r=null;n?(r=[],a._exportIterateForJSON_XML_CSV(this,n,e,r)):e.min===!1||e.expandChildren===!1?a._exportIterateForJSON_XML_CSV(this,this.roots,e,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"xml",filename:t,options:e,nodes:r};if(a.events.publish("exportstart",[this,i])===!1)return!1;var o=a._json2xml(i.nodes),s={ext:i.ext,filename:i.filename,options:e,nodes:i.nodes,content:o};if(a.events.publish("exportend",[this,s])===!1)return!1;a._downloadFile("application/xml",s.content,s.options.filename,s.options.openInNewTab,s.ext)},a.prototype.exportJSON=function(t){var e=a._defaultExportProfileOptionsForCSV_SVG_JSON(t,"json"),n=this.getNode(e.nodeId),r=null;n?(r=[],a._exportIterateForJSON_XML_CSV(this,n,e,r)):e.min===!1||e.expandChildren===!1?a._exportIterateForJSON_XML_CSV(this,this.roots,e,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"json",filename:e.filename,options:e,nodes:r};if(a.events.publish("exportstart",[this,i])===!1)return!1;var o={ext:i.ext,filename:i.filename,options:e,nodes:i.nodes,content:JSON.stringify(i.nodes)};if(a.events.publish("exportend",[this,o])===!1)return!1;a._downloadFile("application/json",o.content,o.options.filename,o.options.openInNewTab,o.ext)},a._exportIterateForJSON_XML_CSV=function(t,e,n,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)a._exportIterateForJSON_XML_CSV(t,e[i],n,r);else{var o=t.get(e.id);if(r.push(o),n.min)for(i=0;i<e.stChildrenIds.length;i++)a._exportIterateForJSON_XML_CSV(t,t.getNode(e.stChildrenIds[i]),n,r);else for(i=0;i<e.stChildren.length;i++)a._exportIterateForJSON_XML_CSV(t,e.stChildren[i],n,r);if(n.expandChildren)for(i=0;i<e.childrenIds.length;i++)a._exportIterateForJSON_XML_CSV(t,t.getNode(e.childrenIds[i]),n,r);else for(i=0;i<e.children.length;i++)a._exportIterateForJSON_XML_CSV(t,e.children[i],n,r)}},a.prototype._pages=function(t,e,n,r){t.format=="A5"&&t.scale!="fit"||t.format=="A4"&&t.scale!="fit"||t.format=="A3"&&t.scale!="fit"||t.format=="A2"&&t.scale!="fit"||t.format=="A1"&&t.scale!="fit"||t.format=="Letter"&&t.scale!="fit"||t.format=="Legal"&&t.scale!="fit"?r(this._pagesA100(t,e,t.scale)):t.format=="A5"&&t.scale=="fit"||t.format=="A4"&&t.scale=="fit"||t.format=="A3"&&t.scale=="fit"||t.format=="A2"&&t.scale=="fit"||t.format=="A1"&&t.scale=="fit"||t.format=="Letter"&&t.scale=="fit"||t.format=="Legal"&&t.scale=="fit"?r(this._pagesAfit(t,e,n)):t.format=="fit"&&r(this._pagesFit(t,e))},a.prototype._pagesFit=function(t,e){var n=e.getAttribute("width"),r=e.getAttribute("height"),i=a._getViewBox(e),o={w:parseFloat(n),h:parseFloat(r)};return[{vb:i,size:{w:o.w+(t.margin[1]+t.margin[3]),h:o.h+(t.margin[0]+t.margin[2])},innerSize:o}]},a.prototype._pagesAfit=function(t,e,n){var r=e.getAttribute("width"),i=0,o=0;switch(t.format){case"A5":i=a.A5w,o=a.A5h;break;case"A4":i=a.A4w,o=a.A4h;break;case"A3":i=a.A3w,o=a.A3h;break;case"A2":i=a.A2w,o=a.A2h;break;case"A1":i=a.A1w,o=a.A1h;break;case"Letter":i=a.Letterw,o=a.Letterh;break;case"Legal":i=a.Legalw,o=a.Legalh}var s=t.landscape?o-(t.margin[1]+t.margin[3]):i-(t.margin[1]+t.margin[3]),l=(t.landscape,t.margin[0],t.margin[2],s/r);return this._pagesA100(t,e,100*l,n)},a.prototype._pagesA100=function(t,e,n,r){var i=a._getViewBox(e),o=0,s=0;switch(t.format){case"A5":o=a.A5w,s=a.A5h;break;case"A4":o=a.A4w,s=a.A4h;break;case"A3":o=a.A3w,s=a.A3h;break;case"A2":o=a.A2w,s=a.A2h;break;case"A1":o=a.A1w,s=a.A1h;break;case"Letter":o=a.Letterw,s=a.Letterh;break;case"Legal":o=a.Legalw,s=a.Legalh}var l=i[0],c=i[1],d=i[2],u=i[3],h={w:t.landscape?s-(t.margin[1]+t.margin[3]):o-(t.margin[1]+t.margin[3]),h:t.landscape?o-(t.margin[0]+t.margin[2]):s-(t.margin[0]+t.margin[2])},f={w:t.landscape?s:o,h:t.landscape?o:s};e.setAttribute("width",h.w),e.setAttribute("height",h.h);var m=h.w*(100/n),v=h.h*(100/n),y=l,E=c,g=[],w=!0;if(!a.EXPORT_PAGES_CUT_NODES&&t.scale=="fit"){e.setAttribute("preserveAspectRatio","xMinYMin");for(var _=Object.keys(r.bordersByRootIdAndLevel),b=r.bordersByRootIdAndLevel[_[0]],A=Object.keys(b).length,k=1;k<_.length;k++)A<Object.keys(r.bordersByRootIdAndLevel[_[k]]).length&&(b=r.bordersByRootIdAndLevel[_[k]],A=Object.keys(b).length);for(var C=0,x=0;;){for(x=C;!(A<=C);){if((b[C].maxY-b[C].minY)/(100/n)>h.h){w=!1;break}var S=(b[C].minY-b[x].minY)/(100/n);if(C==A-1&&(S=(b[C].maxY-b[x].minY)/(100/n)),S>h.h)break;C++}if(!w)break;var T=(C==A?b[C-1].maxY:b[C-1].minY)-b[x].minY;if(T==0){w=!1;break}if(R=(R=[y,b[x].minY,m,T]).join(),g.push({vb:R,innerSize:{w:h.x,h:T/(100/n)-1},size:f}),C==A)break;C--}g.length&&(g[g.length-1].innerSize.h+=1)}if(!w||a.EXPORT_PAGES_CUT_NODES||t.scale!="fit")for(e.setAttribute("preserveAspectRatio","xMinYMin slice"),g=[];y<d+l;){for(;E<u+c;){var R;R=(R=[y,E,m,v]).join(),g.push({vb:R,innerSize:h,size:f}),E+=v}y+=m,E=c}return g},a.prototype._defaultExportProfileOptions=function(t,e){return a.isNEU(t)||t.id==null||t.nodeId!=null||(t.nodeId=t.id),(a.isNEU(t)||a.isNEU(t.nodeId))&&console.error("options.nodeId is not defilned"),e=="svg"?(t.ext="svg",t.mime="image/svg+xml"):e=="pdf"?(t.mime="application/pdf",t.ext="pdf"):e=="png"&&(t.mime="image/png",t.ext="png"),t.margin==null&&(t.margin=[50,40,50,40]),t.padding==null&&(t.padding=0),t.landscape==null&&(t.landscape=!1),t.filename==null&&(t.filename="Profile."+t.ext),t.scale==null&&(t.scale="fit"),t.format==null&&(t.format="A4"),t.header==null&&(t.header=""),t.footer==null&&(t.footer=""),t.openInNewTab==null&&(t.openInNewTab=!1),t.mode==null&&(t.mode="bft-"+this.config.mode),t},a._defaultExportProfileOptionsForCSV_SVG_JSON=function(t,e){return a.isNEU(t)&&(t={}),typeof t=="string"&&(t={filename:t}),a.isNEU(t.filename)&&(t.filename=`FamilyTree.${e}`),a.isNEU(t.expandChildren)&&(t.expandChildren=!0),a.isNEU(t.min)&&(t.min=!0),a.isNEU(t.openInNewTab)&&(t.openInNewTab=!1),t},a.prototype._exportProfile=function(t,e){var n=this,r=0,i=0;switch(t.format){case"A5":r=a.A5w,i=a.A5h;break;case"A4":r=a.A4w,i=a.A4h;break;case"A3":r=a.A3w,i=a.A3h;break;case"A2":r=a.A2w,i=a.A2h;break;case"A1":r=a.A1w,i=a.A1h;break;case"Letter":r=a.Letterw,i=a.Letterh;break;case"Legal":r=a.Legalw,i=a.Legalh}var o={w:t.landscape?i-(t.margin[1]+t.margin[3]):r-(t.margin[1]+t.margin[3]),h:t.landscape?r-(t.margin[0]+t.margin[2]):i-(t.margin[0]+t.margin[2])},s={w:t.landscape?i:r,h:t.landscape?r:i},l=this.editUI.content(t.nodeId,!0,!0,"100%",!0).element;a.input.init(l);var c={content:l.outerHTML,options:t,pages:[{vb:"",innerSize:o,size:s}],styles:""};if(!e){if(a.events.publish("exportstart",[n,c])===!1)return!1;a.loading.show(n)}var d=this.element.querySelector("[data-bft-styles]");d&&(c.styles+=d.outerHTML);var u=this.getSvg().querySelector("defs");if(u)for(var h=0;h<u.children.length;h++)u.children[h].nodeName.toLowerCase()=="style"&&(c.styles+=u.children[h].outerHTML);c=JSON.stringify(c),a._ajax(this.config.exportUrl+"/v3","POST",c,"arraybuffer",function(f){if(e)e(n,f);else{var m=a.events.publish("exportend",[n,f]);if(a.loading.hide(n),m===!1)return!1;a._downloadFile(t.mime,f,t.filename,t.openInNewTab,t.ext)}})},a===void 0&&(a={}),a.events=function(){var t={};return{on:function(e,n,r){Array.isArray(t[e])||(t[e]=[]),t[e].push({listener:n,event_id:r})},removeAll:function(e){Array.isArray(t[e])||(t[e]=[]),t[e]=[]},remove:function(e,n,r){var i=!1;if(t[e]&&Array.isArray(t[e])&&t[e].length>0)for(var o=t[e].length-1;o>=0;o--)(!a.isNEU(r)&&!a.isNEU(n)&&t[e][o].event_id==r&&t[e][o].listener==n||!a.isNEU(r)&&a.isNEU(n)&&t[e][o].event_id==r||a.isNEU(r)&&!a.isNEU(n)&&t[e][o].listener==n||a.isNEU(r)&&a.isNEU(n))&&(t[e].splice(o,1),i=!0);return i},has:function(e,n){if(t[e]&&Array.isArray(t[e])&&t[e].length>0){if(a.isNEU(n))return!0;for(var r=0;r<t[e].length;r++)if(t[e][r].event_id==n)return!0}return!1},removeForEventId:function(e){for(var n in t)if(Array.isArray(t[n]))for(var r=t[n].length-1;r>=0;r--)t[n][r].event_id==e&&t[n].splice(r,1)},publish:function(e,n){if(t[e]){for(var r=[],i=0;i<t[e].length;i++){var o=t[e][i];o.event_id!=null&&o.event_id!=n[0]._event_id||r.push(o.listener)}if(r.length>0){var s=!0;for(i=0;i<r.length&&(n.length==1?s=r[i](n[0])&&s:n.length==2?s=r[i](n[0],n[1])&&s:n.length==3?s=r[i](n[0],n[1],n[2])&&s:n.length==4?s=r[i](n[0],n[1],n[2],n[3])&&s:n.length==5&&(s=r[i](n[0],n[1],n[2],n[3],n[4])&&s),s!==!1);i++);return s}}}}}(),a.prototype.importCSV=function(){var t=this,e=document.createElement("INPUT");e.setAttribute("type","file"),e.setAttribute("accept",".csv"),e.style.display="none",e.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var o=i.result,s=a._csvToArray(o),l=[],c=s[0];a._importSetColumnNames(c,function(d){for(var u=1;u<s.length;u++){for(var h={},f=0;f<s[u].length;f++){var m=d[f],v=s[u][f];h[m]=a._convertStringToArray(m,v)}h.id.trim()!=""&&l.push(h)}var y={nodes:l,columnNames:s[0]};a.events.publish("import",[t,y])!=0&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=y.nodes,a.events.publish("updated",[t]),t.filterUI.update(),t.draw())})},i.readAsText(r.files[0])},e.click()},a._importSetColumnNames=function(t,e){if(t.indexOf("id")==-1||t.indexOf("pid")==-1){var n=document.createElement("DIV"),r=document.createElement("P");r.style.padding="5px",r.style.color="rgb(122, 122, 122)",r.innerHTML=a.IMPORT_MESSAGE,n.appendChild(r);var i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("span");i.setAttribute("id","bft-sampleDialog"),i.style.height="260px",i.style.width="400px",i.style.background="white",i.style.border="0.5px solid grey",i.style.position="fixed",i.style.overflow="hidden",i.style.zIndex="99",o.setAttribute("id","title"),o.style.backgroundColor="#e5e5e5",o.style.fontWeight="bold",o.style.color="rgb(122, 122, 122)",o.style.height="20px",o.style.padding="3px 0 0 7px",l.setAttribute("id","close"),l.style.cursor="pointer",l.style.position="absolute",l.style.color="rgb(122, 122, 122)",l.style.fontWeight="bold",l.style.top="2px",l.style.zIndex=100,s.setAttribute("id","content"),s.style.padding="2px",o.innerHTML="Import Organizational Chart Data",l.innerHTML="&times;";var c=document.createElement("HR");c.style.height="0.1px",c.style.backgroundColor="#aeaeae",c.style.border="none",c.style.margin="0",i.appendChild(o),i.appendChild(c),s.appendChild(n),i.appendChild(s),i.appendChild(l),document.body.appendChild(i),a._importCenter(i),l.style.left=i.offsetWidth-20+"px";var d=document.createElement("div");d.setAttribute("id","overlay"),d.style.width="100%",d.style.height="100%",d.style.left=0,d.style.top=0,d.style.position="fixed",d.style.background="grey",d.style.opacity="0.5",d.style.zIndex=98,document.body.appendChild(d),i._overlay=d;var u=document.createElement("LABEL"),h=document.createTextNode("Name:");u.setAttribute("for","bft-id-select"),u.appendChild(h),u.style.fontSize="16px",u.style.color="rgb(122, 122, 122)",u.style.padding="5px",u.style.margin="5px",u.style.width="30%",u.style.textAlign="right",u.style.display="inline-block",n.appendChild(u);var f=document.createElement("SELECT");f.id="bft-id-select",f.style.fontSize="16px",f.style.color="rgb(122, 122, 122)",f.style.padding="5px",f.style.margin="5px",f.style.width="60%",f.style.border="1px solid #aeaeae",n.appendChild(f);var m=document.createElement("BR");n.appendChild(m);for(var v=0;v<t.length;v++){(_=document.createElement("option")).setAttribute("value",t[v]);var y=document.createTextNode(t[v]);_.appendChild(y),f.appendChild(_)}var E=document.createElement("LABEL"),g=document.createTextNode("Reports to:");E.setAttribute("for","pid-select"),E.appendChild(g),E.style.fontSize="16px",E.style.color="rgb(122, 122, 122)",E.style.padding="5px",E.style.margin="5px",E.style.width="30%",E.style.textAlign="right",E.style.display="inline-block",n.appendChild(E);var w=document.createElement("SELECT");for(w.id="pid-select",w.style.fontSize="16px",w.style.color="rgb(122, 122, 122)",w.style.padding="5px",w.style.margin="5px",w.style.width="60%",w.style.border="1px solid #aeaeae",n.appendChild(w),v=0;v<t.length;v++){var _;(_=document.createElement("option")).setAttribute("value",t[v]),y=document.createTextNode(t[v]),_.appendChild(y),w.appendChild(_)}var b=document.createElement("BUTTON");b.innerHTML="Import",b.style.fontSize="16px",b.style.color="rgb(122, 122, 122)",b.style.padding="5px 20px",b.style.margin="20px auto",b.style.display="block",b.onclick=function(){i.style.display="none",i._overlay&&i._overlay.parentNode.removeChild(i._overlay);var k=f.options[f.selectedIndex].value,C=t.indexOf(k);t[C]="id";var x=w.options[w.selectedIndex].value,S=t.indexOf(x);t[S]="pid",e(t)};var A=document.createElement("DIV");return A.appendChild(b),n.appendChild(A),l.onclick=function(k){i._overlay&&i._overlay.parentNode.removeChild(i._overlay),i.parentNode.removeChild(i),k.stopPropagation()},o.onmousedown=function(k){k=k||window.event,i._dragging=!0,i._originalLeft=i.offsetLeft,i._originalTop=i.offsetTop,i._mouseLeft=k.clientX,i._mouseTop=k.clientY},document.onmousemove=function(k){k=k||window.event,i._dragging&&(i.style.left=i._originalLeft+k.clientX-i._mouseLeft+"px",i.style.top=i._originalTop+k.clientY-i._mouseTop+"px")},document.onmouseup=function(k){k=k||window.event,i._dragging&&(i.style.left=i._originalLeft+k.clientX-i._mouseLeft+"px",i.style.top=i._originalTop+k.clientY-i._mouseTop+"px",i._dragging=!1)},i}e(t)},a._importCenter=function(t){t&&(t.style.left=(window.innerWidth-t.offsetWidth)/2+"px",t.style.top=(window.innerHeight-t.offsetHeight)/2+"px")},a.prototype.importXML=function(){var t=this,e=document.createElement("INPUT");e.setAttribute("type","file"),e.setAttribute("accept",".xml"),e.style.display="none",e.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var o=i.result,s=a._xml2json(o);a.events.publish("import",[t,s])!=0&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=s,a.events.publish("updated",[t]),t.filterUI.update(),t.draw())},i.readAsText(r.files[0])},e.click()},a.prototype.importJSON=function(){var t=this,e=document.createElement("INPUT");e.setAttribute("type","file"),e.setAttribute("accept",".json"),e.style.display="none",e.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var o=i.result,s=JSON.parse(o);a.events.publish("import",[t,s])!=0&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=s,a.events.publish("updated",[t]),t.filterUI.update(),t.draw())},i.readAsText(r.files[0])},e.click()},a.prototype.__importJSON=a.prototype.importJSON,a.prototype.importJSON=function(){this.config.roots=[],this.__importJSON()},a.prototype.__importCSV=a.prototype.importCSV,a.prototype.importCSV=function(){this.config.roots=[],this.__importCSV()},a.prototype.__importXML=a.prototype.importXML,a.prototype.importXML=function(){this.config.roots=[],this.__importXML()},a._importSetColumnNames=function(t,e){e(t)},a.prototype.expand=function(t,e,n){this._resetMovableNodes();var r={id:t,ids:e};this._draw(!1,a.action.expand,r,n)},a.prototype.collapse=function(t,e,n){this._resetMovableNodes();var r={id:t,ids:e};this._draw(!1,a.action.collapse,r,n)},a.prototype.expandCollapse=function(t,e,n,r){this._resetMovableNodes(),Array.isArray(e)||(e=[]),Array.isArray(n)||(n=[]);var i={id:t,expandIds:e,collapseIds:n,ids:e.concat(n)};this._draw(!1,a.action.collapse,i,r)},a.prototype.changeRoots=function(t,e,n){this.config.roots=e;var r={id:t,changeRoots:e};this._draw(!1,a.action.update,r,n)},a.prototype._resetMovableNodes=function(){if(a.RESET_MOVABLE_ONEXPANDCOLLAPSE&&this.config.movable!=null){for(var t=!1,e=0;e<this.config.nodes.length;e++){var n=this.config.nodes[e];n.movex!=null&&(n.movex=0,t=!0),n.movey!=null&&(n.movey=0,t=!0)}t&&a.events.publish("updated",[this])}},a.prototype.maximize=function(t,e,n,r){var i=this,o={id:t,options:{}};a.isNEU(o.id)&&(o.id=this.roots[0].id,o.all=!0),o.options.horizontal=!1,o.options.vertical=!1,e&&(o.options.horizontal=e),n&&(o.options.vertical=n),this._draw(!1,a.action.maximize,o,function(){i.ripple(t),r&&r()})},a.prototype.minimize=function(t,e){var n=this,r={id:t};a.isNEU(r.id)&&(r.id=this.roots[0].id,r.all=!0),this._draw(!1,a.action.minimize,r,function(){n.ripple(t),e&&e()})},a.prototype._expCollHandler=function(t){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var e=this.getNode(t),n=this.getCollapsedIds(e);if(n.length){if(a.events.publish("expcollclick",[this,!1,t,n])===!1)return!1;this.expand(t,n,!1)}else{if(a.events.publish("expcollclick",[this,!0,t,e.childrenIds])===!1)return!1;this.collapse(t,e.childrenIds,!1)}},a.prototype._upHandler=function(t){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var e=this._upHandlerCreateArgs(t);if(a.events.publish("up-click",[this,e])===!1)return!1;this.changeRoots(e.id,e.roots,!1)},a.prototype._upHandlerCreateArgs=function(t){var e,n=this.getNode(t),r=Object.assign([],this.config.roots),i=this.getNode(n.pid);if(i&&(e=i),e){if(Array.isArray(r)){var o=r.indexOf(n.id);o!=-1&&r.splice(o,1)}else r=[];r.push(e.id)}return{id:n.id,roots:r}},a.prototype._upHandlerCreateArgs=function(t){var e=this.getNode(t),n=Object.assign([],this.config.roots),r=this.getRecentRootsByNodeId(t);return Array.isArray(n)||(n=[]),a._changeRootOption(n,r,this.manager.rootList),{id:e.id,roots:n}},String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.indexOf(t,this.length-t.length)!==-1}),String.prototype.splice||(String.prototype.splice=function(t,e,n){return this.slice(0,t)+n+this.slice(t+Math.abs(e))}),String.prototype.insert||(String.prototype.insert=function(t,e){return t>0?this.substring(0,t)+e+this.substr(t):e+this}),Array.prototype.unique||Object.defineProperty(Array.prototype,"unique",{value:function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var n=e+1;n<t.length;++n)t[e]===t[n]&&t.splice(n--,1);return t},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.has||Object.defineProperty(Array.prototype,"has",{value:function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return!0;return!1},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.compare||Object.defineProperty(Array.prototype,"compare",{value:function(t){if(this.length!=t.length)return!1;for(var e=0;e<this.length;e++)if(!t.has(this[e]))return!1;return!0},writable:!0,configurable:!0,enumerable:!1}),Object.assign||Object.defineProperty(Object,"assign",{value:function(t,e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(i!=null)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),a.prototype._globalMouseDownHandler=function(t,e){var n={move:"mousemove",up:"mouseup",leave:"mouseleave"};if(e.type.indexOf("touch")!=-1&&(e.touches.length==1?this._touch={x:e.touches[0].clientX,y:e.touches[0].clientY}:this._touch=null,n={move:"touchmove",up:"touchend",touchstart:"touchstart"}),t==e.target)return e.stopPropagation(),e.preventDefault(),void this._mouseDownHandler(t,e,n);if(this.config.nodeMouseClick==a.action.pan){for(var r=e.target;r!=t&&!r.hasAttribute(a.attr.control_expcoll_id)&&!r.hasAttribute(a.attr.control_up_id);)r=r.parentNode;if(!r.hasAttribute(a.attr.control_expcoll_id)&&!r.hasAttribute(a.attr.control_up_id))return e.stopPropagation(),e.preventDefault(),void this._mouseDownHandler(t,e,n)}for(var i=e.target;i!=t;){if(i.hasAttribute(a.attr.node_id))return void this._nodeMouseDownHandler(i,e,n);if(i.hasAttribute(a.attr.control_node_circle_menu_name))return e.stopPropagation(),e.preventDefault(),void this._nodeCircleNodeMenuItemMouseDownHandler(i,e,n);i=i.parentNode}},a.prototype._globalClickHandler=function(t,e){if(e.type.indexOf("touch")!=-1&&this._touch&&e.changedTouches.length==1){if(e.changedTouches.length){var n={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},r=a.t(this.config.template,!1,this.getScale()).size,i=this.getScale(),o=Math.abs(n.x-this._touch.x)/i,s=Math.abs(n.y-this._touch.y)/i;if(this._touch=null,o>r[0]/10||s>r[1]/10)return}}else if(e.type.indexOf("touch")!=-1&&this._touch==null)return;for(var l=e.target;l!=t;){if(l.hasAttribute(a.attr.control_expcoll_id)){var c=l.getAttribute(a.attr.control_expcoll_id),d=this.getNode(c);return void this._expCollHandler(d.id)}if(l.hasAttribute(a.attr.node_id))return c=l.getAttribute(a.attr.node_id),d=this.getNode(c),void this._nodeClickHandler(d.id,e);if(l.hasAttribute(a.attr.control_node_menu_id))return e.stopPropagation(),e.preventDefault(),c=l.getAttribute(a.attr.control_node_menu_id),d=this.getNode(c),void this._nodeMenuClickHandler(d.id,l,e);if(l.hasAttribute(a.attr.control_node_circle_menu_id))return e.stopPropagation(),e.preventDefault(),c=l.getAttribute(a.attr.control_node_circle_menu_id),void this._nodeCircleMenuClickHandler(c);if(l.hasAttribute(a.attr.control_node_circle_menu_name))return e.stopPropagation(),e.preventDefault(),void this._nodeCircleMenuItemClickHandler(l,e);if(l.hasAttribute(a.attr.control_add))return void this._lonelyButtonHandler();if(l.hasAttribute(a.attr.control_up_id))return c=l.getAttribute(a.attr.control_up_id),e.stopPropagation(),e.preventDefault(),void this._upHandler(c);if(l.hasAttribute(a.attr.c_link_from))return void a.events.publish("clink-click",[this,{from:l.getAttribute(a.attr.c_link_from),to:l.getAttribute(a.attr.c_link_to),event:e}]);if(l.hasAttribute(a.attr.s_link_from))return void a.events.publish("slink-click",[this,{from:l.getAttribute(a.attr.s_link_from),to:l.getAttribute(a.attr.s_link_to),event:e}]);l=l.parentNode}},a.prototype._globalContextHandler=function(t,e){for(var n=e.target;n!=t;){if(n.hasAttribute(a.attr.node_id)){var r=n.getAttribute(a.attr.node_id),i=this.getNode(r);return void this._nodeContextHandler(i.id,e)}n=n.parentNode}},a.prototype._nodeContextHandler=function(t,e){e.preventDefault(),a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var n=this.get(t),r=null;if(n!=null&&Array.isArray(n.tags))for(var i=0;i<n.tags.length;i++){var o=n.tags[i];this.config.tags[o]&&this.config.tags[o].nodeContextMenu&&(r=this.config.tags[o].nodeContextMenu)}var s=this.element.getBoundingClientRect(),l=e.clientX-s.left,c=e.clientY-s.top;this.nodeContextMenuUI.show(l,c,t,null,r)},a.prototype._globalDbClickHandler=function(t,e){for(var n=e.target;n!=t;){if(n.hasAttribute(a.attr.node_id)){var r=n.getAttribute(a.attr.node_id),i=this.getNode(r);return void this._nodeDbClickHandler(i.id,e)}n=n.parentNode}},a.prototype._mouseScrollHandler=function(t,e){this.__mouseScrollHandler(this.getSvg(),e)},a.prototype.__mouseScrollHandler=function(t,e){if(e.ctrlKey){if(this.config.mouseScrool==a.action.zoom)return}else if(this.config.mouseScrool==a.action.ctrlZoom||this.config.mouseScrool!=a.action.zoom)return;var n=this,r=!1,i=this.config.zoom.speed,o=this.config.zoom.smooth,s=0,l=this.getScale(),c=a._centerPointInPercent(t,e.pageX,e.pageY),d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){setTimeout(h,20)};e.preventDefault();var u=e.delta||e.wheelDelta;u===void 0&&(u=-e.detail),u=Math.max(-1,Math.min(1,u)),s+=-u*i,r||function h(){r=!0;var f=(s-l)/o;f>0?f++:f--,l+=f,n.zoom(1-f/12/50,c),parseInt(l)==parseInt(s)?r=!1:d(h)}()},a.prototype._nodeCircleNodeMenuItemMouseDownHandler=function(t,e,n){var r=t.parentNode.getAttribute(a.attr.control_node_circle_menu_wrraper_id),i=t.getAttribute(a.attr.control_node_circle_menu_name),o=this.nodeCircleMenuUI._menu[i];if(o.draggable){var s=this,l=a._getClientXY(e),c=this.getNode(r);t._dragEventFired=!1;var d=s.getScale(),u=null,h=null;this._gragStartedId=r,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var f=this.getSvg(),m={x:l.x,y:l.y},v=t.cloneNode(!0);f.insertBefore(v,f.firstChild);var y=a._getTransform(v),E=y[4],g=y[5],w=function(k){for(;k&&!k.hasAttribute(a.attr.control_node_circle_menu_wrraper_id);)k=k.parentNode;if(k){var C=a._getTransform(k);return{x:C[4],y:C[5]}}console.error("cannot find parent"+a.attr.control_node_circle_menu_wrraper_id)}(t);v.setAttribute("transform","matrix(1,0,0,1,"+(E+w.x)+","+(g+w.y)+")"),v.style.opacity=.7;var _=function(k,C){if(k!=null){C.classList.remove("bft-drag-over");for(var x=a.getStParentNodes(s.getNode(u)),S=0;S<x.length;S++){var T=s.getNodeElement(x[S].id);T&&(T.style.opacity=1)}}},b=function(k){if(m){var C=a._getClientXY(k),x=k.target;a.isMobile()&&(x=document.elementFromPoint(C.x,C.y)),C.x+=w.x*d,C.y+=w.y*d;var S=a._getOffsetXY(s.element,k),T={left:s.width()-(S.x+s.config.padding)<0,right:S.x-s.config.padding<0,up:s.height()-(S.y+s.config.padding)<0,down:S.y-s.config.padding<0};if(T.left||T.right||T.up||T.down){f.classList&&(f.classList.remove("bft-cursor-grab"),f.classList.add("bft-cursor-move"),f.classList.remove("bft-cursor-nodrop"),f.classList.remove("bft-cursor-copy"));var R=y[4],N=y[5],P=m.x,V=m.y,j=C.x,O=C.y;s.moveStart(T,function(K){y[4]=R+K.x,y[5]=N+K.y,m.x=P-K.xWithoutScale,m.y=V-K.yWithoutScale,C.x=j-K.xWithoutScale,C.y=O-K.yWithoutScale,v.setAttribute("transform","matrix("+y.toString()+")")})}else{for(s.moveEnd(),f.classList&&(f.classList.add("bft-cursor-grab"),f.classList.remove("bft-cursor-move"),f.classList.remove("bft-cursor-nodrop"),f.classList.remove("bft-cursor-copy")),_(u,h),u=null,h=null;x!=null&&x!=f;){if(x.hasAttribute&&x.hasAttribute(a.attr.node_id)){var M=x.getAttribute(a.attr.node_id);u=M,h=x;break}x=x.parentNode}if(u!=null){h.classList.add("bft-drag-over");for(var F=s.getNode(u),B=a.getStParentNodes(F),z=0;z<B.length;z++){var X=s.getNodeElement(B[z].id);X&&(X.style.opacity=.1)}f.classList.remove("bft-cursor-grab"),f.classList.remove("bft-cursor-move"),f.classList.add("bft-cursor-copy"),f.classList.remove("bft-cursor-nodrop")}var Y=(C.x-m.x)/d,q=(C.y-m.y)/d;y[4]=E+Y,y[5]=g+q,!t._dragEventFired&&(Math.abs(C.x-m.x)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(C.y-m.y)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(a.events.publish("drag",[s.nodeCircleMenuUI,{from:M,menuItem:o,menuItemName:i}])===!1&&A(),t._dragEventFired=!0),v.setAttribute("transform","matrix("+y.toString()+")")}}},A=function(k){if(s.moveEnd(),f.classList&&(f.classList.remove("bft-cursor-grab"),f.classList.remove("bft-cursor-move"),f.classList.remove("bft-cursor-nodrop"),f.classList.remove("bft-cursor-copy")),f.removeEventListener(n.move,b),f.removeEventListener(n.up,A),n.leave&&f.removeEventListener(n.leave,A),c.id==u||u==null)return f.removeChild(v),s._gragStartedId=null,void(t._dragEventFired&&a.events.publish("drop",[s.nodeCircleMenuUI,{from:c.id,menuItemName:i,menuItem:o,event:k}]));var C=s.getNode(u);a.events.publish("drop",[s.nodeCircleMenuUI,{from:c.id,to:C.id,menuItem:o,menuItemName:i,event:k}]),_(u,h),f.removeChild(v),s._gragStartedId=null};f.addEventListener(n.move,b),f.addEventListener(n.up,A),n.leave&&f.addEventListener(n.leave,A)}},a.prototype._nodeMouseDownHandler=function(t,e,n){var r=t.getAttribute(a.attr.node_id),i=this.getNode(r);this.config.movable&&!a.getRootOf(i).stParent?this._movableHandler(t,e,n):this.config.enableDragDrop&&this._dragDropHandler(t,e,n)},a.prototype._movableHandler=function(t,e,n){var r=this,i=t.getAttribute(a.attr.node_id),o=[],s=function(O,M){if(Array.isArray(O))for(var F=0;F<O.length;F++)s(O[F],M);else{for(M.push(O.id),F=0;F<O.stChildren.length;F++)s(O.stChildren[F],M);for(F=0;F<O.children.length;F++)s(O.children[F],M)}},l=function(O,M){if(Array.isArray(O))for(var F=0;F<O.length;F++)s(O[F],M);else{for(M.push(O.id),F=0;F<O.stChildrenIds.length;F++)l(r.getNode(O.stChildrenIds[F]),M);for(F=0;F<O.childrenIds.length;F++)l(r.getNode(O.childrenIds[F]),M)}},c=this.getNode(i);s(c,o);for(var d=this.getSvg(),u=a._getClientXY(e),h=[],f=[],m=[],v=[],y=[],E=[],g=[],w=[],_=0;_<o.length;_++){var b=this.getNode(o[_]);h.push(b),m.push({x:b.x,y:b.y});var A=this.getNodeElement(o[_]);if(A){y.push(A);var k=a._getTransform(A);v.push({x:k[4],y:k[5]}),f.push(k);var C=this.element.querySelector(`[data-ctrl-ec-id="${o[_]}"]`);if(C){E.push(C);var x=a._getTransform(C);g.push(x),w.push({x:x[4],y:x[5]})}else E.push(null),g.push(null),w.push(null);if(this.config.movable==a.movable.node)break}}t._dragEventFired=!1;var S=null,T=null;this._gragStartedId=o[0],document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var R={x:u.x,y:u.y},N=r.getScale(),P=function(O,M){if(O!=null){M.classList.remove("bft-drag-over");for(var F=r.getNode(S),B=a.getStParentNodes(F),z=0;z<B.length;z++){var X=r.getNodeElement(B[z].id);X&&(X.style.opacity=1)}}},V=function(O){if(R){var M=a._getClientXY(O),F=O.target;a.isMobile()&&(F=document.elementFromPoint(M.x,M.y));var B=a._getOffsetXY(r.element,O),z={left:r.width()-(B.x+r.config.padding)<0,right:B.x-r.config.padding<0,up:r.height()-(B.y+r.config.padding)<0,down:B.y-r.config.padding<0};if(z.left||z.right||z.up||z.down){d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.add("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy"));for(var X=[],Y=[],q=[],K=[],H=0;H<f.length;H++)X.push(f[H][4]),Y.push(f[H][5]),g[H]?(q.push(g[H][4]),K.push(g[H][5])):(q.push(null),K.push(null));var te=R.x,Z=R.y,ae=M.x,ce=M.y;r.moveStart(z,function(Te){for(var ue=0;ue<f.length;ue++){var Ke=X[ue],Ne=Y[ue],Pe=q[ue],at=K[ue];f[ue][4]=Ke+Te.x,f[ue][5]=Ne+Te.y,R.x=te-Te.xWithoutScale,R.y=Z-Te.yWithoutScale,M.x=ae-Te.xWithoutScale,M.y=ce-Te.yWithoutScale,h[ue].x=Ke+Te.x,h[ue].y=Ne+Te.y,h[ue].movex=Te.x,h[ue].movey=Te.y,g[ue]&&(g[ue][4]=Pe+Te.x,g[ue][5]=at+Te.y);for(var be=a.ui.link(h[ue],r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0),Ie=0;Ie<be.length;Ie++){var Oe=be[Ie];(Ue=r.element.querySelector(`[data-l-id="[${Oe.id}][${Oe.childId}]"]`))&&(Ue.innerHTML=Oe.html)}if(h[ue].parent)for(be=a.ui.link(h[ue].parent,r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0),Ie=0;Ie<be.length;Ie++){var Ue;Oe=be[Ie],(Ue=r.element.querySelector(`[data-l-id="[${Oe.id}][${Oe.childId}]"]`))&&(Ue.innerHTML=Oe.html)}y[ue].setAttribute("transform","matrix("+f[ue].toString()+")"),E[ue]&&E[ue].setAttribute("transform","matrix("+g[ue].toString()+")")}})}else{if(r.moveEnd(),d.classList&&(d.classList.add("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),P(S,T),S=null,T=null,r.config.enableDragDrop)for(;F!=null&&F!=d;){if(F.hasAttribute&&F.hasAttribute(a.attr.node_id)){var oe=F.getAttribute(a.attr.node_id);if(r._gragStartedId&&oe!=r._gragStartedId){S=oe,T=F;break}}F=F.parentNode}if(S!=null){T.classList.add("bft-drag-over");for(var ie=r.getNode(S),re=a.getStParentNodes(ie),we=0;we<re.length;we++){var Ae=r.getNodeElement(re[we].id);Ae&&(Ae.style.opacity=.1)}!r.canUpdateLink(h[0].id,S)&&d.classList?(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-copy"),d.classList.add("bft-cursor-nodrop")):d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.add("bft-cursor-copy"),d.classList.remove("bft-cursor-nodrop"))}var ve=(M.x-R.x)/N,Me=(M.y-R.y)/N;for(H=0;H<f.length;H++){f[H][4]=v[H].x+ve,f[H][5]=v[H].y+Me,g[H]&&(g[H][4]=w[H].x+ve,g[H][5]=w[H].y+Me),h[H].x=m[H].x+ve,h[H].y=m[H].y+Me,h[H].movex=ve,h[H].movey=Me;var Ee=a.ui.link(h[H],r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0);for(we=0;we<Ee.length;we++){var Se=Ee[we];(de=r.element.querySelector(`[data-l-id="[${Se.id}][${Se.childId}]"]`))&&(de.innerHTML=Se.html)}}if(c.parent)if(r.config.movable==a.movable.detachTree)(de=r.element.querySelector(`[data-l-id="[${c.parent.id}][${c.id}]"]`))&&de.parentElement.removeChild(de);else for(Ee=a.ui.link(c.parent,r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0),we=0;we<Ee.length;we++){var de;Se=Ee[we],(de=r.element.querySelector(`[data-l-id="[${Se.id}][${Se.childId}]"]`))&&(de.innerHTML=Se.html)}if(!t._dragEventFired&&(Math.abs(M.x-R.x)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(M.y-R.y)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE)){if(a.events.publish("drag",[r,i,O,o])===!1&&j(),r.config.enableDragDrop)for(H=0;H<y.length;H++)d.insertBefore(y[H],d.firstChild);t._dragEventFired=!0}for(H=0;H<f.length;H++)y[H].setAttribute("transform","matrix("+f[H].toString()+")"),E[H]&&E[H].setAttribute("transform","matrix("+g[H].toString()+")")}}},j=function(O){for(var M=0;M<h.length;M++)h[M].x=m[M].x,h[M].y=m[M].y;if(r.moveEnd(),d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),d.removeEventListener(n.move,V),d.removeEventListener(n.up,j),n.leave&&d.removeEventListener(n.leave,j),h[0].id!=S&&S!=null){var F=r.getNode(S);if((B=a.events.publish("drop",[r,h[0].id,F.id,y[0],O]))===!1)return P(S,T),void(r._gragStartedId=null);r.canUpdateLink(h[0].id,S)?((K=r.get(h[0].id)).pid=S,K.stpid=null,r.updateNode(K,null,!0)):P(S,T),r._gragStartedId=null}else{if(t._dragEventFired){var B=a.events.publish("drop",[r,h[0].id,void 0,y[0],O]);if(r.config.movable&&B!==!1)if(r.config.movable==a.movable.detachTree){var z=a._getTransform(r.getNodeElement(c.id));(K=r.get(c.id)).pid=null,K.stpid=null,r.updateNode(K,null,!0)}else{var X=[];r.config.movable==a.movable.node?X.push(c.id):l(c,X);var Y=(z=a._getTransform(r.getNodeElement(c.id)))[4]-c.x,q=z[5]-c.y;for(M=0;M<X.length;M++){var K;(K=r.get(X[M]))&&(K.movex!=null?K.movex+=Y:K.movex=Y,K.movey!=null?K.movey+=q:K.movey=q,r.update(K))}a.events.publish("updated",[r]),r.draw(a.action.update,{dragNodeIdList:X})}}r._gragStartedId=null}};d.addEventListener(n.move,V),d.addEventListener(n.up,j),n.leave&&d.addEventListener(n.leave,j)},a.prototype._dragDropHandler=function(t,e,n){var r=a._getClientXY(e),i=t.getAttribute(a.attr.node_id),o=this.getNode(i);t._dragEventFired=!1;var s=null,l=null;this._gragStartedId=i,this.element.style.mozUserSelect=this.element.style.webkitUserSelect=this.element.style.userSelect="none";var c=this,d=this.getSvg(),u={x:r.x,y:r.y},h=a._getTransform(t),f=h[4],m=h[5],v=c.getScale(),y=t.cloneNode(!0);y.setAttribute("data-n-id","draging"),d.insertBefore(y,d.firstChild),y.style.opacity=.7;var E=function(_,b){if(_!=null){b.classList.remove("bft-drag-over");for(var A=c.getNode(s),k=a.getStParentNodes(A),C=0;C<k.length;C++){var x=c.getNodeElement(k[C].id);x&&(x.style.opacity=1)}}},g=function(_){if(u){var b=a._getClientXY(_),A=_.target;a.isMobile()&&(A=document.elementFromPoint(b.x,b.y));var k=a._getOffsetXY(c.element,_),C={left:c.width()-(k.x+c.config.padding)<0,right:k.x-c.config.padding<0,up:c.height()-(k.y+c.config.padding)<0,down:k.y-c.config.padding<0};if(C.left||C.right||C.up||C.down){d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.add("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy"));var x=h[4],S=h[5],T=u.x,R=u.y,N=b.x,P=b.y;c.moveStart(C,function(X){h[4]=x+X.x,h[5]=S+X.y,u.x=T-X.xWithoutScale,u.y=R-X.yWithoutScale,b.x=N-X.xWithoutScale,b.y=P-X.yWithoutScale,y.setAttribute("transform","matrix("+h.toString()+")")})}else{if(c.moveEnd(),d.classList&&(d.classList.add("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),E(s,l),s=null,l=null,c.config.enableDragDrop)for(;A!=null&&A!=d;){if(A.hasAttribute&&A.hasAttribute(a.attr.node_id)){var V=A.getAttribute(a.attr.node_id);if(c._gragStartedId&&V!=c._gragStartedId){s=V,l=A;break}}A=A.parentNode}if(s=="draging"&&(s=null,l=null),s!=null){l.classList.add("bft-drag-over");for(var j=c.getNode(s),O=a.getStParentNodes(j),M=0;M<O.length;M++){var F=c.getNodeElement(O[M].id);F&&(F.style.opacity=.1)}!c.canUpdateLink(o.id,s)&&d.classList?(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-copy"),d.classList.add("bft-cursor-nodrop")):d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.add("bft-cursor-copy"),d.classList.remove("bft-cursor-nodrop"))}var B=(b.x-u.x)/v,z=(b.y-u.y)/v;h[4]=f+B,h[5]=m+z,!t._dragEventFired&&(Math.abs(b.x-u.x)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(b.y-u.y)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(a.events.publish("drag",[c,V,_])===!1&&w(),t._dragEventFired=!0),y.setAttribute("transform","matrix("+h.toString()+")")}}},w=function(_){if(c.moveEnd(),d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),d.removeEventListener(n.move,g),d.removeEventListener(n.up,w),n.leave&&d.removeEventListener(n.leave,w),o.id==s||s==null)return t._dragEventFired&&a.events.publish("drop",[c,o.id,void 0,y,_]),d.removeChild(y),void(c._gragStartedId=null);var b=c.getNode(s);if(a.events.publish("drop",[c,o.id,b.id,y,_])===!1)return E(s,l),d.removeChild(y),void(c._gragStartedId=null);if(c.canUpdateLink(o.id,s)){var A=c.get(o.id);A.pid=s,A.stpid=null,A.movex!=null&&(A.movex=void 0),A.movey!=null&&(A.movey=void 0),c.updateNode(A,null,!0)}else d.removeChild(y),E(s,l);c._gragStartedId=null};d.addEventListener(n.move,g),d.addEventListener(n.up,w),n.leave&&d.addEventListener(n.leave,w)},a.prototype._resizeHandler=function(t,e){if(this.isVisible){var n=this.getViewBox(),r=this.getSvg(),i=r.getAttribute("width"),o=r.getAttribute("height"),s=i/n[2],l=o/n[3],c=s>l?l:s;r.setAttribute("width",this.width()),r.setAttribute("height",this.height()),n[2]=this.width()/c,n[3]=this.height()/c,this.setViewBox(n),this.xScrollUI.create(this.width()),this.yScrollUI.create(this.height()),this._draw(!1,a.action.resize)}},a.prototype._nodeDbClickHandler=function(t,e){if(a.events.publish("dbclick",[this,this.get(t)])===!1)return!1;this._commonClickHandler(t,e,this.config.nodeMouseDbClick)},a.prototype._nodeClickHandler=function(t,e){var n=this.getNodeElement(t);if(n&&n._dragEventFired)n._dragEventFired=!1;else{if(a.events.publish("click",[this,{node:this.getNode(t),event:e}])===!1)return!1;this._commonClickHandler(t,e,this.config.nodeMouseClick)}},a.prototype._nodeCircleMenuItemClickHandler=function(t,e){var n=t.parentNode.getAttribute(a.attr.control_node_circle_menu_wrraper_id),r=t.getAttribute(a.attr.control_node_circle_menu_name),i=this.nodeCircleMenuUI._menu[r];a.events.publish("click",[this.nodeCircleMenuUI,{nodeId:n,menuItemName:r,menuItem:i,event:e}])},a.prototype._nodeCircleMenuClickHandler=function(t){a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide();var e=this.getNode(t),n=null;if(Array.isArray(e.tags))for(var r=0;r<e.tags.length;r++){var i=e.tags[r];this.config.tags[i]&&this.config.tags[i].nodeCircleMenu&&(n=this.config.tags[i].nodeCircleMenu)}this.nodeCircleMenuUI.show(t,n)},a.prototype._commonClickHandler=function(t,e,n){var r;a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),n==a.action.expandCollapse&&this.toggleExpandCollapse(t,e),n==a.action.edit&&(r=this.getNode(t))&&(this.editUI.show(r.id),this.ripple(r.id,e.clientX,e.clientY)),n==a.action.details&&(r=this.getNode(t))&&(this.editUI.show(r.id,!0),this.ripple(r.id,e.clientX,e.clientY))},a.prototype._menuHandlerMouseDownHandler=function(t,e){e.stopPropagation(),e.preventDefault()},a.prototype._nodeMenuClickHandler=function(t,e,n){a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var r=this.getNode(t),i=null;if(Array.isArray(r.tags))for(var o=0;o<r.tags.length;o++){var s=r.tags[o];this.config.tags[s]&&this.config.tags[s].nodeMenu&&(i=this.config.tags[s].nodeMenu)}this.nodeMenuUI.showStickIn(e,t,null,i)},a.prototype._menuClickHandler=function(t,e){e.stopPropagation(),e.preventDefault(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.show(t.offsetLeft,t.offsetTop)},a.prototype._lonelyButtonHandler=function(){var t={id:this.generateId()};this.addNode(t,null,!0)!==!1&&this.center(t.id)},a.prototype.toggleExpandCollapse=function(t,e){var n=this.getNode(t),r=this.getCollapsedIds(n);if(r.length){if(a.events.publish("expcollclick",[this,!1,t,r])===!1)return!1;this.expand(t,r,!1)}else{if(a.events.publish("expcollclick",[this,!0,t,n.childrenIds])===!1)return!1;this.collapse(t,n.childrenIds,!1)}e&&this.ripple(n.id,e.clientX,e.clientY)},a.prototype._move=function(t,e,n){n[0]=e,n[1]=t,this.setViewBox(n),this.xScrollUI.setPosition(),this.yScrollUI.setPosition()},a.prototype.moveStart=function(t,e,n,r){if(t){if(!this._moveInterval){var i=this,o=this.getViewBox().slice(0),s=this.getScale(),l=0,c=0,d=1;a.isNEU(n)&&(n=a.anim.inSin),a.isNEU(r)&&(r=3e3),this._moveInterval=setInterval(function(){var u={x:0,y:0,xWithoutScale:0,yWithoutScale:0};t.left?(l++,u.x=l*a.MOVE_STEP/s,u.xWithoutScale=l*a.MOVE_STEP):t.right&&(l++,u.x=-l*a.MOVE_STEP/s,u.xWithoutScale=-l*a.MOVE_STEP),t.up?(c++,u.y=c*a.MOVE_STEP/s,u.yWithoutScale=c*a.MOVE_STEP):t.down&&(c++,u.y=-c*a.MOVE_STEP/s,u.yWithoutScale=-c*a.MOVE_STEP);var h=n((10*d-10)/r);u.x=u.x*h,u.xWithoutScale=u.xWithoutScale*h,u.y=u.y*h,u.yWithoutScale=u.yWithoutScale*h,i.setViewBox([o[0]+u.x,o[1]+u.y,o[2],o[3]]),e&&e(u),d+=1},10)}}else console.error("movePosition parameter not defined")},a.prototype.moveEnd=function(){this._moveInterval&&(clearInterval(this._moveInterval),this._moveInterval=null)},a===void 0&&(a={}),a.node=function(t,e,n,r){this.templateName=r,this.id=t,this.pid=e,this.children=[],this.childrenIds=[],this.parent=null,this.stpid=null,this.stParent=null,this.stChildren=[],this.stChildrenIds=[],this.tags=n,this.tags||(this.tags=[])},a.prototype._mouseDownHandler=function(t,e,n){var r=this;a.HIDE_EDIT_FORM_ON_PAN&&this.editUI.hide(),a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this.getViewBox(),o=this.getScale(),s=a._getClientTouchesXY(e,0),l=a._getClientTouchesXY(e,1),c={diffX:0,diffY:0,x0:s.x,y0:s.y,type:"pan",viewBoxLeft:i[0],viewBoxTop:i[1]};e.touches&&e.touches.length>1&&(c.type="pinch",c.dist=Math.sqrt((s.x-l.x)*(s.x-l.x)+(s.y-l.y)*(s.y-l.y))),c.type=="pan"&&(this._hideBeforeAnimation(),this._changeCursorOnPanStart(i,o,e));var d=function(h){var f=a._getClientTouchesXY(h,0);if(c&&c.type=="pan"){r._hideBeforeAnimation(),c.diffX=f.x-c.x0,c.diffY=f.y-c.y0;var m=-c.diffY/o+c.viewBoxTop,v=-c.diffX/o+c.viewBoxLeft;r._move(m,v,i)}else if(c&&c.type=="pinch"){var y=a._getClientTouchesXY(h,1),E=Math.sqrt((f.x-y.x)*(f.x-y.x)+(f.y-y.y)*(f.y-y.y)),g=1+(E-c.dist)/(c.dist/100)/100;c.dist=E;var w=a._pinchMiddlePointInPercent(r.element,r.width(),r.height(),h);r.zoom(g,w)}},u=function(){c.type=="pan"&&r.config.sticky?setTimeout(function(){a._moveToBoundaryArea(t,r.getViewBox(),r.response.boundary,function(){r._draw(!0,a.action.pan)})},0):c.type!="pan"||r.config.sticky||setTimeout(function(){r._draw(!0,a.action.pan)},0),c.type=="pan"&&r._changeCursorOnPanEnd(),c=null,t.removeEventListener(n.move,d),t.removeEventListener(n.up,u),n.leave&&t.removeEventListener(n.leave,u),n.touchstart&&t.removeEventListener(n.touchstart,u)};this.config.enablePan&&(t.addEventListener(n.move,d),t.addEventListener(n.up,u),n.leave&&t.addEventListener(n.leave,u),n.touchstart&&t.addEventListener(n.touchstart,u))},a.prototype._changeCursorOnPanStart=function(t,e,n){var r=this.getPointerElement(),i=a._getOffsetXY(this.element,n),o=i.x/e+t[0]-16/e,s=i.y/e+t[1]-16/e;r.style.display="inherit",r.setAttribute("transform","matrix(0,0,0,0,"+o+","+s+")"),a.animate(r,{transform:[0,0,0,0,o,s],opacity:0},{transform:[1/e,0,0,1/e,o,s],opacity:1},300,a.anim.outBack)},a.prototype._changeCursorOnPanEnd=function(){this.getPointerElement().style.display="none"},a.searchUI=function(){this.lastSearch=[],this._searchAfterEnterPress=!1,this._event_id=a._guid(),this.instance=null},a.searchUI.prototype.init=function(t){this.instance=t,this.obj=this.instance,this._initSearchFields();var e=this,n=this.instance.config.padding-10,r=this.instance.config.padding-10,i=this.instance.getMenuButton();if(i){var o=i.getBoundingClientRect(),s=this.instance.getSvg().getBoundingClientRect();n=s.right-o.left+10,r=o.top-s.top-10}var l=document.createElement("div");l.classList.add("bft-search"),l.style.right=n+"px",l.style.top=r+"px";var c=a.elements.textbox({},{label:a.SEARCH_PLACEHOLDER,btn:"X"},"320px");l.innerHTML+=c.html,this.xBtn=l.querySelector("[data-input-btn]"),this.xBtn.style.display="none",this.searchTableWrapper=document.createElement("div"),l.appendChild(this.searchTableWrapper);var d=this.instance.getSvg().nextSibling;this.instance.element.insertBefore(l,d),a.input.init(l),this.input=document.getElementById(c.id),this.xBtn.addEventListener("click",function(f){f.preventDefault(),e.hide()}),this.input.addEventListener("keypress",function(f){f.key=="Enter"&&f.preventDefault()}),this.input.addEventListener("focus",function(f){e.xBtn.style.display="",e._search()}),this.input.addEventListener("blur",function(f){a.isNEU(e.input.value)&&a.SEARCH_HELP_SYMBOL!=e.input.value&&(e.xBtn.style.display="none")}),this.input.addEventListener("keydown",function(f){(f.key=="ArrowDown"||f.key=="ArrowUp")&&f.preventDefault()}),this.input.addEventListener("keyup",function(f){f.key=="ArrowDown"?u():f.key=="ArrowUp"?h():f.key=="Enter"?e._enterHandler():f.key=="Escape"?e.hide():e._search()});var u=function(){var f=e.instance.element.querySelectorAll("[data-search-item-id]"),m=e.instance.element.querySelector('[data-selected="yes"]');m==null&&f.length>0?f[0].setAttribute("data-selected","yes"):f.length>0&&m.nextSibling&&m.nextSibling.setAttribute&&(m.removeAttribute("data-selected"),m.nextSibling.setAttribute("data-selected","yes"))},h=function(){var f=e.instance.element.querySelectorAll("[data-search-item-id]"),m=e.instance.element.querySelector('[data-selected="yes"]');m==null&&f.length>0?f[f.length-1].setAttribute("data-selected","yes"):f.length>0&&m.previousSibling&&m.previousSibling.setAttribute&&(m.removeAttribute("data-selected"),m.previousSibling.setAttribute("data-selected","yes"))}},a.searchUI.prototype._enterHandler=function(){var t=this.instance.element.querySelector('[data-selected="yes"]');if(t){if(t.hasAttribute("data-search-item-id")){var e=t.getAttribute("data-search-item-id");if(this.input.value!=a.SEARCH_HELP_SYMBOL){var n=a.events.publish("",[this.instance,e]),r=a.events.publish("searchclick",[this,{nodeId:e}]);n===!1&&(r=!1),r!=0&&this.instance.center(e)}else this.input.value=e+" ",this.searchTableWrapper.innerHTML=""}}else this._searchAfterEnterPress=!0,this.__search(),this.searchTableWrapper.innerHTML="",this.instance.draw()},a.searchUI.prototype._initSearchFields=function(){if(this.instance.config.searchFields==null){this._searchFields=[];for(var t=0;t<this.instance.response.allFields.length;t++){var e=this.instance.response.allFields[t];e=="tags"||a._fieldIsImg(this.instance.config,e)||this._searchFields.indexOf(e)==-1&&this._searchFields.push(e)}}else this._searchFields=this.instance.config.searchFields;if(this.instance.config.searchFieldsAbbreviation==null)for(this.searchFieldsAbbreviation={},t=0;t<this._searchFields.length;t++){for(var n=this._searchFields[t],r=0,i=n.slice(0,r+1).toLowerCase();this.searchFieldsAbbreviation[i];)r++,i=n.slice(0,r+1).toLowerCase();this.searchFieldsAbbreviation[i]=n}else this.searchFieldsAbbreviation=this.instance.config.searchFieldsAbbreviation;this._searchFieldsAbbreviation=this.searchFieldsAbbreviation},a.searchUI.prototype.find=function(t){this.input&&(this.input.value=t,document.activeElement==this.input?this._search(t):this.input.focus())},a.searchUI.prototype.addMatchTag=function(t){if(this._searchAfterEnterPress){for(var e=0;e<this.lastSearch.length;e++)if(this.lastSearch[e].id==t)return!0;return!1}return null},a.searchUI.prototype.__search=function(){this.lastSearch=a._search.search(this.instance.config.nodes,this.input.value,this._searchFields,this._searchFields,this.instance.config.searchDisplayField,this.instance.config.searchFieldsWeight,this.searchFieldsAbbreviation)},a.searchUI.prototype._search=function(){var t,e=this;if(this._searchAfterEnterPress=!1,this.input.value==a.SEARCH_HELP_SYMBOL)t=this.helpView();else{this.__search();var n=a._getFistImgField(this.instance.config);t=`<table border="0" cellspacing="0" cellpadding="0">
                        <tbody>
                            ${function(){for(var o="",s=0;s<e.lastSearch.length&&!(s>=a.SEARCH_RESULT_LIMIT);s++){var l=e.lastSearch[s],c="";if(n){var d=e.instance._get(l.id);typeof n=="function"?c=n(e.instance,e.instance.getNode(l.id),d):d[n]&&(c=d[n])}var u="",h="";e.instance.config.searchDisplayField==l.__searchField?u=l.__searchMarks:e.instance.config.searchDisplayField?(u=l[e.instance.config.searchDisplayField],a.isNEU(u)&&(u=""),h=l.__searchMarks):u=l.__searchMarks;var f={img:c,nodeId:l.id,first:u,second:h,searchItem:l,html:a.searchUI.createItem(c,l.id,u,h)};a.events.publish("add-item",[e,f]),o+=f.html}return o}()}  
                        </tbody>
                    </table>`}this.searchTableWrapper.innerHTML=t;for(var r=this.instance.element.querySelectorAll("[data-search-item-id]"),i=0;i<r.length;i++)r[i].addEventListener("click",function(){if(this.hasAttribute("data-search-item-id")){var o=this.getAttribute("data-search-item-id");if(e.input.value!=a.SEARCH_HELP_SYMBOL){var s=a.events.publish("searchclick",[e.instance,o]),l=a.events.publish("searchclick",[e,{nodeId:o}]);if(s===!1&&(l=!1),l!==!1){e.instance.center(this.getAttribute("data-search-item-id"));var c=e.instance.element.querySelector('[data-selected="yes"]');c&&c.removeAttribute("data-selected"),this.setAttribute("data-selected","yes"),e.input.focus()}}else e.input.value=o+" ",e.searchTableWrapper.innerHTML="",e.input.focus()}});a.events.publish("show-items",[this,{}])},a.searchUI.prototype.helpView=function(){var t='<table border="0" cellspacing="0" cellpadding="0">';for(var e in this.searchFieldsAbbreviation)t+=`<tr data-search-item-id="${e}" style="height: 50px;"><td class="bft-search-image-td" style="text-align: center;">${e}</td><td class="bft-search-text-td">${this.searchFieldsAbbreviation[e]}</td></tr>`;return t+="</table>"},a.searchUI.createItem=function(t,e,n,r){return n&&(n="<b>"+n+"</b>"),`<tr data-search-item-id="${e}">
                <td class="bft-search-image-td">
                    ${t=t?`<div class="bft-search-photo" style="background-image: url(${t})"></div>`:`<div class="bft-search-photo">${a.icon.user(32,32,"#aeaeae")}</div>`}
                </td>
                <td class="bft-search-text-td">${n} <br/>${r}</td>
            </tr>`},a.searchUI.prototype.hide=function(){if(a.events.publish("hide",[this])===!1)return!1;this._searchAfterEnterPress&&(this._searchAfterEnterPress=!1,this.instance.draw()),this.lastSearch=[],this.xBtn&&(this.xBtn.style.display="none"),this.searchTableWrapper&&(this.searchTableWrapper.innerHTML=""),this.input&&(this.input.value="",document.activeElement==this.input&&this.input.blur(),document.activeElement==this.xBtn&&a.input.blurHandler(this.input))},a.searchUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a===void 0&&(a={}),a.manager=function(t){this.config=t.config,this.layoutConfigs=t._layoutConfigs,this.visibleNodeIds=[],this.viewBox=null,this.action=null,this.actionParams=null,this.nodes={},this.oldNodes={},this.maxX=null,this.maxY=null,this.minX=null,this.minY=null,this.bordersByRootIdAndLevel=null,this.roots=null,this.state=null,this.vbIsInitializedFromState=!1,this.rootList=[],this.instance=t,this._fixAdjustForExport={x:0,y:0}},a.manager.prototype.read=function(t,e,n,r,i,o,s,l){var c=this;a.state._get(this.config.state,e,n,function(d){c.state=d,c.action=i,c.actionParams=o,i!=a.action.init||!c.state||o&&o.method&&o.method=="fit"?(c.viewBox=r,c.vbIsInitializedFromState=!1):(c.viewBox=c.state.vb,c.vbIsInitializedFromState=!0,Array.isArray(c.state.roots)&&(c.config.roots=c.state.roots));var u=c.maxX,h=c.maxY,f=c.minX,m=c.minY,v=c.bordersByRootIdAndLevel,y=c.roots,E=c.nodes;if(t){var g=a.manager._getResponse(e,n,c.visibleNodeIds,c.config,u,h,f,m,c.viewBox,y,c.action,c.actionParams,E,c.oldNodes,c.vbIsInitializedFromState);i!=a.action.exporting&&(c.maxX=u,c.maxY=h,c.minX=f,c.minY=m,c.roots=y,c.nodes=E,c.visibleNodeIds=g.visibleNodeIds),g.bordersByRootIdAndLevel=v,g.roots=y,g.adjustify={x:0,y:0},c.state&&(g.adjustify=c.state.adjustify),s(g)}else c.oldNodes=E||null,c._read(function(w){u=w.maxX,h=w.maxY,f=w.minX,m=w.minY,v=w.bordersByRootIdAndLevel,y=w.roots,E=w.nodes;var _=a.manager._getResponse(e,n,c.visibleNodeIds,c.config,u,h,f,m,c.viewBox,y,c.action,c.actionParams,E,c.oldNodes,c.vbIsInitializedFromState);_.notif=w.limit,_.roots=y,_.bordersByRootIdAndLevel=v,_.adjustify=w.adjustify,i!=a.action.exporting&&(c.maxX=u,c.maxY=h,c.minX=f,c.minY=m,c.roots=y,c.nodes=E,c.visibleNodeIds=_.visibleNodeIds,c.bordersByRootIdAndLevel=v,c.rootList=w.rootList),s(_)},l)})},a.manager.prototype._read=function(t,e){var n=this,r=a.manager._createNodes(this.instance);e(r);var i=r.nodes,o=r.roots,s=a.remote;s==null&&(s=a.local),s._setPositions(o,n.layoutConfigs,function(l){var c=a.manager._doNotChangePositionOfClickedNodeIfAny(o,i,n.action,n.actionParams,n.oldNodes,n.config.orientation);n.state&&n.action==a.action.init&&(c=n.state.adjustify),n.action==a.action.exporting?c=n._fixAdjustForExport:n._fixAdjustForExport=c;for(var d={minX:null,minY:null,maxX:null,maxY:null},u={},h=[],f=0;f<o.length;f++)a.manager._setMinMaxXYAdjustifyIterate(o[f],o[f],d,0,u,c,n.config.orientation,h);for(var m in h)for(var v in h[m]){var y=u[m][v],E=h[m][v];y.minX==null&&y.minY==null&&y.maxX==null&&y.maxY==null&&a._setMinMaxXY(E,y)}t({minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,bordersByRootIdAndLevel:u,nodes:i,roots:o,rootList:r.rootList,limit:l,adjustify:c})},i)},a===void 0&&(a={}),a.manager._initDinamicNode=function(t,e,n){e&&(t.lcn=e),n&&(t.isAssistant=!0);var r=a.t(t.templateName);t.w=r&&r.size?r.size[0]:0,t.h=r&&r.size?r.size[1]:0,t.isSplit=t.templateName=="split",t.isMirror=t.templateName=="mirror",t.isSubLevel=t.templateName=="subLevel"},a.manager._setCollpasedProperty=function(t,e,n,r,i,o,s){t.collapsed==null&&e.collapse&&e.collapse.allChildren?t.collapsed=!0:t.collapsed==null&&(t.collapsed=!1),i==a.action.expand&&n.ids.indexOf(t.id)!=-1&&(t.collapsed=!1),i==a.action.collapse&&(n.expandIds||n.collapseIds)?n.expandIds&&n.expandIds.indexOf(t.id)!=-1?t.collapsed=!1:n.collapseIds&&n.collapseIds.indexOf(t.id)!=-1&&(t.collapsed=!0):i==a.action.collapse&&n.ids.indexOf(t.id)!=-1&&(t.collapsed=!0),i==a.action.expand&&n.ids=="all"&&(t.collapsed=!1),i==a.action.exporting&&n.expandChildren&&(t.collapsed=!1),i==a.action.init&&s!=null?t.collapsed=!s.exp.has(t.id):i==a.action.init?t.collapsed=e.collapse&&o>=e.collapse.level-1&&r.indexOf(t.id)==-1:i==a.action.centerNode||i==a.action.insert||i==a.action.expand||i==a.action.collapse?r.has(t.id)&&(t.collapsed=!1):i==a.action.update&&n&&n.changeRoots&&n.changeRoots.has(t.id)&&(t.collapsed=!1)},a.manager._initNode=function(t,e,n,r,i,o,s){var l=s.manager.config,c=s.manager.layoutConfigs,d=s.manager.action,u=s.manager.actionParams,h=s.manager.state,f=c[n||"base"];t.parent==null&&a.manager._setCollpasedProperty(t,f,u,i,d,r-1,h);for(var m=0;m<t.childrenIds.length;m++){var v=e[t.childrenIds[m]];if(a.manager._setCollpasedProperty(v,f,u,i,d,r,h),!v.collapsed){if(v.parent=t,v.ppid!=null){var y=e[v.ppid];y&&(v.parentPartner=y)}(v.tags.indexOf("left-partner")!=-1||v.tags.indexOf("right-partner")!=-1||v.tags.indexOf("partner")!=-1||v.parentPartner)&&o.indexOf(t.id)==-1&&o.push(t.id),t.children.push(v)}}if(d!=a.action.minimize||t.min?d==a.action.maximize&&t.min===!0?(u.all||u.id==t.id)&&(t.min=!1):d==a.action.exporting&&u.min===!1?t.min=!1:d==a.action.init&&h!=null&&(t.min=h.min.has(t.id)):(u.all||u.id==t.id)&&(t.min=!0),!t.min)for(m=0;m<t.stChildrenIds.length;m++)v=e[t.stChildrenIds[m]],t.tags&&t.tags.has("filter")||(v.stParent=t,t.stChildren.push(v));r!=null&&(t.level=r),n&&(t.lcn=n);var E=a._getSubLevels(t.tags,l.tags);E>0&&(t.subLevels=E),t.tags.indexOf("assistant")!=-1&&t.parent!=null&&(t.isAssistant=!0);var g=a.t(t.templateName,t.min);t.w=g&&g.size?g.size[0]:0,t.h=g&&g.size?g.size[1]:0,t.padding=g&&g.padding?g.padding:[0,0,0,0];var w={node:t};a.events.publish("node-initialized",[s,w]),a.events.publish("node-created",[t])},a.manager._iterate=function(t,e,n,r,i,o,s,l,c,d,u,h){var f=h.manager.layoutConfigs;if(a.manager._initNode(e,n,c,r,d,u,h),e.isAssistant&&(o[e.pid]||(o[e.pid]=[]),o[e.pid].push(e.id)),e.subLevels>0&&s.push(e.id),a.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN&&!e.isAssistant&&e.parent){if(e.parent&&e.parent.children.length&&e.parent.children[e.parent.children.length-1]==e){for(var m=[],v=0,y=0,E=0;E<e.parent.children.length;E++)(g=e.parent.children[E]).tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1&&g.tags.indexOf("assistant")==-1&&g.children.length==0?m.push(g.id):g.tags.indexOf("assistant")!=-1?v++:g.tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1||y++;(a.MIXED_LAYOUT_ALL_NODES&&m.length>1&&m.length==e.parent.children.length-v-y||!a.MIXED_LAYOUT_ALL_NODES&&m.length>1)&&(l[e.pid]=m)}}else if(!e.isAssistant&&e.childrenIds.length==0&&e.parent&&!l[e.pid]){for(m=[],v=0,y=0,E=0;E<e.parent.children.length;E++){var g;(g=e.parent.children[E]).tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1&&g.tags.indexOf("assistant")==-1&&g.childrenIds.length==0?m.push(g.id):g.tags.indexOf("assistant")!=-1?v++:g.tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1||y++}(a.MIXED_LAYOUT_ALL_NODES&&m.length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&m.length==e.parent.childrenIds.length-v-y||!a.MIXED_LAYOUT_ALL_NODES&&m.length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN)&&(l[e.pid]=m)}e.stChildren.length&&(t.stContainerNodes||(t.stContainerNodes=[]),t.stContainerNodes.push(e));for(var w=0;w<e.stChildren.length;w++){var _="";for(E=0;E<e.tags.length;E++)if(f[e.tags[E]]){_=e.tags[E];break}i.push(e.stChildren[w].id),a.manager._iterate(t,e.stChildren[w],n,0,i,o,s,l,_,d,u,h)}for(r++,w=0;w<e.children.length;w++)a.manager._iterate(t,e.children[w],n,r,i,o,s,l,c,d,u,h)},a.manager.__createNodes=function(t,e,n,r,i,o,s,l){for(var c=[],d=a._addDottedLines(n),u=0;u<d.length;u++){var h,f=d[u];h=a.STRING_TAGS?f.tags?f.tags.split(","):[]:Array.isArray(f.tags)?f.tags.slice(0):[],l.filterUI.addFilterTag(f)&&h.unshift("filter");var m=l.searchUI.addMatchTag(f.id);m===!0?h.unshift("match"):m===!1&&h.unshift("no-match");var v=a._getTemplate(h,n.tags,n.template),y=new a.node(f.id,f.pid,h,v);a.isNEU(f.ppid)||(y.ppid=f.ppid),a.isNEU(f.stpid)||(y.stpid=f.stpid),n.orderBy!=null&&(y.order=a.manager._getOrderFieldValue(f,n.orderBy)),f.movex!=null&&(y.movex=f.movex),f.movey!=null&&(y.movey=f.movey),t[f.id]=y,c.push(f.id)}for(n.orderBy!=null&&c.sort(function(A,k){var C=t[A].order,x=t[k].order;return typeof C=="number"||typeof x=="number"?(C==null&&(C=-1),x==null&&(x=-1),n.orderBy.desc?x-C:C-x):typeof C=="string"||typeof x=="string"?(C==null&&(C=""),x==null&&(x=""),n.orderBy.desc?x.localeCompare(C):C.localeCompare(x)):void 0}),u=0;u<c.length;u++){var E=c[u],g=(y=t[E],o?o[E]:null),w=t[y.stpid],_=t[y.pid];if(w||(y.stpid=null),_||(y.pid=null),w){var b=o?o[w.id]:null;b&&(w.min=b.min),w.stChildrenIds.push(y.id)}else _?(g&&(y.collapsed=g.collapsed,y.min=g.min),_.childrenIds.push(y.id)):(g&&(y.collapsed=g.collapsed,y.min=g.min),e.push(y),s.push(y.id));r==a.action.init&&(y.min=a._getMin(y,n))}},a.manager._createNodes=function(t){var e=t.manager.config,n=t.manager.layoutConfigs,r=t.manager.action,i=t.manager.actionParams,o=t.manager.oldNodes,s=t.manager.state,l={},c=[],d=[];if(a.manager.__createNodes(l,c,e,r,i,o,d,t),e.roots!=null){c=[];for(var u=0;u<e.roots.length;u++){var h=l[e.roots[u]];if(h&&r==a.action.centerNode){for(var f=h;f.pid!=null||f.stpid!=null;)f=f.pid==null&&f.stpid!=null?l[f.stpid]:l[f.pid];for(var m=l[i.id];(m.pid!=null||m.stpid!=null)&&m!=h;)m=m.pid==null&&m.stpid!=null?l[m.stpid]:l[m.pid];f==m&&(h=f)}if(h){for(var v=!1,y=0;y<c.length;y++)if(c[y].id==h.id){v=!0;break}v||(a.isNEU(h.pid)||(pt=(w=l[h.pid]).childrenIds.indexOf(h.id))>-1&&w.childrenIds.splice(pt,1),c.push(h))}}for(e.roots=[],u=0;u<c.length;u++)e.roots.push(c[u].id)}r==a.action.exporting&&i.id!=null&&(g=l[i.id])&&(g.pid=null,c=[g]);var E=[];if(r==a.action.init&&e.expand&&e.expand.nodes&&s==null)for(u=0;u<e.expand.nodes.length;u++){var g=l[e.expand.nodes[u]];for(e.expand.allChildren===!0&&a.manager._addExpandedNodeIdsIterate(g,l,E);g;)E.push(g.id),g.pid==null&&g.stpid!=null?(g=l[g.stpid]).min=!1:g=l[g.pid]}else if(r==a.action.expand&&i.ids&&i.ids!="all"||r==a.action.collapse&&i&&i.expandIds)for(ue=r==a.action.expand?i.ids:i.expandIds,u=0;u<ue.length;u++)for(var w=l[(g=l[ue[u]]).pid];w;)E.push(w.id),w.pid==null&&w.stpid!=null?(w=l[w.stpid]).min=!1:w=l[w.pid];else if(r==a.action.centerNode){for(var _=l[i.id];_;){if(E.push(_.id),i.options.parentState===a.COLLAPSE_PARENT_NEIGHBORS&&_)for(u=0;u<_.childrenIds.length;u++)(q=l[_.childrenIds[u]]).collapsed=!0;_.pid==null&&_.stpid!=null?(_=l[_.stpid]).min=!1:_=l[_.pid]}if(_=l[i.id],i.options.childrenState===a.COLLAPSE_SUB_CHILDRENS)for(u=0;u<_.childrenIds.length;u++){(A=l[_.childrenIds[u]]).collapsed=!1;for(var b=0;b<A.childrenIds.length;b++)l[A.childrenIds[b]].collapsed=!0}if(i.options.parentState===a.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED&&(w=l[_.pid]))for(u=0;u<w.childrenIds.length;u++){var A;if((A=l[w.childrenIds[u]])!=_)for(A.collapsed=!1,b=0;b<A.childrenIds.length;b++)l[A.childrenIds[b]].collapsed=!0}}else if(r==a.action.insert)for(g=l[i.insertedNodeId];g;)E.push(g.id),g.pid==null&&g.stpid!=null?(g=l[g.stpid]).min=!1:g=l[g.pid];var k=[],C={},x=[],S={},T=[];for(u=0;u<c.length;u++)a.manager._iterate(c[u],c[u],l,0,k,C,x,S,"",E,T,t);if(r==a.action.collapse&&i&&Array.isArray(i.expandIds)&&Array.isArray(i.collapseIds))for(u=0;u<i.ids.length;u++)i.expandIds.has(i.collapseIds[u])?console.error(`id ${i.collapseIds[u]} exist in both collapseIds and expandIds`):(g=l[i.collapseIds[u]])&&(g.collapsed=!0);for(u=c.length-1;u>=0;u--)c[u].collapsed&&c.splice(u,1);for(u=0;u<T.length;u++){g=l[T[u]];var R=[],N=[],P=[],V={},j=0,O=0,M=0,F=[],B=[];for(b=0;b<g.children.length;b++)(q=g.children[b]).isAssistant?R.push(q.id):q.tags.indexOf("right-partner")!=-1?(q.isPartner=1,q.children=[],N.push(q.id)):q.tags.indexOf("left-partner")!=-1?(q.isPartner=2,q.children=[],P.push(q.id)):q.tags.indexOf("partner")==-1||j%2?q.tags.indexOf("partner")!=-1&&j%2?(q.isPartner=2,q.children=[],P.push(q.id),j++):q.parentPartner?(V[q.parentPartner.id]||(V[q.parentPartner.id]=[]),V[q.parentPartner.id].push(q.id)):R.push(q.id):(q.isPartner=1,q.children=[],N.push(q.id),j++);g.children=[];var z=[];for(b=0;b<N.length;b++){V[(q=l[N[b]]).id]?g.children.push(q):g.children.splice(0,0,q);for(var X=0;X<q.childrenIds.length;X++)z.push(q.childrenIds[X])}var Y=[];for(b=0;b<P.length;b++)for(V[(q=l[P[b]]).id]?g.children.push(q):g.children.splice(0,0,q),X=0;X<q.childrenIds.length;X++)Y.push(q.childrenIds[X]);for(b=0;b<Y.length;b++)(q=l[Y[b]]).collapsed||(q.parentPartner=q.parent,q.parent=g,q.isChildOfPartner=!0,g.children.push(q));for(b=P.length-1;b>=0;b--)if(V[P[b]])for(y=0;y<V[P[b]].length;y++)g.children.push(l[V[P[b]][y]]),O++,B.indexOf(P[b])==-1&&B.push(P[b]);for(b=0;b<R.length;b++){var q=l[R[b]];g.children.push(q)}for(b=0;b<N.length;b++)if(V[N[b]])for(y=0;y<V[N[b]].length;y++)g.children.push(l[V[N[b]][y]]),M++,F.indexOf(N[b])==-1&&F.push(N[b]);for(b=0;b<z.length;b++)(q=l[z[b]]).collapsed||(q.parentPartner=q.parent,q.parent=g,q.isChildOfPartner=!0,g.children.push(q));g.partnerSeparation=Math.max(B.length,F.length)*e.partnerChildrenSplitSeparation+e.minPartnerSeparation,R.length||!O||M?R.length||O||!M?R.length||O!=1||M!=1?R.length||O||M?!R.length||O||M?R.length&&(O||M)?g.hasPartners=7:g.hasPartners=1:g.hasPartners=6:g.hasPartners=5:g.hasPartners=4:g.hasPartners=3:g.hasPartners=2}for(u=0;u<x.length;u++){var K=n[(g=l[x[u]]).lcn?g.lcn:"base"];for(b=0;b<g.subLevels;b++){var H=new a.node(g.id+"_sub_level_index_"+b,g.pid,[],"subLevel");a.manager._initDinamicNode(H,g.lcn),(w=g.parent)&&((pt=w.children.indexOf(g))>-1&&(w.children.splice(pt,1),w.children.splice(pt,0,H)),H.children.push(g),H.parent=w,g.parent=H,l[H.id]=H)}}for(var te in C){(w=l[te]).hasAssistants=!0,H=new a.node(w.id+"_split_assitant_0",w.id,["assistant"],"split"),a.manager._initDinamicNode(H,w.lcn,!0),l[H.id]=H;var Z=[];for(b=w.children.length-1;b>=0;b--)(q=w.children[b]).isAssistant?(q.parent=null,w.children.splice(b,1),Z.splice(0,0,q.id)):q.isPartner||(q.parent&&S[q.parent.id]&&H&&q.parent.id!=H.id&&(Object.defineProperty(S,H.id,Object.getOwnPropertyDescriptor(S,q.parent.id)),delete S[q.parent.id]),q.parent=H,H.children.unshift(q),w.children.splice(b,1));if(Z.length%2){var ae=l[Z[Z.length-1]],ce=new a.node(ae.id+"_mirror",w.pid,[],"mirror");a.manager._initDinamicNode(ce,ae.lcn,!0),ce.isAssistant=!0,ce.w=ae.w,ce.h=ae.h,l[ce.id]=ce,Z.splice(Z.length-1,0,ce.id)}var oe=1;for(b=Z.length-1;b>=0;b--)if(b%2&&b!=Z.length-1){var ie=new a.node(w.id+"_split_assitant_"+oe,w.pid,[],"split");a.manager._initDinamicNode(ie,w.lcn,!0),l[ie.id]=ie,Z.splice(b,0,ie.id),oe++}else b%2&&Z.splice(b,0,H.id);for(b=0;b<Z.length;b+=3){var re=null;re=b==0?w:l[Z[b-2]];var we=l[Z[b]],Ae=l[Z[b+1]],ve=l[Z[b+2]];we.parent=re,Ae.parent=re,ve.parent=re,re.children.push(we),re.children.push(Ae),re.children.push(ve)}}var Me=!1;for(var Ee in n)if((K=n[Ee]).layout!=0){Me=!0;break}var Se=a.events.has("node-layout",t._event_id);if(Me||Se){var de={nodes:l,config:e,action:r,actionParams:i};if(x.length){var Te=!1;for(var te in S){var ue=S[te];for(u=0;u<ue.length;u++)if((g=l[ue[u]]).subLevels){Te=!0;break}if(Te)break}if(Te){var Ke={},Ne={},Pe={};for(var te in S){ue=S[te];var at=!1,be=null;for(u=0;u<ue.length;u++){var Ie=ue[u];(be===null||x.has(Ie))&&(be=l[Ie].parent.id,at||a.isNEU(l[Ie].subLevels)||(at=l[Ie].subLevels>0)),Ke[be]||(Ke[be]=[]),Ke[be].push(Ie),at&&(Pe[be]=te,Ne[be]||(Ne[be]=[]),Ne[be].push(Ie))}}for(var te in S={},Ne)if(Ne[te].length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN){var Oe=Pe[te];for(u=l[Oe].children.length-1;u>=0;u--)q=l[Oe].children[u],Ne[te].has(q.id)&&l[Oe].children.splice(u,1)}for(var te in Ke)Ke[te].length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&(S[te]=Ke[te])}}for(var te in S){for(var Ue=w=l[te];Ue.isSplit;)Ue=l[Ue.pid];for(;Ue.isSubLevel;)Ue=l[Ue.pid];if((K=n[w.lcn?w.lcn:"base"]).layout!=0||Se){de.pnode=w,de.layout=K.layout,de.layoutGridColumns=e.layoutGridColumns,de.childrenIds=S[te],de.lastChildrenPidIds=S,de.subLevels=0,de.layouts=[],a.events.publish("node-layout",[t,de]),a.events.publish("layout",[de]),de.layouts.length||de.layouts.push({layout:de.layout,childrenIds:de.childrenIds,subLevels:de.subLevels,layoutGridColumns:de.layoutGridColumns});for(var We=0;We<de.layouts.length;We++){var pe=de.layouts[We];for(a.isNEU(pe.subLevels)&&(pe.subLevels=0),a.isNEU(pe.layout)&&(pe.layout=K.layout),Ue=w=l[te];Ue.isSplit;)Ue=l[Ue.pid];for(;Ue.isSubLevel;)Ue=l[Ue.pid];var He=w;for(b=0;b<pe.subLevels;b++)H=new a.node(We+"_sublevel_layout_"+b,He.id,[],"subLevel"),a.manager._initDinamicNode(H,He.lcn),H.parent=He,He.children.push(H),l[H.id]=H,He=H;if(pe.subLevels){for(b=0;b<pe.childrenIds.length;b++){var pt;q=l[pe.childrenIds[b]],(pt=w.children.indexOf(q))!=-1&&w.children.splice(pt,1),q.parent=He,He.children.push(q)}w=He}if(pe.layout==a.layout.grid&&pe.childrenIds.length>2){pe.layoutGridColumns=="dynamic"&&(pe.layoutGridColumns=a._getDynamicGridCoulumns(pe.childrenIds.length));var mt=w.id;for(u=w.children.length-1;u>=0;u--)for(b=0;b<pe.childrenIds.length;b++)if(Ie=pe.childrenIds[b],w.children[u].id==Ie){w.children.splice(u,1);break}var gt=pe.layoutGridColumns;for(gt%2!=0&&gt>2&&gt--,u=0;u<pe.childrenIds.length;u+=gt){var dn=null;for(b=0;b<gt;b++){var Ds=u+gt>=pe.childrenIds.length;if(pe.childrenIds.length-1<u+b)break;(q=l[Ie=pe.childrenIds[u+b]]).parent=l[mt],l[mt].children.push(q),Ds||(gt/2-1==b&&(dn=new a.node(pe.childrenIds[u+b-1]+"_grid_pseudo_node_"+pe.childrenIds[u+b+1],mt,[],"subLevel"),a.manager._initDinamicNode(dn,w.lcn),dn.parent=l[mt],l[mt].children.push(dn),l[dn.id]=dn),gt-1==b&&(mt=dn.id))}}}if(pe.layout==a.layout.mixed){var Mn=pe.childrenIds;for(u=Mn.length-1;u>=0;u--){for(w=(q=l[Mn[u]]).parent,q.layout=a.layout.mixed,b=w.children.length-1;b>=0;b--)if(q.id==w.children[b].id){w.children.splice(b,1);break}if(u>0){var zr=l[Mn[u-1]];q.parent=zr,q.layout=a.layout.mixed,zr.children.push(q)}else w.children.push(q)}}else if(pe.layout>1){H=new a.node(We+"_"+w.id+"_split_0",Ue.id,[],"split"),a.manager._initDinamicNode(H,w.lcn),l[H.id]=H,H.layout=pe.layout;var Ze=[];for(u=pe.childrenIds.length-1;u>=0;u--){for(q=l[pe.childrenIds[u]],b=0;b<w.children.length;b++)w.children[b].id==q.id&&w.children.splice(b,1);if(q.parent=null,q.layout=pe.layout,pe.layout!=a.layout.treeRightOffset&&pe.layout!=a.layout.treeRight||Ze.splice(0,0,q.id),pe.layout>2){var hn=new a.node(We+"_"+q.id+"_mirror",Ue.id,[],"mirror");a.manager._initDinamicNode(hn,q.lcn),hn.layout=pe.layout,l[hn.id]=hn,Ze.splice(0,0,hn.id)}pe.layout!=a.layout.treeRightOffset&&pe.layout!=a.layout.treeRight&&Ze.splice(0,0,q.id)}for(oe=1,b=Ze.length-1;b>=0;b--)b%2&&b!=Ze.length-1?(ie=new a.node(We+"_"+w.id+"_split_"+oe,Ue.id,[],"split"),a.manager._initDinamicNode(ie,w.lcn),ie.layout=pe.layout,l[ie.id]=ie,Ze.splice(b,0,ie.id),oe++):b%2&&Ze.splice(b,0,H.id);for(b=0;b<Ze.length;b+=3)re=null,b==0&&(re=w),we=l[Ze[b]],Ae=l[Ze[b+1]],ve=l[Ze[b+2]],b!=0&&(re=l[Ze[b-3]]),b==0||Ae||(re=l[Ze[b-2]]),we.parent=re,re.children.push(we),Ae&&(b!=0&&(re=l[Ze[b-2]]),Ae.parent=re,re.children.push(Ae)),ve&&(b!=0&&(re=l[Ze[b-1]]),ve.parent=re,re.children.push(ve))}}}}}if(a.VERTICAL_CHILDREN_ASSISTANT)for(u=0;u<c.length;u++)a.manager._verticalAssistantIterate(c[u],l);return de={nodes:l,roots:c},a.events.publish("nodes-initialized",[t,de]),{nodes:de.nodes,roots:de.roots,rootList:d}},a.manager._getOrderFieldValue=function(t,e){var n=e;return e.field&&(n=e.field),t[n]},a.manager._getNodeWidth=function(t,e){switch(e.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:return t.w;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:return t.h}return 0},a.manager._isVisible=function(t,e,n,r){if(t.x!=null&&t.y!=null){if(e.lazyLoading&&r!==a.action.exporting){let s=function(l,c){var d=l.x,u=l.y,h=l.w,f=l.h,m=c[0]-a.LAZY_LOADING_FACTOR,v=c[2]+a.LAZY_LOADING_FACTOR+c[0],y=c[1]-a.LAZY_LOADING_FACTOR,E=c[3]+a.LAZY_LOADING_FACTOR+c[1],g=d+h>m&&v>d;return g&&(g=u+f>y&&E>u),g};var o=s;if(s(t,n))return!0;for(var i=0;i<t.children.length;i++)if(s(t.children[i],n))return!0;return!1}return!0}},a.manager.getAllFields=function(t){var e=[a.TAGS];for(var n in t.nodeBinding)e.push(t.nodeBinding[n]);for(n=0;n<t.nodes.length;n++)for(var r in t.nodes[n])r!==a.ID&&r!==a.TAGS&&r!==a.NODES&&r!==a.PID&&r!==a.STPID&&r!=="movex"&&r!=="movey"&&(t.nodeBinding[r]||e.has(r)||e.push(r));return e},a.manager._getMostDeepChild=function(t){if(t){var e=t;return function n(r){r.sl>e.sl&&(e=r);for(var i=0;i<r.children.length;i++)n(r.children[i])}(t),e}},a.manager._getResponse=function(t,e,n,r,i,o,s,l,c,d,u,h,f,m,v){var y=d[0],E=[],g={top:null,left:null,bottom:null,right:null,minX:null,maxX:null,minY:null,maxY:null},w=[[],[],[]],_=i-s+2*r.padding,b=o-l+2*r.padding,A=a.getScale(c,t,e,r.scaleInitial,r.scaleMax,r.scaleMin,_,b);if(g.top=l-r.padding,g.left=s-r.padding,g.bottom=o+r.padding-e/A,g.right=i+r.padding-t/A,g.maxX=i,g.minX=s,g.maxY=o,g.minY=l,d.length==0||c==null&&!v&&r.align==a.CENTER){var k=Math.ceil(t/A),C=Math.ceil(e/A),x=0,S=0;if(k-2*r.padding>=i-s)switch(x=(i+s)/2-k/2,r.orientation){case a.orientation.right:case a.orientation.right_top:x=(s-i)/2-k/2}else switch(x=y.x-k/2+a.manager._getNodeWidth(y,r)/2,r.orientation){case a.orientation.right:case a.orientation.right_top:(x=-(k/2-(s-i)/2))<r.padding-k&&(x=r.padding-k);break;case a.orientation.left:case a.orientation.bottom_left:case a.orientation.top_left:case a.orientation.left_top:(x=-(k/2-(i-s)/2))>-r.padding&&(x=-r.padding)}if(C-2*r.padding>=o-l)switch(S=(o+l)/2-C/2,r.orientation){case a.orientation.bottom:case a.orientation.bottom_left:S=(l-o)/2-C/2}else switch((S=-(C/2-(o-l)/2))>-r.padding&&(S=-r.padding),r.orientation){case a.orientation.bottom:case a.orientation.bottom_left:(S=-(C/2-(l-o)/2))<r.padding-C&&(S=r.padding-C);break;case a.orientation.left:case a.orientation.right:S=y.y-C/2+a.manager._getNodeWidth(y,r)/2}c=[x,S,k,C]}else if(c==null&&!v&&r.align==a.ORIENTATION){switch(k=Math.ceil(t/A),C=Math.ceil(e/A),x=0,S=0,r.orientation){case a.orientation.top:x=y.x-k/2+a.manager._getNodeWidth(y,r)/2,S=-r.padding;break;case a.orientation.bottom:x=y.x-k/2+a.manager._getNodeWidth(y,r)/2,S=r.padding-C;break;case a.orientation.left:x=-r.padding,S=y.y-C/2+a.manager._getNodeWidth(y,r)/2;break;case a.orientation.right:x=r.padding-k,S=y.y-C/2+a.manager._getNodeWidth(y,r)/2;break;case a.orientation.top_left:x=-r.padding,S=-r.padding;break;case a.orientation.right_top:x=r.padding-k,S=-r.padding;break;case a.orientation.left_top:x=-r.padding,S=-r.padding;break;case a.orientation.bottom_left:x=-r.padding,S=r.padding-C}c=[x,S,k,C],r.sticky&&(c[0]<g.left&&c[0]<g.right&&(c[0]=g.left>g.right?g.right:g.left),c[0]>g.right&&c[0]>g.left&&(c[0]=g.left>g.right?g.left:g.right),c[1]<g.top&&c[1]<g.bottom&&(c[1]=g.top>g.bottom?g.bottom:g.top),c[1]>g.bottom&&c[1]>g.top&&(c[1]=g.top>g.bottom?g.top:g.bottom))}if(u==a.action.centerNode||u==a.action.maximize){var T=f[h.id];h.options.horizontal==1&&(c[0]=T.x+T.w/2-c[2]/2),h.options.vertical==1&&(c[1]=T.y+T.h/2-c[3]/2),r.sticky&&(c[0]<g.left&&c[0]<g.right&&(c[0]=g.left>g.right?g.right:g.left),c[0]>g.right&&c[0]>g.left&&(c[0]=g.left>g.right?g.left:g.right),c[1]<g.top&&c[1]<g.bottom&&(c[1]=g.top>g.bottom?g.bottom:g.top),c[1]>g.bottom&&c[1]>g.top&&(c[1]=g.top>g.bottom?g.top:g.bottom))}if(u==a.action.insert||u==a.action.expand||u==a.action.collapse||u==a.action.update||u==a.action.centerNode){var R=null;if(u==a.action.insert&&h&&h.insertedNodeId!=null&&h.insertedNodeId!=null)R=f[h.insertedNodeId];else if(u==a.action.update&&h&&h.visId!=null&&h.visId!=null)R=f[h.visId];else if(u!=a.action.expand&&u!=a.action.collapse||!h||h.id==null||h.id==null){if(u==a.action.centerNode){switch(r.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:h.options.vertical||(R=f[h.id]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:h.options.horizontal||(R=f[h.id])}R&&(R=a.manager._getMostDeepChild(R,f))}}else R=f[h.id],R=a.manager._getMostDeepChild(R,f);if(!a.FIXED_POSITION_ON_CLICK&&R)switch(r.orientation){case a.orientation.top:case a.orientation.top_left:var N=R.y+R.h-c[3]+r.padding;c[1]<N&&(c[1]=N);break;case a.orientation.bottom:case a.orientation.bottom_left:N=R.y-r.padding,c[1]>N&&(c[1]=N);break;case a.orientation.right:case a.orientation.right_top:N=R.x-r.padding,c[0]>N&&(c[0]=N);break;case a.orientation.left:case a.orientation.left_top:N=R.x+R.w-c[2]+r.padding,c[0]<N&&(c[0]=N)}}for(var P=0;P<d.length;P++)a.manager._iterate2(d[P],f,r,c,u,h,E,m,n,w);return{animations:w,boundary:g,viewBox:c,visibleNodeIds:E,nodes:f,allFields:a.manager.getAllFields(r)}},a.manager._iterate2=function(t,e,n,r,i,o,s,l,c,d){if(a.manager._isVisible(t,n,r,i)){s.push(t.id);var u=null;if((i==a.action.expand||i==a.action.collapse||i==a.action.maximize)&&l&&l[t.id]&&o.method=="expandCollapseToLevel"){if(u={x:(v=l[t.id]).x,y:v.y},v){u={x:v.x,y:v.y};for(var h=t,f=null;h!=null;)l[h.id]&&l[h.id].collapsed&&(f=h),h=h.parent;f&&f.parent&&(u={x:f.parent.x,y:f.parent.y})}if(y=e[o.id]){for(h=t.parent;h!=null;)h=h.parent;h&&(u={x:y.x+y.w/2-t.w/2,y:y.y+y.h/2-t.h/2})}}else if((i==a.action.expand||i==a.action.collapse)&&l&&l[t.id]){if(u={x:(v=l[t.id]).x,y:v.y},o.ids=="all"&&v){for(u={x:v.x,y:v.y},h=t,f=null;h!=null;)l[h.id]&&l[h.id].collapsed&&(f=h),h=h.parent;f&&f.parent&&(u={x:f.parent.x,y:f.parent.y})}if(y=e[o.id]){for(h=t.parent;h!=null&&o.ids.indexOf(t.id)==-1&&o.ids.indexOf(h.id)==-1;)h=h.parent;h&&(u={x:y.x+y.w/2-t.w/2,y:y.y+y.h/2-t.h/2})}}else if(i==a.action.centerNode&&l&&l[t.id])(v=l[t.id]).x!=null&&v.y!=null&&(u={x:v.x,y:v.y}),(m=e[o.id])&&m==t&&(h=t.parent)&&h.id==o.id&&(u={x:m.x+m.w/2-t.w/2,y:m.y+m.h/2-t.h/2});else if(i==a.action.maximize&&l&&l[t.id]){var m;(v=l[t.id]).x!=null&&v.y!=null&&(u={x:v.x,y:v.y}),(m=e[o.id])&&m==t&&(h=t.parent)&&h.id==o.id&&(u={x:m.x+m.w/2-t.w/2,y:m.y+m.h/2-t.h/2})}else if(i==a.action.minimize&&l&&l[t.id])u={x:(v=l[t.id]).x,y:v.y};else if(i==a.action.insert&&o&&o.insertedNodeId==t.id&&t.parent)u={x:t.parent.x,y:t.parent.y};else if(i!=a.action.update&&i!=a.action.insert||!l)i!==a.action.exporting&&i!==a.action.init&&c.indexOf(t.id)==-1&&(d[0].push(t.id),d[1].push({opacity:0}),d[2].push({opacity:1}));else{var v,y;if((!(v=l[t.id])||a.isNEU(v.x)&&a.isNEU(v.y))&&o){if(y=e[o.id]){for(h=y;h&&h.id==t.id;)h=h.parent;h&&(u={x:y.x,y:y.y})}}else v&&(u={x:v.x,y:v.y})}u!=null&&u.x!=null&&u.y!=null&&(u.x!=t.x||u.y!=t.y)&&(o&&o.dragNodeIdList&&o.dragNodeIdList.indexOf(t.id)!=-1||(d[0].push(t.id),d[1].push({transform:[1,0,0,1,u.x,u.y]}),d[2].push({transform:[1,0,0,1,t.x,t.y]})))}for(var E=0;E<t.stChildren.length;E++)a.manager._iterate2(t.stChildren[E],e,n,r,i,o,s,l,c,d);for(E=0;E<t.children.length;E++)a.manager._iterate2(t.children[E],e,n,r,i,o,s,l,c,d)},a.manager._addExpandedNodeIdsIterate=function(t,e,n){for(var r=0;r<t.childrenIds.length;r++)n.push(t.childrenIds[r]),a.manager._addExpandedNodeIdsIterate(e[t.childrenIds[r]],e,n)},a.manager._setMinMaxXYAdjustifyIterate=function(t,e,n,r,i,o,s,l){t.x+=o.x,t.y+=o.y;for(var c=0;c<t.stChildren.length;c++)a.manager._setMinMaxXYAdjustifyIterate(t.stChildren[c],t.stChildren[c],n,0,i,o,s,l);for(t.isPartner?t.sl=r-1:t.sl=r,i[e.id]==null&&(i[e.id]={}),i[e.id][t.sl]==null&&(i[e.id][t.sl]={minX:null,minY:null,maxX:null,maxY:null}),t.layout?(l[e.id]==null&&(l[e.id]={}),l[e.id][t.sl]==null&&(l[e.id][t.sl]=t)):a._setMinMaxXY(t,i[e.id][t.sl]),t.movex!=null&&(t.x+=t.movex),t.movey!=null&&(t.y+=t.movey),a._setMinMaxXY(t,n),r++,c=0;c<t.children.length;c++)a.manager._setMinMaxXYAdjustifyIterate(t.children[c],e,n,r,i,o,s,l)},a.manager._doNotChangePositionOfClickedNodeIfAny=function(t,e,n,r,i,o){if(n!=a.action.expand&&n!=a.action.collapse&&n!=a.action.minimize&&n!=a.action.maximize&&n!=a.action.centerNode&&n!=a.action.update&&n!=a.action.insert)return{x:0,y:0};if(n==a.action.update&&(!r||r.id==null)){if(!t||!t.length)return{x:0,y:0};r={id:t[0].id}}if(r.id==null)return{x:0,y:0};var s=r.id;(n==a.action.minimize&&e[s].parent||n==a.action.maximize&&e[s].parent)&&(s=e[s].pid);var l=e[s],c=i[s];if(!c)return{x:0,y:0};var d=c.movex!=null?c.movex:0,u=c.movey!=null?c.movey:0;return{x:(c.x?c.x-d:0)-l.x,y:(c.y?c.y-u:0)-l.y}},a.manager._verticalAssistantIterate=function(t,e){for(var n=0;n<t.stChildren.length;n++)a.manager._verticalAssistantIterate(t.stChildren[n],e);if(t.children.length==3)a.manager._verticalAssistantIterate(t.children[0],e),a.manager._verticalAssistantIterate(t.children[2],e),a.manager._verticalAssistantIterate(t.children[1],e);else for(n=0;n<t.children.length;n++)a.manager._verticalAssistantIterate(t.children[n],e);if(t.isAssistant&&t.isSplit&&t.children.length){for(var r=t.parent.children[0],i=t.parent.children[2],o=t.parent;!o.hasAssistants;)o=o.parent;var s={max:0},l={max:0};a.manager._verticalAssistantLevelCountIterate(r,0,s),a.manager._verticalAssistantLevelCountIterate(i,0,l);var c=Math.max(s.max,l.max),d=[];for(n=0;n<c;n++){var u=new a.node(t.parent.id+"_split_assitant_level_"+n,t.pid,[],"subLevel");a.manager._initDinamicNode(u,t.lcn,!0),n>0&&(d[n-1].children.push(u),u.parent=d[n-1]),e[u.id]=u,d.push(u)}if(d.length){for(var h=d[d.length-1],f=d[0],m=t.children.length-1;m>=0;m--){var v=t.children[m];h.children.unshift(v),v.parent=h,t.children.splice(m,1)}t.children.push(f),f.parent=t}}},a.manager._verticalAssistantLevelCountIterate=function(t,e,n){n.max<e&&(n.max=e),e++;for(var r=0;r<t.children.length;r++)a.manager._verticalAssistantLevelCountIterate(t.children[r],e,n)},a._addDottedLines=function(t){var e=t.nodes;if((t.groupDottedLines.length||t.dottedLines.length)&&(e=JSON.parse(JSON.stringify(e))),t.groupDottedLines.length)for(var n=[],r=0;r<t.groupDottedLines.length;r++){var i=t.groupDottedLines[r];i.rootId==null&&(i.rootId=i.to);var o=`balkan_group_dotted_${i.rootId}`;if(!n.has(o)){for(var s=0;s<e.length;s++)if(e[s].id==i.rootId){(u=JSON.parse(JSON.stringify(e[s]))).id=`balkan_group_dotted_${i.rootId}_balkan_id_${e[s].id}`,u.pid=void 0,u.stpid=e[s].id,e.push(u),n.push(o),e[s].tags||(e[s].tags=[]),e[s].tags.push("group-dotted-lines"),e[s].tags.push("group-dotted-lines-"+o);break}}for(s=0;s<e.length;s++)if(e[s].id==i.from){if((u=JSON.parse(JSON.stringify(e[s]))).id=`balkan_group_dotted_${i.rootId}_balkan_id_${e[s].id}`,u.pid=`balkan_group_dotted_${i.rootId}_balkan_id_${i.to}`,u.tags){var l=u.tags.indexOf("group-dotted-lines");l!=-1&&u.tags.splice(l,1)}if(u.tags||(u.tags=[]),u.tags.push("bft-dotted-connector"),i.tags)for(var c=0;c<i.tags.length;c++)u.tags.push(i.tags[c]);e.push(u);break}}if(t.dottedLines.length)for(r=0;r<t.dottedLines.length;r++){var d=t.dottedLines[r];for(d.rootId==null&&(d.rootId=d.to),s=0;s<e.length;s++)if(e[s].id==d.from){var u;if((u=JSON.parse(JSON.stringify(e[s]))).id=`balkan_dotted_${d.rootId}_balkan_id_${e[s].id}`,d.rootId==d.to?u.pid=d.to:u.pid=`balkan_dotted_${d.rootId}_balkan_id_${d.to}`,u.tags||(u.tags=[]),u.tags.push("bft-dotted-connector"),d.tags)for(c=0;c<d.tags.length;c++)u.tags.push(d.tags[c]);e.push(u);break}}return e},a.manager.__createNodes=function(t,e,n,r,i,o,s,l){for(var c=n.nodes,d=[],u={},h={},f=0;f<c.length;f++){var m,v=c[f];m=a.STRING_TAGS?v.tags?v.tags.split(","):[]:Array.isArray(v.tags)?v.tags.slice(0):[],l.filterUI.addFilterTag(v)&&m.push("filter");var y=l.searchUI.addMatchTag(v.id);y===!0?m.unshift("match"):y===!1&&m.unshift("no-match"),v.gender&&m.push(v.gender);var E=a._getTemplate(m,n.tags,n.template);v.templateName&&(E=v.templateName);var g=new a.node(v.id,v.pid,m,E);g.ftChildrenIds=[],g.rids=[],a.isNEU(v.ppid)||(g.ppid=v.ppid),a.isNEU(v.stpid)||(g.stpid=v.stpid),a.isNEU(v.mid)||(g.mid=v.mid),a.isNEU(v.fid)||(g.fid=v.fid),a.isNEU(v.gender)||(g.gender=v.gender),Array.isArray(v.pids)?g.pids=v.pids:g.pids=[],n.orderBy!=null&&(g.order=a.manager._getOrderFieldValue(v,n.orderBy)),t[v.id]=g,a.isNEU(g.stpid)?(a.isNEU(g.mid)||(u[g.mid]||(u[g.mid]=[]),u[g.mid].push(g.id)),a.isNEU(g.fid)||(u[g.fid]||(u[g.fid]=[]),u[g.fid].push(g.id)),a.isNEU(g.mid)&&a.isNEU(g.fid)&&a.isNEU(g.stpid)&&(d.has(g.id)||d.push(g.id))):(h[g.stpid]||(h[g.stpid]=[]),h[g.stpid].push(g.id))}if(n.orderBy!=null&&u)for(var w in u)u[w].sort(function(T,R){var N=t[T].order,P=t[R].order;return typeof N=="number"||typeof P=="number"?(N==null&&(N=-1),P==null&&(P=-1),n.orderBy.desc?P-N:N-P):typeof N=="string"||typeof P=="string"?(N==null&&(N=""),P==null&&(P=""),n.orderBy.desc?P.localeCompare(N):N.localeCompare(P)):void 0});for(f=0;f<d.length;f++){var _=t[d[f]];if(_){var b=[];a.manager._iterateSetRootIds(_.id,_.id,h,u,t,b),s.push(b)}}for(f=0;f<s.length;f++)for(var A=0;A<s.length;A++)if(A!=f){for(var k=s[f],C=s[A],x=!1,S=0;S<k.length;S++)if(C.has(k[S])){x=!0;break}x&&(s[f]=k.concat(C).unique(),s[A]=[])}for(f=s.length-1;f>=0;f--)s[f].length||s.splice(f,1);if(!n.roots||!n.roots.length)for(n.roots=[],f=s.length-1;f>=0;f--)n.roots.push(s[f][0]);for(f=0;f<n.roots.length;f++)a.manager._iterateFT(n.roots[f],h,u,t,o,e,r,i,n)},a.manager._iterateSetRootIds=function(t,e,n,r,i,o){var s=i[t];if(s){s.rids.has(e)||s.rids.push(e);for(var l=0;l<s.rids.length;l++)o.has(s.rids[l])||o.push(s.rids[l]);for(l=0;l<s.pids.length;l++){var c=i[s.pids[l]];if(c)for(var d=0;d<c.rids.length;d++)o.has(c.rids[d])||o.push(c.rids[d])}if(n[s.id])for(l=0;l<n[s.id].length;l++)a.manager._iterateSetRootIds(n[s.id][l],e,n,r,i,o);if(r[s.id])for(l=0;l<r[s.id].length;l++)a.manager._iterateSetRootIds(r[s.id][l],e,n,r,i,o)}},a.manager._iterateFT=function(t,e,n,r,i,o,s,l,c){var d,u=r[t],h=i?i[t]:null,f=r[u.stpid],m=r[u.mid],v=r[u.fid];if(f||(u.stpid=null),m?v&&(m.tags.has("partner")||m.tags.has("left-partner")||m.tags.has("right-partner"))?(u.pid=v.id,d=v,u.ppid=m.id):(u.pid=m.id,d=m,v&&(u.ppid=v.id)):v?m&&(v.tags.has("partner")||v.tags.has("left-partner")||v.tags.has("right-partner"))?(u.pid=m.id,d=m,u.ppid=v.id):(u.pid=v.id,d=v,m&&(u.ppid=m.id)):u.pid,f){var y=i?i[f.id]:null;y&&(f.min=y.min),f.stChildrenIds.push(u.id)}else m||v?(h&&(u.collapsed=h.collapsed,u.min=h.min),d&&!d.childrenIds.has(u.id)&&d.childrenIds.push(u.id),m&&!m.ftChildrenIds.has(u.id)&&m.ftChildrenIds.push(u.id),v&&!v.ftChildrenIds.has(u.id)&&v.ftChildrenIds.push(u.id)):(h&&(u.collapsed=h.collapsed,u.min=h.min),o.push(u));s==a.action.init&&(u.min=a._getMin(u,c));for(var E=0;E<u.pids.length;E++){var g=r[u.pids[E]];if(g){g.pid=u.id;var w=i?i[g.id]:null;if(w&&(g.collapsed=w.collapsed,g.min=w.min),s==a.action.init&&(g.min=a._getMin(g,c)),l&&h&&w&&l.id==u.id?w.hasPartners&&h.isPartner==1?g.tags.push("left-partner"):w.hasPartners&&h.isPartner==2||h.isPartner==1?g.tags.push("right-partner"):h.isPartner==2?g.tags.push("left-partner"):g.tags.push("partner"):w&&w.isPartner==2?g.tags.push("left-partner"):w&&w.isPartner==1?g.tags.push("right-partner"):g.tags.push("partner"),!a.isNEU(g)&&n[g.id])for(var _=0;_<n[g.id].length;_++){var b=r[n[g.id][_]];b&&(a.isNEU(b.fid)||a.isNEU(b.mid))&&a.manager._iterateFT(n[g.id][_],e,n,r,i,o,s,l,c)}u.childrenIds.push(g.id)}}if(e[t])for(_=0;_<e[t].length;_++)a.manager._iterateFT(e[t][_],e,n,r,i,o,s,l,c);if(n[t])for(_=0;_<n[t].length;_++)a.manager._iterateFT(n[t][_],e,n,r,i,o,s,l,c)},a.manager.getAllFields=function(t){var e=[a.TAGS];for(var n in t.nodeBinding)e.push(t.nodeBinding[n]);for(n=0;n<t.nodes.length;n++)for(var r in t.nodes[n])r!==a.ID&&r!==a.TAGS&&r!==a.NODES&&r!==a.PID&&r!==a.STPID&&r!=="mid"&&r!=="fid"&&r!=="pids"&&(t.nodeBinding[r]||e.has(r)||e.push(r));return e},a.templates={},a.templates.base={defs:`<g transform="matrix(1,0,0,1,0,0)" id="dot"><circle class="bft-fill" cx="0" cy="0" r="5" stroke="#aeaeae" stroke-width="1"></circle></g>
            <g id="base_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="4" cy="11" r="2" fill="#aeaeae"></circle><circle cx="11" cy="11" r="2" fill="#aeaeae"></circle><circle cx="18" cy="11" r="2" fill="#aeaeae"></circle></g>
            <g style="cursor: pointer;" id="base_tree_menu">
                <rect x="0" y="0" width="25" height="25" fill="transparent"></rect>
                ${a.icon.addUser(25,25,"#fff",0,0)}
            </g>
            <g style="cursor: pointer;" id="base_tree_menu_close">
                <circle cx="12.5" cy="12.5" r="12" fill="#F57C00"></circle>
                ${a.icon.close(25,25,"#fff",0,0)}
            </g>            
            <g id="base_up">
                <circle cx="15" cy="15" r="15" fill="#fff" stroke="#aeaeae" stroke-width="1"></circle>
                ${a.icon.ft(20,20,"#aeaeae",5,5)}
            </g>
            <clipPath id="base_img_0"><rect id="base_img_0_stroke" stroke-width="3" stroke="#fff" x="170" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>`,size:[250,120],linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},expandCollapseSize:0,svg:'<svg class="{randId} {template}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',pointer:'<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#C1C1C1" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',node:'<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',menuButton:'<div style="position:absolute;right:{p}px;top:{p}px; width:40px;height:50px;cursor:pointer;" '+a.attr.control_export_menu+'=""><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"></div>',padding:[50,20,35,20],nodeMenuButton:`<use ${a.attr.control_node_menu_id}="{id}" x="220" y="95" xlink:href="#base_node_menu"/>`,nodeTreeMenuButton:'<use data-ctrl-n-t-menu-id="{id}" x="10" y="10" xlink:href="#base_tree_menu"/>',nodeTreeMenuCloseButton:'<use data-ctrl-n-t-menu-c="" x="10" y="10" xlink:href="#base_tree_menu_close"/>',up:'<use x="110" y="-10" xlink:href="#base_up"/>',img_0:'<use xlink:href="#base_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#base_img_0)" xlink:href="{val}"  x="170" y="-5"  width="70" height="70"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+a.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>'},a.templates.dot=Object.assign({},a.templates.base),a.templates.dot.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',a.templates.dot.size=[10,10],a.templates.dot.nodeMenuButton="",a.templates.dot.nodeTreeMenuButton="",a.templates.dot.nodeTreeMenuCloseButton="",a.templates.dot.up="",a.templates.john=Object.assign({},a.templates.base),a.templates.john.nodeMenuButton=`<use ${a.attr.control_node_menu_id}="{id}" x="90" y="50" xlink:href="#base_node_menu"/>`,a.templates.john.defs=`<style>                          
                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                            background-color: #aeaeae;
                                        }
                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                            background-color: #039BE5;
                                        }        
                                        .{randId}.male div.bft-img-button:hover{
                                            background-color: #F57C00;
                                        }
                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                            background-color: #F57C00;
                                        }        
                                        .{randId}.female div.bft-img-button:hover{
                                            background-color: #039BE5;
                                        }
                                    </style>
                                    <clipPath id="john_img_0"><rect  x="6" y="6" rx="54" ry="54" width="108" height="108"></rect></clipPath>
                                    ${a.gradientCircleForDefs("circle","#aeaeae",60,5)}
                                    ${a.gradientCircleForDefs("male_circle","#039BE5",60,5)}
                                    ${a.gradientCircleForDefs("female_circle","#F57C00",60,5)}`,a.templates.john.field_0="<text "+a.attr.width+'="230" style="font-size: 16px;font-weight:bold;" fill="#aeaeae" x="60" y="135" text-anchor="middle">{val}</text>',a.templates.john.field_1="<text "+a.attr.width+'="150" style="font-size: 13px;" fill="#aeaeae" x="60" y="150" text-anchor="middle">{val}</text>',a.templates.john.node='<use x="0" y="0" xlink:href="#circle" />',a.templates.john.img_0='<image preserveAspectRatio="xMidYMid slice" clip-path="url(#john_img_0)" xlink:href="{val}"  x="6" y="6"  width="108" height="108"></image>',a.templates.john.ripple={radius:60,color:"#e6e6e6",rect:null},a.templates.john.size=[120,120],a.templates.john_male=Object.assign({},a.templates.john),a.templates.john_male.node+='<use x="0" y="0" xlink:href="#male_circle" />',a.templates.john_male.ripple={radius:60,color:"#039BE5",rect:null},a.templates.john_female=Object.assign({},a.templates.john),a.templates.john_female.node+='<use x="0" y="0" xlink:href="#female_circle" />',a.templates.john_female.ripple={radius:60,color:"#F57C00",rect:null},a.templates.tommy=Object.assign({},a.templates.base),a.templates.tommy.defs=`<style>                          
                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                            background-color: #aeaeae;
                                        }
                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                            background-color: #039BE5;
                                        }        
                                        .{randId}.male div.bft-img-button:hover{
                                            background-color: #F57C00;
                                        }
                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                            background-color: #F57C00;
                                        }        
                                        .{randId}.female div.bft-img-button:hover{
                                            background-color: #039BE5;
                                        }
                                    </style>`,a.templates.tommy.field_0="<text "+a.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="10" y="90" text-anchor="start">{val}</text>',a.templates.tommy.field_1="<text "+a.attr.width+'="150" style="font-size: 14px;" fill="#ffffff" x="10" y="65" text-anchor="start">{val}</text>',a.templates.tommy.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#aeaeae" stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.tommy_male=Object.assign({},a.templates.tommy),a.templates.tommy_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#039BE5" stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.tommy_female=Object.assign({},a.templates.tommy),a.templates.tommy_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#F57C00" stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.hugo=Object.assign({},a.templates.base),a.templates.hugo.up='<use x="200" y="10" xlink:href="#hugo_up"/>',a.templates.hugo.nodeMenuButton=`<use x="225" y="10" ${a.attr.control_node_menu_id}="{id}" xlink:href="#hugo_node_menu"/>`,a.templates.hugo.defs=`<clipPath id="hugo_img_0"><rect id="hugo_img_0_stroke" stroke-width="2" stroke="#fff" x="90" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>
                                    <linearGradient id="hugo_grad_female" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#FF8024;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#FF46A3;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="hugo_grad_male" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#00D3A5;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#00A7D4;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="hugo_grad" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#D0D0D0;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#909090;stop-opacity:1" />
                                    </linearGradient>
                                    <g id="hugo_up">
                                        <circle cx="12" cy="12" r="15" fill="transparent" ></circle>
                                        ${a.icon.ft(24,24,"#fff",0,0)}
                                    </g>
                                    <g id="hugo_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="11" cy="4" r="2" fill="#ffffff"></circle><circle cx="11" cy="11" r="2" fill="#ffffff"></circle><circle cx="11" cy="18" r="2" fill="#ffffff"></circle></g>
                                    <style>
                                        .{randId} .bft-edit-form-header{
                                            background: linear-gradient(90deg, #D0D0D0 0%, #909090 100%);
                                        }
                                        .{randId}.male .bft-edit-form-header{
                                            background: linear-gradient(90deg, #00D3A5 0%, #00A7D4 100%);
                                        }
                                        .{randId}.female .bft-edit-form-header{
                                            background: linear-gradient(90deg, #FF8024 0%, #FF46A3 100%);
                                        }  
                                        .{randId} .bft-img-button{
                                            background-color: #909090;
                                        }      
                                        .{randId} .bft-img-button:hover{
                                            background-color: #D0D0D0;
                                        }
                                        .{randId}.male .bft-img-button{
                                            background-color: #00A7D4;
                                        }      
                                        .{randId}.male .bft-img-button:hover{
                                            background-color: #00D3A5;
                                        }
                                        .{randId}.female .bft-img-button{
                                            background-color: #FF46A3;
                                        }      
                                        .{randId}.female .bft-img-button:hover{
                                            background-color: #FF8024;
                                        }
                                        
                                    </style>`,a.templates.hugo.img_0='<use xlink:href="#hugo_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#hugo_img_0)" xlink:href="{val}"  x="90" y="-5"  width="70" height="70"></image>',a.templates.hugo.field_0="<text "+a.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="125" y="85" text-anchor="middle">{val}</text>',a.templates.hugo.field_1="<text "+a.attr.width+'="230" style="font-size: 14px;" fill="#ffffff" x="125" y="105" text-anchor="middle">{val}</text>',a.templates.hugo.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad) stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.hugo_male=Object.assign({},a.templates.hugo),a.templates.hugo_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_male) stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.hugo_female=Object.assign({},a.templates.hugo),a.templates.hugo_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_female) stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.mother=Object.assign({},a.templates.base),a.templates.mother.up="",a.templates.mother.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;"  stroke-width="1" stroke="#F57C00" rx="5" ry="5"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add mother</text>'+a.icon.mother(70,70,"#F57C00",10,40),a.templates.mother.field_0="",a.templates.mother.field_1="",a.templates.father=Object.assign({},a.templates.mother),a.templates.father.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add father</text>'+a.icon.father(70,70,"#039BE5",10,40),a.templates.partner=Object.assign({},a.templates.mother),a.templates.partner.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#aeaeae;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#aeaeae" x="240" y="30" text-anchor="end">Add partner</text>',a.templates.son=Object.assign({},a.templates.mother),a.templates.son.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add son</text>'+a.icon.son(70,70,"#039BE5",10,40),a.templates.daughter=Object.assign({},a.templates.mother),a.templates.daughter.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add daughter</text>'+a.icon.daughter(70,70,"#F57C00",10,40),a.templates.husband=Object.assign({},a.templates.mother),a.templates.husband.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add husband</text>'+a.icon.husband(70,70,"#039BE5",10,40),a.templates.wife=Object.assign({},a.templates.mother),a.templates.wife.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add wife</text>'+a.icon.wife(70,70,"#F57C00",10,40),a.templates.pet=Object.assign({},a.templates.mother),a.templates.pet.node='<rect x="0" y="0" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add pet</text>'+a.icon.teddy(70,70,"#F57C00",10,40),a.templates.cgroup=Object.assign({},a.templates.base),a.templates.cgroup.defs="",a.templates.cgroup.size=[250,120],a.templates.cgroup.padding=[0,0,0,0],a.templates.cgroup.node="",a.templates.split=Object.assign({},a.templates.base),a.templates.split.size=[10,10],a.templates.split.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',a.templates.mirror={linkAdjuster:{},link:"",node:"",nodeMenuButton:"",size:[0,0]},a.ui={_defsIds:{},defs:function(t){var e="";for(var n in a.templates){var r=a.templates[n];r.defs&&(a.ui._defsIds[n]=a.randomId(),e+=r.defs.replaceAll("{randId}",a.ui._defsIds[n]))}return"<defs>"+e+t+"</defs>"},lonely:function(t){return t.nodes&&t.nodes.length?"":a.IT_IS_LONELY_HERE.replace("{link}",a.RES.IT_IS_LONELY_HERE_LINK)},pointer:function(t,e,n){return e===a.action.exporting?"":a.t(t.template,!1,n).pointer},node:function(t,e,n,r,i,o,s,l,c,d){var u=a.t(t.templateName,t.min,c),h=u.node.replaceAll("{w}",t.w).replaceAll("{h}",t.h);u.defs&&(h=h.replaceAll("{randId}",a.ui._defsIds[t.templateName])),s==null&&(s=r.nodeBinding);var f={node:t,data:e};for(var m in s){var v,y=s[m];e&&(v=e[y]);var E=a._lblIsImg(r,m);if(f.value=v,f.element=u[m],f.name=y,f.field=m,a.events.publish("field",[d,f])!==!1&&f.value!=null&&f.value!=null&&f.element!=null&&(!E||E&&!a.isNEU(f.value))){if(!E&&typeof f.value=="string"){var g=f.element;g&&(g=g.replaceAll("{ew}",t.w-(t.padding?t.padding[1]:0)).replaceAll("{cw}",t.w/2)),f.value=a.wrapText(f.value,g)}var w=f.element.replace("{val}",f.value);h+=w=w.replaceAll("{ew}",t.w-(t.padding?t.padding[1]:0)).replaceAll("{cw}",t.w/2).replaceAll("{randId}",a.randomId()).replaceAll("{randId2}",a.randomId())}}var _=a._getPosition(n,t,i,o),b="node";Array.isArray(t.tags)&&t.tags.length&&(b+=" "+t.tags.join(" ")),t.layout&&(b+=" tree-layout");var A="";t.lcn&&(A='lcn="'+t.lcn+'"');var k=a.nodeOpenTag.replace("{lcn}",A).replace("{id}",t.id).replace("{class}",b).replace("{sl}",t.sl).replace("{level}",t.level).replace("{x}",_.x).replace("{y}",_.y),C=a._getOpacity(n,t);return h=(k=k.replace("{opacity}",C))+(h+=a.ui.nodeBtns(r,t,l,u,d))+a.grCloseTag},nodeBtns:function(t,e,n,r,i){var o="";return t.nodeMenu==null||e.isSplit||n===a.action.exporting||(o+=r.nodeMenuButton.replace("{id}",e.id).replace("{cw}",e.w/2).replace("{ch}",e.h/2).replace("{ew}",e.w-(e.padding?e.padding[1]:0)).replace("{eh}",e.h-(e.padding?e.padding[2]:0))),t.nodeCircleMenu==null||e.isSplit||n===a.action.exporting||a.isNEU(r.nodeCircleMenuButton)||(o+='<g style="cursor:pointer;" transform="matrix(1,0,0,1,'+r.nodeCircleMenuButton.x+","+r.nodeCircleMenuButton.y+')" '+a.attr.control_node_circle_menu_id+'="'+e.id+'"><circle cx="0" cy="0" fill="'+r.nodeCircleMenuButton.color+'" r="'+r.nodeCircleMenuButton.radius+'" stroke-width="1" stroke="'+r.nodeCircleMenuButton.stroke+'"></circle><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="-6" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="-6" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="0" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="0" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="6" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="6" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line></g>'),o},expandCollapseBtn:function(t,e,n,r,i){var o="";if(r!==a.action.exporting&&!e.isSplit){var s=n[e.lcn?e.lcn:"base"],l=0,c=0,d=a.t(e.templateName,e.min,i);if(e.childrenIds.length>0){if(e.hasPartners){for(var u=!1,h=0;h<e.childrenIds.length;h++){var f=t.getNode(e.childrenIds[h]);!f||f.parentPartner||f.isPartner||(u=!0)}if(!u)return""}switch(s.orientation){case a.orientation.top:case a.orientation.top_left:l=e.x+e.w/2,c=e.y+e.h;break;case a.orientation.bottom:case a.orientation.bottom_left:l=e.x+e.w/2,c=e.y;break;case a.orientation.right:case a.orientation.right_top:l=e.x,c=e.y+e.h/2;break;case a.orientation.left:case a.orientation.left_top:l=e.x+e.w,c=e.y+e.h/2}if(l-=d.expandCollapseSize/2,c-=d.expandCollapseSize/2,t.getCollapsedIds(e).length?(o+=a.expcollOpenTag.replace("{id}",e.id).replace("{x}",l).replace("{y}",c),o+=d.plus,o+=a.grCloseTag):(o+=a.expcollOpenTag.replace("{id}",e.id).replace("{x}",l).replace("{y}",c),o+=d.minus,o+=a.grCloseTag),o.indexOf("{collapsed-children-count}")!=-1){var m=a.collapsedChildrenCount(t,e);o=o.replace("{collapsed-children-count}",m)}if(o.indexOf("{collapsed-children-total-count}")!=-1){var v=a.collapsedChildrenTotalCount(t,e);o=o.replace("{collapsed-children-total-count}",v)}if(o.indexOf("{children-count}")!=-1){var y=a.childrenCount(t,e);o=o.replace("{children-count}",y)}if(o.indexOf("{children-total-count}")!=-1){var E=a.childrenTotalCount(t,e);o=o.replace("{children-total-count}",E)}}t._nodeHasHiddenParent(e)&&(o+=a.upOpenTag.replace("{id}",e.id).replace("{x}",e.x).replace("{y}",e.y),o+=d.up,o+=a.grCloseTag)}var g={html:o,node:e};return a.events.publish("renderbuttons",[t,g]),g.html},link:function(t,e,n,r,i,o,s){var l=t.lcn?t.lcn:"base",c=e._layoutConfigs[l],d=a.t(t.templateName,t.min,n),u=[],h=[],f=c.levelSeparation/2;t.layout>0&&(f=c.mixedHierarchyNodesSeparation/2);var m=0,v=a.getRootOf(t).id,y=r[v][t.sl],E=void 0;if(t.hasPartners){E={ids:[],indexes:{},ppnodes:{},lastLeft:null,firstRight:null,maxSidePartnersWithChildren:0,rightIds:[],leftIds:[],partnerChildrenSplitSeparation:e.config.partnerChildrenSplitSeparation};for(var g=0;g<t.children.length;g++)(_=t.children[g]).parentPartner?(E.ppnodes[_.id]=_.parentPartner,E.ids.push(_.id),_.parentPartner.isPartner==1?(E.rightIds.indexOf(_.parentPartner.id)==-1&&E.rightIds.push(_.parentPartner.id),E.indexes[_.id]=E.rightIds.indexOf(_.parentPartner.id),E.firstRight||(E.firstRight=_)):_.parentPartner.isPartner==2&&(E.leftIds.indexOf(_.parentPartner.id)==-1&&E.leftIds.push(_.parentPartner.id),E.indexes[_.id]=E.leftIds.indexOf(_.parentPartner.id),E.lastLeft=_)):_.isPartner||(E.lastLeft=_,E.firstRight||(E.firstRight=_));E.maxSidePartnersWithChildren=Math.max(E.leftIds.length,E.rightIds.length),m=E.maxSidePartnersWithChildren==0?e.config.minPartnerSeparation/2:e.config.minPartnerSeparation/2+E.partnerChildrenSplitSeparation*E.maxSidePartnersWithChildren+E.partnerChildrenSplitSeparation/2}for(g=0;g<t.children.length;g++){var w,_=t.children[g],b=r[v][_.sl],A={xa:0,ya:0,xb:0,yb:0,xc:0,yc:0,xd:0,yd:0,x:0,y:0,rotate:0},k=(d=a.t(_.templateName,_.min,n)).link;if(_.isChildOfPartner)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:var C=_.layout==1?void 0:b.minY-(b.minY-y.maxY)/2;A=a.ui._linkTopToBottom(_.parentPartner,_,d,f,C);break;case a.orientation.bottom:case a.orientation.bottom_left:C=_.layout==1?void 0:b.maxY-(b.maxY-y.minY)/2,A=a.ui._linkBottomToTop(_.parentPartner,_,d,f,C);break;case a.orientation.right:case a.orientation.right_top:C=_.layout==1?void 0:b.maxX-(b.maxX-y.minX)/2,A=a.ui._linkRightToLeft(_.parentPartner,_,d,f,C);break;case a.orientation.left:case a.orientation.left_top:C=_.layout==1?void 0:b.minX-(b.minX-y.maxX)/2,A=a.ui._linkLeftToRight(_.parentPartner,_,d,f,C)}else if(E&&E.ids.indexOf(_.id)!=-1)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:A=a.ui._linkPpTop(E,t,_,b,y,d);break;case a.orientation.bottom:case a.orientation.bottom_left:A=a.ui._linkPpBottom(E,t,_,b,y,d);break;case a.orientation.right:case a.orientation.right_top:A=a.ui._linkPpRight(E,t,_,b,y,d);break;case a.orientation.left:case a.orientation.left_top:A=a.ui._linkPpLeft(E,t,_,b,y,d)}else{var x=_.isAssistant&&_.rightNeighbor&&_.rightNeighbor.isAssistant&&_.parent==_.rightNeighbor.parent,S=_.isAssistant&&_.leftNeighbor&&_.leftNeighbor.isAssistant&&_.parent==_.leftNeighbor.parent;if((x||_.layout>1)&&_.rightNeighbor&&_.rightNeighbor.isSplit)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:A=a.ui._linkRightToLeft(_.rightNeighbor,_,d,f);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:A=a.ui._linkBottomToTop(_.rightNeighbor,_,d,f)}else if((S||_.layout>1)&&_.leftNeighbor&&_.leftNeighbor.isSplit)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:A=a.ui._linkLeftToRight(_.leftNeighbor,_,d,f);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:A=a.ui._linkTopToBottom(_.leftNeighbor,_,d,f)}else switch(c.orientation){case a.orientation.top:case a.orientation.top_left:_.isPartner==1?A=a.ui._linkLeftToRight(t,_,d,m):_.isPartner==2?A=a.ui._linkRightToLeft(t,_,d,m):(C=_.layout==1?void 0:b.minY-(b.minY-y.maxY)/2,A=a.ui._linkTopToBottom(t,_,d,f,C));break;case a.orientation.bottom:case a.orientation.bottom_left:_.isPartner==1?A=a.ui._linkLeftToRight(t,_,d,m):_.isPartner==2?A=a.ui._linkRightToLeft(t,_,d,m):(C=_.layout==1?void 0:b.maxY-(b.maxY-y.minY)/2,A=a.ui._linkBottomToTop(t,_,d,f,C));break;case a.orientation.right:case a.orientation.right_top:_.isPartner==1?A=a.ui._linkTopToBottom(t,_,d,m):_.isPartner==2?A=a.ui._linkBottomToTop(t,_,d,m):(C=_.layout==1?void 0:b.maxX-(b.maxX-y.minX)/2,A=a.ui._linkRightToLeft(t,_,d,f,C));break;case a.orientation.left:case a.orientation.left_top:_.isPartner==1?A=a.ui._linkTopToBottom(t,_,d,m):_.isPartner==2?A=a.ui._linkBottomToTop(t,_,d,m):(C=_.layout==1?void 0:b.minX-(b.minX-y.maxX)/2,A=a.ui._linkLeftToRight(t,_,d,f,C))}}var T=a.ui._draggableLinkPath(e,t,_,A,f,c.orientation);if(T)w=T,k=k.replaceAll("{rounded}",T).replaceAll("{edge}",T).replaceAll("{curve}",w);else if(k.indexOf("{rounded}")!=-1)if(A.xa==A.xb&&A.xa==A.xc&&A.xa==A.xd||A.ya==A.yb&&A.ya==A.yc&&A.ya==A.yd)w="M"+A.xa+","+A.ya+" L"+A.xd+","+A.yd,k=k.replaceAll("{rounded}",w);else if(Math.abs(A.xa-A.xd)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.xa-A.xc)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.xa-A.xb)<=a.LINK_ROUNDED_CORNERS)w="M"+A.xa+","+A.ya+" L"+A.xa+","+A.yd,k=k.replaceAll("{rounded}",w);else if(Math.abs(A.ya-A.yd)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.ya-A.yc)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.ya-A.yb)<=a.LINK_ROUNDED_CORNERS)w="M"+A.xa+","+A.ya+" L"+A.xd+","+A.ya,k=k.replaceAll("{rounded}",w);else{var R=a.ui._roundedEdge(A.xa,A.ya,A.xb,A.yb,A.xc,A.yc),N=a.ui._roundedEdge(A.xb,A.yb,A.xc,A.yc,A.xd,A.yd);w="M"+R.x1+","+R.y1+" "+R.x2+","+R.y2+" Q"+R.qx1+","+R.qy1+" "+R.qx2+","+R.qy2+" L"+N.x2+","+N.y2+" Q"+N.qx1+","+N.qy1+" "+N.qx2+","+N.qy2+" L"+N.x3+","+N.y3,k=k.replaceAll("{rounded}",w)}else k.indexOf("{edge}")!=-1?(w="M"+A.xa+","+A.ya+" "+A.xb+","+A.yb+" "+A.xc+","+A.yc+" L"+A.xd+","+A.yd,k=k.replaceAll("{edge}",w)):k.indexOf("{curve}")!=-1?(w="M"+A.xa+","+A.ya+" C"+A.xb+","+A.yb+" "+A.xc+","+A.yc+" "+A.xd+","+A.yd,k=k.replaceAll("{curve}",w)):(w=k.replaceAll("{xa}",A.xa).replaceAll("{ya}",A.ya).replaceAll("{xb}",A.xb).replaceAll("{yb}",A.yb).replaceAll("{xc}",A.xc).replaceAll("{yc}",A.yc).replaceAll("{xd}",A.xd).replaceAll("{yd}",A.yd),k=w);u.push(a.linkOpenTag.replaceAll("{id}",t.id).replaceAll("{class}","link "+_.tags.join(" ")).replaceAll("{child-id}",_.id));var P={node:t,cnode:_,p:A,html:k,action:o};a.events.publish("render-link",[e,P]),u.push(P.html),s&&h.push({id:t.id,childId:_.id,html:P.html});var V="";for(var j in e.config.linkBinding){var O=e.config.linkBinding[j],M=e._get(_.id);if(M){var F=M[O];P.value=F,P.element=d[j],P.name=O,a.events.publish("label",[e,P])!==!1&&(a.isNEU(P.value)||a.isNEU(P.element)||(V+=P.element.replace("{val}",P.value)))}}if(V!=""){var B=A.x,z=A.y;_.movey!=null&&(z+=_.movey),V=a.linkFieldsOpenTag.replace("{x}",B).replace("{y}",z).replace("{rotate}",0)+V+a.grCloseTag,u.push(V)}u.push(a.grCloseTag)}return s?h:u.join("")},svg:function(t,e,n,r,i,o){return a.t(r.template,!1,o).svg.replace("{w}",t).replace("{h}",e).replace("{viewBox}",n).replace("{randId}",a.ui._defsIds[r.template]).replace("{mode}",r.mode).replace("{template}",r.template).replace("{content}",function(){return i})},menuButton:function(t){return t.menu==null?"":a.t(t.template,!1).menuButton.replaceAll("{p}",t.padding)},_roundedEdge:function(t,e,n,r,i,o){var s,l,c,d=a.LINK_ROUNDED_CORNERS,u=0;return t==n&&t==i||e==r&&e==o?(s=c=n,l=u=r):(t!=i&&n==i&&(s=c=n,l=r,e<o?u=r+d:e>o&&(u=r-d)),t<i&&n==i?n-=d:t>i&&n==i&&(n+=d),e!=o&&r==o&&(s=n,l=u=r,t<i?c=n+d:t>i&&(c=n-d)),e<o&&r==o?r-=d:e>o&&r==o&&(r+=d)),{x1:t,y1:e,x2:n,y2:r,x3:i,y3:o,qx1:s,qy1:l,qx2:c,qy2:u}},_linkTopToBottom:function(t,e,n,r,i){var o,s,l,c,d,u=0;return o=t.x+t.w/2+n.linkAdjuster.toX,s=t.y+t.h+n.linkAdjuster.toY,c=l=e.x+e.w/2+n.linkAdjuster.fromX,d=e.y+n.linkAdjuster.fromY,{xa:o,ya:s,xb:o,yb:u=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.y+t.rightNeighbor.h+r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?s+r:i??d-r,xc:l,yc:u,xd:c,yd:d,x:l,y:a.isNEU(e.parentPartner)?u+16:u,rotate:0}},_linkBottomToTop:function(t,e,n,r,i){var o,s,l,c,d,u=0;return o=t.x+t.w/2+n.linkAdjuster.toX,s=t.y+n.linkAdjuster.toY,c=l=e.x+e.w/2+n.linkAdjuster.fromX,d=e.y+e.h+n.linkAdjuster.fromY,{xa:o,ya:s,xb:o,yb:u=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.y-r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?s-r:i??d+r,xc:l,yc:u,xd:c,yd:d,x:l,y:u-14,rotate:0}},_linkRightToLeft:function(t,e,n,r,i){var o,s,l,c,d,u,h=0;return o=t.x+n.linkAdjuster.toX,s=t.y+t.h/2+n.linkAdjuster.toY,d=e.x+e.w+n.linkAdjuster.fromX,u=c=e.y+e.h/2+n.linkAdjuster.fromY,l=s,{xa:o,ya:s,xb:h=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.x-r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?o-r:i??d+r,yb:l,xc:h,yc:c,xd:d,yd:u,x:h-16,y:c,rotate:90}},_linkLeftToRight:function(t,e,n,r,i){var o,s,l,c,d,u,h=0;return o=t.x+t.w+n.linkAdjuster.toX,s=t.y+t.h/2+n.linkAdjuster.toY,d=e.x+n.linkAdjuster.fromX,u=c=e.y+e.h/2+n.linkAdjuster.fromY,l=s,{xa:o,ya:s,xb:h=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.x+t.rightNeighbor.w+r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?o+r:i??d-r,yb:l,xc:h,yc:c,xd:d,yd:u,x:h+14,y:c,rotate:270}},_linkPpTop:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=s.y+s.h/2,c=r.minY-(r.minY-i.maxY)/2,d=(r.minY-i.maxY)/t.maxSidePartnersWithChildren/4,u=a.ui.__linkPpBottomTop(t,e,n,c,d,s),h=u.x;return c=u.mid,a.ui._linkTopToBottom({x:h,y:l,w:0,h:0},n,o,0,c)},_linkPpBottom:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=s.y+s.h/2,c=r.maxY-(r.maxY-i.minY)/2,d=(r.maxY-i.minY)/t.maxSidePartnersWithChildren/4,u=a.ui.__linkPpBottomTop(t,e,n,c,d,s),h=u.x;return c=u.mid,a.ui._linkBottomToTop({x:h,y:l,w:0,h:0},n,o,0,c)},_linkPpLeft:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=r.minX-(r.minX-i.maxX)/2,c=(r.minX-i.maxX)/t.maxSidePartnersWithChildren/4,d=s.x+s.w/2,u=a.ui.__linkPpLeftRight(t,e,n,l,c,s),h=u.y;return l=u.mid,a.ui._linkLeftToRight({x:d,y:h,w:0,h:0},n,o,0,l)},_linkPpRight:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=r.maxX-(r.maxX-i.minX)/2,c=(r.maxX-i.minX)/t.maxSidePartnersWithChildren/4,d=s.x+s.w/2,u=a.ui.__linkPpLeftRight(t,e,n,l,c,s),h=u.y;return l=u.mid,a.ui._linkRightToLeft({x:d,y:h,w:0,h:0},n,o,0,l)},__linkPpBottomTop:function(t,e,n,r,i,o){var s=0;return o.isPartner==1?(s=o.x-e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.rightIds.length-1)*t.partnerChildrenSplitSeparation/2,t.lastLeft&&s<t.lastLeft.x+t.lastLeft.w/2?s<n.x+n.w/2?r-=(t.indexes[n.id]+1)*i:r-=(t.rightIds.length-t.indexes[n.id])*i:s<n.x+n.w/2?r+=(t.rightIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i):o.isPartner==2&&(s=o.x+o.w+e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.leftIds.length-1)*t.partnerChildrenSplitSeparation/2,t.firstRight&&s>t.firstRight.x+t.firstRight.w/2?s<n.x+n.w/2?r-=(t.indexes[n.id]+1)*i:r-=(t.leftIds.length-t.indexes[n.id])*i:s<n.x+n.w/2?r+=(t.leftIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i),{x:s,mid:r}},__linkPpLeftRight:function(t,e,n,r,i,o){var s=0;return o.isPartner==1?(s=o.y-e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.rightIds.length-1)*t.partnerChildrenSplitSeparation/2,t.lastLeft&&s<t.lastLeft.y+t.lastLeft.h/2?s<n.y+n.h/2?r-=(t.indexes[n.id]+1)*i:r-=(t.rightIds.length-t.indexes[n.id])*i:s<n.y+n.h/2?r+=(t.rightIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i):o.isPartner==2&&(s=o.y+o.h+e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.leftIds.length-1)*t.partnerChildrenSplitSeparation/2,t.firstRight&&s>t.firstRight.y+t.firstRight.h/2?s<n.y+n.h/2?r-=(t.indexes[n.id]+1)*i:r-=(t.leftIds.length-t.indexes[n.id])*i:s<n.y+n.h/2?r+=(t.leftIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i),{y:s,mid:r}},_draggableLinkPath:function(t,e,n,r,i,o){if(n.isPartner||n.isAssistant)return null;if(a._isMoved(n)&&!a._isMoved(e)){var s=[];switch(o){case a.orientation.top:case a.orientation.top_left:if(r.yb+i/2<r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y-i/2;break;case a.orientation.bottom:case a.orientation.bottom_left:if(r.yb-i/2>r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y+n.h+i/2;break;case a.orientation.right:case a.orientation.right_top:if(r.xb-i/2>r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x+n.w+i/2;break;case a.orientation.left:case a.orientation.left_top:if(r.xb+i/2<r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x-i/2}switch(o){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:s.push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",c,r.yb]),s.push(["L",c,d]),s.push(["L",r.xd,d]),s.push(["L",r.xd,r.yd]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:(s=[]).push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",r.xb,d]),s.push(["L",c,d]),s.push(["L",c,r.yd]),s.push(["L",r.xd,r.yd])}return a.roundPathCorners(s,a.LINK_ROUNDED_CORNERS,!1)}if(!a._isMoved(n)&&a._isMoved(e)){var l=!1;switch(s=[],o){case a.orientation.top:case a.orientation.top_left:if(r.ya+i/2>r.yb)l=!0,c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y+e.h+i;else{if(r.yb+i/2<r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y-i/2}break;case a.orientation.bottom:case a.orientation.bottom_left:if(r.ya-i/2<r.yb)l=!0,c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y-i;else{if(r.yb-i/2>r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y+n.h+i/2}break;case a.orientation.right:case a.orientation.right_top:if(r.xa-i/2<r.xb)l=!0,d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x-i;else{if(r.xb-i/2>r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x+n.w+i/2}break;case a.orientation.left:case a.orientation.left_top:if(r.xa+i/2>r.xb)l=!0,d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x+e.w+i;else{if(r.xb+i/2<r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x-i/2}}if(l)switch(o){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,d]),s.push(["L",c,d]),s.push(["L",c,r.yc]),s.push(["L",r.xc,r.yc]),s.push(["L",r.xd,r.yd]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:s.push(["M",r.xa,r.ya]),s.push(["L",c,r.ya]),s.push(["L",c,d]),s.push(["L",r.xc,d]),s.push(["L",r.xc,r.yc]),s.push(["L",r.xd,r.yd])}else switch(o){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:s.push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",c,r.yb]),s.push(["L",c,d]),s.push(["L",r.xd,d]),s.push(["L",r.xd,r.yd]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:s.push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",r.xb,d]),s.push(["L",c,d]),s.push(["L",c,r.yd]),s.push(["L",r.xd,r.yd])}return a.roundPathCorners(s,a.LINK_ROUNDED_CORNERS,!1)}if(a._isMoved(n)&&a._isMoved(e)){switch(s=[],o){case a.orientation.top:case a.orientation.top_left:if(r.ya+i>r.yd){var c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y+e.h+i,u=n.y-i;s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,d]),s.push(["L",c,d]),s.push(["L",c,u]),s.push(["L",r.xc,u]),s.push(["L",r.xd,r.yd])}else s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,e.y+e.h+i]),s.push(["L",r.xc,e.y+e.h+i]),s.push(["L",r.xd,r.yd]);break;case a.orientation.bottom:case a.orientation.bottom_left:r.ya-i<r.yd?(c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y-i,u=n.y+n.h+i,s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,d]),s.push(["L",c,d]),s.push(["L",c,u]),s.push(["L",r.xc,u]),s.push(["L",r.xd,r.yd])):(s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,e.y-i]),s.push(["L",r.xc,e.y-i]),s.push(["L",r.xd,r.yd]));break;case a.orientation.right:case a.orientation.right_top:if(r.xa-i<r.xd){d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x-i;var h=n.x+n.w+i;s.push(["M",r.xa,r.ya]),s.push(["L",c,r.ya]),s.push(["L",c,d]),s.push(["L",h,d]),s.push(["L",h,r.yc]),s.push(["L",r.xd,r.yd])}else s.push(["M",r.xa,r.ya]),s.push(["L",e.x-i,r.ya]),s.push(["L",e.x-i,r.yc]),s.push(["L",r.xd,r.yd]);break;case a.orientation.left:case a.orientation.left_top:r.xa+i>r.xd?(d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x+e.w+i,h=n.x-i,s.push(["M",r.xa,r.ya]),s.push(["L",c,r.ya]),s.push(["L",c,d]),s.push(["L",h,d]),s.push(["L",h,r.yc]),s.push(["L",r.xd,r.yd])):(s.push(["M",r.xa,r.ya]),s.push(["L",e.x+e.w+i,r.ya]),s.push(["L",e.x+e.w+i,r.yc]),s.push(["L",r.xd,r.yd]))}return a.roundPathCorners(s,a.LINK_ROUNDED_CORNERS,!1)}return null}},a.ui._base_nodeBtns=a.ui.nodeBtns,a.ui.nodeBtns=function(t,e,n,r,i){var o="";return i._tree_menu_temp?!e.isSplit&&n!==a.action.exporting&&r.nodeTreeMenuCloseButton&&i._tree_menu_temp.id==e.id&&(o+=r.nodeTreeMenuCloseButton):(o=a.ui._base_nodeBtns(t,e,n,r,i),t.nodeTreeMenu!=null&&!e.isSplit&&n!==a.action.exporting&&r.nodeTreeMenuButton&&(o+=r.nodeTreeMenuButton.replace("{id}",e.id))),o},a.ui._base_expandCollapseBtn=a.ui.expandCollapseBtn,a.ui.expandCollapseBtn=function(t,e,n,r,i){return t._tree_menu_temp?"":a.ui._base_expandCollapseBtn(t,e,n,r,i)},a.xScrollUI=function(t,e,n,r,i){this.element=t,this.requestParams=n,this.config=e,this.onSetViewBoxCallback=r,this.onDrawCallback=i,this.position=0,this.bar=null,this._event_id=a._guid()},a.xScrollUI.prototype.addListener=function(t){var e=this;if((this.config.mouseScrool==a.action.xScroll||this.config.mouseScrool==a.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,r=a._getScrollSensitivity();(function(i,o,s){var l=!1;function c(){l=!0;var u=(e.position-e.bar.scrollLeft)/s;if(u>0)u++;else{if(u==0)return void(l=!1);u--}Math.ceil(e.bar.scrollLeft)==Math.ceil(e.position)?l=!1:(e.bar.scrollLeft+=u,d(c))}i.addEventListener("wheel",function(u){if(!u.ctrlKey){var h=0;if(e.config.mouseScrool==a.action.xScroll)(h=u.deltaX||u.wheelDeltaX)||(h=u.deltaY||u.wheelDeltaY);else if(e.config.mouseScrool==a.action.scroll&&!(h=n||!u.shiftKey?u.deltaX||u.wheelDeltaX:u.deltaY||u.wheelDeltaY))return;h=-h,h=Math.max(-1,Math.min(1,h)),e.position+=-h*o;var f=parseFloat(e.innerBar.clientWidth)-parseFloat(e.bar.clientWidth);e.position<0&&(e.position=0),e.position>f&&(e.position=f),l||c()}},{passive:!0});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){setTimeout(u,20)}})(t,r.speed,r.smooth)}},a.xScrollUI.prototype.create=function(t){if(this.config.showXScroll===a.scroll.visible||this.config.mouseScrool===a.action.scroll||this.config.mouseScrool===a.action.xScroll){var e=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.requestParams(),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",left:0,bottom:0,width:t+"px","overflow-x":"scroll",height:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=e.requestParams(),r=(parseFloat(e.innerBar.clientWidth)-parseFloat(e.bar.clientWidth))/100,i=this.scrollLeft/r,o=(n.boundary.right-n.boundary.left)/100;n.viewBox[0]=i*o+n.boundary.left,e.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){e.onDrawCallback()},500)}})}},a.xScrollUI.prototype.setPosition=function(){if(this.bar){var t=this.requestParams(),e=(Math.abs(t.boundary.maxX-t.boundary.minX)+2*this.config.padding)*t.scale;switch(this.config.orientation){case a.orientation.right:case a.orientation.right_top:e=Math.abs(t.boundary.minX*t.scale)}this.innerBar.style.width=e+"px";var n=(t.boundary.right-t.boundary.left)/100,r=(t.viewBox[0]-t.boundary.left)/n;r<0?r=0:r>100&&(r=100);var i=(parseFloat(this.innerBar.clientWidth)-parseFloat(this.bar.clientWidth))/100,o=r*i;this.bar.ignore=!0,this.bar.scrollLeft=o,this.position=this.bar.scrollLeft,this.bar.style.visibility=i<=0?"hidden":"",this.config.showXScroll!==a.scroll.visible&&(this.bar.style.visibility="hidden"),a.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},a.xScrollUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.yScrollUI=function(t,e,n,r,i){this.element=t,this.requestParams=n,this.config=e,this.onSetViewBoxCallback=r,this.onDrawCallback=i,this.position=0,this.bar=null,this._event_id=a._guid()},a.yScrollUI.prototype.addListener=function(t){var e=this;if((this.config.mouseScrool==a.action.yScroll||this.config.mouseScrool==a.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,r=a._getScrollSensitivity();(function(i,o,s){var l=!1;function c(){l=!0;var u=(e.position-e.bar.scrollTop)/s;if(u>0)u++;else{if(u==0)return void(l=!1);u--}Math.ceil(e.bar.scrollTop)==Math.ceil(e.position)?l=!1:(e.bar.scrollTop+=u,d(c))}i.addEventListener("wheel",function(u){if(!u.ctrlKey){var h=0;if(e.config.mouseScrool==a.action.yScroll)(h=u.deltaY||u.wheelDeltaY)||(h=u.deltaX||u.wheelDeltaX);else if(e.config.mouseScrool==a.action.scroll&&!(h=n||!u.shiftKey?u.deltaY||u.wheelDeltaY:u.deltaX||u.wheelDeltaX))return;h=-h,h=Math.max(-1,Math.min(1,h)),e.position+=-h*o;var f=parseFloat(e.innerBar.clientHeight)-parseFloat(e.bar.clientHeight);e.position<0&&(e.position=0),e.position>f&&(e.position=f),l||c()}},{passive:!0});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){setTimeout(u,20)}})(t,r.speed,r.smooth)}},a.yScrollUI.prototype.create=function(t){if(this.config.showYScroll===a.scroll.visible||this.config.mouseScrool===a.action.scroll||this.config.mouseScrool===a.action.yScroll){var e=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",right:0,bottom:0,height:t+"px","overflow-y":"scroll",width:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=e.requestParams(),r=(parseFloat(e.innerBar.clientHeight)-parseFloat(e.bar.clientHeight))/100,i=this.scrollTop/r,o=(n.boundary.bottom-n.boundary.top)/100;n.viewBox[1]=i*o+n.boundary.top,e.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){e.onDrawCallback()},500)}})}},a.yScrollUI.prototype.setPosition=function(){if(this.bar){var t=this.requestParams(),e=(Math.abs(t.boundary.maxY-t.boundary.minY)+2*this.config.padding)*t.scale;switch(this.config.orientation){case a.orientation.bottom:case a.orientation.bottom_left:e=Math.abs(t.boundary.minY*t.scale)}this.innerBar.style.height=e+"px";var n=(t.boundary.bottom-t.boundary.top)/100,r=(t.viewBox[1]-t.boundary.top)/Math.abs(n);r<0?r=0:r>100&&(r=100);var i=(parseFloat(this.innerBar.clientHeight)-parseFloat(this.bar.clientHeight))/100,o=r*i;this.bar.ignore=!0,this.bar.scrollTop=o,this.position=this.bar.scrollTop,this.bar.style.visibility=i<=0?"hidden":"",this.config.showYScroll!==a.scroll.visible&&(this.bar.style.visibility="hidden"),a.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},a.yScrollUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.prototype.zoom=function(t,e,n,r){var i=this.getViewBox().slice(0),o=i,s=i[2],l=i[3];t===!0?(i[2]=i[2]/a.SCALE_FACTOR,i[3]=i[3]/a.SCALE_FACTOR):t===!1?(i[2]=i[2]*a.SCALE_FACTOR,i[3]=i[3]*a.SCALE_FACTOR):(i[2]=i[2]/t,i[3]=i[3]/t),e||(e=[50,50]),i[0]=o[0]-(i[2]-s)/(100/e[0]),i[1]=o[1]-(i[3]-l)/(100/e[1]);var c=this.getScale(i);if(i[2]=this.width()/c,i[3]=this.height()/c,t===!0&&c<this.config.scaleMax||t===!1&&c>this.config.scaleMin||t!=0&&t!=1&&c<this.config.scaleMax&&c>this.config.scaleMin){this._hideBeforeAnimation();var d=this;n?(clearTimeout(d._timeout),a.animate(this.getSvg(),{viewbox:this.getViewBox()},{viewbox:i},this.config.anim.duration,this.config.anim.func,function(){clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._draw(!0,a.action.zoom,null,r)},500)})):(this.setViewBox(i),clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._draw(!0,a.action.zoom,null,r)},500))}},a.loading={},a.loading.show=function(t){var e=document.createElement("div");e.id="bft-loading",e.innerHTML='<style>@-webkit-keyframes dot-keyframes {0% { opacity: .4; -webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}@keyframes dot-keyframes {0% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}.bft-loading-dots div {margin: 10px;}      .bft-dot-1 {background-color: #039BE5;}.bft-dot-2 {background-color: #F57C00;}.bft-dot-3 {background-color: #FFCA28;}      .bft-loading-dots {text-align: center;width: 100%; position: absolute; top: 0;}.bft-loading-dots--dot {-webkit-animation: dot-keyframes 1.5s infinite ease-in-out;animation: dot-keyframes 1.5s infinite ease-in-out;        border-radius: 10px;display: inline-block;height: 10px;width: 10px;}.bft-loading-dots--dot:nth-child(2) {-webkit-animation-delay: .5s;animation-delay: .5s;}.bft-loading-dots--dot:nth-child(3) {-webkit-animation-delay: 1s;animation-delay: 1s;}</style><div class="bft-loading-dots"><div class="bft-loading-dots--dot bft-dot-1"></div><div class="bft-loading-dots--dot bft-dot-2"></div><div class="bft-loading-dots--dot bft-dot-3"></div></div>',t.element.appendChild(e)},a.loading.hide=function(t){var e=t.element.querySelector("#bft-loading");e&&e.parentNode.removeChild(e)},a.pdfPrevUI={},a.loc||(a.loc={}),a.loc.ppdfCmdTitle="PDF Preview",a.loc.ppdfSave="Save",a.loc.ppdfCancel="Cancel",a.loc.ppdfFormat="Format",a.loc.ppdfFitToDrwaing="Fit",a.loc.ppdfA4="A4",a.loc.ppdfA3="A3",a.loc.ppdfA2="A2",a.loc.ppdfA1="A1",a.loc.ppdfLetter="Letter",a.loc.ppdfLegal="Legal",a.loc.ppdfLayout="Layout",a.loc.ppdfPortrait="Portrait",a.loc.ppdfLandscape="Landscape",a.loc.ppdfFittopagewidth="Fit to page width",a.loc.ppdfMargin="Margin",a.loc.ppdfHeader="Header",a.loc.ppdfFooter="Footer",a.loc.ppdfScale="Scale",a.pdfPrevUI.show=function(t,e){a.pdfPrevUI.hide(t),e=t._defaultExportOptions(e,"pdf");var n=document.createElement("div");n.classList.add(t.config.mode),n.id="bft-ppdf-btns",Object.assign(n.style,{position:"absolute",top:0,left:0,"background-color":"#fff","z-index":5,margin:"0 0 0 -265px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",width:"265px",height:"100%","font-family":"Roboto,Helvetica",color:"#757575","text-align":"right",padding:"10px"}),t.element.appendChild(n),n.innerHTML="<h1>"+a.loc.ppdfCmdTitle+'</h1><div><button type="button" id="bft-prev-save" style="font-size: 14px; width: 90px;">'+a.loc.ppdfSave+'</button>&nbsp;<button type="button" id="bft-prev-cancel" style="width: 90px;font-size: 14px;">'+a.loc.ppdfCancel+'</button></div><div style="margin-top:30px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:30px;"><label for="bft-size">'+a.loc.ppdfFormat+': </label><select id="bft-ppdf-size" style="color: #757575; width: 150px; font-size: 14px;" id="bft-size"><option value="fit">'+a.loc.ppdfFitToDrwaing+'</option><option value="A4">'+a.loc.ppdfA4+'</option><option value="A3">'+a.loc.ppdfA3+'</option><option value="A2">'+a.loc.ppdfA2+'</option><option value="A1">'+a.loc.ppdfA1+'</option><option value="Letter">'+a.loc.ppdfLetter+'</option><option value="Legal">'+a.loc.ppdfLegal+'</option></select></div><div style="padding-top:10px;"><label for="bft-ppdf-layout">'+a.loc.ppdfLayout+': </label><select id="bft-ppdf-layout" style="color: #757575; width: 150px;font-size: 14px;" ><option value="false">'+a.loc.ppdfPortrait+'</option><option value="true">'+a.loc.ppdfLandscape+'</option></select></div><div style="padding-top:10px;"><label for="bft-scale">'+a.loc.ppdfScale+': </label><select id="bft-ppdf-scale" style="color: #757575; width: 150px;font-size: 14px;" id="bft-scale"><option value="fit">'+a.loc.ppdfFittopagewidth+'</option><option value="10">10%</option><option value="20">20%</option><option value="30">30%</option><option value="40">40%</option><option value="50">50%</option><option value="60">60%</option><option value="70">70%</option><option value="80">80%</option><option value="90">90%</option><option value="100">100%</option><option value="110">110%</option><option value="120">120%</option><option value="130">130%</option><option value="140">140%</option><option value="150">150%</option><option value="160">160%</option><option value="170">170%</option><option value="180">180%</option><option value="190">190%</option><option value="200">200%</option></select></div><div style="margin-top:10px;margin-bottom:10px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:10px;"><label for="bft-ppdf-header">'+a.loc.ppdfHeader+': </label><input id="bft-ppdf-header" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-footer">'+a.loc.ppdfFooter+': </label><input id="bft-ppdf-footer" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-margin">'+a.loc.ppdfMargin+': </label><input id="bft-ppdf-margin" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div>';var r=document.createElement("div");r.id="bft-ppdf-wrapper",Object.assign(r.style,{"overflow-y":"scroll","z-index":11,position:"absolute",top:0,left:"285px","background-color":"#eee",width:t.width()-270+"px",height:"100%"}),t.element.appendChild(r),r.innerHTML='<div id="bft-ppdf-content" style="width: 100%;margin-top:10px;margin-bottom:10px;opacity:0;"></div>';var i,o,s,l=t.element.querySelector("#bft-ppdf-size"),c=t.element.querySelector("#bft-ppdf-layout"),d=t.element.querySelector("#bft-ppdf-scale"),u=t.element.querySelector("#bft-ppdf-margin"),h=t.element.querySelector("#bft-ppdf-header"),f=t.element.querySelector("#bft-ppdf-footer");l.value=e.format,c.value=e.landscape,d.value=e.scale,u.value=e.margin,h.value=e.header,f.value=e.footer,a.animate(t.element.querySelector("#bft-ppdf-btns"),{margin:[0,0,0,-250]},{margin:[0,0,0,0]},300,a.anim.outSin,function(){t.exportPDF(e,a.pdfPrevUI._handler)}),t.element.querySelector("#bft-prev-cancel").addEventListener("click",function(){a.pdfPrevUI.hide(t)}),t.element.querySelector("#bft-prev-save").addEventListener("click",function(){t.exportPDF(e),a.pdfPrevUI.hide(t)}),a.pdfPrevUI._showHide(l,c,d),l.addEventListener("change",function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.format=l.value,t.exportPDF(e,a.pdfPrevUI._handler),a.pdfPrevUI._showHide(l,c,d)})}),c.addEventListener("change",function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.landscape=c.value=="true",t.exportPDF(e,a.pdfPrevUI._handler),a.pdfPrevUI._showHide(l,c,d)})}),d.addEventListener("change",function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.scale=d.value,t.exportPDF(e,a.pdfPrevUI._handler),a.pdfPrevUI._showHide(l,c,d)})}),u.addEventListener("keyup",function(){clearTimeout(i),i=setTimeout(function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="";var m=u.value.split(",");if(m.length==4){for(var v=0;v<m.length;v++)m[v]=parseInt(m[v]);e.margin=m,t.exportPDF(e,a.pdfPrevUI._handler)}})},1e3)}),h.addEventListener("keyup",function(){clearTimeout(o),o=setTimeout(function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.header=h.value,t.exportPDF(e,a.pdfPrevUI._handler)})},1e3)}),f.addEventListener("keyup",function(){clearTimeout(s),s=setTimeout(function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.footer=f.value,t.exportPDF(e,a.pdfPrevUI._handler)})},1e3)})},a.pdfPrevUI._showHide=function(t,e,n){t.value=="A4"||t.value=="A3"||t.value=="A2"||t.value=="A1"||t.value=="Letter"||t.value=="Legal"?(e.parentNode.style.display="block",n.parentNode.style.display="block"):(e.parentNode.style.display="none",n.parentNode.style.display="none")},a.pdfPrevUI._handler=function(t,e,n){var r=e.options,i=e.pages,o=r.margin[0],s=r.margin[2],l=document.createElement("div");l.classList.add(t.config.mode),l.innerHTML=n.outerHTML,a._browser().msie&&(l.innerHTML=new XMLSerializer().serializeToString(n));for(var c=l.querySelector("svg"),d=t.element.querySelector("#bft-ppdf-content"),u=0;u<i.length;u++){var h=document.createElement("iframe");Object.assign(h.style,{display:"block",margin:"10px auto",border:"1px solid #eeeeee","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),d.appendChild(h),c&&c.style.backgroundColor?h.style.backgroundColor=c.style.backgroundColor:h.style.backgroundColor="#fff";var f=h.contentWindow.document;f.open(),h.style.width=i[u].size.w+"px",h.style.height=i[u].size.h+"px",h.style.margin="10 auto",i[u].backgroundColor&&(h.style.backgroundColor=i[u].backgroundColor);var m=r.header;i[u].header&&(m=i[u].header),m&&(m=m.replace("{current-page}",u+1).replace("{total-pages}",i.length));var v=r.footer;i[u].footer&&(v=i[u].footer),v&&(v=v.replace("{current-page}",u+1).replace("{total-pages}",i.length)),i[u].html?f.write(a._exportHtml(i[u].html,e.styles,r,i[u].innerSize.w,i[u].innerSize.h,m,v,t.config.mode)):(c.setAttribute("viewBox",i[u].vb),f.write(a._exportHtml(l.innerHTML,e.styles,r,i[u].innerSize.w,i[u].innerSize.h,m,v,t.config.mode)));var y=f.getElementById("bft-header"),E=f.getElementById("bft-footer");if(y){var g=o-y.offsetHeight-7;y.style.top=g+"px"}if(E){var w=s-E.offsetHeight-7;E.style.bottom=w+"px"}f.close()}var _=t.element.querySelector("#bft-ppdf-content");a.animate(_,{opacity:0},{opacity:1},300,a.anim.outSin)},a.pdfPrevUI._getViewBox=function(t){var e=null;return t?(e=(e="["+(e=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),e=JSON.parse(e)):null},a._exportHtml=function(t,e,n,r,i,o,s,l){for(var c="",d=0;d<n.margin.length;d++)c+=n.margin[d]+"px ";var u='<!DOCTYPE html><html style="margin:0;padding:0;"><head></head>'+e+'<body class="bft-'+l+'" style="margin:0; padding:0;"><div style="margin: '+c+";overflow:hidden;width:"+r+"px;height:"+i+'px">';return o&&(u+='<div id="bft-header" style="width:'+r+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;top:0;">'+o+"</div>"),u+=t,s&&(u+='<div id="bft-footer" style="width:'+r+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;bottom:0;">'+s+"</div>"),u+="</div>",u+="</body></html>"},a.pdfPrevUI.hide=function(t){var e=t.element.querySelector("#bft-ppdf-wrapper");if(e){e.parentNode.removeChild(e),e.style.opacity=0;var n=t.element.querySelector("#bft-ppdf-btns");n.parentNode.removeChild(n)}},a===void 0&&(a={}),a.events.on("renderdefs",function(t,e){for(var n=0;n<t.config.clinks.length;n++){var r=t.config.clinks[n].template;r||(r="orange");var i=a.clinkTemplates[r];e.defs+=i.defs}}),a.events.on("prerender",function(t,e){a.RENDER_CLINKS_BEFORE_NODES&&t._clink(t,e)}),a.events.on("render",function(t,e){a.RENDER_CLINKS_BEFORE_NODES||t._clink(t,e)}),a.events.on("drag",function(t,e,n,r){if(t instanceof a&&t.config.movable&&r)for(var i=0;i<r.length;i++){for(var o=r[i],s=t.element.querySelectorAll(`[data-c-l-from="${o}"]`),l=t.element.querySelectorAll(`[data-c-l-to="${o}"]`),c=0;c<s.length;c++)s[c].parentNode.removeChild(s[c]);for(c=0;c<l.length;c++)l[c].parentNode.removeChild(l[c])}}),a.prototype._clink=function(t,e){for(var n="",r=0;r<this.config.clinks.length;r++){let x=function(S,T,R){R==null&&(R=1);var N=T.x-S.x,P=T.y-S.y,V=Math.sqrt(Math.pow(T.x-S.x,2)+Math.pow(T.y-S.y,2))/3;return V=V/(Math.sqrt(N*N+P*P)*R)*a.clinkCurve(i),{x:S.x+N/2-P*V,y:S.y+P/2+N*V}};var C=x,i=this.config.clinks[r],o=t.getNode(i.from),s=t.getNode(i.to);if(o&&e.res.visibleNodeIds.indexOf(o.id)!=-1&&s&&e.res.visibleNodeIds.indexOf(s.id)!=-1){var l=o.x,c=o.y,d=s.x,u=s.y,h={},f={},m=l+o.w/2,v=d+s.w/2,y=c+o.h/2,E=u+s.h/2,g=1;switch(this.config.orientation){case a.orientation.top:case a.orientation.top_left:m<=v?(g=1,h.x=m+o.w/10,f.x=v-s.w/10):(g=-1,h.x=m-o.w/10,f.x=v+s.w/10),c==u?(g=1,h.y=c,f.y=u):c>u?(h.y=c,f.y=u+s.h):(h.y=c+o.h,f.y=u);break;case a.orientation.bottom:case a.orientation.bottom_left:m<=v?(g=-1,h.x=m+o.w/10,f.x=v+s.w/10):(g=1,h.x=m-o.w/10,f.x=v+s.w/10),c==u?(g=-1,h.y=c+o.h,f.y=u+s.h):c>u?(h.y=c,f.y=u+s.h):(h.y=c+o.h,f.y=u);break;case a.orientation.left:case a.orientation.left_top:y<=E?(g=-1,h.y=y+o.h/5,f.y=E+s.h/5):(g=1,h.y=y-o.h/5,f.y=E+s.h/5),l==d?(g=-1,h.x=l,f.x=d):l>d?(h.x=l,f.x=d+s.w):(h.x=l+o.w,f.x=d);break;case a.orientation.right:case a.orientation.right_top:y<=E?(g=1,h.y=y+o.h/5,f.y=E+s.h/5):(g=-1,h.y=y-o.h/5,f.y=E+s.h/5),l==d?(g=1,h.x=l+o.w,f.x=d+s.w):l>d?(h.x=l,f.x=d+s.w):(h.x=l+o.w,f.x=d)}var w=x(h,f,g),_=i.template;_||(_="orange");var b=a.clinkTemplates[_];if(i.label){var A=a.clinkLabelPosition(i,h,f,w);n+=b.label.replace("{x}",A.x).replace("{y}",A.y).replace("{val}",i.label)}var k="M"+h.x+","+h.y+"C"+h.x+","+h.y+" "+w.x+","+w.y+" "+f.x+","+f.y;n+=("<g "+a.attr.c_link_from+'="{from}" '+a.attr.c_link_to+'="{to}">').replace("{from}",o.id).replace("{to}",s.id)+b.link.replaceAll("{d}",k)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+k+'" />',n+=a.grCloseTag}}e.content+=n},a.clinkLabelPosition=function(t,e,n,r){var i=(n.x-e.x)/2+e.x,o=(n.y-e.y)/2+e.y;return{x:(i-r.x)/2+r.x,y:(o-r.y)/2+r.y}},a.clinkCurve=function(t){return a.CLINK_CURVE},a.prototype.addClink=function(t,e,n,r){this._putInUndoStack(),this.clearRedo();for(var i=this.config.clinks.length-1;i>=0;i--){var o=this.config.clinks[i];o.from==t&&o.to==e&&this.config.clinks.splice(i,1)}return this.config.clinks.push({from:t,to:e,label:n,template:r}),a.events.publish("updated",[this]),this},a.prototype.removeClink=function(t,e){this._putInUndoStack(),this.clearRedo();for(var n=this.config.clinks.length-1;n>=0;n--){var r=this.config.clinks[n];r.from==t&&r.to==e&&this.config.clinks.splice(n,1)}return a.events.publish("updated",[this]),this},a.clinkTemplates={},a.clinkTemplates.orange={defs:'<marker id="arrowOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path marker-start="url(#dotOrange)" marker-end="url(#arrowOrange)" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#F57C00" text-anchor="middle" x="{x}" y="{y}">{val}</text>'},a.clinkTemplates.blue={defs:'<marker id="arrowBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path marker-start="url(#dotBlue)" marker-end="url(#arrowBlue)" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},a.clinkTemplates.yellow={defs:'<marker id="arrowYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path marker-start="url(#dotYellow)" marker-end="url(#arrowYellow)" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#FFCA28"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},a===void 0&&(a={}),a.events.on("renderdefs",function(t,e){for(var n=0;n<t.config.slinks.length;n++){var r=t.config.slinks[n].template;r||(r="orange");var i=a.slinkTemplates[r];e.defs+=i.defs}}),a.events.on("render",function(t,e){t._slinks(t,e)}),a.events.on("drag",function(t,e,n,r){if(t instanceof a&&t.config.movable&&r)for(var i=0;i<r.length;i++){for(var o=r[i],s=t.element.querySelectorAll(`[data-s-l-from="${o}"]`),l=t.element.querySelectorAll(`[data-s-l-to="${o}"]`),c=0;c<s.length;c++)s[c].parentNode.removeChild(s[c]);for(c=0;c<l.length;c++)l[c].parentNode.removeChild(l[c])}}),a.prototype._slinks=function(t,e){var n="",r=this.getScale(),i=e.res.boundary;function o(u,h,f){var m=[],v=null,y="left",E=u.lcn?u.lcn:"base",g=t._layoutConfigs[E];switch(g.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:h.x>u.x&&(y="right");break;case a.orientation.left:case a.orientation.left_top:case a.orientation.right:case a.orientation.right_top:y="top",h.y>u.y&&(y="bottom")}var w=a.t(u.templateName,u.min,r),_=g.levelSeparation;u.parent&&u.parent.layout&&(_=g.mixedHierarchyNodesSeparation);var b={p:u.x+u.w/2+w.expandCollapseSize,q:u.y,r:u.x+u.w/2+w.expandCollapseSize,s:i.minY+_};if(u.sl==h.sl)switch(v=h,g.orientation){case a.orientation.top:case a.orientation.top_left:m.push([b.p,b.q]),m.push([b.p,b.q-_/3]),w=a.t(v.templateName,v.min,r),m.push([v.x+v.w/2+w.expandCollapseSize,m[m.length-1][1]]),m.push([m[m.length-1][0],v.y]);break;case a.orientation.bottom:case a.orientation.bottom_left:b.q=u.y+u.h,b.s=i.maxY-_,m.push([b.p,b.q]),m.push([b.r,u.y+u.h+_/3]),w=a.t(v.templateName,v.min,r),m.push([v.x+v.w/2+w.expandCollapseSize,m[m.length-1][1]]),m.push([m[m.length-1][0],v.y+v.h]);break;case a.orientation.left:case a.orientation.left_top:b.p=u.x,b.q=u.y+u.h/2+w.expandCollapseSize,b.r=i.minX-_,b.s=u.y+u.h/2+w.expandCollapseSize,m.push([b.p,b.q]),m.push([u.x-_/3,b.q]),w=a.t(v.templateName,v.min,r),m.push([m[m.length-1][0],v.y+v.h/2+w.expandCollapseSize]),m.push([v.x,m[m.length-1][1]]);break;case a.orientation.right:case a.orientation.right_top:b.p=u.x+u.w,b.q=u.y+u.h/2+w.expandCollapseSize,b.r=i.maxX+_,b.s=u.y+u.h/2+w.expandCollapseSize,m.push([b.p,b.q]),m.push([u.x+u.w+_/3,b.q]),w=a.t(v.templateName,v.min,r),m.push([m[m.length-1][0],v.y+v.h/2+w.expandCollapseSize]),m.push([v.x+v.w,m[m.length-1][1]])}else{switch(g.orientation){case a.orientation.top:case a.orientation.top_left:m.push([b.p,b.q]),m.push([b.r,u.y-_/3]);break;case a.orientation.bottom:case a.orientation.bottom_left:b.q=u.y+u.h,b.s=i.maxY-_,m.push([b.p,b.q]),m.push([b.r,u.y+u.h+_/3]);break;case a.orientation.left:case a.orientation.left_top:b.p=u.x,b.q=u.y+u.h/2+w.expandCollapseSize,b.r=i.minX-_,b.s=u.y+u.h/2+w.expandCollapseSize,m.push([b.p,b.q]),m.push([u.x-_/3,b.q]);break;case a.orientation.right:case a.orientation.right_top:b.p=u.x+u.w,b.q=u.y+u.h/2+w.expandCollapseSize,b.r=i.maxX+_,b.s=u.y+u.h/2+w.expandCollapseSize,m.push([b.p,b.q]),m.push([u.x+u.w+_/3,b.q])}for(var A=u,k=u;k.parent;)k=k.parent;for(;v==null;){var C=!1,x=A.parent,S=x.leftNeighbor,T=x.rightNeighbor;if(x.id==h.id?v=x:a._intersects(x,b,g)&&(b=a._addPoint(x,m,g,b,y),C=!0),x.id!=h.id){for(;S;){if(S.id==h.id){v=S;break}a._intersects(S,b,g)&&(b=a._addPoint(S,m,g,b,y),C=!0),S=S.leftNeighbor}for(;T;){if(T.id==h.id){v=T;break}a._intersects(T,b,g)&&(b=a._addPoint(T,m,g,b,y),C=!0),T=T.rightNeighbor}}if(!C){var R=m[m.length-1][0],N=0;if(x.parent){_=g.levelSeparation,x.parent.layout&&(_=g.mixedHierarchyNodesSeparation);var P=t.manager.bordersByRootIdAndLevel[k.id][x.parent.sl];switch(g.orientation){case a.orientation.top:case a.orientation.top_left:N=P.maxY+_*(2/3);break;case a.orientation.bottom:case a.orientation.bottom_left:N=P.minY-_*(2/3);break;case a.orientation.left:case a.orientation.left_top:R=P.maxX+_*(2/3),N=m[m.length-1][1];break;case a.orientation.right:case a.orientation.right_top:R=P.minX-_*(2/3),N=m[m.length-1][1]}}m.push([R,N])}A=x}switch(w=a.t(v.templateName,v.min,r),m.splice(m.length-1,1),g.orientation){case a.orientation.top:case a.orientation.top_left:m.push([v.x+v.w/2+w.expandCollapseSize,m[m.length-1][1]]),m.push([m[m.length-1][0],v.y+v.h]);break;case a.orientation.bottom:case a.orientation.bottom_left:m.push([v.x+v.w/2+w.expandCollapseSize,m[m.length-1][1]]),m.push([m[m.length-1][0],v.y]);break;case a.orientation.left:case a.orientation.left_top:m.push([m[m.length-1][0],v.y+v.h/2+w.expandCollapseSize]),m.push([v.x+v.w,m[m.length-1][1]]);break;case a.orientation.right:case a.orientation.right_top:m.push([m[m.length-1][0],v.y+v.h/2+w.expandCollapseSize]),m.push([v.x,m[m.length-1][1]])}}var V=l.template;V||(V="orange");var j,O,M=null;switch((w=a.slinkTemplates[V]).labelPosition){case"start":M={x:m[1][0],y:m[1][1]};break;case"middle":var F=Math.ceil(m.length/2);j=m[F],O=m[F-1],M={x:(j[0]+O[0])/2,y:(j[1]+O[1])/2};break;case"end":M={x:m[m.length-2][0],y:m[m.length-2][1]}}f&&(m=m.reverse()),m[0].unshift("M");for(var B=1;B<m.length;B++)m[B].unshift("L");var z=a.roundPathCorners(m,a.LINK_ROUNDED_CORNERS,!1);if(l.label){var X=w.label.replace("{x}",M.x).replace("{y}",M.y).replace("{val}",l.label),Y=a._getLabelSize(X),q=-Y.height/2;switch(g.orientation){case a.orientation.bottom:case a.orientation.bottom_left:q=Y.height}n+=w.label.replace("{x}",M.x).replace("{y}",M.y+q).replace("{val}",l.label)}var K=u.id,H=h.id;f&&(K=h.id,H=u.id),n+=("<g "+a.attr.s_link_from+'="{from}" '+a.attr.s_link_to+'="{to}">').replace("{from}",K).replace("{to}",H)+w.link.replaceAll("{d}",z)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+z+'" />',n+=a.grCloseTag}for(var s=0;s<this.config.slinks.length;s++){var l=this.config.slinks[s],c=t.getNode(l.from),d=t.getNode(l.to);c&&d&&e.res.visibleNodeIds.indexOf(d.id)!=-1&&e.res.visibleNodeIds.indexOf(c.id)!=-1&&(c.sl>=d.sl?o(c,d,!1):o(d,c,!0))}e.content+=n},a.prototype.addSlink=function(t,e,n,r){this._putInUndoStack(),this.clearRedo();for(var i=this.config.slinks.length-1;i>=0;i--){var o=this.config.slinks[i];o.from==t&&o.to==e&&this.config.slinks.splice(i,1)}return this.config.slinks.push({from:t,to:e,label:n,template:r}),a.events.publish("updated",[this]),this},a.prototype.removeSlink=function(t,e){this._putInUndoStack(),this.clearRedo();for(var n=this.config.slinks.length-1;n>=0;n--){var r=this.config.slinks[n];r.from==t&&r.to==e&&this.config.slinks.splice(n,1)}return a.events.publish("updated",[this]),this},a.slinkTemplates={},a.slinkTemplates.orange={defs:'<marker id="arrowSlinkOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkOrange)" marker-end="url(#arrowSlinkOrange)" stroke-linejoin="round" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text dominant-baseline="middle" fill="#F57C00" alignment-baseline="middle" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},a.slinkTemplates.blue={defs:'<marker id="arrowSlinkBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkBlue)" marker-end="url(#arrowSlinkBlue)" stroke-linejoin="round" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},a.slinkTemplates.yellow={defs:'<marker id="arrowSlinkYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkYellow)" marker-end="url(#arrowSlinkYellow)" stroke-linejoin="round" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text  fill="#FFCA28" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},a.events.on("renderbuttons",function(t,e){if(e.node&&e.node.tags&&e.node.tags.has("group-dotted-lines")){var n=t.getScale(),r=a.t(e.node.templateName,e.node.min,n),i="";e.node.min?(r.nodeGroupDottedOpenButton||console.error(`[${e.node.templateName}].nodeGroupDottedOpenButton is not defined`),i+=`<g style="cursor:pointer;"  data-ctrl-n-dotted-open="${e.node.id}" transform="matrix(1,0,0,1,${e.node.x},${e.node.y})">`,i+=r.nodeGroupDottedOpenButton):(r.nodeGroupDottedCloseButton||console.error(`[${e.node.templateName}].nodeGroupDottedCloseButton is not defined`),i+=`<g style="cursor:pointer;" transform="matrix(1,0,0,1,${e.node.x},${e.node.y})" data-ctrl-n-dotted-close="${e.node.id}">`,i+=r.nodeGroupDottedCloseButton),i=(i+="</g>").replaceAll("{cw}",e.node.w/2).replaceAll("{ch}",e.node.h/2).replaceAll("{ew}",e.node.w-(e.node.padding?e.node.padding[1]:0)).replaceAll("{eh}",e.node.h-(e.node.padding?e.node.padding[2]:0));var o=t.getNode(e.node.stChildrenIds[0]);if(i.indexOf("{collapsed-children-count}")!=-1){var s=a.collapsedChildrenCount(t,o);i=i.replace("{collapsed-children-count}",s)}if(i.indexOf("{collapsed-children-total-count}")!=-1){var l=a.collapsedChildrenTotalCount(t,o);i=i.replace("{collapsed-children-total-count}",l)}if(i.indexOf("{children-count}")!=-1){var c=a.childrenCount(t,o);i=i.replace("{children-count}",c)}if(i.indexOf("{children-total-count}")!=-1){var d=a.childrenTotalCount(t,o);i=i.replace("{children-total-count}",d)}e.html+=i}}),a.events.on("redraw",function(t,e){if(t.config.groupDottedLines.length){for(var n=t.element.querySelectorAll("[data-ctrl-n-dotted-close]"),r=0;r<n.length;r++)n[r].addEventListener("click",function(){var o=this.getAttribute("data-ctrl-n-dotted-close");t.minimize(o)});var i=t.element.querySelectorAll("[data-ctrl-n-dotted-open]");for(r=0;r<i.length;r++)i[r].addEventListener("click",function(){var o=this.getAttribute("data-ctrl-n-dotted-open");t.maximize(o)})}}),a===void 0&&(a={}),a.prototype.undo=function(t){if(this.config.undoRedoStorageName){var e=this.undoStepsCount();if(e!=0){this._putInRedoStack();var n=`${this.config.undoRedoStorageName}_undo_`+(e-1),r=sessionStorage.getItem(n);sessionStorage.removeItem(n);var i=JSON.parse(r);this.config.nodes=i.nodes,this.config.clinks=i.clinks,this.config.slinks=i.slinks,this.config.groupDottedLines=i.groupDottedLines,this.config.dottedLines=i.dottedLines,a.events.publish("updated",[this]),this.filterUI.update(),this.draw(a.action.update,void 0,t),this.undoRedoUI.refresh()}}},a.prototype.redo=function(t){if(this.config.undoRedoStorageName){var e=this.redoStepsCount();if(e!=0){this._putInUndoStack();var n=`${this.config.undoRedoStorageName}_redo_`+(e-1),r=sessionStorage.getItem(n);sessionStorage.removeItem(n);var i=JSON.parse(r);this.config.nodes=i.nodes,this.config.clinks=i.clinks,this.config.slinks=i.slinks,this.config.groupDottedLines=i.groupDottedLines,this.config.dottedLines=i.dottedLines,a.events.publish("updated",[this]),this.filterUI.update(),this.draw(a.action.update,void 0,t),this.undoRedoUI.refresh()}}},a.prototype.clearRedo=function(){if(this.config.undoRedoStorageName){for(var t=`${this.config.undoRedoStorageName}_redo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)sessionStorage.removeItem(t+n),n++;this.undoRedoUI.refresh()}},a.prototype.clearUndo=function(){if(this.config.undoRedoStorageName){for(var t=`${this.config.undoRedoStorageName}_undo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)sessionStorage.removeItem(t+n),n++;this.undoRedoUI.refresh()}},a.prototype.undoStepsCount=function(){for(var t=`${this.config.undoRedoStorageName}_undo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)n++;return n},a.prototype.redoStepsCount=function(){for(var t=`${this.config.undoRedoStorageName}_redo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)n++;return n},a.prototype._putInUndoStack=function(){if(this.config.undoRedoStorageName){var t=`${this.config.undoRedoStorageName}_undo_`+this.undoStepsCount();sessionStorage.setItem(t,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},a.prototype._putInRedoStack=function(){if(this.config.undoRedoStorageName){var t=`${this.config.undoRedoStorageName}_redo_`+this.redoStepsCount();sessionStorage.setItem(t,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},a===void 0&&(a={}),a.undoRedoUI=function(){this.instance=null,this._event_id=a._guid()},a.undoRedoUI.prototype.init=function(t){t.config.undoRedoStorageName&&(this.instance=t,this.refresh())},a.undoRedoUI.prototype.refresh=function(){var t=this;if(this.instance.config.undoRedoStorageName){var e={undoStepsCount:this.instance.undoStepsCount(),redoStepsCount:this.instance.redoStepsCount()};if(a.events.publish("change",[this,e])!==!1){var n=this.instance.element.querySelector("[data-undo]"),r=this.instance.element.querySelector("[data-redo]");if(!n||!r){var i=document.createElement("div");i.classList.add("bft-undo-redo"),i.innerHTML=`<span data-undo>${a.icon.undo(50,50,"")}<span class="bft-undo-i"></span></span>
                            <span data-redo>${a.icon.redo(50,50,"")}<span class="bft-redo-i"></span></span>`,this.instance.element.appendChild(i),n=this.instance.element.querySelector("[data-undo]"),r=this.instance.element.querySelector("[data-redo]"),n.addEventListener("click",function(){t.instance.undo()}),r.addEventListener("click",function(){t.instance.redo()})}e.undoStepsCount>0?(n.classList.add("bft-ur-clickable"),n.querySelector(".bft-undo-i").innerHTML=e.undoStepsCount,n.querySelector(".bft-undo-i").style.display="inline-block"):(n.classList.remove("bft-ur-clickable"),n.querySelector(".bft-undo-i").style.display="none"),e.redoStepsCount>0?(r.classList.add("bft-ur-clickable"),r.querySelector(".bft-redo-i").innerHTML=e.redoStepsCount,r.querySelector(".bft-redo-i").style.display="inline-block"):(r.classList.remove("bft-ur-clickable"),r.querySelector(".bft-redo-i").style.display="none")}}},a.undoRedoUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.undoRedoUI.prototype.onChange=function(t){return this.on("change",function(e,n){return t.call(e,n)})},a.events.on("redraw",function(t,e){if(t.config.miniMap){if(t.manager.action!=a.action.move){a.miniMap._settings._scale=Math.min(a.miniMap.width/(t.response.boundary.maxX-t.response.boundary.minX),a.miniMap.height/(t.response.boundary.maxY-t.response.boundary.minY)),a.miniMap._settings._translateX=-t.response.boundary.minX*a.miniMap._settings._scale+(a.miniMap.width-(t.response.boundary.maxX-t.response.boundary.minX)*a.miniMap._settings._scale)/2,a.miniMap._settings._translateY=-t.response.boundary.minY*a.miniMap._settings._scale+(a.miniMap.height-(t.response.boundary.maxY-t.response.boundary.minY)*a.miniMap._settings._scale)/2;var n=t.getViewBox();a.miniMap._init(t),a.miniMap._drawMainCanvas(t),a.miniMap._drawRectSelectorCanvas(t,n);var r,i,o,s,l=t.element.querySelector('[data-id="mini-map-focus"]'),c=!1,d=null;l.onmousedown=function(h){var f,m,v,y=l.getBoundingClientRect(),E=y.left,g=y.top;if(r=parseInt(h.clientX-E),i=parseInt(h.clientY-g),f=i,m=(r-a.miniMap._settings._translateX)/a.miniMap._settings._scale,v=(f-a.miniMap._settings._translateY)/a.miniMap._settings._scale,m>n[0]&&m<n[0]+n[2]&&v>n[1]&&v<n[1]+n[3])return h.preventDefault(),h.stopPropagation(),void(c=!0)},l.onmousemove=function(h){if(c){h.preventDefault(),h.stopPropagation(),a.miniMap._mouseMove=!0;var f=l.getBoundingClientRect(),m=f.left,v=f.top;o=parseInt(h.clientX-m),s=parseInt(h.clientY-v);var y=(o-r)/a.miniMap._settings._scale,E=(s-i)/a.miniMap._settings._scale;n[0]=y+n[0],n[1]=E+n[1],t.setViewBox(n),d&&(clearTimeout(d),d=null),d=setTimeout(function(){t._draw(!0,a.action.move)},300),a.miniMap._drawRectSelectorCanvas(t,n),r=o,i=s}},l.onmouseup=function(h){c&&(h.preventDefault(),h.stopPropagation(),c=!1)},l.onmouseout=function(h){c&&(h.preventDefault(),h.stopPropagation(),c=!1,a.miniMap._mouseMove=!1)},l.onclick=function(h){if(h.preventDefault(),h.stopPropagation(),a.miniMap._mouseMove)a.miniMap._mouseMove=!1;else{var f=l.getBoundingClientRect(),m=f.left,v=f.top;o=parseInt(h.clientX-m),s=parseInt(h.clientY-v);var y=o/a.miniMap._settings._scale,E=s/a.miniMap._settings._scale;n[0]=y-(n[0]+n[2]-n[0])/2-a.miniMap._settings._translateX/a.miniMap._settings._scale,n[1]=E-(n[1]+n[3]-n[1])/2-a.miniMap._settings._translateY/a.miniMap._settings._scale,t.setViewBox(n),d&&(clearTimeout(d),d=null),d=setTimeout(function(){t._draw(!0,a.action.move)},300),a.miniMap._drawRectSelectorCanvas(t,n)}}}}else{var u=t.element.querySelector('[data-id="mini-map"]');u&&u.parentNode.removeChild(u)}}),a.miniMap={},a.miniMap._settings={_translateX:0,_translateY:0,_scale:1},a.miniMap._drawMainCanvas=function(t){var e=t.element.querySelector('[data-id="mini-map-main"]'),n=e.getContext("2d");a.miniMap._initCtx(t,e,1);var r=0,i=[];(function o(s,l){if(Array.isArray(l))for(var c=0;c<l.length;c++)o(s,l[c]);else{for(n.fillStyle=a.miniMap.colors[3],n.beginPath(),n.lineWidth="0.5",n.fillRect(l.x,l.y,l.w,l.h),n.strokeRect(l.x,l.y,l.w,l.h),c=0;c<l.stChildrenIds.length;c++)r++,i.includes(l.id)||(r==1?n.fillStyle=a.miniMap.colors[0]:r==2?n.fillStyle=a.miniMap.colors[1]:r==3&&(n.fillStyle=a.miniMap.colors[2]),n.beginPath(),n.fillRect(l.x,l.y,l.w,l.h),n.strokeRect(l.x,l.y,l.w,l.h),i.push(l.id)),o(s,s.getNode(l.stChildrenIds[c])),r--;for(c=0;c<l.childrenIds.length;c++)o(s,s.getNode(l.childrenIds[c]))}})(t,t.roots)},a.miniMap._drawRectSelectorCanvas=function(t,e){var n=t.element.querySelector('[data-id="mini-map-focus"]'),r=n.getContext("2d");a.miniMap._initCtx(t,n,a.miniMap.opacity);var i=e[0],o=e[1],s=e[2],l=e[3];r.lineWidth=.5/a.miniMap._settings._scale,r.strokeStyle=a.miniMap.focusStroke,r.globalAlpha=1,r.clearRect(i,o,s,l),r.strokeRect(i,o,s,l)},a.miniMap._initCtx=function(t,e,n){var r=e.getContext("2d");e.width=e.width,e.height=e.height,r.clearRect(0,0,a.miniMap.width,a.miniMap.height),r.globalAlpha=n,n!=1&&(r.fillStyle=a.miniMap.selectorBackgroundColor,r.fillRect(0,0,a.miniMap.width,a.miniMap.height)),r.translate(a.miniMap._settings._translateX,a.miniMap._settings._translateY),r.scale(a.miniMap._settings._scale,a.miniMap._settings._scale)},a.miniMap._init=function(t){if(!t.element.querySelector('[data-id="mini-map"]')){var e=document.createElement("canvas");e.width=a.miniMap.width,e.height=a.miniMap.height,e.setAttribute("data-id","mini-map-main"),e.style.display="inline-block",e.style.backgroundColor=a.miniMap.backgroundColor,e.style.position="absolute",e.style.top=0,e.style.left=0;var n=document.createElement("canvas");n.width=a.miniMap.width,n.height=a.miniMap.height,n.setAttribute("data-id","mini-map-focus"),n.style.display="inline-block",n.style.position="absolute",n.style.top=0,n.style.left=0;var r=document.createElement("div");r.setAttribute("data-id","mini-map"),r.style.position="absolute";for(var i=["top","right","left","bottom"],o=0;o<i.length;o++){var s=i[o];a.isNEU(a.miniMap.position[s])||(a.miniMap.position[s]=="padding"?r.style[s]=t.config.padding+"px":r.style[s]=a.miniMap.position[s]+"px")}r.style.border=a.miniMap.border,r.style.padding=a.miniMap.padding+"px",r.style.backgroundColor=a.miniMap.backgroundColor;var l=document.createElement("div");l.style.position="relative",l.style.width=a.miniMap.width+"px",l.style.height=a.miniMap.height+"px",l.appendChild(e),l.appendChild(n),r.appendChild(l),t.element.appendChild(r);var c=function(m,v){t.__mouseScrollHandler(r,v)};t._addEvent(r,"DOMMouseScroll",c),t._addEvent(r,"mousewheel",c);var d=0,u=0,h=function(m){a.miniMap._mouseMove=!0;var v=m.clientX-d,y=m.clientY-u;if(!a.isNEU(r.style.left)){var E=parseFloat(r.style.left)+v;r.style.left=`${E}px`}if(!a.isNEU(r.style.right)){var g=parseFloat(r.style.right)-v;r.style.right=`${g}px`}if(!a.isNEU(r.style.bottom)){var w=parseFloat(r.style.bottom)-y;r.style.bottom=`${w}px`}if(!a.isNEU(r.style.top)){var _=parseFloat(r.style.top)+y;r.style.top=`${_}px`}d=m.clientX,u=m.clientY},f=function(){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f)};a.miniMap.draggable&&r.addEventListener("mousedown",function(m){d=m.clientX,u=m.clientY,document.addEventListener("mousemove",h),document.addEventListener("mouseup",f)})}},a.miniMap.colors=["#E0E0E0","#BDBDBD","#9E9E9E","#757575"],a.miniMap.selectorBackgroundColor="white",a.miniMap.backgroundColor="white",a.miniMap.focusStroke="#f57c00",a.miniMap.opacity=.4,a.miniMap.border="1px solid #aeaeae",a.miniMap.width=250,a.miniMap.height=140,a.miniMap.padding=5,a.miniMap.position={top:void 0,left:"padding",right:void 0,bottom:"padding"},a.miniMap.draggable=!0,a._search={},a._search.search=function(t,e,n,r,i,o,s){var l=[],c=e.toLowerCase(),d=c.split(" ");if(s&&d.length>1){var u=d[0];s[u]&&(n=[s[u]],d=(c=c.replace(u,"").trim()).split(" "))}d=d.filter(function(_,b,A){return A.indexOf(_)===b});for(var h={},f=0;f<t.length;f++)for(var m=t[f],v=0;v<n.length;v++){var y=n[v];if(!a.isNEU(m[y])){var E=m[y];if((e=a._search.searchAndComputeScore(d,E,y,o))!=null){var g=m.id;if(h[g]){if(h[g]&&h[g]<e.__score){h[g]=e.__score;for(var w=l.length-1;w>=0;w--)l[w].id==g&&l.splice(w,1);a._search.addNodeToResult(l,r,m,e,y,i)}}else h[g]=e.__score,a._search.addNodeToResult(l,r,m,e,y,i)}}}return l.sort(function(_,b){return _.__score<b.__score?1:_.__score>b.__score?-1:0}),l},a._search.addNodeToResult=function(t,e,n,r,i,o){var s={};s.id=n.id,a.isNEU(n[o])||(s[o]=n[o]);for(var l=0;l<e.length;l++){var c=e[l];a.isNEU(n[c])||a.isNEU(s[c])&&(s[c]=n[c])}r!=null&&(a.isNEU(s.__score)&&(s.__score=r.__score),a.isNEU(s.__searchField)&&(s.__searchField=i),a.isNEU(s.__searchMarks)&&(s.__searchMarks=r.__searchMarks)),t.push(s)},a._search.searchAndComputeScore=function(t,e,n,r){if(a.isNEU(e)||a.isNEU(t)||!t.length)return null;typeof e!="string"&&(e=e.toString());var i=e.toLowerCase(),o=a._search.searchIndexesOf(i,t);if(!o.length)return null;for(var s=i.length/100,l=0,c=0,d=l>0?100:0,u=0,h=0;h<t.length;h++)for(var f=t[h],m=0;m<o.length;m++)if(f.indexOf(o[m].searchPhrase)!=-1){u++;break}var v=100/(t.length/u);if(o.length){for(c=o[0].start,m=0;m<o.length;m++)if(l+=o[m].length,o[m].start<c&&(c=o[m].start),m>=1&&o[m-1].start>o[m].start){d=0;break}}var y=0;l!=0&&(y=l/s);var E=l>0?100:0;c!=0&&(E=100-c/s);var g=0;r&&r[n]&&(g=r[n]),v&&(v=v/100*50),y>0&&(y=y/100*10),E>0&&(E=E/100*10),d>0&&(d=d/100*10),g>0&&(g=g/100*20);var w=Math.round(1e4*(v+y+E+d+g));for(o.sort(function(b,A){return b.start<A.start?-1:b.start>A.start?1:0}),m=o.length-1;m>=0;m--)for(h=0;h<o.length;h++)h<m&&o[h].start+o[h].length>o[m].start&&o.splice(m,1);var _=e;for(m=o.length-1;m>=0;m--)_=(_=_.insert(o[m].start+o[m].length,"</mark>")).insert(o[m].start,"<mark>");return{__searchMarks:_,__score:w}},a._search.searchIndexesOf=function(t,e){var n=[];if(!a.isNEU(t))for(var r=0;r<e.length;r++){var i=e[r];if(!a.isNEU(i))for(var o=0;(o=t.indexOf(i,o))>-1;)n.push({length:i.length,start:o,searchPhrase:i}),o+=i.length}return n.sort(function(s,l){return s.length<l.length?1:s.length>l.length||s.start<l.start?-1:s.start>l.start?1:0}),n=n.filter(function(s){for(var l=!1,c=0;c<n.length;c++){var d=n[c].start,u=n[c].start+n[c].length-1,h=s.start,f=s.start+s.length-1;if(d==h&&u==f){l=!1;break}if(d>=h&&u<=f){l=!0;break}if(d<=h&&u>=f){l=!0;break}}return!l})},a.events.on("redraw",function(t,e){if(t.config.state){var n=[],r=[];(function i(o){if(Array.isArray(o))for(var s=0;s<o.length;s++)i(o[s]);else{for((typeof o.id!="string"||typeof o.id=="string"&&o.id.indexOf("split")==-1&&o.id.indexOf("mirror")==-1)&&(n.push(o.id),o.min==1&&r.push(o.id)),s=0;s<o.stChildren.length;s++)i(o.stChildren[s]);for(s=0;s<o.children.length;s++)i(o.children[s])}})(t.roots),a.state._put(t.config.roots,t.width(),t.height(),t.response.viewBox,n,r,t.response.adjustify,t.config.state)}}),a.state={},a.state._buildStateNames=function(t){return{paramScale:t+"-scale",paramX:t+"-x",paramY:t+"-y",paramExp:t+"-exp",paramMin:t+"-min",paramRoots:t+"-roots",paramAdjustify:t+"-adjustify"}},a.state._put=function(t,e,n,r,i,o,s,l){if(l&&!a.isNEU(i)&&i.length!=0){var c=a.state._buildStateNames(l.name),d={roots:t,scale:Math.min(e/r[2],n/r[3]),x:r[0],y:r[1],exp:i,min:o,adjustify:s};if(l.writeToUrlParams){var u=new URLSearchParams(window.location.search);u.has(c.paramScale)?u.set(c.paramScale,d.scale):u.append(c.paramScale,d.scale),u.has(c.paramX)?u.set(c.paramX,d.x):u.append(c.paramX,d.x),u.has(c.paramY)?u.set(c.paramY,d.y):u.append(c.paramY,d.y),u.has(c.paramExp)?u.set(c.paramExp,d.exp.join("*")):u.append(c.paramExp,d.exp.join("*")),u.has(c.paramRoots)&&Array.isArray(d.roots)?u.set(c.paramRoots,d.roots.join("*")):Array.isArray(d.roots)&&u.append(c.paramRoots,d.roots.join("*")),u.has(c.paramMin)?u.set(c.paramMin,d.min.join("*")):u.append(c.paramMin,d.min.join("*")),u.has(c.paramAdjustify)?u.set(c.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y):u.append(c.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y),window.history.replaceState(null,null,"?"+u)}l.writeToIndexedDB&&(d.id=l.name,a.idb.put(d,function(h){h==0&&console.error("Cannot write row - "+l.name)})),l.writeToLocalStorage&&a.localStorage.setItem(l.name,JSON.stringify(d))}},a.state._get=function(t,e,n,r){if(t){var i=a.state._buildStateNames(t.name);if(t.readFromUrlParams){var o=new URLSearchParams(window.location.search);if(o.has(i.paramScale)&&o.has(i.paramX)&&o.has(i.paramY)&&o.has(i.paramExp)&&o.has(i.paramMin)&&o.has(i.paramAdjustify)){var s={},l=parseFloat(o.get(i.paramScale)),c=parseFloat(o.get(i.paramX)),d=parseFloat(o.get(i.paramY));(h=[])[0]=c,h[1]=d,h[2]=e/l,h[3]=n/l,s.vb=h,s.scale=l,s.x=c,s.y=d,s.roots=null,o.has(i.paramRoots)&&(s.roots=o.get(i.paramRoots).split("*")),s.exp=o.get(i.paramExp).split("*"),s.min=o.get(i.paramMin).split("*");var u=o.get(i.paramAdjustify).split("*");return s.adjustify={x:parseFloat(u[0]),y:parseFloat(u[1])},void r(s)}if(!t.readFromIndexedDB&&!t.readFromLocalStorage)return void r(null)}if(t.readFromLocalStorage){var h;if((s=a.localStorage.getItem(t.name))!=null)return s=JSON.parse(s),(h=[])[0]=s.x,h[1]=s.y,h[2]=e/s.scale,h[3]=n/s.scale,s.vb=h,void r(s);if(!t.readFromIndexedDB)return void r(null)}t.readFromIndexedDB&&a.idb.read(t.name,function(f,m){if(f==0)console.error("Cannot read from - "+t.name),r(null);else if(f==null)r(null);else{var v=[];v[0]=m.x,v[1]=m.y,v[2]=e/m.scale,v[3]=n/m.scale,m.vb=v,r(m)}})}else r(null)},a.state.clear=function(t){if(!t)return!1;try{localStorage.removeItem(t);var e=a.state._buildStateNames(t),n=new URLSearchParams(window.location.search);n.has(e.paramScale)&&n.delete(e.paramScale),n.has(e.paramX)&&n.delete(e.paramX),n.has(e.paramY)&&n.delete(e.paramY),n.has(e.paramExp)&&n.delete(e.paramExp),n.has(e.paramRoots)&&n.delete(e.paramRoots),n.has(e.paramMin)&&n.delete(e.paramMin),n.has(e.paramAdjustify)&&n.delete(e.paramAdjustify),window.history.replaceState(null,null,"?"+n),a.idb.delete(t,function(r){r==0&&console.error("Cannot delete row - "+t)})}catch{}},a._magnify={},a.prototype.magnify=function(t,e,n,r,i){r||(r=this.config.anim);var o=this.getNode(t),s=this.getNodeElement(t);if(o||s){var l=a._magnify[t];l&&(l.timer!=null&&clearInterval(l.timer),l.timerBack!=null&&clearInterval(l.timerBack),s.setAttribute("transform","matrix("+l.transformStart.toString()+")"),a._magnify[t]=null),n&&(s=s.cloneNode(!0),this.getSvg().appendChild(s));var c=a._getTransform(s),d=JSON.parse(JSON.stringify(c));d[0]=e,d[3]=e;var u=o.w+o.w*(e-1),h=o.h+o.h*(e-1);d[4]+=(o.w-u)/2,d[5]+=(o.h-h)/2;var f=a.animate(s,{transform:c},{transform:d},r.duration,r.func);a._magnify[t]={timer:f,transformStart:c,nodeElement:s,front:n},i&&i(s)}},a.prototype.magnifyBack=function(t,e,n){e||(e=this.config.anim);var r=a._magnify[t];if(r){r.timer!=null&&clearInterval(r.timer),r.timerBack!=null&&clearInterval(r.timerBack);var i=a._getTransform(r.nodeElement);r.timerBack=a.animate(r.nodeElement,{transform:i},{transform:r.transformStart},e.duration,e.func,function(o){var s=o[0].getAttribute(a.attr.node_id);a._magnify[s]&&a._magnify[s].front&&(o[0].parentNode.removeChild(o[0]),a._magnify[s]=null),n&&n(o[0])})}},a===void 0&&(a={}),a.events.on("init",function(t,e){if(t.config.keyNavigation&&(t._addEvent(window,"keydown",t._windowKeyDownHandler),a.isNEU(t._keyNavigationActiveNodeId)&&t.roots&&t.roots.length)){var n=t.roots[0].id;a.isNEU(t.config.keyNavigation.focusId)||(n=t.config.keyNavigation.focusId),t._keyNavigationActiveNodeId=n,t.center(t._keyNavigationActiveNodeId)}}),a.prototype._windowKeyDownHandler=function(t,e){for(var n=e.target,r=null;n&&n!=this.element;){if(n.hasAttribute&&n.hasAttribute(a.attr.node_id)){r=n.getAttribute(a.attr.node_id);break}n=n.parentNode}if(n){var i=r?this.getNode(r):null,o={node:i,data:r?this.get(r):null,event:e};if(a.events.publish("key-down",[this,o])!==!1&&i){if(e.code=="KeyF")this.searchUI.find("");else if(e.code=="ArrowRight"||i.isAssistant&&e.code=="ArrowDown"||i.isPartner&&e.code=="ArrowDown"){if(c=this.getNode(i.pid)){var s=c.childrenIds.indexOf(i.id);if(++s<c.childrenIds.length){var l=c.childrenIds[s];this._keyNavigationActiveNodeId=l,this.center(l)}}}else if(e.code=="ArrowLeft")(c=this.getNode(i.pid))&&(s=c.childrenIds.indexOf(i.id),--s>=0&&(l=c.childrenIds[s],this._keyNavigationActiveNodeId=l,this.center(l)));else if(e.code=="ArrowUp"){var c;(c=this.getNode(i.pid))&&(l=c.id,(i.isAssistant||c.hasAssistants||i.isPartner||c.hasPartners)&&(s=c.childrenIds.indexOf(i.id),--s>=0&&(l=c.childrenIds[s])),this._keyNavigationActiveNodeId=l,this.center(l))}else if(e.code=="ArrowDown")i.childrenIds.length&&(this._keyNavigationActiveNodeId=i.childrenIds[0],this.center(i.childrenIds[0]));else if(e.code=="Space"){var d=n.getAttribute(a.attr.node_id);return void this.toggleExpandCollapse(d,e)}}}},a.events.on("redraw",function(t,e){t.config.keyNavigation&&a._keyNavigation(t)}),a.events.on("click",function(t,e){t.config&&t.config.keyNavigation&&(t._keyNavigationActiveNodeId=e.node.id,t.center(e.node.id))}),a._keyNavigation=function(t){var e=t.element.querySelector(":focus");if(e&&e.parentElement&&e.parentElement.hasAttribute(a.attr.node_id)){var n=e.parentElement;(i=(r=e).querySelector("title"))&&i.parentNode.removeChild(i),r.removeAttribute("tabindex")}if(!a.isNEU(t._keyNavigationActiveNodeId)&&(n=t.getNodeElement(t._keyNavigationActiveNodeId))&&n.children.length){var r;(r=n.children[0]).setAttribute("tabindex",2);var i,o={text:"",id:t._keyNavigationActiveNodeId};a.events.publish("screen-reader-text",[t,o]),!a.isNEU(o.text)&&((i=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=o.text,r.appendChild(i)),a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&t.searchUI.hide(),r.focus()}},a.elements={},a.elements.textbox=function(t,e,n,r){var i=a.elements._vidrf(t,e,r);if(i.doNotRender)return{html:""};var o="";return e.btn&&(o=`<a href="#" data-input-btn="" class="bft-link bft-link-bft-button">${e.btn}</a>`),{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${a._escapeGreaterLessSign(i.label)}</label>
                        <input ${i.readOnlyAttribute} data-binding="${a._escapeDoubleQuotes(i.binding)}" maxlength="256" id="${i.id}" name="${i.id}" type="text" value="${a._escapeDoubleQuotes(i.value)}" autocomplete="off">
                        ${o}
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements.checkbox=function(t,e,n,r){var i=a.elements._vidrf(t,e,r);if(i.doNotRender)return{html:""};var o=i.value?"checked":"",s=r?'onclick="return false;"':"";return{html:`<div class="bft-form-field"  style="min-width: ${n};" >
                        <label class="bft-checkbox" data-bft-input="" ${i.disabledAttribute}>
                            <input ${o} ${s} data-binding="${a._escapeDoubleQuotes(i.binding)}" type="checkbox"><span class="bft-checkbox-checkmark" type="checkbox"></span>${a._escapeGreaterLessSign(i.label)}
                        </label>
                    </div>`,id:i.id,value:o}},a.elements.select=function(t,e,n,r){if(r)return a.elements.textbox(t,e,n,r);var i=a.elements._vidrf(t,e,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${a._escapeGreaterLessSign(i.label)}</label>
                        <select data-binding="${a._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} id="${i.id}" name="${i.id}">
                            ${function(){for(var o="",s=0;s<i.options.length;s++){var l=i.options[s];o+=`<option ${l.value==i.value?"selected":""} value="${a._escapeDoubleQuotes(l.value)}">${a._escapeGreaterLessSign(l.text)}</option>`}return o}()}                           
                        </select>
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements.multiSelect=function(t,e,n,r){if(r)return a.elements.textbox(t,e,n,r);var i=a.elements._vidrf(t,e,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${a._escapeGreaterLessSign(i.label)}</label>
                        <select class="multiple" data-binding="${a._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} id="${i.id}" name="${i.id}" multiple>
                            ${function(){for(var o="",s=0;s<i.options.length;s++){var l=i.options[s];o+=`<option ${i.value.includes(l.value)?"selected":""} value="${a._escapeDoubleQuotes(l.value)}">${a._escapeGreaterLessSign(l.text)}</option>`}return o}()}                           
                        </select>
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements.date=function(t,e,n,r){var i=a.elements._vidrf(t,e,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}" class="hasval">${a._escapeGreaterLessSign(i.label)}</label>
                        <input data-binding="${a._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} maxlength="256" id="${i.id}" name="${i.id}" type="date" value="${a._escapeDoubleQuotes(i.value)}" autocomplete="off">
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements._vidrf=function(t,e,n){var r={};if(e.binding||(e.binding=""),e.label||(e.label=""),e.type!="select"||Array.isArray(e.options)?r.options=e.options:r.options=[],r.value=t&&!a.isNEU(t[e.binding])?t[e.binding]:"",n&&r.options){for(var i=0;i<r.options.length;i++)if(r.options[i].value==r.value){r.value=r.options[i].text;break}}if(r.id=a.elements.generateId(),r.disabledAttribute=n?"data-bft-input-disabled":"",r.readOnlyAttribute=n?"readonly":"",r.id=r.id,n&&a.isNEU(r.value)&&(r.doNotRender=!0),n&&e.binding=="photo"&&(r.id=null,r.doNotRender=!0),r.binding=e.binding,r.label=e.label,r.vlidators="",e.vlidators)for(var o in e.vlidators)r.vlidators+=`data-v-${o}="${e.vlidators[o]}" `;return r},a.elements.ids=[],a.elements.generateId=function(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!a.elements.ids.has(t))return a.elements.ids.push(t),t}},a.input={},a.input._timeout=null,a.input.initWithTimeout=function(){a.input._timeout&&(clearTimeout(a.input._timeout),a.input._timeout=null),a.input._timeout=setTimeout(a.input.init,200)},a.input.init=function(t){var e;e=t?t.querySelectorAll("[data-bft-input]"):document.querySelectorAll("[data-bft-input]");for(var n=0;n<e.length;n++){var r=e[n],i=null;r.type&&r.type.toLowerCase()=="hidden"&&(i=r),i||(i=r.querySelector("input")),i||(i=r.querySelector("select"));var o=r.querySelector("label");o&&(i.value||i.type=="select-one"&&i.selectedOptions&&i.selectedOptions.length&&i.selectedOptions[0].value==""&&i.selectedOptions[0].innerHTML)&&o.classList.add("hasval"),i.type.toLowerCase()!="checkbox"&&i.addEventListener("focus",function(){this.classList.remove("bft-validation-error");var s=this.parentNode.querySelector("label");s.classList.add("focused");var l=s.querySelector(".bft-validation-error-message");l&&l.parentNode.removeChild(l)}),i.type.toLowerCase()!="checkbox"&&i.addEventListener("blur",function(){a.input.blurHandler(this)})}},a.input.blurHandler=function(t){var e=t.parentNode.querySelector("label");e.classList.remove("focused"),t.value||t.type=="date"?e.classList.add("hasval"):e.classList.remove("hasval")},a.input.validate=function(t){var e=null;t.type&&t.type.toLowerCase()=="hidden"&&(e=t),e||(e=t.querySelector("input")),e||(e=t.querySelector("select"));var n=t.querySelector("label");if(e.classList.remove("bft-validation-error"),n){var r=n.querySelector(".bft-validation-error-message");r&&r.parentNode.removeChild(r)}!e.selectedOptions&&e.value&&(e.value=e.value.trim());var i=t.getAttribute("data-v-required"),o=t.getAttribute("data-v-password"),s=t.getAttribute("data-v-email"),l=t.getAttribute("data-v-emails");return i&&e.value==""?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+i+"</span>",e.classList.add("bft-validation-error"),!1):o&&!a.input.validatePassword(e.value)?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+o+"</span>",e.classList.add("bft-validation-error"),!1):s&&!a.input.isValidEmail(e.value)?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+s+"</span>",e.classList.add("bft-validation-error"),!1):!(l&&!a.input.isValidEmails(e.value))||(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+l+"</span>",e.classList.add("bft-validation-error"),!1)},a.input.validateAndGetData=function(t){for(var e=t.querySelectorAll("[data-bft-input]"),n=!0,r=0;r<e.length;r++){var i=e[r];a.input.validate(i)||(n=!1)}if(!n)return!1;var o=t.querySelectorAll("[data-binding]"),s={};for(r=0;r<o.length;r++){var l=o[r],c=l.getAttribute("data-binding");if(l.type.toLowerCase()=="checkbox")s[c]=l.checked;else if(l.selectedOptions&&l.hasAttribute("multiple")){var d=l.selectedOptions;s[c]=Array.from(d).map(({value:u})=>u)}else s[c]=l.value}return s},a.input.validatePassword=function(t){return t&&(t=t.trim()),!(t.length<5)&&!(t.length>18)&&t.indexOf(" ")==-1},a.input.isValidEmails=function(t){if(t)for(var e=t.split(","),n=0;n<e.length;n++){var r=e[n].trim();if(!a.input.isValidEmail(r))return!1}return!0},a.input.isValidEmail=function(t){return t&&(t=t.trim()),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},a.prototype.hideTreeMenu=function(t,e){if(this._tree_menu_temp){var n=this._tree_menu_temp;if(this.manager.oldNodes=this.nodes,this.nodes=n.nodes,this.manager.maxX=n.maxX,this.manager.maxY=n.maxY,this.manager.minX=n.minX,this.manager.minY=n.minY,this.manager.roots=n.roots,this.manager.nodes=n.nodes,this.manager.rootList=n.rootList,this.manager.visibleNodeIds=n.visibleNodeIds,this.manager.bordersByRootIdAndLevel=n.bordersByRootIdAndLevel,this.config.roots=n.config.roots,this.config.nodes=n.config.nodes,this._tree_menu_temp=null,t){var r={id:n.id,animFromClickedNode:!1};this._draw(!0,a.action.update,r,function(){e&&e()})}}},a.prototype.showTreeMenu=function(t){this.editUI.hide(),t==null&&console.error("Call addNode without id");var e=this.getNode(t);e||console.error("Cannot get node id: "+t);var n=this.getNode(e.fid),r=this.getNode(e.mid),i=null,o=null,s=[],l=[];n&&(i=this.get(n.id)),r&&(o=this.get(r.id));for(var c=0;c<e.pids.length;c++){var d=this.get(e.pids[c]);d&&s.push(d)}for(c=0;c<e.ftChildrenIds.length;c++)l.push(this.get(e.ftChildrenIds[c]));var u=this.get(t);this._tree_menu_temp={maxX:this.manager.maxX,maxY:this.manager.maxY,minX:this.manager.minX,minY:this.manager.minY,roots:this.manager.roots,nodes:this.manager.nodes,rootList:this.manager.rootList,visibleNodeIds:this.manager.visibleNodeIds,bordersByRootIdAndLevel:this.manager.bordersByRootIdAndLevel,id:t,config:{roots:this.config.roots,nodes:this.config.nodes}},this.config.nodes=[];var h=[];if(o)h.push(o);else{var f={id:"_ft_mother",templateName:"mother",_ft_method:"addParentNode",_ft_childId:t,_ft_type:"mid",_ft_data:{gender:"female"}};u.mid=f.id,i?(i.pids=[f.id],f.pids=[i.id],f._ft_data.pids=[i.id]):f.pids=["_ft_father"],h.push(f)}if(i)h.push(i);else{var m={id:"_ft_father",templateName:"father",_ft_method:"addParentNode",_ft_childId:t,_ft_type:"fid",_ft_data:{gender:"male"}};u.fid=m.id,o?(o.pids=[m.id],m.pids=[o.id],m._ft_data.pids=[o.id]):m.pids=["_ft_mother"],h.push(m)}for(c=0;c<s.length;c++)h.push(s[c]);u.pids||(u.pids=[]);var v={id:"_ft_partner",pids:[t],templateName:"partner",_ft_method:"addPartnerNode",_ft_data:{pids:[t]}};if(u.gender=="male"?(v.templateName="wife",v._ft_data.gender="female"):u.gender=="female"&&(v.templateName="husband",v._ft_data.gender="male"),u.pids.push(v.id),h.push(v),u.pids)for(c=0;c<u.pids.length;c++){if(h.push({id:"_ft_child_group_"+c,mid:t,fid:u.pids[c],tags:["children-group"]}),u.pids[c]=="_ft_partner"){var y={id:"_ft_son_"+c,stpid:"_ft_child_group_"+c,templateName:"son",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:e.id,fid:v.id,gender:"male"},_ft_partnerData:{pids:[t]},_ft_id:t},E={id:"_ft_daughter_"+c,stpid:"_ft_child_group_"+c,templateName:"daughter",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:e.id,fid:v.id,gender:"female"},_ft_partnerData:{pids:[t]},_ft_id:t};u.gender=="male"&&v._ft_data.gender=="female"?(y._ft_childData.mid=v.id,y._ft_childData.fid=u.id,y._ft_partnerData.gender=v._ft_data.gender,E._ft_childData.mid=v.id,E._ft_childData.fid=u.id,E._ft_partnerData.gender=v._ft_data.gender):u.gender=="female"&&v._ft_data.gender=="male"&&(y._ft_childData.mid=u.id,y._ft_childData.fid=v.id,y._ft_partnerData.gender=v._ft_data.gender,E._ft_childData.mid=u.id,E._ft_childData.fid=v.id,E._ft_partnerData.gender=v._ft_data.gender),h.push(y),h.push(E)}else h.push({id:"_ft_son_"+c,stpid:"_ft_child_group_"+c,templateName:"son",_ft_method:"addChildNode",_ft_data:{mid:t,fid:u.pids[c],gender:"male"}}),h.push({id:"_ft_daughter_"+c,stpid:"_ft_child_group_"+c,templateName:"daughter",_ft_method:"addChildNode",_ft_data:{mid:t,fid:u.pids[c],gender:"female"}});for(var g=0;g<l.length;g++)l[g].mid!=u.pids[c]&&l[g].fid!=u.pids[c]||(l[g].mid=void 0,l[g].fid=void 0,l[g].stpid="_ft_child_group_"+c,h.push(l[g]))}var w=[];for(g=0;g<l.length;g++)(l[g].fid==u.id&&a.isNEU(l[g].mid)||l[g].mid==u.id&&a.isNEU(l[g].fid))&&(l[g].fid==u.id?l[g].mid="_ft_partner_for_single_child":l[g].mid==u.id&&(l[g].fid="_ft_partner_for_single_child"),h.push(l[g]),w.push(l[g].id));if(w.length){var _={id:"_ft_partner_for_single_child",pids:[t],templateName:"partner",_ft_method:"addPartnerAndParentNodes",_ft_childIds:w,_ft_partnerData:{pids:[t]},_ft_id:t};u.gender=="male"?(_.templateName="wife",_._ft_partnerData.gender="female"):u.gender=="female"&&(_.templateName="husband",_._ft_partnerData.gender="male"),u.pids.push(_.id),h.push(_)}var b={nodes:h,node:u};a.events.publish("node-tree-menu-show",[this,b]),b.nodes.push(b.node),this.config.nodes=b.nodes,u=this.get(t);var A=this;a.isNEU(u.mid)?a.isNEU(u.fid)||(this.config.roots=[u.fid]):this.config.roots=[u.mid];var k={id:t,treeMenuMode:!0};this._draw(!1,a.action.update,k,function(){a._moveToBoundaryArea(A.getSvg(),A.getViewBox(),A.response.boundary)})},a.ui.css=function(){return'<style data-bft-styles>.bft-button{background-color:#039be5;cursor:pointer;width:calc(100%);height:50px;color:#fff;padding-top:5px;padding-left:7px;padding-right:7px;text-align:center;text-transform:uppercase;border:1px solid #3fc0ff;display:inline-block;border-radius:5px}.bft-button.orange{background-color:#f57c00;border:1px solid #ffa03e}.bft-button.yellow{background-color:#ffca28;border:1px solid #ffdf7c}.bft-button.lower{text-transform:unset}.bft-button.transparent{background-color:transparent}.bft-button:hover{background-color:#35afea}.bft-button.orange:hover{background-color:#f79632}.bft-button.yellow:hover{background-color:#ffd452}.bft-button:active{transform:matrix(.98,0,0,.98,0,0)}.bft-button-icon{text-align:initial;cursor:pointer;margin-bottom:15px;color:#039be5}.bft-dark .bft-button-icon:hover{background-color:#2d2d2d}.bft-light .bft-button-icon:hover{background-color:#ececec}.bft-button-icon>img{height:24px;width:24px;vertical-align:middle;padding:7px}.bft-button:focus{outline:0}.bft-button-icon>img{filter:invert(46%) sepia(66%) saturate(2530%) hue-rotate(171deg) brightness(95%) contrast(98%)}.bft-light .bft-button.transparent{color:#039be5}.bft-light .bft-button.transparent:hover{color:#fff}.bft-button-loading{background-color:transparent;cursor:pointer;width:calc(100% - 2px);height:50px;color:#fff;text-align:center;text-transform:uppercase;border:1px solid #027cb7;display:inline-block;display:flex;justify-content:center;align-items:center;display:none}.bft-button-loading .bft-loading-dots div{margin:0 10px}.bft-link-bft-button{position:absolute;right:10px;top:-1px}@media screen and (max-width:1000px){.bft-link-bft-button{right:50px}}[data-bft-input-disabled] .bft-link-bft-button{display:none}[dir=rtl] .bft-link-bft-button{left:10px;right:unset}.bft-img-button{width:48px;height:48px;cursor:pointer;border-radius:50%;background-color:#039be5;background-repeat:no-repeat;background-size:24px 24px;background-position:center center;margin:3px;display:inline-block}.bft-img-button:hover{background-color:#f57c00}.bft-checkbox{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.bft-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.bft-checkbox-checkmark{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:5px}.bft-dark [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-dark [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark,.bft-light [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-light [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#aeaeae!important}[data-bft-input-disabled].bft-checkbox{cursor:default}[dir=rtl] .bft-checkbox-checkmark{right:0}[dir=rtl] .bft-checkbox{padding-left:unset;padding-right:35px}.bft-dark .bft-checkbox-checkmark{background-color:#333;border:1px solid #5b5b5b}.bft-light .bft-checkbox-checkmark{background-color:#fff;border:1px solid #c7c7c7}.bft-dark .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#3c3c3c}.bft-light .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#f8f9f9}.bft-dark .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-light .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-checkbox-checkmark:after{content:"";position:absolute;display:none}.bft-checkbox input:checked~.bft-checkbox-checkmark:after{display:block}.bft-checkbox .bft-checkbox-checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.bft-filter{user-select:none}.bft-light .bft-filter{color:#757575}.bft-dark .bft-filter{color:#ccc}.bft-filter>div>div{display:inline-block;padding:3px 10px;cursor:pointer}.bft-filter-menu fieldset,.bft-filter>div,.filter-field-selected{border-radius:5px}.bft-filter-menu fieldset{overflow-y:auto;max-height:300px}.bft-filter>div.bft-filter-menu{padding:10px}.bft-light .bft-filter>div.bft-filter-menu,.bft-light .filter-field-selected{background-color:#f8f9f9}.bft-dark .bft-filter>div.bft-filter-menu,.bft-dark .filter-field-selected{background-color:#3c3c3c}.bft-light .bft-filter>div{background-color:#eee}.bft-dark .bft-filter>div{background-color:#333}.bft-form-perspective{transform-style:preserve-3d;perspective:500px;position:absolute;top:32px}.bft-form{box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;padding:14px;transform-origin:top center;user-select:none;display:none;position:relative;max-height:calc(100vh - 100px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.bft-form-bottom{border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-top-left-radius:5px;border-top-right-radius:5px}.bft-form .separator{margin:0 10px}@media screen and (max-width:1000px){.bft-form-perspective{min-width:100%;max-height:calc(100% - 32px);left:unset!important;right:unset!important;transform:none!important}.bft-form .set{max-height:calc(100vh - 74px)}.bft-form-fieldset{max-width:unset!important}}.bft-light .bft-form .separator{border-bottom:1px solid #c7c7c7}.bft-dark .bft-form .separator{border-bottom:1px solid #5b5b5b}.bft-light .bft-form{background-color:#fff}.bft-dark .bft-form{background-color:#252526}.bft-item{padding:6px 12px 6px 12px;display:flex;flex-direction:row}.bft-light .bft-form .bft-item.selected,.bft-light .bft-form .bft-item:hover{background-color:#0074e8;color:#fff}.bft-dark .bft-form .bft-item.selected,.bft-dark .bft-form .bft-item:hover{background-color:#094771;color:#fff}.bft-item.selected img,.bft-item:hover img{filter:invert(100%)}.bft-item.selected img{visibility:visible!important}.bft-form-fieldset{display:flex;flex-wrap:wrap;margin:0!important}.bft-form-field{flex:1 0 21%;margin:3px;min-width:200px}.bft-form-field-100{flex:1 0 96%;margin:3px;min-width:200px}.bft-input{position:relative}.bft-input>input,.bft-input>select{height:50px;padding:18px 10px 2px 9px;width:100%;box-sizing:border-box;border-style:solid;border-width:1px}.bft-input select{height:50px;padding:20px 5px 4px 5px}[data-bft-input-disabled].bft-input>input,[data-bft-input-disabled].bft-input>select{border-color:transparent!important}.bft-light [data-bft-input-disabled]>input,.bft-light [data-bft-input-disabled]>select{background-color:#fff!important}.bft-dark [data-bft-input-disabled]>input,.bft-dark [data-bft-input-disabled]>select{background-color:#252526!important}[data-bft-input-disabled]>select{appearance:none;padding-left:8px}.bft-input>label{display:inline-block;position:absolute;padding-left:10px;padding-right:10px;color:#acacac;cursor:text;-webkit-transition:all .1s ease-out;-moz-transition:all .1s ease-out;-ms-transition:all .1s ease-out;-o-transition:all .1s ease-out;transition:all .1 ease-out;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:initial;text-align:initial;white-space:nowrap}.bft-input>label{top:12px;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 14px)}.bft-input>label.focused,.bft-input>label.hasval{top:-1px}.bft-input>input,.bft-input>select{outline:0;border-radius:5px}.bft-dark .bft-input>label.focused,.bft-light .bft-input>label.focused{color:#039be5}.bft-dark .bft-input>input,.bft-dark .bft-input>select{color:#ccc;background-color:#333;border-color:#5b5b5b}.bft-light .bft-input>input,.bft-light .bft-input>select{color:#757575;background-color:#fff;border-color:#c7c7c7}.bft-light .bft-input>input:focus,.bft-light .bft-input>select:focus{border-color:#039be5;background-color:#f8f9f9}.bft-dark .bft-input>input:focus,.bft-dark .bft-input>select:focus{border-color:#039be5;background-color:#3c3c3c}.bft-dark .bft-input>input.bft-validation-error,.bft-dark .bft-input>select.bft-validation-error,.bft-light .bft-input>input.bft-validation-error,.bft-light .bft-input>select.bft-validation-error{border-color:#ca2a2a}.bft-dark .bft-validation-error-message,.bft-light .bft-validation-error-message{color:#ca2a2a}.bft-input select.multiple{height:initial}.bft-link{color:#039be5;cursor:pointer;text-decoration:underline}.bft-link:hover{color:#f57c00}.bft-dark ::-webkit-scrollbar,.bft-light ::-webkit-scrollbar{width:15px;height:15px}.bft-dark ::-webkit-scrollbar-corner{background:#1e1e1e}.bft-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333;border-top:1px solid #333}.bft-dark ::-webkit-scrollbar-thumb{background:#424242}.bft-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.bft-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.bft-light ::-webkit-scrollbar-corner{background:#fff}.bft-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd;border-top:1px solid #ddd}.bft-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.bft-light ::-webkit-scrollbar-thumb:hover{background:#929292}.bft-light ::-webkit-scrollbar-thumb:active{background:#666}.bft-edit-form{position:fixed;top:0;right:0;height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:1000px){.bft-edit-form{width:100%}}.bft-dark .bft-edit-form{background-color:#252526}.bft-light .bft-edit-form{background-color:#fff}.bft-edit-form-header{height:200px;text-align:center;border-radius:10px}.export-service .bft-edit-form-header{border-radius:unset}.bft-edit-form-title{color:#fff;margin:0;padding:14px 17px 7px 17px}.bft-edit-form-avatar{border-radius:50%;width:150px;height:150px;position:absolute;top:75px;border:5px solid #fff;left:50%;transform:translateX(-50%);background-color:#cacaca;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0}.bft-edit-form-close{position:absolute;right:14px;top:14px;width:34px;height:34px;cursor:pointer}.bft-edit-form-fields{flex-grow:1;overflow-y:auto;overflow-x:hidden}.bft-edit-form-fields-inner{margin:0 7px 20px 7px}.bft-family-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.bft-family-menu>div:hover img{filter:invert(100%)}.bft-family-menu [data-item]{text-align:start;padding:7px 10px}.bft-dark .bft-family-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.bft-dark .bft-family-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.bft-dark .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-light .bft-family-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.bft-light .bft-family-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.bft-light .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-family-menu [data-item] svg{vertical-align:middle}.bft-family-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.bft-family-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}.bft-search{position:absolute}@media screen and (max-width:500px){.bft-search{width:calc(100% - 30px);left:15px}}.bft-search .bft-input{margin-bottom:0}.bft-search-input{color:#7a7a7a;width:100%;border:none;outline:0;padding-top:10px;padding-right:47px}.bft-search-image-td{width:43px}.bft-search-text-td{padding-inline-end:7px;line-height:15px;text-align:start}.bft-search table{box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;margin:0 3.5px 0 3.5px;width:calc(100% - 7px);border-radius:7px}.bft-search table tr:first-child td:first-child{border-top-left-radius:7px}.bft-search table tr:first-child td:last-child{border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:first-child{border-top-left-radius:unset;border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:last-child{border-top-right-radius:unset;border-top-left-radius:7px}.bft-search table tr:last-child td:first-child{border-bottom-left-radius:7px}.bft-search table tr:last-child td:last-child{border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:first-child{border-bottom-left-radius:unset;border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:last-child{border-bottom-right-radius:unset;border-bottom-left-radius:7px}.bft-dark .bft-search table{background-color:#252526;color:#acacac}.bft-search [data-search-item-id]{cursor:pointer}.bft-search-photo{margin:7px 7px 0 7px;width:32px;height:32px;background-size:cover;background-position:top center;border-radius:50%;display:inline-block;border:1px solid #8c8c8c}.bft-search [data-search-item-id]:hover .bft-link{color:#ffca28}.bft-search [data-search-item-id]:hover .bft-link:hover{color:#f57c00}.bft-dark .bft-search [data-search-item-id] td{border-top:1px solid #333}.bft-dark .bft-search [data-search-item-id]:hover,.bft-dark .bft-search [data-selected=yes]{background-color:#094771;color:#fff}.bft-light .bft-search table{background-color:#fff;color:#333}.bft-light .bft-search [data-search-item-id] td{border-top:1px solid #c7c7c7}.bft-light .bft-search [data-search-item-id]:hover,.bft-light .bft-search [data-selected=yes]{background-color:#0074e8;color:#fff}.bft-search [data-search-item-id]:first-child td{border-top:unset}.bft-ripple-container{position:absolute;top:0;right:0;bottom:0;left:0}.bft-drag-over rect{opacity:.5}.bft-ripple-container span{transform:scale(0);border-radius:100%;position:absolute;opacity:.75;background-color:#fff;animation:bft-ripple 1s}@-moz-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-webkit-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-o-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@keyframes bft-ripple{to{opacity:0;transform:scale(2)}}.bft-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.bft-slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.bft-slider.round{border-radius:24px}.bft-slider.round:before{border-radius:50%}svg text:hover{cursor:default}svg.bft-cursor-grab,svg.bft-cursor-grab text:hover{cursor:grab}svg.bft-cursor-nodrop,svg.bft-cursor-nodrop text:hover{cursor:no-drop}svg.bft-cursor-copy,svg.bft-cursor-copy text:hover{cursor:copy}svg.bft-cursor-move,svg.bft-cursor-move text:hover{cursor:move}#bft-close-btn:focus,#bft-close-btn:hover{color:#000;text-decoration:none;cursor:pointer}#bft-id-select:focus{outline:.5px solid #aeaeae}#bft-sampleDialog #title:hover{cursor:default;background:gray}.bft-light{background-color:#fff;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark{background-color:#1e1e1e;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-light .bft-fill{fill:#fff}.bft-dark .bft-fill{fill:#1e1e1e}.bft-dark input,.bft-dark select,.bft-light input,.bft-light select{font:16px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark h1,.bft-light h1{font-size:30px;line-height:1}.bft-edit-form{position:absolute;border-radius:10px}.export-service .bft-edit-form{border-radius:unset}.bft-dark .bft-edit-form{color:#acacac}.bft-light .bft-edit-form{color:#333}.bft-dark ::-webkit-calendar-picker-indicator{filter:invert(70%)}.bft-light ::-webkit-calendar-picker-indicator{filter:invert(50%)}.bft-edit-form-instruments{margin:42px 10px 0 10px;text-align:center;min-height:70px}.bft-img-button svg{position:relative;top:12px}.bft-light .bft-toolbar-container svg circle,.bft-light .bft-toolbar-container svg line,.bft-light .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg circle,.bft-dark .bft-toolbar-container svg line,.bft-dark .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg rect{fill:#252526!important}.bft-dark .bft-toolbar-container [data-tlbr=minus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-bottom:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr=plus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-top:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr]>svg{border:1px solid #5b5b5b!important;background-color:#252526!important}.bft-toolbar-layout{height:123px;padding-top:20px;position:absolute;width:100%;left:"0";bottom:"-145px"}.bft-light .bft-toolbar-layout{border-top:1px solid #c7c7c7;background-color:#f9f9f9}.bft-dark .bft-toolbar-layout{border-top:1px solid #5b5b5b;background-color:#2b2b2b}.bft-dotted-connector path{stroke-dasharray:7}.bft-undo-redo{position:absolute;top:23px;left:23px}@media screen and (max-width:500px){.bft-undo-redo{position:absolute;top:83px;left:23px}}.bft-light .bft-undo-redo path{fill:#cacaca}.bft-dark .bft-undo-redo path{fill:#5b5b5b}.bft-light .bft-undo-redo .bft-ur-clickable path{fill:#9c9c9c}.bft-dark .bft-undo-redo .bft-ur-clickable path{fill:#8c8c8c}.bft-undo-redo .bft-ur-clickable rect{cursor:pointer}.bft-undo-redo>span{position:relative;display:inline-block;user-select:none}.bft-undo-redo .bft-undo-i{left:-6px;top:-6px}.bft-undo-redo .bft-redo-i{right:-6px;bottom:6px}.bft-undo-redo>span>span{color:#fff;position:absolute;display:inline-block;min-width:20px;min-height:20px;border-radius:50%;line-height:20px;text-align:center;padding:1px;user-select:none;cursor:pointer}.bft-light .bft-undo-redo>span>span{background-color:#9c9c9c}.bft-dark .bft-undo-redo>span>span{background-color:#8c8c8c}</style>'},a.events.on("render",function(t,e){if(t.recentRoots||(t.recentRoots=[]),t.config.roots)for(var n=0;n<t.config.roots.length;n++){var r=t.recentRoots.indexOf(t.config.roots[n]);r!=-1&&t.recentRoots.splice(r,1),t.recentRoots.unshift(t.config.roots[n])}}),a.events.on("show",function(t,e){if(t instanceof a.editUI&&t.obj._tree_menu_temp)return!1}),a.events.on("render-link",function(t,e){e.cnode.ppid!=null&&e.cnode.layout!=a.mixed&&(e.html+='<use xlink:href="#dot" x="'+e.p.xa+'" y="'+e.p.ya+'"/>')}),a.events.on("click",function(t,e){if(t instanceof a){var n=t._get(e.node.id);if(n._ft_method)return n._ft_method=="addParentNode"?t[n._ft_method](n._ft_childId,n._ft_type,n._ft_data,null,!0):n._ft_method=="addChildAndPartnerNodes"?t[n._ft_method](n._ft_id,n._ft_childData,n._ft_partnerData,null,!0):n._ft_method=="addPartnerAndParentNodes"?t[n._ft_method](n._ft_id,n._ft_childIds,n._ft_partnerData,null,!0):t[n._ft_method](n._ft_data,null,!0),!1;for(var r=e.event.target;r;){if(r.getAttribute&&(r.hasAttribute("data-ctrl-n-t-menu-id")||r.hasAttribute("data-ctrl-n-t-menu-c"))){var i=r.getAttribute("data-ctrl-n-t-menu-id");return a.isNEU(i)?t.hideTreeMenu(!0):t.showTreeMenu(i),e.event.stopPropagation(),e.event.preventDefault(),!1}r=r.parentNode}}}),a===void 0&&(a={}),a.prototype.onField=function(t){return this.on("field",function(e,n){return t.call(e,n)})},a.prototype.onInit=function(t){return this.on("init",function(e){return t.call(e)})},a.prototype.onRedraw=function(t){return this.on("redraw",function(e){return t.call(e)})},a.prototype.onUpdateNode=function(t){return this.on("update",function(e,n,r){var i={oldData:n,newData:r};return t.call(e,i)})},a.prototype.onUpdated=function(t){return this.on("updated",function(e){return t.call(e)})},a.prototype.onRemoveNode=function(t){return this.on("remove",function(e,n,r){var i={id:n,newPidsAndStpidsForIds:r};return t.call(e,i)})},a.prototype.onAddNode=function(t){return this.on("add",function(e,n){var r={data:n};return t.call(e,r)})},a.prototype.onDrop=function(t){return this.on("drop",function(e,n,r,i,o){var s={dragId:n,dropId:r,dragNodeElement:i,event:o};return t.call(e,s)})},a.prototype.onDrag=function(t){return this.on("drag",function(e,n,r,i){var o={dragId:n,event:r,nodeIds:i};return t.call(e,o)})},a.prototype.onExpandCollpaseButtonClick=function(t){return this.on("expcollclick",function(e,n,r,i){var o={collapsing:n,id:r,ids:i};return t.call(e,o)})},a.prototype.onExportStart=function(t){return this.on("exportstart",function(e,n){return t.call(e,n)})},a.prototype.onExportEnd=function(t){return this.on("exportend",function(e,n){return t.call(e,n)})},a.prototype.onNodeClick=function(t){return this.on("click",function(e,n){return t.call(e,n)})},a.prototype.onNodeDoubleClick=function(t){return this.on("dbclick",function(e,n){var r={data:n};return t.call(e,r)})},a.prototype.onUpdateNode=function(t){return this.on("update",function(e,n){return t.call(e,n)})},a.prototype.onNodeTreeMenuShow=function(t){return this.on("node-tree-menu-show",function(e,n){return t.call(e,n)})},a.prototype.onRemoveNode=null,a.prototype.onAddNode=null,a.filterUI=function(){},a.filterUI.prototype.init=function(t){this.instance=t,this.element=null,this.filterBy=null,this._event_id=a._guid()},a.filterUI.prototype.addFilterTag=function(t){if(!this.instance.config.filterBy||a.isNEU(t))return!1;if(this.filterBy!==null||typeof this.instance.config.filterBy!="object"||Array.isArray(this.instance.config.filterBy)||(this.filterBy=JSON.parse(JSON.stringify(this.instance.config.filterBy))),this.filterBy!=null)for(var e in this.filterBy){var n=t[e];if(n!=null){var r=this.filterBy[e];if(r!=null){var i=r[n];if(i!=null&&i.checked===!1)return!0}}}return!1},a.filterUI.prototype.show=function(t){var e=this.element.querySelector('[data-filter-field="'+t+'"]');e&&e.click()},a.filterUI.prototype.hide=function(){var t=this.instance.element.querySelector("[data-filter-close]");t&&t.click()},a.filterUI.prototype.update=function(){if(this.instance.config.filterBy){var t={};if(this.instance.config.filterBy=="all")for(var e=a.manager.getAllFields(this.instance.config),n=0;n<e.length;n++){var r=e[n];r!="tags"&&r!="id"&&r!="pid"&&r!="ppid"&&r!="stpid"&&(t[r]={})}else if(Array.isArray(this.instance.config.filterBy))for(n=0;n<this.instance.config.filterBy.length;n++)t[this.instance.config.filterBy[n]]={};else if(typeof this.instance.config.filterBy=="object")for(var i in this.instance.config.filterBy)t[i]={};for(var o in t){var s=t[o];for(n=0;n<this.instance.config.nodes.length;n++){var l=this.instance.config.nodes[n][o];l!=null&&(s[l]||(s[l]={checked:!0,text:l}))}}if(this.filterBy!=null){for(var c in t)if(this.filterBy[c])for(var d in t[c])this.filterBy[c][d]&&(t[c][d]=this.filterBy[c][d])}if(a.FILTER_ALPHABETICALLY){var u=Object.keys(t).sort(),h=t;for(t={},n=0;n<u.length;n++)t[f=u[n]]=h[f];for(var o in t)for(s=t[o],t[o]={},u=Object.keys(s).sort(),n=0;n<u.length;n++){var f=u[n];t[o][f]=s[f]}}this.filterBy=t;var m=this;this.element=this.instance.element.querySelector("[data-filter]"),this.element&&this.element.parentNode.removeChild(this.element),this.element=document.createElement("div"),this.element.setAttribute("data-filter",""),this.element.style.position="absolute",this.element.setAttribute("class","bft-filter"),this.instance.config.undoRedoStorageName?(this.element.style.top=0,this.element.style.left="50%",this.element.style.transform="translate(-50%)"):(this.element.style.top=this.instance.config.padding+"px",this.element.style.left=this.instance.config.padding+"px");var v="";for(var c in this.filterBy){var y={name:c,html:`<div data-filter-field="${c}">${c}</div>`};a.events.publish("add-filter",[m,y]),v+=y.html}this.element.innerHTML=`<div>${v}</div>`,this.element.addEventListener("click",function(E){if(E.target.hasAttribute("data-filter-close")||E.target.hasAttribute("data-filter-field")){for(var g=E.target.getAttribute("data-filter-field"),w=m.instance.element.querySelectorAll("[data-filter-menu]"),_=0;_<w.length;_++)w[_].style.display="none";var b=m.instance.element.querySelectorAll(".filter-field-selected");for(_=0;_<b.length;_++)b[_].classList.remove("filter-field-selected");var A=m.instance.element.querySelector("[data-filter-close]");if(A&&A.parentNode.removeChild(A),E.target.hasAttribute("data-filter-close")||!E.target.hasAttribute("data-filter-field"))return;var k=m.instance.element.querySelector(`[data-filter-menu="${g}"]`);if(!k){var C={name:g,text:"[All]",value:g,checked:!0,html:`<div>
                        <input data-all type="checkbox" id="${g}" name="${g}" checked>
                        <label for="${g}">[All]</label>
                    </div>`};a.events.publish("add-item",[m,C]);var x=C.html;for(var S in m.filterBy[g]){var T=m.filterBy[g][S],R=T.text;R==null&&(R=S),C={name:g,text:R,value:S,checked:T.checked,html:`<div>
                            <input  type="checkbox" id="${S}" name="${S}" ${T.checked?"checked":""}>
                            <label for="${S}">${R}</label>
                        </div>`},a.events.publish("add-item",[m,C]),x+=C.html}k=document.createElement("div");var N=a.filterUI.textFilterBy;k.innerHTML=`<fieldset>
                                                    <legend>${N} ${g}:</legend>
                                                    ${x}
                                                </fieldset>`,k.setAttribute("data-filter-menu",g),k.classList.add("bft-filter-menu"),E.target.parentNode.parentNode.appendChild(k);var P=k.querySelectorAll("input");for(_=0;_<P.length;_++)P[_].addEventListener("change",function(V){for(var j=V.target;j&&!j.hasAttribute("data-filter-menu");)j=j.parentNode;if(j){var O=j.getAttribute("data-filter-menu");if(V.target.hasAttribute("data-all")){for(var M=V.target.parentNode.parentNode.querySelectorAll("input"),F=0;F<M.length;F++)if(M[F]!=V.target)for(var B in M[F].checked=V.target.checked,m.filterBy[O])m.filterBy[O][B].checked=V.target.checked}else if(m.filterBy[O][this.name]!=null&&(m.filterBy[O][this.name].checked=this.checked),this.checked){for(var z=m.instance.config.nodes,X=0;X<z.length;X++)if(z[X][O]==this.name){for(var Y=z[X];Y;)if(a.isNEU(Y.stpid))Y=a.isNEU(Y.pid)?null:m.instance._get(Y.pid);else if((Y=m.instance._get(Y.stpid))[O]){var q=V.target.parentNode.parentNode.querySelector('[name="'+Y[O]+'"]');q?(q.checked=this.checked,m.filterBy[O][Y[O]].checked=this.checked):console.error('Cannot find element with selector: [name="'+Y[O]+'"]')}}}m.instance.draw()}})}k.style.display="block",E.target.classList.add("filter-field-selected"),(A=document.createElement("div")).classList.add("close"),A.innerHTML="x",A.setAttribute("data-filter-close",""),E.target.parentNode.appendChild(A),a.events.publish("show-items",[m,{name:g}])}}),this.instance.element.appendChild(this.element),a.events.publish("update",[this,{}])}},a.filterUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.filterUI.textFilterBy="Filter by",a===void 0&&(a={}),a.remote===void 0&&(a.remote={}),a.LIMIT_NODES=!0,a.remote._fromResDTO=function(t,e,n,r,i){var o=e[t.id];t.x=o.p[0],t.y=o.p[1],t.w=o.p[2],t.h=o.p[3],o.ln!=null&&(t.leftNeighbor=i[o.ln]),o.rn!=null&&(t.rightNeighbor=i[o.rn]);for(var s=0;s<t.stChildren.length;s++)a.remote._fromResDTO(t.stChildren[s],e,n,r,i);for(s=0;s<t.children.length;s++)a.remote._fromResDTO(t.children[s],e,n,r,i)},a.remote._toReqDTO=function(t,e){var n={p:[t.id,t.parent!=null?t.parent.id:null,t.stParent!=null?t.stParent.id:null,t.w,t.h]};t.children.length>0&&(n.c=a.remote._convertToIdArray(t.children)),t.stChildren.length>0&&(n.v=a.remote._convertToIdArray(t.stChildren)),t.layout!=null&&t.layout!=0&&(n.l=t.layout),t.isAssistant&&(n.a=1),t.isSplit&&(n.s=t.isSplit),t.isMirror&&(n.im=t.isMirror),t.padding&&(n.q=t.padding),t.lcn&&(n.k=t.lcn),t.stContainerNodes&&(n.b=a.remote._convertToIdArray(t.stContainerNodes)),t.isPartner&&(n.i=t.isPartner),t.hasPartners&&(n.g=t.hasPartners),t.partnerSeparation&&(n.e=t.partnerSeparation),e.push(n);for(var r=0;r<t.stChildren.length;r++)a.remote._toReqDTO(t.stChildren[r],e);for(r=0;r<t.children.length;r++)a.remote._toReqDTO(t.children[r],e)},a.remote._toReqLayoutConfigsDTO=function(t){var e={};for(var n in t){var r=t[n];e[n]||(e[n]=[]),e[n][0]=r.orientation,e[n][1]=r.levelSeparation,e[n][2]=r.mixedHierarchyNodesSeparation,e[n][3]=r.subtreeSeparation,e[n][4]=r.siblingSeparation,e[n][5]=r.layout,e[n][6]=r.columns,e[n][7]=r.collapse,e[n][8]=r.assistantSeparation,e[n][9]=r.partnerNodeSeparation}return e};a.remote._convertToIdArray=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].id);return e},a.remote._setPositions=function(t,e,n,r){for(var i=[],o=[],s=a.remote._toReqLayoutConfigsDTO(e),l=0;l<t.length;l++)o.push(t[l].id),a.remote._toReqDTO(t[l],i);var c={n:i,c:s,r:o,v:"8.14.00"};if(a.LIMIT_NODES||(c.l=!0),a.remote._fromReqDTO!=null)a.remote._fromReqDTO(c.n,c.r,c.c,function(u){for(var h=0;h<t.length;h++)a.remote._fromResDTO(t[h],u,0,t,r);n()});else{c=JSON.stringify(c);var d=a.localStorage.getItem(c);d&&(d=JSON.parse(d)),d&&!d.limit?a.remote._proceed(t,d,r,n):a.remote._findRegion(function(u){a._ajax(u,"post",c,"json",function(h){h.error?n(2):(a.remote._proceed(t,h,r,n),a.localStorage.setItem(c,JSON.stringify(h)))})})}},a.remote._proceed=function(t,e,n,r){if(typeof e=="string"&&(e=JSON.parse(e)),e.limit&&e.limit==1)r(e.limit);else{for(var i=0;i<t.length;i++)a.remote._fromResDTO(t[i],e,0,t,n);r()}},a.remote._findRegion=function(t){var e=a.localStorage.getItem(a.FUNC_URL_NAME);if(e)t(e);else{for(var n=["defunc2","cusfunc2","bsfunc2","acfunc2","kcfunc2","safunc2","wifunc2"],r=[],i=0;i<n.length;i++)r.push(new XMLHttpRequest);for(i=0;i<n.length;i++)(function(){var o="https://"+n[i]+a.SERVER_PREFIX,s=r[i];s.onreadystatechange=function(){if(this.readyState==4&&this.status==200){a.localStorage.setItem(a.FUNC_URL_NAME,o),t(o);for(var l=0;l<r.length;l++)r[l].abort()}},s.open("GET",o,!0),s.send()})()}};const nt=a;nt.templates.rabin=Object.assign({},nt.templates.base);nt.templates.rabin.defs=`<style>
                                    .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                        background-color: #aeaeae;
                                    }
                                    .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                        background-color: #039BE5;
                                    }        
                                    .{randId}.male div.bft-img-button:hover{
                                        background-color: #F57C00;
                                    }
                                    .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                        background-color: #F57C00;
                                    }        
                                    .{randId}.female div.bft-img-button:hover{
                                        background-color: #039BE5;
                                    }
                                </style>
                                <clipPath id="rabin_img_0"><rect x="6" y="6" rx="54" ry="54" width="108" height="108"></rect></clipPath>
                                ${nt.gradientCircleForDefs("circle","#aeaeae",60,5)}
                                ${nt.gradientCircleForDefs("male_circle","#039BE5",60,5)}
                                ${nt.gradientCircleForDefs("female_circle","#F57C00",60,5)}`;nt.templates.rabin.field_0="<text "+nt.attr.width+' ="230" class="user_name" style="font-size: 16px;font-weight:bold;" fill="#aeaeae" x="60" y="145" text-anchor="middle">{val}</text>';nt.templates.rabin.field_0='<text data-text-overflow="multiline" data-width="100" style="font-size: 13px;font-weight:bold;"  fill="#aeaeae" x="60" y="150" text-anchor="middle">{val}</text>';nt.templates.rabin.node='<use x="0" y="0" xlink:href="#circle" />';nt.templates.rabin.img_0='<image preserveAspectRatio="xMidYMid slice" clip-path="url(#rabin_img_0)" xlink:href="{val}" x="6" y="6" width="108" height="108"></image>';nt.templates.rabin.ripple={radius:60,color:"#e6e6e6",rect:void 0};nt.templates.rabin.size=[120,120];nt.templates.rabin_male=Object.assign({},nt.templates.rabin);nt.templates.rabin_male.node+='<use x="0" y="0" xlink:href="#male_circle" />';nt.templates.rabin_male.ripple={radius:60,color:"#039BE5",rect:void 0};nt.templates.rabin_female=Object.assign({},nt.templates.rabin);nt.templates.rabin_female.node+='<use x="0" y="0" xlink:href="#female_circle" />';nt.templates.rabin_female.ripple={radius:60,color:"#F57C00",rect:void 0};nt.templates.rabin.nodeMenuButton=`<use ${nt.attr.control_node_menu_id}="{id}" x="90" y="50" xlink:href="#base_node_menu" />`;function W8(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Y3(...t){return e=>t.forEach(n=>W8(n,e))}function _t(...t){return D.useCallback(Y3(...t),t)}var ms=D.forwardRef((t,e)=>{const{children:n,...r}=t,i=D.Children.toArray(n),o=i.find(K8);if(o){const s=o.props.children,l=i.map(c=>c===o?D.Children.count(s)>1?D.Children.only(null):D.isValidElement(s)?s.props.children:null:c);return $.jsx(Ff,{...r,ref:e,children:D.isValidElement(s)?D.cloneElement(s,void 0,l):null})}return $.jsx(Ff,{...r,ref:e,children:n})});ms.displayName="Slot";var Ff=D.forwardRef((t,e)=>{const{children:n,...r}=t;if(D.isValidElement(n)){const i=G8(n);return D.cloneElement(n,{...Y8(r,n.props),ref:e?Y3(e,i):i})}return D.Children.count(n)>1?D.Children.only(null):null});Ff.displayName="SlotClone";var X8=({children:t})=>$.jsx($.Fragment,{children:t});function K8(t){return D.isValidElement(t)&&t.type===X8}function Y8(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{o(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function G8(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function G3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=G3(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Q8(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=G3(t))&&(r&&(r+=" "),r+=e);return r}const $g=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Hg=Q8,I1=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Hg(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],h=o==null?void 0:o[d];if(u===null)return null;const f=$g(u)||$g(h);return i[d][f]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(v=>{let[y,E]=v;return Array.isArray(E)?E.includes({...o,...l}[y]):{...o,...l}[y]===E})?[...d,h,f]:d},[]);return Hg(t,s,c,n==null?void 0:n.class,n==null?void 0:n.className)};function Q3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Q3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function J8(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Q3(t))&&(r&&(r+=" "),r+=e);return r}const C1="-",Z8=t=>{const e=tx(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const l=s.split(C1);return l[0]===""&&l.length!==1&&l.shift(),J3(l,e)||ex(s)},getConflictingClassGroupIds:(s,l)=>{const c=n[s]||[];return l&&r[s]?[...c,...r[s]]:c}}},J3=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?J3(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(C1);return(s=e.validators.find(({validator:l})=>l(o)))==null?void 0:s.classGroupId},qg=/^\[(.+)\]$/,ex=t=>{if(qg.test(t)){const e=qg.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},tx=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return rx(Object.entries(t.classGroups),n).forEach(([o,s])=>{Bf(s,r,o,e)}),r},Bf=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:Wg(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(nx(i)){Bf(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Bf(s,Wg(e,o),n,r)})})},Wg=(t,e)=>{let n=t;return e.split(C1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},nx=t=>t.isThemeGetter,rx=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,l])=>[e+s,l])):o);return[n,i]}):t,ix=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},Z3="!",ox=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=l=>{const c=[];let d=0,u=0,h;for(let E=0;E<l.length;E++){let g=l[E];if(d===0){if(g===i&&(r||l.slice(E,E+o)===e)){c.push(l.slice(u,E)),u=E+o;continue}if(g==="/"){h=E;continue}}g==="["?d++:g==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(Z3),v=m?f.substring(1):f,y=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:s}):s},sx=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},ax=t=>({cache:ix(t.cacheSize),parseClassName:ox(t),...Z8(t)}),lx=/\s+/,cx=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(lx);let l="";for(let c=s.length-1;c>=0;c-=1){const d=s[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(d);let v=!!m,y=r(v?f.substring(0,m):f);if(!y){if(!v){l=d+(l.length>0?" "+l:l);continue}if(y=r(f),!y){l=d+(l.length>0?" "+l:l);continue}v=!1}const E=sx(u).join(":"),g=h?E+Z3:E,w=g+y;if(o.includes(w))continue;o.push(w);const _=i(y,v);for(let b=0;b<_.length;++b){const A=_[b];o.push(g+A)}l=d+(l.length>0?" "+l:l)}return l};function ux(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=e_(e))&&(r&&(r+=" "),r+=n);return r}const e_=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=e_(t[r]))&&(n&&(n+=" "),n+=e);return n};function dx(t,...e){let n,r,i,o=s;function s(c){const d=e.reduce((u,h)=>h(u),t());return n=ax(d),r=n.cache.get,i=n.cache.set,o=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=cx(c,n);return i(c,u),u}return function(){return o(ux.apply(null,arguments))}}const Ge=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},t_=/^\[(?:([a-z-]+):)?(.+)\]$/i,hx=/^\d+\/\d+$/,fx=new Set(["px","full","screen"]),px=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yr=t=>ts(t)||fx.has(t)||hx.test(t),Kr=t=>Ts(t,"length",Cx),ts=t=>!!t&&!Number.isNaN(Number(t)),yh=t=>Ts(t,"number",ts),ta=t=>!!t&&Number.isInteger(Number(t)),_x=t=>t.endsWith("%")&&ts(t.slice(0,-1)),xe=t=>t_.test(t),Yr=t=>px.test(t),wx=new Set(["length","size","percentage"]),bx=t=>Ts(t,wx,n_),xx=t=>Ts(t,"position",n_),Ex=new Set(["image","url"]),Sx=t=>Ts(t,Ex,Tx),Ix=t=>Ts(t,"",Ax),na=()=>!0,Ts=(t,e,n)=>{const r=t_.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Cx=t=>mx.test(t)&&!gx.test(t),n_=()=>!1,Ax=t=>vx.test(t),Tx=t=>yx.test(t),kx=()=>{const t=Ge("colors"),e=Ge("spacing"),n=Ge("blur"),r=Ge("brightness"),i=Ge("borderColor"),o=Ge("borderRadius"),s=Ge("borderSpacing"),l=Ge("borderWidth"),c=Ge("contrast"),d=Ge("grayscale"),u=Ge("hueRotate"),h=Ge("invert"),f=Ge("gap"),m=Ge("gradientColorStops"),v=Ge("gradientColorStopPositions"),y=Ge("inset"),E=Ge("margin"),g=Ge("opacity"),w=Ge("padding"),_=Ge("saturate"),b=Ge("scale"),A=Ge("sepia"),k=Ge("skew"),C=Ge("space"),x=Ge("translate"),S=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",xe,e],N=()=>[xe,e],P=()=>["",yr,Kr],V=()=>["auto",ts,xe],j=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",xe],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[ts,xe];return{cacheSize:500,separator:":",theme:{colors:[na],spacing:[yr,Kr],blur:["none","",Yr,xe],brightness:X(),borderColor:[t],borderRadius:["none","","full",Yr,xe],borderSpacing:N(),borderWidth:P(),contrast:X(),grayscale:B(),hueRotate:X(),invert:B(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[_x,Kr],inset:R(),margin:R(),opacity:X(),padding:N(),saturate:X(),scale:X(),sepia:B(),skew:X(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[Yr]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...j(),xe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ta,xe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",ta,xe]}],"grid-cols":[{"grid-cols":[na]}],"col-start-end":[{col:["auto",{span:["full",ta,xe]},xe]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[na]}],"row-start-end":[{row:["auto",{span:[ta,xe]},xe]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[Yr]},Yr]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Yr,Kr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yh]}],"font-family":[{font:[na]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",ts,yh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yr,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yr,Kr]}],"underline-offset":[{"underline-offset":["auto",yr,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...j(),xx]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bx]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Sx]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:O()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[yr,xe]}],"outline-w":[{outline:[yr,Kr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[yr,Kr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Yr,Ix]}],"shadow-color":[{shadow:[na]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Yr,xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ta,xe]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yr,Kr,yh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Rx=dx(kx);function wt(...t){return Rx(J8(t))}const Nx=I1("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ir=D.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const s=r?ms:"button";return $.jsx(s,{className:wt(Nx({variant:e,size:n,className:t})),ref:o,...i})});Ir.displayName="Button";const jf=D.forwardRef(({className:t,type:e,...n},r)=>$.jsx("input",{type:e,className:wt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));jf.displayName="Input";var Px=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],je=Px.reduce((t,e)=>{const n=D.forwardRef((r,i)=>{const{asChild:o,...s}=r,l=o?ms:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function r_(t,e){t&&wo.flushSync(()=>t.dispatchEvent(e))}var Lx="Label",i_=D.forwardRef((t,e)=>$.jsx(je.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));i_.displayName=Lx;var o_=i_;const Mx=I1("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$i=D.forwardRef(({className:t,...e},n)=>$.jsx(o_,{ref:n,className:wt(Mx(),t),...e}));$i.displayName=o_.displayName;function bo(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Ox=["color"],Dx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,Ox);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ux=["color"],Vx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,Ux);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Fx=["color"],Bx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,Fx);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),jx=["color"],zx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,jx);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$x=["color"],Hx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,$x);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),qx=["color"],Wx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,qx);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Xx=["color"],Kx=D.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=bo(t,Xx);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),D.createElement("path",{d:"M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function Xg(t,[e,n]){return Math.min(n,Math.max(e,t))}function Be(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Yx(t,e=[]){let n=[];function r(o,s){const l=D.createContext(s),c=n.length;n=[...n,s];function d(h){const{scope:f,children:m,...v}=h,y=(f==null?void 0:f[t][c])||l,E=D.useMemo(()=>v,Object.values(v));return $.jsx(y.Provider,{value:E,children:m})}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=D.useContext(m);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const i=()=>{const o=n.map(s=>D.createContext(s));return function(l){const c=(l==null?void 0:l[t])||o;return D.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Gx(i,...e)]}function Gx(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function s_(t){const e=t+"CollectionProvider",[n,r]=Yx(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:v,children:y}=m,E=Jn.useRef(null),g=Jn.useRef(new Map).current;return $.jsx(i,{scope:v,itemMap:g,collectionRef:E,children:y})};s.displayName=e;const l=t+"CollectionSlot",c=Jn.forwardRef((m,v)=>{const{scope:y,children:E}=m,g=o(l,y),w=_t(v,g.collectionRef);return $.jsx(ms,{ref:w,children:E})});c.displayName=l;const d=t+"CollectionItemSlot",u="data-radix-collection-item",h=Jn.forwardRef((m,v)=>{const{scope:y,children:E,...g}=m,w=Jn.useRef(null),_=_t(v,w),b=o(d,y);return Jn.useEffect(()=>(b.itemMap.set(w,{ref:w,...g}),()=>void b.itemMap.delete(w))),$.jsx(ms,{[u]:"",ref:_,children:E})});h.displayName=d;function f(m){const v=o(t+"CollectionConsumer",m);return Jn.useCallback(()=>{const E=v.collectionRef.current;if(!E)return[];const g=Array.from(E.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((b,A)=>g.indexOf(b.ref.current)-g.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:c,ItemSlot:h},f,r]}function A1(t,e=[]){let n=[];function r(o,s){const l=D.createContext(s),c=n.length;n=[...n,s];const d=h=>{var g;const{scope:f,children:m,...v}=h,y=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,E=D.useMemo(()=>v,Object.values(v));return $.jsx(y.Provider,{value:E,children:m})};d.displayName=o+"Provider";function u(h,f){var y;const m=((y=f==null?void 0:f[t])==null?void 0:y[c])||l,v=D.useContext(m);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,u]}const i=()=>{const o=n.map(s=>D.createContext(s));return function(l){const c=(l==null?void 0:l[t])||o;return D.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Qx(i,...e)]}function Qx(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var Jx=D.createContext(void 0);function Zx(t){const e=D.useContext(Jx);return t||e||"ltr"}function un(t){const e=D.useRef(t);return D.useEffect(()=>{e.current=t}),D.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function e9(t,e=globalThis==null?void 0:globalThis.document){const n=un(t);D.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var t9="DismissableLayer",zf="dismissableLayer.update",n9="dismissableLayer.pointerDownOutside",r9="dismissableLayer.focusOutside",Kg,a_=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),T1=D.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:l,...c}=t,d=D.useContext(a_),[u,h]=D.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=D.useState({}),v=_t(e,C=>h(C)),y=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=y.indexOf(E),w=u?y.indexOf(u):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,b=w>=g,A=o9(C=>{const x=C.target,S=[...d.branches].some(T=>T.contains(x));!b||S||(i==null||i(C),s==null||s(C),C.defaultPrevented||l==null||l())},f),k=s9(C=>{const x=C.target;[...d.branches].some(T=>T.contains(x))||(o==null||o(C),s==null||s(C),C.defaultPrevented||l==null||l())},f);return e9(C=>{w===d.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},f),D.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Kg=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Yg(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Kg)}},[u,f,n,d]),D.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Yg())},[u,d]),D.useEffect(()=>{const C=()=>m({});return document.addEventListener(zf,C),()=>document.removeEventListener(zf,C)},[]),$.jsx(je.div,{...c,ref:v,style:{pointerEvents:_?b?"auto":"none":void 0,...t.style},onFocusCapture:Be(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Be(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Be(t.onPointerDownCapture,A.onPointerDownCapture)})});T1.displayName=t9;var i9="DismissableLayerBranch",l_=D.forwardRef((t,e)=>{const n=D.useContext(a_),r=D.useRef(null),i=_t(e,r);return D.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),$.jsx(je.div,{...t,ref:i})});l_.displayName=i9;function o9(t,e=globalThis==null?void 0:globalThis.document){const n=un(t),r=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){c_(n9,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function s9(t,e=globalThis==null?void 0:globalThis.document){const n=un(t),r=D.useRef(!1);return D.useEffect(()=>{const i=o=>{o.target&&!r.current&&c_(r9,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yg(){const t=new CustomEvent(zf);document.dispatchEvent(t)}function c_(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?r_(i,o):i.dispatchEvent(o)}var a9=T1,l9=l_,_h=0;function c9(){D.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Gg()),document.body.insertAdjacentElement("beforeend",t[1]??Gg()),_h++,()=>{_h===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_h--}},[])}function Gg(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wh="focusScope.autoFocusOnMount",bh="focusScope.autoFocusOnUnmount",Qg={bubbles:!1,cancelable:!0},u9="FocusScope",u_=D.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[l,c]=D.useState(null),d=un(i),u=un(o),h=D.useRef(null),f=_t(e,y=>c(y)),m=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(r){let y=function(_){if(m.paused||!l)return;const b=_.target;l.contains(b)?h.current=b:Qr(h.current,{select:!0})},E=function(_){if(m.paused||!l)return;const b=_.relatedTarget;b!==null&&(l.contains(b)||Qr(h.current,{select:!0}))},g=function(_){if(document.activeElement===document.body)for(const A of _)A.removedNodes.length>0&&Qr(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",E);const w=new MutationObserver(g);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",E),w.disconnect()}}},[r,l,m.paused]),D.useEffect(()=>{if(l){Zg.add(m);const y=document.activeElement;if(!l.contains(y)){const g=new CustomEvent(wh,Qg);l.addEventListener(wh,d),l.dispatchEvent(g),g.defaultPrevented||(d9(g9(d_(l)),{select:!0}),document.activeElement===y&&Qr(l))}return()=>{l.removeEventListener(wh,d),setTimeout(()=>{const g=new CustomEvent(bh,Qg);l.addEventListener(bh,u),l.dispatchEvent(g),g.defaultPrevented||Qr(y??document.body,{select:!0}),l.removeEventListener(bh,u),Zg.remove(m)},0)}}},[l,d,u,m]);const v=D.useCallback(y=>{if(!n&&!r||m.paused)return;const E=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(E&&g){const w=y.currentTarget,[_,b]=h9(w);_&&b?!y.shiftKey&&g===b?(y.preventDefault(),n&&Qr(_,{select:!0})):y.shiftKey&&g===_&&(y.preventDefault(),n&&Qr(b,{select:!0})):g===w&&y.preventDefault()}},[n,r,m.paused]);return $.jsx(je.div,{tabIndex:-1,...s,ref:f,onKeyDown:v})});u_.displayName=u9;function d9(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Qr(r,{select:e}),document.activeElement!==n)return}function h9(t){const e=d_(t),n=Jg(e,t),r=Jg(e.reverse(),t);return[n,r]}function d_(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jg(t,e){for(const n of t)if(!f9(n,{upTo:e}))return n}function f9(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function p9(t){return t instanceof HTMLInputElement&&"select"in t}function Qr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&p9(t)&&e&&t.select()}}var Zg=m9();function m9(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=e2(t,e),t.unshift(e)},remove(e){var n;t=e2(t,e),(n=t[0])==null||n.resume()}}}function e2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function g9(t){return t.filter(e=>e.tagName!=="A")}var kt=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},v9=Mb.useId||(()=>{}),y9=0;function k1(t){const[e,n]=D.useState(v9());return kt(()=>{n(r=>r??String(y9++))},[t]),e?`radix-${e}`:""}const _9=["top","right","bottom","left"],Ei=Math.min,gn=Math.max,gu=Math.round,rc=Math.floor,Si=t=>({x:t,y:t}),w9={left:"right",right:"left",bottom:"top",top:"bottom"},b9={start:"end",end:"start"};function $f(t,e,n){return gn(t,Ei(e,n))}function Or(t,e){return typeof t=="function"?t(e):t}function Dr(t){return t.split("-")[0]}function ks(t){return t.split("-")[1]}function R1(t){return t==="x"?"y":"x"}function N1(t){return t==="y"?"height":"width"}function Ii(t){return["top","bottom"].includes(Dr(t))?"y":"x"}function P1(t){return R1(Ii(t))}function x9(t,e,n){n===void 0&&(n=!1);const r=ks(t),i=P1(t),o=N1(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=vu(s)),[s,vu(s)]}function E9(t){const e=vu(t);return[Hf(t),e,Hf(e)]}function Hf(t){return t.replace(/start|end/g,e=>b9[e])}function S9(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function I9(t,e,n,r){const i=ks(t);let o=S9(Dr(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(Hf)))),o}function vu(t){return t.replace(/left|right|bottom|top/g,e=>w9[e])}function C9(t){return{top:0,right:0,bottom:0,left:0,...t}}function h_(t){return typeof t!="number"?C9(t):{top:t,right:t,bottom:t,left:t}}function yu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function t2(t,e,n){let{reference:r,floating:i}=t;const o=Ii(e),s=P1(e),l=N1(s),c=Dr(e),d=o==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(ks(e)){case"start":m[s]-=f*(n&&d?-1:1);break;case"end":m[s]+=f*(n&&d?-1:1);break}return m}const A9=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let d=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=t2(d,r,c),f=r,m={},v=0;for(let y=0;y<l.length;y++){const{name:E,fn:g}=l[y],{x:w,y:_,data:b,reset:A}=await g({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:d,platform:s,elements:{reference:t,floating:e}});u=w??u,h=_??h,m={...m,[E]:{...m[E],...b}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(f=A.placement),A.rects&&(d=A.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:u,y:h}=t2(d,f,c)),y=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:m}};async function Ya(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Or(e,t),v=h_(m),E=l[f?h==="floating"?"reference":"floating":h],g=yu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=h==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},A=yu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:_,strategy:c}):w);return{top:(g.top-A.top+v.top)/b.y,bottom:(A.bottom-g.bottom+v.bottom)/b.y,left:(g.left-A.left+v.left)/b.x,right:(A.right-g.right+v.right)/b.x}}const T9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=Or(t,e)||{};if(d==null)return{};const h=h_(u),f={x:n,y:r},m=P1(i),v=N1(m),y=await s.getDimensions(d),E=m==="y",g=E?"top":"left",w=E?"bottom":"right",_=E?"clientHeight":"clientWidth",b=o.reference[v]+o.reference[m]-f[m]-o.floating[v],A=f[m]-o.reference[m],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(d));let C=k?k[_]:0;(!C||!await(s.isElement==null?void 0:s.isElement(k)))&&(C=l.floating[_]||o.floating[v]);const x=b/2-A/2,S=C/2-y[v]/2-1,T=Ei(h[g],S),R=Ei(h[w],S),N=T,P=C-y[v]-R,V=C/2-y[v]/2+x,j=$f(N,V,P),O=!c.arrow&&ks(i)!=null&&V!==j&&o.reference[v]/2-(V<N?T:R)-y[v]/2<0,M=O?V<N?V-N:V-P:0;return{[m]:f[m]+M,data:{[m]:j,centerOffset:V-j-M,...O&&{alignmentOffset:M}},reset:O}}}),k9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...E}=Or(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=Dr(i),w=Ii(l),_=Dr(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(d.floating)),A=f||(_||!y?[vu(l)]:E9(l)),k=v!=="none";!f&&k&&A.push(...I9(l,y,v,b));const C=[l,...A],x=await Ya(e,E),S=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&S.push(x[g]),h){const V=x9(i,s,b);S.push(x[V[0]],x[V[1]])}if(T=[...T,{placement:i,overflows:S}],!S.every(V=>V<=0)){var R,N;const V=(((R=o.flip)==null?void 0:R.index)||0)+1,j=C[V];if(j)return{data:{index:V,overflows:T},reset:{placement:j}};let O=(N=T.filter(M=>M.overflows[0]<=0).sort((M,F)=>M.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!O)switch(m){case"bestFit":{var P;const M=(P=T.filter(F=>{if(k){const B=Ii(F.placement);return B===w||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:P[0];M&&(O=M);break}case"initialPlacement":O=l;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function n2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function r2(t){return _9.some(e=>t[e]>=0)}const R9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Or(t,e);switch(r){case"referenceHidden":{const o=await Ya(e,{...i,elementContext:"reference"}),s=n2(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:r2(s)}}}case"escaped":{const o=await Ya(e,{...i,altBoundary:!0}),s=n2(o,n.floating);return{data:{escapedOffsets:s,escaped:r2(s)}}}default:return{}}}}};async function N9(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Dr(n),l=ks(n),c=Ii(n)==="y",d=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,h=Or(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const P9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:l}=e,c=await N9(e,t);return s===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},L9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:E=>{let{x:g,y:w}=E;return{x:g,y:w}}},...c}=Or(t,e),d={x:n,y:r},u=await Ya(e,c),h=Ii(Dr(i)),f=R1(h);let m=d[f],v=d[h];if(o){const E=f==="y"?"top":"left",g=f==="y"?"bottom":"right",w=m+u[E],_=m-u[g];m=$f(w,m,_)}if(s){const E=h==="y"?"top":"left",g=h==="y"?"bottom":"right",w=v+u[E],_=v-u[g];v=$f(w,v,_)}const y=l.fn({...e,[f]:m,[h]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:o,[h]:s}}}}}},M9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Or(t,e),u={x:n,y:r},h=Ii(i),f=R1(h);let m=u[f],v=u[h];const y=Or(l,e),E=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=f==="y"?"height":"width",b=o.reference[f]-o.floating[_]+E.mainAxis,A=o.reference[f]+o.reference[_]-E.mainAxis;m<b?m=b:m>A&&(m=A)}if(d){var g,w;const _=f==="y"?"width":"height",b=["top","left"].includes(Dr(i)),A=o.reference[h]-o.floating[_]+(b&&((g=s.offset)==null?void 0:g[h])||0)+(b?0:E.crossAxis),k=o.reference[h]+o.reference[_]+(b?0:((w=s.offset)==null?void 0:w[h])||0)-(b?E.crossAxis:0);v<A?v=A:v>k&&(v=k)}return{[f]:m,[h]:v}}}},O9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:l}=e,{apply:c=()=>{},...d}=Or(t,e),u=await Ya(e,d),h=Dr(i),f=ks(i),m=Ii(i)==="y",{width:v,height:y}=o.floating;let E,g;h==="top"||h==="bottom"?(E=h,g=f===(await(s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(g=h,E=f==="end"?"top":"bottom");const w=y-u.top-u.bottom,_=v-u.left-u.right,b=Ei(y-u[E],w),A=Ei(v-u[g],_),k=!e.middlewareData.shift;let C=b,x=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(x=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=w),k&&!f){const T=gn(u.left,0),R=gn(u.right,0),N=gn(u.top,0),P=gn(u.bottom,0);m?x=v-2*(T!==0||R!==0?T+R:gn(u.left,u.right)):C=y-2*(N!==0||P!==0?N+P:gn(u.top,u.bottom))}await c({...e,availableWidth:x,availableHeight:C});const S=await s.getDimensions(l.floating);return v!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function id(){return typeof window<"u"}function Rs(t){return f_(t)?(t.nodeName||"").toLowerCase():"#document"}function bn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pr(t){var e;return(e=(f_(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function f_(t){return id()?t instanceof Node||t instanceof bn(t).Node:!1}function Xn(t){return id()?t instanceof Element||t instanceof bn(t).Element:!1}function ur(t){return id()?t instanceof HTMLElement||t instanceof bn(t).HTMLElement:!1}function i2(t){return!id()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bn(t).ShadowRoot}function dl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Kn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function D9(t){return["table","td","th"].includes(Rs(t))}function od(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function L1(t){const e=M1(),n=Xn(t)?Kn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function U9(t){let e=Ci(t);for(;ur(e)&&!gs(e);){if(L1(e))return e;if(od(e))return null;e=Ci(e)}return null}function M1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function gs(t){return["html","body","#document"].includes(Rs(t))}function Kn(t){return bn(t).getComputedStyle(t)}function sd(t){return Xn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ci(t){if(Rs(t)==="html")return t;const e=t.assignedSlot||t.parentNode||i2(t)&&t.host||pr(t);return i2(e)?e.host:e}function p_(t){const e=Ci(t);return gs(e)?t.ownerDocument?t.ownerDocument.body:t.body:ur(e)&&dl(e)?e:p_(e)}function Ga(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=p_(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=bn(i);if(o){const l=qf(s);return e.concat(s,s.visualViewport||[],dl(i)?i:[],l&&n?Ga(l):[])}return e.concat(i,Ga(i,[],n))}function qf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function m_(t){const e=Kn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ur(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,l=gu(n)!==o||gu(r)!==s;return l&&(n=o,r=s),{width:n,height:r,$:l}}function O1(t){return Xn(t)?t:t.contextElement}function ns(t){const e=O1(t);if(!ur(e))return Si(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=m_(e);let s=(o?gu(n.width):n.width)/r,l=(o?gu(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const V9=Si(0);function g_(t){const e=bn(t);return!M1()||!e.visualViewport?V9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function F9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==bn(t)?!1:e}function ao(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=O1(t);let s=Si(1);e&&(r?Xn(r)&&(s=ns(r)):s=ns(t));const l=F9(o,n,r)?g_(o):Si(0);let c=(i.left+l.x)/s.x,d=(i.top+l.y)/s.y,u=i.width/s.x,h=i.height/s.y;if(o){const f=bn(o),m=r&&Xn(r)?bn(r):r;let v=f,y=qf(v);for(;y&&r&&m!==v;){const E=ns(y),g=y.getBoundingClientRect(),w=Kn(y),_=g.left+(y.clientLeft+parseFloat(w.paddingLeft))*E.x,b=g.top+(y.clientTop+parseFloat(w.paddingTop))*E.y;c*=E.x,d*=E.y,u*=E.x,h*=E.y,c+=_,d+=b,v=bn(y),y=qf(v)}}return yu({width:u,height:h,x:c,y:d})}function B9(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=pr(r),l=e?od(e.floating):!1;if(r===s||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=Si(1);const u=Si(0),h=ur(r);if((h||!h&&!o)&&((Rs(r)!=="body"||dl(s))&&(c=sd(r)),ur(r))){const f=ao(r);d=ns(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x,y:n.y*d.y-c.scrollTop*d.y+u.y}}function j9(t){return Array.from(t.getClientRects())}function Wf(t,e){const n=sd(t).scrollLeft;return e?e.left+n:ao(pr(t)).left+n}function z9(t){const e=pr(t),n=sd(t),r=t.ownerDocument.body,i=gn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=gn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Wf(t);const l=-n.scrollTop;return Kn(r).direction==="rtl"&&(s+=gn(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:l}}function $9(t,e){const n=bn(t),r=pr(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,l=0,c=0;if(i){o=i.width,s=i.height;const d=M1();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:l,y:c}}function H9(t,e){const n=ao(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=ur(t)?ns(t):Si(1),s=t.clientWidth*o.x,l=t.clientHeight*o.y,c=i*o.x,d=r*o.y;return{width:s,height:l,x:c,y:d}}function o2(t,e,n){let r;if(e==="viewport")r=$9(t,n);else if(e==="document")r=z9(pr(t));else if(Xn(e))r=H9(e,n);else{const i=g_(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return yu(r)}function v_(t,e){const n=Ci(t);return n===e||!Xn(n)||gs(n)?!1:Kn(n).position==="fixed"||v_(n,e)}function q9(t,e){const n=e.get(t);if(n)return n;let r=Ga(t,[],!1).filter(l=>Xn(l)&&Rs(l)!=="body"),i=null;const o=Kn(t).position==="fixed";let s=o?Ci(t):t;for(;Xn(s)&&!gs(s);){const l=Kn(s),c=L1(s);!c&&l.position==="fixed"&&(i=null),(o?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||dl(s)&&!c&&v_(t,s))?r=r.filter(u=>u!==s):i=l,s=Ci(s)}return e.set(t,r),r}function W9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?od(e)?[]:q9(e,this._c):[].concat(n),r],l=s[0],c=s.reduce((d,u)=>{const h=o2(e,u,i);return d.top=gn(h.top,d.top),d.right=Ei(h.right,d.right),d.bottom=Ei(h.bottom,d.bottom),d.left=gn(h.left,d.left),d},o2(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function X9(t){const{width:e,height:n}=m_(t);return{width:e,height:n}}function K9(t,e,n){const r=ur(e),i=pr(e),o=n==="fixed",s=ao(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=Si(0);if(r||!r&&!o)if((Rs(e)!=="body"||dl(i))&&(l=sd(e)),r){const m=ao(e,!0,o,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&(c.x=Wf(i));let d=0,u=0;if(i&&!r&&!o){const m=i.getBoundingClientRect();u=m.top+l.scrollTop,d=m.left+l.scrollLeft-Wf(i,m)}const h=s.left+l.scrollLeft-c.x-d,f=s.top+l.scrollTop-c.y-u;return{x:h,y:f,width:s.width,height:s.height}}function xh(t){return Kn(t).position==="static"}function s2(t,e){if(!ur(t)||Kn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return pr(t)===n&&(n=n.ownerDocument.body),n}function y_(t,e){const n=bn(t);if(od(t))return n;if(!ur(t)){let i=Ci(t);for(;i&&!gs(i);){if(Xn(i)&&!xh(i))return i;i=Ci(i)}return n}let r=s2(t,e);for(;r&&D9(r)&&xh(r);)r=s2(r,e);return r&&gs(r)&&xh(r)&&!L1(r)?n:r||U9(t)||n}const Y9=async function(t){const e=this.getOffsetParent||y_,n=this.getDimensions,r=await n(t.floating);return{reference:K9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function G9(t){return Kn(t).direction==="rtl"}const Q9={convertOffsetParentRelativeRectToViewportRelativeRect:B9,getDocumentElement:pr,getClippingRect:W9,getOffsetParent:y_,getElementRects:Y9,getClientRects:j9,getDimensions:X9,getScale:ns,isElement:Xn,isRTL:G9};function J9(t,e){let n=null,r;const i=pr(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function s(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:d,top:u,width:h,height:f}=t.getBoundingClientRect();if(l||e(),!h||!f)return;const m=rc(u),v=rc(i.clientWidth-(d+h)),y=rc(i.clientHeight-(u+f)),E=rc(d),w={rootMargin:-m+"px "+-v+"px "+-y+"px "+-E+"px",threshold:gn(0,Ei(1,c))||1};let _=!0;function b(A){const k=A[0].intersectionRatio;if(k!==c){if(!_)return s();k?s(!1,k):r=setTimeout(()=>{s(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(b,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,w)}n.observe(t)}return s(!0),o}function Z9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=O1(t),u=i||o?[...d?Ga(d):[],...Ga(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const h=d&&l?J9(d,n):null;let f=-1,m=null;s&&(m=new ResizeObserver(g=>{let[w]=g;w&&w.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(e)})),n()}),d&&!c&&m.observe(d),m.observe(e));let v,y=c?ao(t):null;c&&E();function E(){const g=ao(t);y&&(g.x!==y.x||g.y!==y.y||g.width!==y.width||g.height!==y.height)&&n(),y=g,v=requestAnimationFrame(E)}return n(),()=>{var g;u.forEach(w=>{i&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),h==null||h(),(g=m)==null||g.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const eE=P9,tE=L9,nE=k9,rE=O9,iE=R9,a2=T9,oE=M9,sE=(t,e,n)=>{const r=new Map,i={platform:Q9,...n},o={...i.platform,_c:r};return A9(t,e,{...i,platform:o})};var Nc=typeof document<"u"?D.useLayoutEffect:D.useEffect;function _u(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!_u(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!_u(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function __(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function l2(t,e){const n=__(t);return Math.round(e*n)/n}function Eh(t){const e=D.useRef(t);return Nc(()=>{e.current=t}),e}function aE(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=D.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=D.useState(r);_u(f,r)||m(r);const[v,y]=D.useState(null),[E,g]=D.useState(null),w=D.useCallback(F=>{F!==k.current&&(k.current=F,y(F))},[]),_=D.useCallback(F=>{F!==C.current&&(C.current=F,g(F))},[]),b=o||v,A=s||E,k=D.useRef(null),C=D.useRef(null),x=D.useRef(u),S=c!=null,T=Eh(c),R=Eh(i),N=Eh(d),P=D.useCallback(()=>{if(!k.current||!C.current)return;const F={placement:e,strategy:n,middleware:f};R.current&&(F.platform=R.current),sE(k.current,C.current,F).then(B=>{const z={...B,isPositioned:N.current!==!1};V.current&&!_u(x.current,z)&&(x.current=z,wo.flushSync(()=>{h(z)}))})},[f,e,n,R,N]);Nc(()=>{d===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[d]);const V=D.useRef(!1);Nc(()=>(V.current=!0,()=>{V.current=!1}),[]),Nc(()=>{if(b&&(k.current=b),A&&(C.current=A),b&&A){if(T.current)return T.current(b,A,P);P()}},[b,A,P,T,S]);const j=D.useMemo(()=>({reference:k,floating:C,setReference:w,setFloating:_}),[w,_]),O=D.useMemo(()=>({reference:b,floating:A}),[b,A]),M=D.useMemo(()=>{const F={position:n,left:0,top:0};if(!O.floating)return F;const B=l2(O.floating,u.x),z=l2(O.floating,u.y);return l?{...F,transform:"translate("+B+"px, "+z+"px)",...__(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:z}},[n,l,O.floating,u.x,u.y]);return D.useMemo(()=>({...u,update:P,refs:j,elements:O,floatingStyles:M}),[u,P,j,O,M])}const lE=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?a2({element:r.current,padding:i}).fn(n):{}:r?a2({element:r,padding:i}).fn(n):{}}}},cE=(t,e)=>({...eE(t),options:[t,e]}),uE=(t,e)=>({...tE(t),options:[t,e]}),dE=(t,e)=>({...oE(t),options:[t,e]}),hE=(t,e)=>({...nE(t),options:[t,e]}),fE=(t,e)=>({...rE(t),options:[t,e]}),pE=(t,e)=>({...iE(t),options:[t,e]}),mE=(t,e)=>({...lE(t),options:[t,e]});var gE="Arrow",w_=D.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return $.jsx(je.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:$.jsx("polygon",{points:"0,0 30,0 15,10"})})});w_.displayName=gE;var vE=w_;function yE(t,e=[]){let n=[];function r(o,s){const l=D.createContext(s),c=n.length;n=[...n,s];function d(h){const{scope:f,children:m,...v}=h,y=(f==null?void 0:f[t][c])||l,E=D.useMemo(()=>v,Object.values(v));return $.jsx(y.Provider,{value:E,children:m})}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=D.useContext(m);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const i=()=>{const o=n.map(s=>D.createContext(s));return function(l){const c=(l==null?void 0:l[t])||o;return D.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,_E(i,...e)]}function _E(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function wE(t){const[e,n]=D.useState(void 0);return kt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;s=d.inlineSize,l=d.blockSize}else s=t.offsetWidth,l=t.offsetHeight;n({width:s,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var D1="Popper",[b_,x_]=yE(D1),[bE,E_]=b_(D1),S_=t=>{const{__scopePopper:e,children:n}=t,[r,i]=D.useState(null);return $.jsx(bE,{scope:e,anchor:r,onAnchorChange:i,children:n})};S_.displayName=D1;var I_="PopperAnchor",C_=D.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=E_(I_,n),s=D.useRef(null),l=_t(e,s);return D.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:$.jsx(je.div,{...i,ref:l})});C_.displayName=I_;var U1="PopperContent",[xE,EE]=b_(U1),A_=D.forwardRef((t,e)=>{var Z,ae,ce,oe,ie,re;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...y}=t,E=E_(U1,n),[g,w]=D.useState(null),_=_t(e,we=>w(we)),[b,A]=D.useState(null),k=wE(b),C=(k==null?void 0:k.width)??0,x=(k==null?void 0:k.height)??0,S=r+(o!=="center"?"-"+o:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(d)?d:[d],N=R.length>0,P={padding:T,boundary:R.filter(IE),altBoundary:N},{refs:V,floatingStyles:j,placement:O,isPositioned:M,middlewareData:F}=aE({strategy:"fixed",placement:S,whileElementsMounted:(...we)=>Z9(...we,{animationFrame:m==="always"}),elements:{reference:E.anchor},middleware:[cE({mainAxis:i+x,alignmentAxis:s}),c&&uE({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dE():void 0,...P}),c&&hE({...P}),fE({...P,apply:({elements:we,rects:Ae,availableWidth:ve,availableHeight:Me})=>{const{width:Ee,height:Se}=Ae.reference,de=we.floating.style;de.setProperty("--radix-popper-available-width",`${ve}px`),de.setProperty("--radix-popper-available-height",`${Me}px`),de.setProperty("--radix-popper-anchor-width",`${Ee}px`),de.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),b&&mE({element:b,padding:l}),CE({arrowWidth:C,arrowHeight:x}),f&&pE({strategy:"referenceHidden",...P})]}),[B,z]=R_(O),X=un(v);kt(()=>{M&&(X==null||X())},[M,X]);const Y=(Z=F.arrow)==null?void 0:Z.x,q=(ae=F.arrow)==null?void 0:ae.y,K=((ce=F.arrow)==null?void 0:ce.centerOffset)!==0,[H,te]=D.useState();return kt(()=>{g&&te(window.getComputedStyle(g).zIndex)},[g]),$.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:M?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(oe=F.transformOrigin)==null?void 0:oe.x,(ie=F.transformOrigin)==null?void 0:ie.y].join(" "),...((re=F.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:$.jsx(xE,{scope:n,placedSide:B,onArrowChange:A,arrowX:Y,arrowY:q,shouldHideArrow:K,children:$.jsx(je.div,{"data-side":B,"data-align":z,...y,ref:_,style:{...y.style,animation:M?void 0:"none"}})})})});A_.displayName=U1;var T_="PopperArrow",SE={top:"bottom",right:"left",bottom:"top",left:"right"},k_=D.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=EE(T_,r),s=SE[o.placedSide];return $.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:$.jsx(vE,{...i,ref:n,style:{...i.style,display:"block"}})})});k_.displayName=T_;function IE(t){return t!==null}var CE=t=>({name:"transformOrigin",options:t,fn(e){var E,g,w;const{placement:n,rects:r,middlewareData:i}=e,s=((E=i.arrow)==null?void 0:E.centerOffset)!==0,l=s?0:t.arrowWidth,c=s?0:t.arrowHeight,[d,u]=R_(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((g=i.arrow)==null?void 0:g.x)??0)+l/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+c/2;let v="",y="";return d==="bottom"?(v=s?h:`${f}px`,y=`${-c}px`):d==="top"?(v=s?h:`${f}px`,y=`${r.floating.height+c}px`):d==="right"?(v=`${-c}px`,y=s?h:`${m}px`):d==="left"&&(v=`${r.floating.width+c}px`,y=s?h:`${m}px`),{data:{x:v,y}}}});function R_(t){const[e,n="center"]=t.split("-");return[e,n]}var AE=S_,TE=C_,kE=A_,RE=k_,NE="Portal",V1=D.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,o]=D.useState(!1);kt(()=>o(!0),[]);const s=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return s?q8.createPortal($.jsx(je.div,{...r,ref:e}),s):null});V1.displayName=NE;function Xf({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=PE({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,l=un(n),c=D.useCallback(d=>{if(o){const h=typeof d=="function"?d(t):d;h!==t&&l(h)}else i(d)},[o,t,i,l]);return[s,c]}function PE({defaultProp:t,onChange:e}){const n=D.useState(t),[r]=n,i=D.useRef(r),o=un(e);return D.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function LE(t){const e=D.useRef({value:t,previous:t});return D.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ME="VisuallyHidden",ad=D.forwardRef((t,e)=>$.jsx(je.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ad.displayName=ME;var OE=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ro=new WeakMap,ic=new WeakMap,oc={},Sh=0,N_=function(t){return t&&(t.host||N_(t.parentNode))},DE=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=N_(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},UE=function(t,e,n,r){var i=DE(e,Array.isArray(t)?t:[t]);oc[n]||(oc[n]=new WeakMap);var o=oc[n],s=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",y=(Ro.get(f)||0)+1,E=(o.get(f)||0)+1;Ro.set(f,y),o.set(f,E),s.push(f),y===1&&v&&ic.set(f,!0),E===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return u(e),l.clear(),Sh++,function(){s.forEach(function(h){var f=Ro.get(h)-1,m=o.get(h)-1;Ro.set(h,f),o.set(h,m),f||(ic.has(h)||h.removeAttribute(r),ic.delete(h)),m||h.removeAttribute(n)}),Sh--,Sh||(Ro=new WeakMap,Ro=new WeakMap,ic=new WeakMap,oc={})}},VE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=OE(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),UE(r,i,n,"aria-hidden")):function(){return null}},tr=function(){return tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},tr.apply(this,arguments)};function hl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FE(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Pc="right-scroll-bar-position",Lc="width-before-scroll-bar",BE="with-scroll-bars-hidden",jE="--removed-body-scroll-bar-size";function Ih(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function zE(t,e){var n=D.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var $E=typeof window<"u"?D.useLayoutEffect:D.useEffect,c2=new WeakMap;function HE(t,e){var n=zE(null,function(r){return t.forEach(function(i){return Ih(i,r)})});return $E(function(){var r=c2.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(l){o.has(l)||Ih(l,null)}),o.forEach(function(l){i.has(l)||Ih(l,s)})}c2.set(n,t)},[t]),n}function qE(t){return t}function WE(t,e){e===void 0&&(e=qE);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(l){return l!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var l=n;n=[],l.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){s.push(u),d()},filter:function(u){return s=s.filter(u),n}}}};return i}function XE(t){t===void 0&&(t={});var e=WE(null);return e.options=tr({async:!0,ssr:!1},t),e}var P_=function(t){var e=t.sideCar,n=hl(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,tr({},n))};P_.isSideCarExport=!0;function KE(t,e){return t.useMedium(e),P_}var L_=XE(),Ch=function(){},ld=D.forwardRef(function(t,e){var n=D.useRef(null),r=D.useState({onScrollCapture:Ch,onWheelCapture:Ch,onTouchMoveCapture:Ch}),i=r[0],o=r[1],s=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,m=t.noIsolation,v=t.inert,y=t.allowPinchZoom,E=t.as,g=E===void 0?"div":E,w=t.gapMode,_=hl(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,A=HE([n,e]),k=tr(tr({},_),i);return D.createElement(D.Fragment,null,u&&D.createElement(b,{sideCar:L_,removeScrollBar:d,shards:h,noIsolation:m,inert:v,setCallbacks:o,allowPinchZoom:!!y,lockRef:n,gapMode:w}),s?D.cloneElement(D.Children.only(l),tr(tr({},k),{ref:A})):D.createElement(g,tr({},k,{className:c,ref:A}),l))});ld.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ld.classNames={fullWidth:Lc,zeroRight:Pc};var YE=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GE(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=YE();return e&&t.setAttribute("nonce",e),t}function QE(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function JE(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ZE=function(){var t=0,e=null;return{add:function(n){t==0&&(e=GE())&&(QE(e,n),JE(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},eS=function(){var t=ZE();return function(e,n){D.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},M_=function(){var t=eS(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},tS={left:0,top:0,right:0,gap:0},Ah=function(t){return parseInt(t||"",10)||0},nS=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Ah(n),Ah(r),Ah(i)]},rS=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return tS;var e=nS(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},iS=M_(),rs="data-scroll-locked",oS=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(BE,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(rs,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Pc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Lc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Pc," .").concat(Pc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Lc," .").concat(Lc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rs,`] {
    `).concat(jE,": ").concat(l,`px;
  }
`)},u2=function(){var t=parseInt(document.body.getAttribute(rs)||"0",10);return isFinite(t)?t:0},sS=function(){D.useEffect(function(){return document.body.setAttribute(rs,(u2()+1).toString()),function(){var t=u2()-1;t<=0?document.body.removeAttribute(rs):document.body.setAttribute(rs,t.toString())}},[])},aS=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;sS();var o=D.useMemo(function(){return rS(i)},[i]);return D.createElement(iS,{styles:oS(o,!e,i,n?"":"!important")})},Kf=!1;if(typeof window<"u")try{var sc=Object.defineProperty({},"passive",{get:function(){return Kf=!0,!0}});window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{Kf=!1}var No=Kf?{passive:!1}:!1,lS=function(t){return t.tagName==="TEXTAREA"},O_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!lS(t)&&n[e]==="visible")},cS=function(t){return O_(t,"overflowY")},uS=function(t){return O_(t,"overflowX")},d2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=D_(t,r);if(i){var o=U_(t,r),s=o[1],l=o[2];if(s>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dS=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},hS=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},D_=function(t,e){return t==="v"?cS(e):uS(e)},U_=function(t,e){return t==="v"?dS(e):hS(e)},fS=function(t,e){return t==="h"&&e==="rtl"?-1:1},pS=function(t,e,n,r,i){var o=fS(t,window.getComputedStyle(e).direction),s=o*r,l=n.target,c=e.contains(l),d=!1,u=s>0,h=0,f=0;do{var m=U_(t,l),v=m[0],y=m[1],E=m[2],g=y-E-o*v;(v||g)&&D_(t,l)&&(h+=g,f+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&(Math.abs(h)<1||!i)||!u&&(Math.abs(f)<1||!i))&&(d=!0),d},ac=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},h2=function(t){return[t.deltaX,t.deltaY]},f2=function(t){return t&&"current"in t?t.current:t},mS=function(t,e){return t[0]===e[0]&&t[1]===e[1]},gS=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},vS=0,Po=[];function yS(t){var e=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(vS++)[0],o=D.useState(M_)[0],s=D.useRef(t);D.useEffect(function(){s.current=t},[t]),D.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=FE([t.lockRef.current],(t.shards||[]).map(f2),!0).filter(Boolean);return y.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=D.useCallback(function(y,E){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var g=ac(y),w=n.current,_="deltaX"in y?y.deltaX:w[0]-g[0],b="deltaY"in y?y.deltaY:w[1]-g[1],A,k=y.target,C=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in y&&C==="h"&&k.type==="range")return!1;var x=d2(C,k);if(!x)return!0;if(x?A=C:(A=C==="v"?"h":"v",x=d2(C,k)),!x)return!1;if(!r.current&&"changedTouches"in y&&(_||b)&&(r.current=A),!A)return!0;var S=r.current||A;return pS(S,E,y,S==="h"?_:b,!0)},[]),c=D.useCallback(function(y){var E=y;if(!(!Po.length||Po[Po.length-1]!==o)){var g="deltaY"in E?h2(E):ac(E),w=e.current.filter(function(A){return A.name===E.type&&(A.target===E.target||E.target===A.shadowParent)&&mS(A.delta,g)})[0];if(w&&w.should){E.cancelable&&E.preventDefault();return}if(!w){var _=(s.current.shards||[]).map(f2).filter(Boolean).filter(function(A){return A.contains(E.target)}),b=_.length>0?l(E,_[0]):!s.current.noIsolation;b&&E.cancelable&&E.preventDefault()}}},[]),d=D.useCallback(function(y,E,g,w){var _={name:y,delta:E,target:g,should:w,shadowParent:_S(g)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(b){return b!==_})},1)},[]),u=D.useCallback(function(y){n.current=ac(y),r.current=void 0},[]),h=D.useCallback(function(y){d(y.type,h2(y),y.target,l(y,t.lockRef.current))},[]),f=D.useCallback(function(y){d(y.type,ac(y),y.target,l(y,t.lockRef.current))},[]);D.useEffect(function(){return Po.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,No),document.addEventListener("touchmove",c,No),document.addEventListener("touchstart",u,No),function(){Po=Po.filter(function(y){return y!==o}),document.removeEventListener("wheel",c,No),document.removeEventListener("touchmove",c,No),document.removeEventListener("touchstart",u,No)}},[]);var m=t.removeScrollBar,v=t.inert;return D.createElement(D.Fragment,null,v?D.createElement(o,{styles:gS(i)}):null,m?D.createElement(aS,{gapMode:t.gapMode}):null)}function _S(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const wS=KE(L_,yS);var V_=D.forwardRef(function(t,e){return D.createElement(ld,tr({},t,{ref:e,sideCar:wS}))});V_.classNames=ld.classNames;var bS=[" ","Enter","ArrowUp","ArrowDown"],xS=[" ","Enter"],fl="Select",[cd,ud,ES]=s_(fl),[Ns,qL]=A1(fl,[ES,x_]),dd=x_(),[SS,Mi]=Ns(fl),[IS,CS]=Ns(fl),F_=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m,form:v}=t,y=dd(e),[E,g]=D.useState(null),[w,_]=D.useState(null),[b,A]=D.useState(!1),k=Zx(d),[C=!1,x]=Xf({prop:r,defaultProp:i,onChange:o}),[S,T]=Xf({prop:s,defaultProp:l,onChange:c}),R=D.useRef(null),N=E?v||!!E.closest("form"):!0,[P,V]=D.useState(new Set),j=Array.from(P).map(O=>O.props.value).join(";");return $.jsx(AE,{...y,children:$.jsxs(SS,{required:m,scope:e,trigger:E,onTriggerChange:g,valueNode:w,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:A,contentId:k1(),value:S,onValueChange:T,open:C,onOpenChange:x,dir:k,triggerPointerDownPosRef:R,disabled:f,children:[$.jsx(cd.Provider,{scope:e,children:$.jsx(IS,{scope:t.__scopeSelect,onNativeOptionAdd:D.useCallback(O=>{V(M=>new Set(M).add(O))},[]),onNativeOptionRemove:D.useCallback(O=>{V(M=>{const F=new Set(M);return F.delete(O),F})},[]),children:n})}),N?$.jsxs(u5,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:S,onChange:O=>T(O.target.value),disabled:f,form:v,children:[S===void 0?$.jsx("option",{value:""}):null,Array.from(P)]},j):null]})})};F_.displayName=fl;var B_="SelectTrigger",j_=D.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=dd(n),s=Mi(B_,n),l=s.disabled||r,c=_t(e,s.onTriggerChange),d=ud(n),u=D.useRef("touch"),[h,f,m]=d5(y=>{const E=d().filter(_=>!_.disabled),g=E.find(_=>_.value===s.value),w=h5(E,y,g);w!==void 0&&s.onValueChange(w.value)}),v=y=>{l||(s.onOpenChange(!0),m()),y&&(s.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return $.jsx(TE,{asChild:!0,...o,children:$.jsx(je.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":c5(s.value)?"":void 0,...i,ref:c,onClick:Be(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&v(y)}),onPointerDown:Be(i.onPointerDown,y=>{u.current=y.pointerType;const E=y.target;E.hasPointerCapture(y.pointerId)&&E.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:Be(i.onKeyDown,y=>{const E=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(E&&y.key===" ")&&bS.includes(y.key)&&(v(),y.preventDefault())})})})});j_.displayName=B_;var z_="SelectValue",$_=D.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...l}=t,c=Mi(z_,n),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,h=_t(e,c.onValueNodeChange);return kt(()=>{d(u)},[d,u]),$.jsx(je.span,{...l,ref:h,style:{pointerEvents:"none"},children:c5(c.value)?$.jsx($.Fragment,{children:s}):o})});$_.displayName=z_;var AS="SelectIcon",H_=D.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return $.jsx(je.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});H_.displayName=AS;var TS="SelectPortal",q_=t=>$.jsx(V1,{asChild:!0,...t});q_.displayName=TS;var lo="SelectContent",W_=D.forwardRef((t,e)=>{const n=Mi(lo,t.__scopeSelect),[r,i]=D.useState();if(kt(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?wo.createPortal($.jsx(X_,{scope:t.__scopeSelect,children:$.jsx(cd.Slot,{scope:t.__scopeSelect,children:$.jsx("div",{children:t.children})})}),o):null}return $.jsx(K_,{...t,ref:e})});W_.displayName=lo;var Vn=10,[X_,Oi]=Ns(lo),kS="SelectContentImpl",K_=D.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:E,...g}=t,w=Mi(lo,n),[_,b]=D.useState(null),[A,k]=D.useState(null),C=_t(e,Z=>b(Z)),[x,S]=D.useState(null),[T,R]=D.useState(null),N=ud(n),[P,V]=D.useState(!1),j=D.useRef(!1);D.useEffect(()=>{if(_)return VE(_)},[_]),c9();const O=D.useCallback(Z=>{const[ae,...ce]=N().map(re=>re.ref.current),[oe]=ce.slice(-1),ie=document.activeElement;for(const re of Z)if(re===ie||(re==null||re.scrollIntoView({block:"nearest"}),re===ae&&A&&(A.scrollTop=0),re===oe&&A&&(A.scrollTop=A.scrollHeight),re==null||re.focus(),document.activeElement!==ie))return},[N,A]),M=D.useCallback(()=>O([x,_]),[O,x,_]);D.useEffect(()=>{P&&M()},[P,M]);const{onOpenChange:F,triggerPointerDownPosRef:B}=w;D.useEffect(()=>{if(_){let Z={x:0,y:0};const ae=oe=>{var ie,re;Z={x:Math.abs(Math.round(oe.pageX)-(((ie=B.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((re=B.current)==null?void 0:re.y)??0))}},ce=oe=>{Z.x<=10&&Z.y<=10?oe.preventDefault():_.contains(oe.target)||F(!1),document.removeEventListener("pointermove",ae),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",ce,{capture:!0})}}},[_,F,B]),D.useEffect(()=>{const Z=()=>F(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[F]);const[z,X]=d5(Z=>{const ae=N().filter(ie=>!ie.disabled),ce=ae.find(ie=>ie.ref.current===document.activeElement),oe=h5(ae,Z,ce);oe&&setTimeout(()=>oe.ref.current.focus())}),Y=D.useCallback((Z,ae,ce)=>{const oe=!j.current&&!ce;(w.value!==void 0&&w.value===ae||oe)&&(S(Z),oe&&(j.current=!0))},[w.value]),q=D.useCallback(()=>_==null?void 0:_.focus(),[_]),K=D.useCallback((Z,ae,ce)=>{const oe=!j.current&&!ce;(w.value!==void 0&&w.value===ae||oe)&&R(Z)},[w.value]),H=r==="popper"?Yf:Y_,te=H===Yf?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:E}:{};return $.jsx(X_,{scope:n,content:_,viewport:A,onViewportChange:k,itemRefCallback:Y,selectedItem:x,onItemLeave:q,itemTextRefCallback:K,focusSelectedItem:M,selectedItemText:T,position:r,isPositioned:P,searchRef:z,children:$.jsx(V_,{as:ms,allowPinchZoom:!0,children:$.jsx(u_,{asChild:!0,trapped:w.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:Be(i,Z=>{var ae;(ae=w.trigger)==null||ae.focus({preventScroll:!0}),Z.preventDefault()}),children:$.jsx(T1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:$.jsx(H,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Z=>Z.preventDefault(),...g,...te,onPlaced:()=>V(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Be(g.onKeyDown,Z=>{const ae=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!ae&&Z.key.length===1&&X(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let oe=N().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const ie=Z.target,re=oe.indexOf(ie);oe=oe.slice(re+1)}setTimeout(()=>O(oe)),Z.preventDefault()}})})})})})})});K_.displayName=kS;var RS="SelectItemAlignedPosition",Y_=D.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=Mi(lo,n),s=Oi(lo,n),[l,c]=D.useState(null),[d,u]=D.useState(null),h=_t(e,C=>u(C)),f=ud(n),m=D.useRef(!1),v=D.useRef(!0),{viewport:y,selectedItem:E,selectedItemText:g,focusSelectedItem:w}=s,_=D.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&y&&E&&g){const C=o.trigger.getBoundingClientRect(),x=d.getBoundingClientRect(),S=o.valueNode.getBoundingClientRect(),T=g.getBoundingClientRect();if(o.dir!=="rtl"){const ie=T.left-x.left,re=S.left-ie,we=C.left-re,Ae=C.width+we,ve=Math.max(Ae,x.width),Me=window.innerWidth-Vn,Ee=Xg(re,[Vn,Math.max(Vn,Me-ve)]);l.style.minWidth=Ae+"px",l.style.left=Ee+"px"}else{const ie=x.right-T.right,re=window.innerWidth-S.right-ie,we=window.innerWidth-C.right-re,Ae=C.width+we,ve=Math.max(Ae,x.width),Me=window.innerWidth-Vn,Ee=Xg(re,[Vn,Math.max(Vn,Me-ve)]);l.style.minWidth=Ae+"px",l.style.right=Ee+"px"}const R=f(),N=window.innerHeight-Vn*2,P=y.scrollHeight,V=window.getComputedStyle(d),j=parseInt(V.borderTopWidth,10),O=parseInt(V.paddingTop,10),M=parseInt(V.borderBottomWidth,10),F=parseInt(V.paddingBottom,10),B=j+O+P+F+M,z=Math.min(E.offsetHeight*5,B),X=window.getComputedStyle(y),Y=parseInt(X.paddingTop,10),q=parseInt(X.paddingBottom,10),K=C.top+C.height/2-Vn,H=N-K,te=E.offsetHeight/2,Z=E.offsetTop+te,ae=j+O+Z,ce=B-ae;if(ae<=K){const ie=R.length>0&&E===R[R.length-1].ref.current;l.style.bottom="0px";const re=d.clientHeight-y.offsetTop-y.offsetHeight,we=Math.max(H,te+(ie?q:0)+re+M),Ae=ae+we;l.style.height=Ae+"px"}else{const ie=R.length>0&&E===R[0].ref.current;l.style.top="0px";const we=Math.max(K,j+y.offsetTop+(ie?Y:0)+te)+ce;l.style.height=we+"px",y.scrollTop=ae-K+y.offsetTop}l.style.margin=`${Vn}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=N+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,o.trigger,o.valueNode,l,d,y,E,g,o.dir,r]);kt(()=>_(),[_]);const[b,A]=D.useState();kt(()=>{d&&A(window.getComputedStyle(d).zIndex)},[d]);const k=D.useCallback(C=>{C&&v.current===!0&&(_(),w==null||w(),v.current=!1)},[_,w]);return $.jsx(PS,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:k,children:$.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:$.jsx(je.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Y_.displayName=RS;var NS="SelectPopperPosition",Yf=D.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Vn,...o}=t,s=dd(n);return $.jsx(kE,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Yf.displayName=NS;var[PS,F1]=Ns(lo,{}),Gf="SelectViewport",G_=D.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=Oi(Gf,n),s=F1(Gf,n),l=_t(e,o.onViewportChange),c=D.useRef(0);return $.jsxs($.Fragment,{children:[$.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),$.jsx(cd.Slot,{scope:n,children:$.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Be(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&h){const m=Math.abs(c.current-u.scrollTop);if(m>0){const v=window.innerHeight-Vn*2,y=parseFloat(h.style.minHeight),E=parseFloat(h.style.height),g=Math.max(y,E);if(g<v){const w=g+m,_=Math.min(v,w),b=w-_;h.style.height=_+"px",h.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});G_.displayName=Gf;var Q_="SelectGroup",[LS,MS]=Ns(Q_),OS=D.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=k1();return $.jsx(LS,{scope:n,id:i,children:$.jsx(je.div,{role:"group","aria-labelledby":i,...r,ref:e})})});OS.displayName=Q_;var J_="SelectLabel",Z_=D.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=MS(J_,n);return $.jsx(je.div,{id:i.id,...r,ref:e})});Z_.displayName=J_;var wu="SelectItem",[DS,e5]=Ns(wu),t5=D.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,l=Mi(wu,n),c=Oi(wu,n),d=l.value===r,[u,h]=D.useState(o??""),[f,m]=D.useState(!1),v=_t(e,w=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,w,r,i)}),y=k1(),E=D.useRef("touch"),g=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return $.jsx(DS,{scope:n,value:r,disabled:i,textId:y,isSelected:d,onItemTextChange:D.useCallback(w=>{h(_=>_||((w==null?void 0:w.textContent)??"").trim())},[]),children:$.jsx(cd.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:$.jsx(je.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:v,onFocus:Be(s.onFocus,()=>m(!0)),onBlur:Be(s.onBlur,()=>m(!1)),onClick:Be(s.onClick,()=>{E.current!=="mouse"&&g()}),onPointerUp:Be(s.onPointerUp,()=>{E.current==="mouse"&&g()}),onPointerDown:Be(s.onPointerDown,w=>{E.current=w.pointerType}),onPointerMove:Be(s.onPointerMove,w=>{var _;E.current=w.pointerType,i?(_=c.onItemLeave)==null||_.call(c):E.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Be(s.onPointerLeave,w=>{var _;w.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:Be(s.onKeyDown,w=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&w.key===" "||(xS.includes(w.key)&&g(),w.key===" "&&w.preventDefault())})})})})});t5.displayName=wu;var ca="SelectItemText",n5=D.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=Mi(ca,n),l=Oi(ca,n),c=e5(ca,n),d=CS(ca,n),[u,h]=D.useState(null),f=_t(e,g=>h(g),c.onItemTextChange,g=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,g,c.value,c.disabled)}),m=u==null?void 0:u.textContent,v=D.useMemo(()=>$.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:E}=d;return kt(()=>(y(v),()=>E(v)),[y,E,v]),$.jsxs($.Fragment,{children:[$.jsx(je.span,{id:c.textId,...o,ref:f}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?wo.createPortal(o.children,s.valueNode):null]})});n5.displayName=ca;var r5="SelectItemIndicator",i5=D.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return e5(r5,n).isSelected?$.jsx(je.span,{"aria-hidden":!0,...r,ref:e}):null});i5.displayName=r5;var Qf="SelectScrollUpButton",o5=D.forwardRef((t,e)=>{const n=Oi(Qf,t.__scopeSelect),r=F1(Qf,t.__scopeSelect),[i,o]=D.useState(!1),s=_t(e,r.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?$.jsx(a5,{...t,ref:s,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});o5.displayName=Qf;var Jf="SelectScrollDownButton",s5=D.forwardRef((t,e)=>{const n=Oi(Jf,t.__scopeSelect),r=F1(Jf,t.__scopeSelect),[i,o]=D.useState(!1),s=_t(e,r.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?$.jsx(a5,{...t,ref:s,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});s5.displayName=Jf;var a5=D.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=Oi("SelectScrollButton",n),s=D.useRef(null),l=ud(n),c=D.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return D.useEffect(()=>()=>c(),[c]),kt(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),$.jsx(je.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Be(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Be(i.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Be(i.onPointerLeave,()=>{c()})})}),US="SelectSeparator",l5=D.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return $.jsx(je.div,{"aria-hidden":!0,...r,ref:e})});l5.displayName=US;var Zf="SelectArrow",VS=D.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=dd(n),o=Mi(Zf,n),s=Oi(Zf,n);return o.open&&s.position==="popper"?$.jsx(RE,{...i,...r,ref:e}):null});VS.displayName=Zf;function c5(t){return t===""||t===void 0}var u5=D.forwardRef((t,e)=>{const{value:n,...r}=t,i=D.useRef(null),o=_t(e,i),s=LE(n);return D.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[s,n]),$.jsx(ad,{asChild:!0,children:$.jsx("select",{...r,ref:o,defaultValue:n})})});u5.displayName="BubbleSelect";function d5(t){const e=un(t),n=D.useRef(""),r=D.useRef(0),i=D.useCallback(s=>{const l=n.current+s;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=D.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return D.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function h5(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=FS(t,Math.max(o,0));i.length===1&&(s=s.filter(d=>d!==n));const c=s.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function FS(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var BS=F_,f5=j_,jS=$_,zS=H_,$S=q_,p5=W_,HS=G_,m5=Z_,g5=t5,qS=n5,WS=i5,v5=o5,y5=s5,_5=l5;const lc=BS,cc=jS,ua=D.forwardRef(({className:t,children:e,...n},r)=>$.jsxs(f5,{ref:r,className:wt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,$.jsx(zS,{asChild:!0,children:$.jsx(Dx,{className:"h-4 w-4 opacity-50"})})]}));ua.displayName=f5.displayName;const w5=D.forwardRef(({className:t,...e},n)=>$.jsx(v5,{ref:n,className:wt("flex cursor-default items-center justify-center py-1",t),...e,children:$.jsx(zx,{})}));w5.displayName=v5.displayName;const b5=D.forwardRef(({className:t,...e},n)=>$.jsx(y5,{ref:n,className:wt("flex cursor-default items-center justify-center py-1",t),...e,children:$.jsx(Bx,{})}));b5.displayName=y5.displayName;const da=D.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>$.jsx($S,{children:$.jsxs(p5,{ref:i,className:wt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[$.jsx(w5,{}),$.jsx(HS,{className:wt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),$.jsx(b5,{})]})}));da.displayName=p5.displayName;const XS=D.forwardRef(({className:t,...e},n)=>$.jsx(m5,{ref:n,className:wt("px-2 py-1.5 text-sm font-semibold",t),...e}));XS.displayName=m5.displayName;const _r=D.forwardRef(({className:t,children:e,...n},r)=>$.jsxs(g5,{ref:r,className:wt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[$.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:$.jsx(WS,{children:$.jsx(Vx,{className:"h-4 w-4"})})}),$.jsx(qS,{children:e})]}));_r.displayName=g5.displayName;const KS=D.forwardRef(({className:t,...e},n)=>$.jsx(_5,{ref:n,className:wt("-mx-1 my-1 h-px bg-muted",t),...e}));KS.displayName=_5.displayName;var p2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},E5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,u=o>>2,h=(o&3)<<4|l>>4;let f=(l&15)<<2|d>>6,m=d&63;c||(m=64,s||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||d==null||h==null)throw new GS;const f=o<<2|l>>4;if(r.push(f),d!==64){const m=l<<4&240|d>>2;if(r.push(m),h!==64){const v=d<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QS=function(t){const e=x5(t);return E5.encodeByteArray(e,!0)},bu=function(t){return QS(t).replace(/\./g,"")},S5=function(t){try{return E5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=()=>JS().__FIREBASE_DEFAULTS__,eI=()=>{if(typeof process>"u"||typeof p2>"u")return;const t=p2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S5(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return ZS()||eI()||tI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I5=t=>{var e,n;return(n=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},C5=t=>{const e=I5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A5=()=>{var t;return(t=hd())===null||t===void 0?void 0:t.config},T5=t=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bu(JSON.stringify(n)),bu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function iI(){var t;const e=(t=hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lI(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cI(){return!iI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uI(){try{return typeof indexedDB=="object"}catch{return!1}}function dI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hI,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?fI(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new mr(i,l,r)}}function fI(t,e){return t.replace(pI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const pI=/\{\$([^}]+)}/g;function mI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(m2(o)&&m2(s)){if(!xu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function m2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gI(t,e){const n=new vI(t,e);return n.subscribe.bind(n)}class vI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Th),i.error===void 0&&(i.error=Th),i.complete===void 0&&(i.complete=Th);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Th(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class Ai{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _I=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bI(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wI(t){return t===Hi?void 0:t}function bI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _I(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const EI={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},SI=Re.INFO,II={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},CI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=II[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class B1{constructor(e){this.name=e,this._logLevel=SI,this._logHandler=CI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const AI=(t,e)=>e.some(n=>t instanceof n);let g2,v2;function TI(){return g2||(g2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kI(){return v2||(v2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R5=new WeakMap,ep=new WeakMap,N5=new WeakMap,kh=new WeakMap,j1=new WeakMap;function RI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(vi(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&R5.set(n,t)}).catch(()=>{}),j1.set(e,t),e}function NI(t){if(ep.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ep.set(t,e)}let tp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PI(t){tp=t(tp)}function LI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rh(this),e,...n);return N5.set(r,e.sort?e.sort():[e]),vi(r)}:kI().includes(t)?function(...e){return t.apply(Rh(this),e),vi(R5.get(this))}:function(...e){return vi(t.apply(Rh(this),e))}}function MI(t){return typeof t=="function"?LI(t):(t instanceof IDBTransaction&&NI(t),AI(t,TI())?new Proxy(t,tp):t)}function vi(t){if(t instanceof IDBRequest)return RI(t);if(kh.has(t))return kh.get(t);const e=MI(t);return e!==t&&(kh.set(t,e),j1.set(e,t)),e}const Rh=t=>j1.get(t);function OI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=vi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(vi(s.result),c.oldVersion,c.newVersion,vi(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const DI=["get","getKey","getAll","getAllKeys","count"],UI=["put","add","delete","clear"],Nh=new Map;function y2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=UI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DI.includes(n)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Nh.set(e,o),o}PI(t=>({...t,get:(e,n,r)=>y2(e,n)||t.get(e,n,r),has:(e,n)=>!!y2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",_2="0.10.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new B1("@firebase/app"),BI="@firebase/app-compat",jI="@firebase/analytics-compat",zI="@firebase/analytics",$I="@firebase/app-check-compat",HI="@firebase/app-check",qI="@firebase/auth",WI="@firebase/auth-compat",XI="@firebase/database",KI="@firebase/data-connect",YI="@firebase/database-compat",GI="@firebase/functions",QI="@firebase/functions-compat",JI="@firebase/installations",ZI="@firebase/installations-compat",eC="@firebase/messaging",tC="@firebase/messaging-compat",nC="@firebase/performance",rC="@firebase/performance-compat",iC="@firebase/remote-config",oC="@firebase/remote-config-compat",sC="@firebase/storage",aC="@firebase/storage-compat",lC="@firebase/firestore",cC="@firebase/vertexai-preview",uC="@firebase/firestore-compat",dC="firebase",hC="10.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",fC={[np]:"fire-core",[BI]:"fire-core-compat",[zI]:"fire-analytics",[jI]:"fire-analytics-compat",[HI]:"fire-app-check",[$I]:"fire-app-check-compat",[qI]:"fire-auth",[WI]:"fire-auth-compat",[XI]:"fire-rtdb",[KI]:"fire-data-connect",[YI]:"fire-rtdb-compat",[GI]:"fire-fn",[QI]:"fire-fn-compat",[JI]:"fire-iid",[ZI]:"fire-iid-compat",[eC]:"fire-fcm",[tC]:"fire-fcm-compat",[nC]:"fire-perf",[rC]:"fire-perf-compat",[iC]:"fire-rc",[oC]:"fire-rc-compat",[sC]:"fire-gcs",[aC]:"fire-gcs-compat",[lC]:"fire-fst",[uC]:"fire-fst-compat",[cC]:"fire-vertex","fire-js":"fire-js",[dC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Map,pC=new Map,ip=new Map;function w2(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function co(t){const e=t.name;if(ip.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,t);for(const n of Eu.values())w2(n,t);for(const n of pC.values())w2(n,t);return!0}function fd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new pl("app","Firebase",mC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=hC;function P5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=A5()),!n)throw yi.create("no-options");const o=Eu.get(i);if(o){if(xu(n,o.options)&&xu(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}const s=new xI(i);for(const c of ip.values())s.addComponent(c);const l=new gC(n,r,s);return Eu.set(i,l),l}function z1(t=rp){const e=Eu.get(t);if(!e&&t===rp&&A5())return P5();if(!e)throw yi.create("no-app",{appName:t});return e}function or(t,e,n){var r;let i=(r=fC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(l.join(" "));return}co(new Ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firebase-heartbeat-database",yC=1,Qa="firebase-heartbeat-store";let Ph=null;function L5(){return Ph||(Ph=OI(vC,yC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),Ph}async function _C(t){try{const n=(await L5()).transaction(Qa),r=await n.objectStore(Qa).get(M5(t));return await n.done,r}catch(e){if(e instanceof mr)Ur.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function b2(t,e){try{const r=(await L5()).transaction(Qa,"readwrite");await r.objectStore(Qa).put(e,M5(t)),await r.done}catch(n){if(n instanceof mr)Ur.warn(n.message);else{const r=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(r.message)}}}function M5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=1024,bC=30*24*60*60*1e3;class xC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=x2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=bC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x2(),{heartbeatsToSend:r,unsentEntries:i}=EC(this._heartbeatsCache.heartbeats),o=bu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ur.warn(n),""}}}function x2(){return new Date().toISOString().substring(0,10)}function EC(t,e=wC){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),E2(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),E2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uI()?dI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _C(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function E2(t){return bu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){co(new Ai("platform-logger",e=>new VI(e),"PRIVATE")),co(new Ai("heartbeat",e=>new xC(e),"PRIVATE")),or(np,_2,t),or(np,_2,"esm2017"),or("fire-js","")}IC("");var CC="firebase",AC="10.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(CC,AC,"app");function O5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TC=O5,D5=new pl("auth","Firebase",O5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new B1("@firebase/auth");function kC(t,...e){Su.logLevel<=Re.WARN&&Su.warn(`Auth (${xo}): ${t}`,...e)}function Mc(t,...e){Su.logLevel<=Re.ERROR&&Su.error(`Auth (${xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,...e){throw H1(t,...e)}function Hn(t,...e){return H1(t,...e)}function $1(t,e,n){const r=Object.assign(Object.assign({},TC()),{[e]:n});return new pl("auth","Firebase",r).create(e,{appName:t.name})}function Zi(t){return $1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&dr(t,"argument-error"),$1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function H1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return D5.create(t,...e)}function me(t,e,...n){if(!t)throw H1(e,...n)}function Ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mc(e),new Error(e)}function Vr(t,e){t||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NC(){return S2()==="http:"||S2()==="https:"}function S2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NC()||sI()||"connection"in navigator)?navigator.onLine:!0}function LC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=rI()||aI()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t,e){Vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new gl(3e4,6e4);function W1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ps(t,e,n,r,i={}){return V5(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const l=ml(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},o);return oI()||(d.referrerPolicy="no-referrer"),U5.fetch()(F5(t,t.config.apiHost,n,l),d)})}async function V5(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MC),e);try{const i=new UC(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw uc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw uc(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw uc(t,"user-disabled",s);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $1(t,u,d);dr(t,u)}}catch(i){if(i instanceof mr)throw i;dr(t,"network-request-failed",{message:String(i)})}}async function DC(t,e,n,r,i={}){const o=await Ps(t,e,n,r,i);return"mfaPendingCredential"in o&&dr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function F5(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?q1(t.config,i):`${t.config.apiScheme}://${i}`}class UC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hn(this.auth,"network-request-failed")),OC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e){return Ps(t,"POST","/v1/accounts:delete",e)}async function B5(t,e){return Ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FC(t,e=!1){const n=bt(t),r=await n.getIdToken(e),i=X1(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ia(Lh(i.auth_time)),issuedAtTime:Ia(Lh(i.iat)),expirationTime:Ia(Lh(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Lh(t){return Number(t)*1e3}function X1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const i=S5(n);return i?JSON.parse(i):(Mc("Failed to decode base64 JWT payload"),null)}catch(i){return Mc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function I2(t){const e=X1(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&BC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ja(t,B5(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?j5(o.providerUserInfo):[],l=$C(t.providerData,s),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),u=c?d:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new sp(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function zC(t){const e=bt(t);await Iu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function j5(t){return t.map(e=>{var{providerId:n}=e,r=hl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e){const n=await V5(t,{},async()=>{const r=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=F5(t,i,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",U5.fetch()(s,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qC(t,e){return Ps(t,"POST","/v2/accounts:revokeToken",W1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=I2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await HC(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new is;return r&&(me(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(me(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new is,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=hl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FC(this,e)}reload(){return zC(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Iu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await Ja(this,VC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,l,c,d,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,v=(s=n.photoURL)!==null&&s!==void 0?s:void 0,y=(l=n.tenantId)!==null&&l!==void 0?l:void 0,E=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,g=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:b,isAnonymous:A,providerData:k,stsTokenManager:C}=n;me(_&&C,e,"internal-error");const x=is.fromJSON(this.name,C);me(typeof _=="string",e,"internal-error"),Gr(h,e.name),Gr(f,e.name),me(typeof b=="boolean",e,"internal-error"),me(typeof A=="boolean",e,"internal-error"),Gr(m,e.name),Gr(v,e.name),Gr(y,e.name),Gr(E,e.name),Gr(g,e.name),Gr(w,e.name);const S=new Tr({uid:_,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:A,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:x,createdAt:g,lastLoginAt:w});return k&&Array.isArray(k)&&(S.providerData=k.map(T=>Object.assign({},T))),E&&(S._redirectEventId=E),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new is;i.updateFromServerResponse(n);const o=new Tr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Iu(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?j5(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new is;l.updateFromIdToken(r);const c=new Tr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new sp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Map;function kr(t){Vr(t instanceof Function,"Expected a class definition");let e=C2.get(t);return e?(Vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z5.type="NONE";const A2=z5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e,n){return`firebase:${t}:${e}:${n}`}class os{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Oc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Oc("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new os(kr(A2),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||kr(A2);const s=Oc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const u=await d._get(s);if(u){const h=Tr._fromJSON(e,u);d!==o&&(l=h),o=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new os(o,e,r):(o=c[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new os(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K5(e))return"Blackberry";if(Y5(e))return"Webos";if(H5(e))return"Safari";if((e.includes("chrome/")||q5(e))&&!e.includes("edge/"))return"Chrome";if(X5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $5(t=Kt()){return/firefox\//i.test(t)}function H5(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q5(t=Kt()){return/crios\//i.test(t)}function W5(t=Kt()){return/iemobile/i.test(t)}function X5(t=Kt()){return/android/i.test(t)}function K5(t=Kt()){return/blackberry/i.test(t)}function Y5(t=Kt()){return/webos/i.test(t)}function K1(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WC(t=Kt()){var e;return K1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XC(){return lI()&&document.documentMode===10}function G5(t=Kt()){return K1(t)||X5(t)||Y5(t)||K5(t)||/windows phone/i.test(t)||W5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t,e=[]){let n;switch(t){case"Browser":n=T2(Kt());break;case"Worker":n=`${T2(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,l)=>{try{const c=e(o);s(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(t,e={}){return Ps(t,"GET","/v2/passwordPolicy",W1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=6;class QC{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:GC,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k2(this),this.idTokenSubscription=new k2(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await os.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await B5(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Cr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Iu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Zi(this));const n=e?bt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YC(this),n=new QC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await os.create(this,[kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pd(t){return bt(t)}class k2{constructor(e){this.auth=e,this.observer=null,this.addObserver=gI(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZC(t){Y1=t}function eA(t){return Y1.loadJS(t)}function tA(){return Y1.gapiScript}function nA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e){const n=fd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(xu(o,e??{}))return i;dr(i,"already-initialized")}return n.initialize({options:e})}function iA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oA(t,e,n){const r=pd(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=J5(e),{host:s,port:l}=sA(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),aA()}function J5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sA(t){const e=J5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:R2(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:R2(s)}}}function R2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t,e){return DC(t,"POST","/v1/accounts:signInWithIdp",W1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="http://localhost";class uo extends Z5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=hl(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new uo(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return ss(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ss(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ss(e,n)}buildRequest(){const e={requestUri:lA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ml(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends G1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends vl{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uo._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends vl{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends vl{constructor(){super("twitter.com")}static credential(e,n){return uo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Tr._fromIdTokenResponse(e,r,i),s=N2(r);return new vs({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=N2(r);return new vs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function N2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends mr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cu.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cu(e,n,r,i)}}function e4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cu._fromErrorAndOperation(t,o,e,r):o})}async function cA(t,e,n=!1){const r=await Ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e,n=!1){const{auth:r}=t;if(Cr(r.app))return Promise.reject(Zi(r));const i="reauthenticate";try{const o=await Ja(t,e4(r,i,e,t),n);me(o.idToken,r,"internal-error");const s=X1(o.idToken);me(s,r,"internal-error");const{sub:l}=s;return me(t.uid===l,r,"user-mismatch"),vs._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e,n=!1){if(Cr(t.app))return Promise.reject(Zi(t));const r="signIn",i=await e4(t,r,e),o=await vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function hA(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function fA(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function pA(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}const Au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Au,"1"),this.storage.removeItem(Au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=1e3,gA=10;class n4 extends t4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);XC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}n4.type="LOCAL";const vA=n4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4 extends t4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}r4.type="SESSION";const i4=r4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new md(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async d=>d(n.origin,o)),c=await yA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,c)=>{const d=Q1("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(){return window}function wA(t){sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function bA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function EA(){return o4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="firebaseLocalStorageDb",SA=1,Tu="firebaseLocalStorage",a4="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(t,e){return t.transaction([Tu],e?"readwrite":"readonly").objectStore(Tu)}function IA(){const t=indexedDB.deleteDatabase(s4);return new yl(t).toPromise()}function ap(){const t=indexedDB.open(s4,SA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tu,{keyPath:a4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tu)?e(r):(r.close(),await IA(),e(await ap()))})})}async function P2(t,e,n){const r=gd(t,!0).put({[a4]:e,value:n});return new yl(r).toPromise()}async function CA(t,e){const n=gd(t,!1).get(e),r=await new yl(n).toPromise();return r===void 0?null:r.value}function L2(t,e){const n=gd(t,!0).delete(e);return new yl(n).toPromise()}const AA=800,TA=3;class l4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return o4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=md._getInstance(EA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await bA(),!this.activeServiceWorker)return;this.sender=new _A(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await P2(e,Au,"1"),await L2(e,Au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=gd(i,!1).getAll();return new yl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l4.type="LOCAL";const kA=l4;new gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){return e?kr(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1 extends Z5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ss(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ss(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RA(t){return dA(t.auth,new J1(t),t.bypassAuthState)}function NA(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),uA(n,new J1(t),t.bypassAuthState)}async function PA(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),cA(n,new J1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RA;case"linkViaPopup":case"linkViaRedirect":return PA;case"reauthViaPopup":case"reauthViaRedirect":return NA;default:dr(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=new gl(2e3,1e4);async function MA(t,e,n){if(Cr(t.app))return Promise.reject(Hn(t,"operation-not-supported-in-this-environment"));const r=pd(t);RC(t,e,G1);const i=c4(r,n);return new Ki(r,"signInViaPopup",e,i).executeNotNull()}class Ki extends u4{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ki.currentPopupAction&&Ki.currentPopupAction.cancel(),Ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=Q1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LA.get())};e()}}Ki.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="pendingRedirect",Dc=new Map;class DA extends u4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dc.get(this.auth._key());if(!e){try{const r=await UA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UA(t,e){const n=BA(e),r=FA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VA(t,e){Dc.set(t._key(),e)}function FA(t){return kr(t._redirectPersistence)}function BA(t){return Oc(OA,t.config.apiKey,t.name)}async function jA(t,e,n=!1){if(Cr(t.app))return Promise.reject(Zi(t));const r=pd(t),i=c4(r,e),s=await new DA(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=10*60*1e3;class $A{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!d4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zA&&this.cachedEventUids.clear(),this.cachedEventUids.has(M2(e))}saveEventToCache(e){this.cachedEventUids.add(M2(e)),this.lastProcessedEventTime=Date.now()}}function M2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function d4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e={}){return Ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XA=/^https?/;async function KA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qA(t);for(const n of e)try{if(YA(n))return}catch{}dr(t,"unauthorized-domain")}function YA(t){const e=op(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!XA.test(n))return!1;if(WA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new gl(3e4,6e4);function O2(){const t=sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QA(t){return new Promise((e,n)=>{var r,i,o;function s(){O2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O2(),n(Hn(t,"network-request-failed"))},timeout:GA.get()})}if(!((i=(r=sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=sr().gapi)===null||o===void 0)&&o.load)s();else{const l=nA("iframefcb");return sr()[l]=()=>{gapi.load?s():n(Hn(t,"network-request-failed"))},eA(`${tA()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function JA(t){return Uc=Uc||QA(t),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new gl(5e3,15e3),eT="__/auth/iframe",tT="emulator/auth/iframe",nT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iT(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?q1(e,tT):`https://${t.config.authDomain}/${eT}`,r={apiKey:e.apiKey,appName:t.name,v:xo},i=rT.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ml(r).slice(1)}`}async function oT(t){const e=await JA(t),n=sr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:iT(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nT,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Hn(t,"network-request-failed"),l=sr().setTimeout(()=>{o(s)},ZA.get());function c(){sr().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aT=500,lT=600,cT="_blank",uT="http://localhost";class D2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dT(t,e,n,r=aT,i=lT){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},sT),{width:r.toString(),height:i.toString(),top:o,left:s}),d=Kt().toLowerCase();n&&(l=q5(d)?cT:n),$5(d)&&(e=e||uT,c.scrollbars="yes");const u=Object.entries(c).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(WC(d)&&l!=="_self")return hT(e||"",l),new D2(null);const h=window.open(e||"",l,u);me(h,t,"popup-blocked");try{h.focus()}catch{}return new D2(h)}function hT(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="__/auth/handler",pT="emulator/auth/handler",mT=encodeURIComponent("fac");async function U2(t,e,n,r,i,o){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xo,eventId:i};if(e instanceof G1){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",mI(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))s[u]=h}if(e instanceof vl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const c=await t._getAppCheckToken(),d=c?`#${mT}=${encodeURIComponent(c)}`:"";return`${gT(t)}?${ml(l).slice(1)}${d}`}function gT({config:t}){return t.emulator?q1(t,pT):`https://${t.authDomain}/${fT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="webStorageSupport";class vT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i4,this._completeRedirectFn=jA,this._overrideRedirectResult=VA}async _openPopup(e,n,r,i){var o;Vr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await U2(e,n,r,op(),i);return dT(e,s,Q1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await U2(e,n,r,op(),i);return wA(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Vr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oT(e),r=new $A(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mh,{type:Mh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Mh];s!==void 0&&n(!!s),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return G5()||H5()||K1()}}const yT=vT;var V2="@firebase/auth",F2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bT(t){co(new Ai("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;me(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q5(t)},d=new JC(r,i,o,c);return iA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),co(new Ai("auth-internal",e=>{const n=pd(e.getProvider("auth").getImmediate());return(r=>new _T(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(V2,F2,wT(t)),or(V2,F2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=5*60,ET=T5("authIdTokenMaxAge")||xT;let B2=null;const ST=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ET)return;const i=n==null?void 0:n.token;B2!==i&&(B2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IT(t=z1()){const e=fd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rA(t,{popupRedirectResolver:yT,persistence:[kA,vA,i4]}),r=T5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=ST(o.toString());fA(n,s,()=>s(n.currentUser)),hA(n,l=>s(l))}}const i=I5("auth");return i&&oA(n,`http://${i}`),n}function CT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Hn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",CT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bT("Browser");var j2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,h4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function S(){}S.prototype=x.prototype,C.D=x.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(T,R,N){for(var P=Array(arguments.length-2),V=2;V<arguments.length;V++)P[V-2]=arguments[V];return x.prototype[R].apply(T,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,x,S){S||(S=0);var T=Array(16);if(typeof x=="string")for(var R=0;16>R;++R)T[R]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(R=0;16>R;++R)T[R]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=C.g[0],S=C.g[1],R=C.g[2];var N=C.g[3],P=x+(N^S&(R^N))+T[0]+3614090360&4294967295;x=S+(P<<7&4294967295|P>>>25),P=N+(R^x&(S^R))+T[1]+3905402710&4294967295,N=x+(P<<12&4294967295|P>>>20),P=R+(S^N&(x^S))+T[2]+606105819&4294967295,R=N+(P<<17&4294967295|P>>>15),P=S+(x^R&(N^x))+T[3]+3250441966&4294967295,S=R+(P<<22&4294967295|P>>>10),P=x+(N^S&(R^N))+T[4]+4118548399&4294967295,x=S+(P<<7&4294967295|P>>>25),P=N+(R^x&(S^R))+T[5]+1200080426&4294967295,N=x+(P<<12&4294967295|P>>>20),P=R+(S^N&(x^S))+T[6]+2821735955&4294967295,R=N+(P<<17&4294967295|P>>>15),P=S+(x^R&(N^x))+T[7]+4249261313&4294967295,S=R+(P<<22&4294967295|P>>>10),P=x+(N^S&(R^N))+T[8]+1770035416&4294967295,x=S+(P<<7&4294967295|P>>>25),P=N+(R^x&(S^R))+T[9]+2336552879&4294967295,N=x+(P<<12&4294967295|P>>>20),P=R+(S^N&(x^S))+T[10]+4294925233&4294967295,R=N+(P<<17&4294967295|P>>>15),P=S+(x^R&(N^x))+T[11]+2304563134&4294967295,S=R+(P<<22&4294967295|P>>>10),P=x+(N^S&(R^N))+T[12]+1804603682&4294967295,x=S+(P<<7&4294967295|P>>>25),P=N+(R^x&(S^R))+T[13]+4254626195&4294967295,N=x+(P<<12&4294967295|P>>>20),P=R+(S^N&(x^S))+T[14]+2792965006&4294967295,R=N+(P<<17&4294967295|P>>>15),P=S+(x^R&(N^x))+T[15]+1236535329&4294967295,S=R+(P<<22&4294967295|P>>>10),P=x+(R^N&(S^R))+T[1]+4129170786&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^R&(x^S))+T[6]+3225465664&4294967295,N=x+(P<<9&4294967295|P>>>23),P=R+(x^S&(N^x))+T[11]+643717713&4294967295,R=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(R^N))+T[0]+3921069994&4294967295,S=R+(P<<20&4294967295|P>>>12),P=x+(R^N&(S^R))+T[5]+3593408605&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^R&(x^S))+T[10]+38016083&4294967295,N=x+(P<<9&4294967295|P>>>23),P=R+(x^S&(N^x))+T[15]+3634488961&4294967295,R=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(R^N))+T[4]+3889429448&4294967295,S=R+(P<<20&4294967295|P>>>12),P=x+(R^N&(S^R))+T[9]+568446438&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^R&(x^S))+T[14]+3275163606&4294967295,N=x+(P<<9&4294967295|P>>>23),P=R+(x^S&(N^x))+T[3]+4107603335&4294967295,R=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(R^N))+T[8]+1163531501&4294967295,S=R+(P<<20&4294967295|P>>>12),P=x+(R^N&(S^R))+T[13]+2850285829&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^R&(x^S))+T[2]+4243563512&4294967295,N=x+(P<<9&4294967295|P>>>23),P=R+(x^S&(N^x))+T[7]+1735328473&4294967295,R=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(R^N))+T[12]+2368359562&4294967295,S=R+(P<<20&4294967295|P>>>12),P=x+(S^R^N)+T[5]+4294588738&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^R)+T[8]+2272392833&4294967295,N=x+(P<<11&4294967295|P>>>21),P=R+(N^x^S)+T[11]+1839030562&4294967295,R=N+(P<<16&4294967295|P>>>16),P=S+(R^N^x)+T[14]+4259657740&4294967295,S=R+(P<<23&4294967295|P>>>9),P=x+(S^R^N)+T[1]+2763975236&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^R)+T[4]+1272893353&4294967295,N=x+(P<<11&4294967295|P>>>21),P=R+(N^x^S)+T[7]+4139469664&4294967295,R=N+(P<<16&4294967295|P>>>16),P=S+(R^N^x)+T[10]+3200236656&4294967295,S=R+(P<<23&4294967295|P>>>9),P=x+(S^R^N)+T[13]+681279174&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^R)+T[0]+3936430074&4294967295,N=x+(P<<11&4294967295|P>>>21),P=R+(N^x^S)+T[3]+3572445317&4294967295,R=N+(P<<16&4294967295|P>>>16),P=S+(R^N^x)+T[6]+76029189&4294967295,S=R+(P<<23&4294967295|P>>>9),P=x+(S^R^N)+T[9]+3654602809&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^R)+T[12]+3873151461&4294967295,N=x+(P<<11&4294967295|P>>>21),P=R+(N^x^S)+T[15]+530742520&4294967295,R=N+(P<<16&4294967295|P>>>16),P=S+(R^N^x)+T[2]+3299628645&4294967295,S=R+(P<<23&4294967295|P>>>9),P=x+(R^(S|~N))+T[0]+4096336452&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~R))+T[7]+1126891415&4294967295,N=x+(P<<10&4294967295|P>>>22),P=R+(x^(N|~S))+T[14]+2878612391&4294967295,R=N+(P<<15&4294967295|P>>>17),P=S+(N^(R|~x))+T[5]+4237533241&4294967295,S=R+(P<<21&4294967295|P>>>11),P=x+(R^(S|~N))+T[12]+1700485571&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~R))+T[3]+2399980690&4294967295,N=x+(P<<10&4294967295|P>>>22),P=R+(x^(N|~S))+T[10]+4293915773&4294967295,R=N+(P<<15&4294967295|P>>>17),P=S+(N^(R|~x))+T[1]+2240044497&4294967295,S=R+(P<<21&4294967295|P>>>11),P=x+(R^(S|~N))+T[8]+1873313359&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~R))+T[15]+4264355552&4294967295,N=x+(P<<10&4294967295|P>>>22),P=R+(x^(N|~S))+T[6]+2734768916&4294967295,R=N+(P<<15&4294967295|P>>>17),P=S+(N^(R|~x))+T[13]+1309151649&4294967295,S=R+(P<<21&4294967295|P>>>11),P=x+(R^(S|~N))+T[4]+4149444226&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~R))+T[11]+3174756917&4294967295,N=x+(P<<10&4294967295|P>>>22),P=R+(x^(N|~S))+T[2]+718787259&4294967295,R=N+(P<<15&4294967295|P>>>17),P=S+(N^(R|~x))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var S=x-this.blockSize,T=this.B,R=this.h,N=0;N<x;){if(R==0)for(;N<=S;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<x;)if(T[R++]=C.charCodeAt(N++),R==this.blockSize){i(this,T),R=0;break}}else for(;N<x;)if(T[R++]=C[N++],R==this.blockSize){i(this,T),R=0;break}}this.h=R,this.o+=x},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var S=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=S&255,S/=256;for(this.u(C),C=Array(16),x=S=0;4>x;++x)for(var T=0;32>T;T+=8)C[S++]=this.g[x]>>>T&255;return C};function o(C,x){var S=l;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=x(C)}function s(C,x){this.h=x;for(var S=[],T=!0,R=C.length-1;0<=R;R--){var N=C[R]|0;T&&N==x||(S[R]=N,T=!1)}this.g=S}var l={};function c(C){return-128<=C&&128>C?o(C,function(x){return new s([x|0],0>x?-1:0)}):new s([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(d(-C));for(var x=[],S=1,T=0;C>=S;T++)x[T]=C/S|0,S*=4294967296;return new s(x,0)}function u(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return E(u(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(x,8)),T=h,R=0;R<C.length;R+=8){var N=Math.min(8,C.length-R),P=parseInt(C.substring(R,R+N),x);8>N?(N=d(Math.pow(x,N)),T=T.j(N).add(d(P))):(T=T.j(S),T=T.add(d(P)))}return T}var h=c(0),f=c(1),m=c(16777216);t=s.prototype,t.m=function(){if(y(this))return-E(this).m();for(var C=0,x=1,S=0;S<this.g.length;S++){var T=this.i(S);C+=(0<=T?T:4294967296+T)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(y(this))return"-"+E(this).toString(C);for(var x=d(Math.pow(C,6)),S=this,T="";;){var R=b(S,x).g;S=g(S,R.j(x));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=R,v(S))return N+T;for(;6>N.length;)N="0"+N;T=N+T}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=g(this,C),y(C)?-1:v(C)?0:1};function E(C){for(var x=C.g.length,S=[],T=0;T<x;T++)S[T]=~C.g[T];return new s(S,~C.h).add(f)}t.abs=function(){return y(this)?E(this):this},t.add=function(C){for(var x=Math.max(this.g.length,C.g.length),S=[],T=0,R=0;R<=x;R++){var N=T+(this.i(R)&65535)+(C.i(R)&65535),P=(N>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);T=P>>>16,N&=65535,P&=65535,S[R]=P<<16|N}return new s(S,S[S.length-1]&-2147483648?-1:0)};function g(C,x){return C.add(E(x))}t.j=function(C){if(v(this)||v(C))return h;if(y(this))return y(C)?E(this).j(E(C)):E(E(this).j(C));if(y(C))return E(this.j(E(C)));if(0>this.l(m)&&0>C.l(m))return d(this.m()*C.m());for(var x=this.g.length+C.g.length,S=[],T=0;T<2*x;T++)S[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<C.g.length;R++){var N=this.i(T)>>>16,P=this.i(T)&65535,V=C.i(R)>>>16,j=C.i(R)&65535;S[2*T+2*R]+=P*j,w(S,2*T+2*R),S[2*T+2*R+1]+=N*j,w(S,2*T+2*R+1),S[2*T+2*R+1]+=P*V,w(S,2*T+2*R+1),S[2*T+2*R+2]+=N*V,w(S,2*T+2*R+2)}for(T=0;T<x;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=x;T<2*x;T++)S[T]=0;return new s(S,0)};function w(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function _(C,x){this.g=C,this.h=x}function b(C,x){if(v(x))throw Error("division by zero");if(v(C))return new _(h,h);if(y(C))return x=b(E(C),x),new _(E(x.g),E(x.h));if(y(x))return x=b(C,E(x)),new _(E(x.g),x.h);if(30<C.g.length){if(y(C)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var S=f,T=x;0>=T.l(C);)S=A(S),T=A(T);var R=k(S,1),N=k(T,1);for(T=k(T,2),S=k(S,2);!v(T);){var P=N.add(T);0>=P.l(C)&&(R=R.add(S),N=P),T=k(T,1),S=k(S,1)}return x=g(C,R.j(x)),new _(R,x)}for(R=h;0<=C.l(x);){for(S=Math.max(1,Math.floor(C.m()/x.m())),T=Math.ceil(Math.log(S)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),N=d(S),P=N.j(x);y(P)||0<P.l(C);)S-=T,N=d(S),P=N.j(x);v(N)&&(N=f),R=R.add(N),C=g(C,P)}return new _(R,C)}t.A=function(C){return b(this,C).h},t.and=function(C){for(var x=Math.max(this.g.length,C.g.length),S=[],T=0;T<x;T++)S[T]=this.i(T)&C.i(T);return new s(S,this.h&C.h)},t.or=function(C){for(var x=Math.max(this.g.length,C.g.length),S=[],T=0;T<x;T++)S[T]=this.i(T)|C.i(T);return new s(S,this.h|C.h)},t.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),S=[],T=0;T<x;T++)S[T]=this.i(T)^C.i(T);return new s(S,this.h^C.h)};function A(C){for(var x=C.g.length+1,S=[],T=0;T<x;T++)S[T]=C.i(T)<<1|C.i(T-1)>>>31;return new s(S,C.h)}function k(C,x){var S=x>>5;x%=32;for(var T=C.g.length-S,R=[],N=0;N<T;N++)R[N]=0<x?C.i(N+S)>>>x|C.i(N+S+1)<<32-x:C.i(N+S);return new s(R,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h4=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=u,eo=s}).apply(typeof j2<"u"?j2:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f4,ha,p4,Vc,lp,m4,g4,v4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,I,L){return p==Array.prototype||p==Object.prototype||(p[I]=L.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var I=0;I<p.length;++I){var L=p[I];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function i(p,I){if(I)e:{var L=r;p=p.split(".");for(var U=0;U<p.length-1;U++){var W=p[U];if(!(W in L))break e;L=L[W]}p=p[p.length-1],U=L[p],I=I(U),I!=U&&I!=null&&e(L,p,{configurable:!0,writable:!0,value:I})}}function o(p,I){p instanceof String&&(p+="");var L=0,U=!1,W={next:function(){if(!U&&L<p.length){var G=L++;return{value:I(G,p[G]),done:!1}}return U=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(p){return p||function(){return o(this,function(I,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(p){var I=typeof p;return I=I!="object"?I:p?Array.isArray(p)?"array":I:"null",I=="array"||I=="object"&&typeof p.length=="number"}function d(p){var I=typeof p;return I=="object"&&p!=null||I=="function"}function u(p,I,L){return p.call.apply(p.bind,arguments)}function h(p,I,L){if(!p)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,U),p.apply(I,W)}}return function(){return p.apply(I,arguments)}}function f(p,I,L){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function m(p,I){var L=Array.prototype.slice.call(arguments,1);return function(){var U=L.slice();return U.push.apply(U,arguments),p.apply(this,U)}}function v(p,I){function L(){}L.prototype=I.prototype,p.aa=I.prototype,p.prototype=new L,p.prototype.constructor=p,p.Qb=function(U,W,G){for(var ne=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ne[qe-2]=arguments[qe];return I.prototype[W].apply(U,ne)}}function y(p){const I=p.length;if(0<I){const L=Array(I);for(let U=0;U<I;U++)L[U]=p[U];return L}return[]}function E(p,I){for(let L=1;L<arguments.length;L++){const U=arguments[L];if(c(U)){const W=p.length||0,G=U.length||0;p.length=W+G;for(let ne=0;ne<G;ne++)p[W+ne]=U[ne]}else p.push(U)}}class g{constructor(I,L){this.i=I,this.j=L,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function w(p){return/^[\s\xa0]*$/.test(p)}function _(){var p=l.navigator;return p&&(p=p.userAgent)?p:""}function b(p){return b[" "](p),p}b[" "]=function(){};var A=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function k(p,I,L){for(const U in p)I.call(L,p[U],U,p)}function C(p,I){for(const L in p)I.call(void 0,p[L],L,p)}function x(p){const I={};for(const L in p)I[L]=p[L];return I}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(p,I){let L,U;for(let W=1;W<arguments.length;W++){U=arguments[W];for(L in U)p[L]=U[L];for(let G=0;G<S.length;G++)L=S[G],Object.prototype.hasOwnProperty.call(U,L)&&(p[L]=U[L])}}function R(p){var I=1;p=p.split(":");const L=[];for(;0<I&&p.length;)L.push(p.shift()),I--;return p.length&&L.push(p.join(":")),L}function N(p){l.setTimeout(()=>{throw p},0)}function P(){var p=B;let I=null;return p.g&&(I=p.g,p.g=p.g.next,p.g||(p.h=null),I.next=null),I}class V{constructor(){this.h=this.g=null}add(I,L){const U=j.get();U.set(I,L),this.h?this.h.next=U:this.g=U,this.h=U}}var j=new g(()=>new O,p=>p.reset());class O{constructor(){this.next=this.g=this.h=null}set(I,L){this.h=I,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,B=new V,z=()=>{const p=l.Promise.resolve(void 0);M=()=>{p.then(X)}};var X=()=>{for(var p;p=P();){try{p.h.call(p.g)}catch(L){N(L)}var I=j;I.j(p),100>I.h&&(I.h++,p.next=I.g,I.g=p)}F=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(p,I){this.type=p,this.g=this.target=I,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,I=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const L=()=>{};l.addEventListener("test",L,I),l.removeEventListener("test",L,I)}catch{}return p}();function H(p,I){if(q.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var L=this.type=p.type,U=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=I,I=p.relatedTarget){if(A){e:{try{b(I.nodeName);var W=!0;break e}catch{}W=!1}W||(I=null)}}else L=="mouseover"?I=p.fromElement:L=="mouseout"&&(I=p.toElement);this.relatedTarget=I,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:te[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&H.aa.h.call(this)}}v(H,q);var te={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ce(p,I,L,U,W){this.listener=p,this.proxy=null,this.src=I,this.type=L,this.capture=!!U,this.ha=W,this.key=++ae,this.da=this.fa=!1}function oe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ie(p){this.src=p,this.g={},this.h=0}ie.prototype.add=function(p,I,L,U,W){var G=p.toString();p=this.g[G],p||(p=this.g[G]=[],this.h++);var ne=we(p,I,U,W);return-1<ne?(I=p[ne],L||(I.fa=!1)):(I=new ce(I,this.src,G,!!U,W),I.fa=L,p.push(I)),I};function re(p,I){var L=I.type;if(L in p.g){var U=p.g[L],W=Array.prototype.indexOf.call(U,I,void 0),G;(G=0<=W)&&Array.prototype.splice.call(U,W,1),G&&(oe(I),p.g[L].length==0&&(delete p.g[L],p.h--))}}function we(p,I,L,U){for(var W=0;W<p.length;++W){var G=p[W];if(!G.da&&G.listener==I&&G.capture==!!L&&G.ha==U)return W}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),ve={};function Me(p,I,L,U,W){if(Array.isArray(I)){for(var G=0;G<I.length;G++)Me(p,I[G],L,U,W);return null}return L=at(L),p&&p[Z]?p.K(I,L,d(U)?!!U.capture:!!U,W):Ee(p,I,L,!1,U,W)}function Ee(p,I,L,U,W,G){if(!I)throw Error("Invalid event type");var ne=d(W)?!!W.capture:!!W,qe=Ne(p);if(qe||(p[Ae]=qe=new ie(p)),L=qe.add(I,L,U,ne,G),L.proxy)return L;if(U=Se(),L.proxy=U,U.src=p,U.listener=L,p.addEventListener)K||(W=ne),W===void 0&&(W=!1),p.addEventListener(I.toString(),U,W);else if(p.attachEvent)p.attachEvent(ue(I.toString()),U);else if(p.addListener&&p.removeListener)p.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Se(){function p(L){return I.call(p.src,p.listener,L)}const I=Ke;return p}function de(p,I,L,U,W){if(Array.isArray(I))for(var G=0;G<I.length;G++)de(p,I[G],L,U,W);else U=d(U)?!!U.capture:!!U,L=at(L),p&&p[Z]?(p=p.i,I=String(I).toString(),I in p.g&&(G=p.g[I],L=we(G,L,U,W),-1<L&&(oe(G[L]),Array.prototype.splice.call(G,L,1),G.length==0&&(delete p.g[I],p.h--)))):p&&(p=Ne(p))&&(I=p.g[I.toString()],p=-1,I&&(p=we(I,L,U,W)),(L=-1<p?I[p]:null)&&Te(L))}function Te(p){if(typeof p!="number"&&p&&!p.da){var I=p.src;if(I&&I[Z])re(I.i,p);else{var L=p.type,U=p.proxy;I.removeEventListener?I.removeEventListener(L,U,p.capture):I.detachEvent?I.detachEvent(ue(L),U):I.addListener&&I.removeListener&&I.removeListener(U),(L=Ne(I))?(re(L,p),L.h==0&&(L.src=null,I[Ae]=null)):oe(p)}}}function ue(p){return p in ve?ve[p]:ve[p]="on"+p}function Ke(p,I){if(p.da)p=!0;else{I=new H(I,this);var L=p.listener,U=p.ha||p.src;p.fa&&Te(p),p=L.call(U,I)}return p}function Ne(p){return p=p[Ae],p instanceof ie?p:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function at(p){return typeof p=="function"?p:(p[Pe]||(p[Pe]=function(I){return p.handleEvent(I)}),p[Pe])}function be(){Y.call(this),this.i=new ie(this),this.M=this,this.F=null}v(be,Y),be.prototype[Z]=!0,be.prototype.removeEventListener=function(p,I,L,U){de(this,p,I,L,U)};function Ie(p,I){var L,U=p.F;if(U)for(L=[];U;U=U.F)L.push(U);if(p=p.M,U=I.type||I,typeof I=="string")I=new q(I,p);else if(I instanceof q)I.target=I.target||p;else{var W=I;I=new q(U,p),T(I,W)}if(W=!0,L)for(var G=L.length-1;0<=G;G--){var ne=I.g=L[G];W=Oe(ne,U,!0,I)&&W}if(ne=I.g=p,W=Oe(ne,U,!0,I)&&W,W=Oe(ne,U,!1,I)&&W,L)for(G=0;G<L.length;G++)ne=I.g=L[G],W=Oe(ne,U,!1,I)&&W}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var p=this.i,I;for(I in p.g){for(var L=p.g[I],U=0;U<L.length;U++)oe(L[U]);delete p.g[I],p.h--}}this.F=null},be.prototype.K=function(p,I,L,U){return this.i.add(String(p),I,!1,L,U)},be.prototype.L=function(p,I,L,U){return this.i.add(String(p),I,!0,L,U)};function Oe(p,I,L,U){if(I=p.i.g[String(I)],!I)return!0;I=I.concat();for(var W=!0,G=0;G<I.length;++G){var ne=I[G];if(ne&&!ne.da&&ne.capture==L){var qe=ne.listener,Rt=ne.ha||ne.src;ne.fa&&re(p.i,ne),W=qe.call(Rt,U)!==!1&&W}}return W&&!U.defaultPrevented}function Ue(p,I,L){if(typeof p=="function")L&&(p=f(p,L));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:l.setTimeout(p,I||0)}function We(p){p.g=Ue(()=>{p.g=null,p.i&&(p.i=!1,We(p))},p.l);const I=p.h;p.h=null,p.m.apply(null,I)}class pe extends Y{constructor(I,L){super(),this.m=I,this.l=L,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(p){Y.call(this),this.h=p,this.g={}}v(He,Y);var pt=[];function mt(p){k(p.g,function(I,L){this.g.hasOwnProperty(L)&&Te(I)},p),p.g={}}He.prototype.N=function(){He.aa.N.call(this),mt(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=l.JSON.stringify,dn=l.JSON.parse,Ds=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function Mn(){}Mn.prototype.h=null;function zr(p){return p.h||(p.h=p.i())}function Ze(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cn(){q.call(this,"d")}v(Cn,q);function An(){q.call(this,"c")}v(An,q);var tn={},$r=null;function Ui(){return $r=$r||new be}tn.La="serverreachability";function Yn(p){q.call(this,tn.La,p)}v(Yn,q);function fn(p){const I=Ui();Ie(I,new Yn(I))}tn.STAT_EVENT="statevent";function X0(p,I){q.call(this,tn.STAT_EVENT,p),this.stat=I}v(X0,q);function Yt(p){const I=Ui();Ie(I,new X0(I,p))}tn.Ma="timingevent";function K0(p,I){q.call(this,tn.Ma,p),this.size=I}v(K0,q);function Us(p,I){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},I)}function Vs(){this.g=!0}Vs.prototype.xa=function(){this.g=!1};function Kw(p,I,L,U,W,G){p.info(function(){if(p.g)if(G)for(var ne="",qe=G.split("&"),Rt=0;Rt<qe.length;Rt++){var Ve=qe[Rt].split("=");if(1<Ve.length){var Vt=Ve[0];Ve=Ve[1];var Ft=Vt.split("_");ne=2<=Ft.length&&Ft[1]=="type"?ne+(Vt+"="+Ve+"&"):ne+(Vt+"=redacted&")}}else ne=null;else ne=G;return"XMLHTTP REQ ("+U+") [attempt "+W+"]: "+I+`
`+L+`
`+ne})}function Yw(p,I,L,U,W,G,ne){p.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+W+"]: "+I+`
`+L+`
`+G+" "+ne})}function Io(p,I,L,U){p.info(function(){return"XMLHTTP TEXT ("+I+"): "+Qw(p,L)+(U?" "+U:"")})}function Gw(p,I){p.info(function(){return"TIMEOUT: "+I})}Vs.prototype.info=function(){};function Qw(p,I){if(!p.g)return I;if(!I)return null;try{var L=JSON.parse(I);if(L){for(p=0;p<L.length;p++)if(Array.isArray(L[p])){var U=L[p];if(!(2>U.length)){var W=U[1];if(Array.isArray(W)&&!(1>W.length)){var G=W[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ne=1;ne<W.length;ne++)W[ne]=""}}}}return gt(L)}catch{return I}}var Cl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Md;function Al(){}v(Al,Mn),Al.prototype.g=function(){return new XMLHttpRequest},Al.prototype.i=function(){return{}},Md=new Al;function Hr(p,I,L,U){this.j=p,this.i=I,this.l=L,this.R=U||1,this.U=new He(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new G0}function G0(){this.i=null,this.g="",this.h=!1}var Q0={},Od={};function Dd(p,I,L){p.L=1,p.v=Nl(gr(I)),p.m=L,p.P=!0,J0(p,null)}function J0(p,I){p.F=Date.now(),Tl(p),p.A=gr(p.v);var L=p.A,U=p.R;Array.isArray(U)||(U=[String(U)]),hm(L.i,"t",U),p.C=0,L=p.j.J,p.h=new G0,p.g=Rm(p.j,L?I:null,!p.m),0<p.O&&(p.M=new pe(f(p.Y,p,p.g),p.O)),I=p.U,L=p.g,U=p.ca;var W="readystatechange";Array.isArray(W)||(W&&(pt[0]=W.toString()),W=pt);for(var G=0;G<W.length;G++){var ne=Me(L,W[G],U||I.handleEvent,!1,I.h||I);if(!ne)break;I.g[ne.key]=ne}I=p.H?x(p.H):{},p.m?(p.u||(p.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,I)):(p.u="GET",p.g.ea(p.A,p.u,null,I)),fn(),Kw(p.i,p.u,p.A,p.l,p.R,p.m)}Hr.prototype.ca=function(p){p=p.target;const I=this.M;I&&vr(p)==3?I.j():this.Y(p)},Hr.prototype.Y=function(p){try{if(p==this.g)e:{const Ft=vr(this.g);var I=this.g.Ba();const To=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||_m(this.g)))){this.J||Ft!=4||I==7||(I==8||0>=To?fn(3):fn(2)),Ud(this);var L=this.g.Z();this.X=L;t:if(Z0(this)){var U=_m(this.g);p="";var W=U.length,G=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),Fs(this);var ne="";break t}this.h.i=new l.TextDecoder}for(I=0;I<W;I++)this.h.h=!0,p+=this.h.i.decode(U[I],{stream:!(G&&I==W-1)});U.length=0,this.h.g+=p,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=L==200,Yw(this.i,this.u,this.A,this.l,this.R,Ft,L),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Rt=this.g;if((qe=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(qe)){var Ve=qe;break t}}Ve=null}if(L=Ve)Io(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vd(this,L);else{this.o=!1,this.s=3,Yt(12),Vi(this),Fs(this);break e}}if(this.P){L=!0;let On;for(;!this.J&&this.C<ne.length;)if(On=Jw(this,ne),On==Od){Ft==4&&(this.s=4,Yt(14),L=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Q0){this.s=4,Yt(15),Io(this.i,this.l,ne,"[Invalid Chunk]"),L=!1;break}else Io(this.i,this.l,On,null),Vd(this,On);if(Z0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||ne.length!=0||this.h.h||(this.s=1,Yt(16),L=!1),this.o=this.o&&L,!L)Io(this.i,this.l,ne,"[Invalid Chunked Response]"),Vi(this),Fs(this);else if(0<ne.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Hd(Vt),Vt.M=!0,Yt(11))}}else Io(this.i,this.l,ne,null),Vd(this,ne);Ft==4&&Vi(this),this.o&&!this.J&&(Ft==4?Cm(this.j,this):(this.o=!1,Tl(this)))}else mb(this.g),L==400&&0<ne.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Vi(this),Fs(this)}}}catch{}finally{}};function Z0(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Jw(p,I){var L=p.C,U=I.indexOf(`
`,L);return U==-1?Od:(L=Number(I.substring(L,U)),isNaN(L)?Q0:(U+=1,U+L>I.length?Od:(I=I.slice(U,U+L),p.C=U+L,I)))}Hr.prototype.cancel=function(){this.J=!0,Vi(this)};function Tl(p){p.S=Date.now()+p.I,em(p,p.I)}function em(p,I){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Us(f(p.ba,p),I)}function Ud(p){p.B&&(l.clearTimeout(p.B),p.B=null)}Hr.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Gw(this.i,this.A),this.L!=2&&(fn(),Yt(17)),Vi(this),this.s=2,Fs(this)):em(this,this.S-p)};function Fs(p){p.j.G==0||p.J||Cm(p.j,p)}function Vi(p){Ud(p);var I=p.M;I&&typeof I.ma=="function"&&I.ma(),p.M=null,mt(p.U),p.g&&(I=p.g,p.g=null,I.abort(),I.ma())}function Vd(p,I){try{var L=p.j;if(L.G!=0&&(L.g==p||Fd(L.h,p))){if(!p.K&&Fd(L.h,p)&&L.G==3){try{var U=L.Da.g.parse(I)}catch{U=null}if(Array.isArray(U)&&U.length==3){var W=U;if(W[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<p.F)Ul(L),Ol(L);else break e;$d(L),Yt(18)}}else L.za=W[1],0<L.za-L.T&&37500>W[2]&&L.F&&L.v==0&&!L.C&&(L.C=Us(f(L.Za,L),6e3));if(1>=rm(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Bi(L,11)}else if((p.K||L.g==p)&&Ul(L),!w(I))for(W=L.Da.g.parse(I),I=0;I<W.length;I++){let Ve=W[I];if(L.T=Ve[0],Ve=Ve[1],L.G==2)if(Ve[0]=="c"){L.K=Ve[1],L.ia=Ve[2];const Vt=Ve[3];Vt!=null&&(L.la=Vt,L.j.info("VER="+L.la));const Ft=Ve[4];Ft!=null&&(L.Aa=Ft,L.j.info("SVER="+L.Aa));const To=Ve[5];To!=null&&typeof To=="number"&&0<To&&(U=1.5*To,L.L=U,L.j.info("backChannelRequestTimeoutMs_="+U)),U=L;const On=p.g;if(On){const Fl=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fl){var G=U.h;G.g||Fl.indexOf("spdy")==-1&&Fl.indexOf("quic")==-1&&Fl.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Bd(G,G.h),G.h=null))}if(U.D){const qd=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(U.ya=qd,Ye(U.I,U.D,qd))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-p.F,L.j.info("Handshake RTT: "+L.R+"ms")),U=L;var ne=p;if(U.qa=km(U,U.J?U.ia:null,U.W),ne.K){im(U.h,ne);var qe=ne,Rt=U.L;Rt&&(qe.I=Rt),qe.B&&(Ud(qe),Tl(qe)),U.g=ne}else Sm(U);0<L.i.length&&Dl(L)}else Ve[0]!="stop"&&Ve[0]!="close"||Bi(L,7);else L.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Bi(L,7):zd(L):Ve[0]!="noop"&&L.l&&L.l.ta(Ve),L.v=0)}}fn(4)}catch{}}var Zw=class{constructor(p,I){this.g=p,this.map=I}};function tm(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nm(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function rm(p){return p.h?1:p.g?p.g.size:0}function Fd(p,I){return p.h?p.h==I:p.g?p.g.has(I):!1}function Bd(p,I){p.g?p.g.add(I):p.h=I}function im(p,I){p.h&&p.h==I?p.h=null:p.g&&p.g.has(I)&&p.g.delete(I)}tm.prototype.cancel=function(){if(this.i=om(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function om(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let I=p.i;for(const L of p.g.values())I=I.concat(L.D);return I}return y(p.i)}function eb(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var I=[],L=p.length,U=0;U<L;U++)I.push(p[U]);return I}I=[],L=0;for(U in p)I[L++]=p[U];return I}function tb(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var I=[];p=p.length;for(var L=0;L<p;L++)I.push(L);return I}I=[],L=0;for(const U in p)I[L++]=U;return I}}}function sm(p,I){if(p.forEach&&typeof p.forEach=="function")p.forEach(I,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,I,void 0);else for(var L=tb(p),U=eb(p),W=U.length,G=0;G<W;G++)I.call(void 0,U[G],L&&L[G],p)}var am=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nb(p,I){if(p){p=p.split("&");for(var L=0;L<p.length;L++){var U=p[L].indexOf("="),W=null;if(0<=U){var G=p[L].substring(0,U);W=p[L].substring(U+1)}else G=p[L];I(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Fi(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Fi){this.h=p.h,kl(this,p.j),this.o=p.o,this.g=p.g,Rl(this,p.s),this.l=p.l;var I=p.i,L=new zs;L.i=I.i,I.g&&(L.g=new Map(I.g),L.h=I.h),lm(this,L),this.m=p.m}else p&&(I=String(p).match(am))?(this.h=!1,kl(this,I[1]||"",!0),this.o=Bs(I[2]||""),this.g=Bs(I[3]||"",!0),Rl(this,I[4]),this.l=Bs(I[5]||"",!0),lm(this,I[6]||"",!0),this.m=Bs(I[7]||"")):(this.h=!1,this.i=new zs(null,this.h))}Fi.prototype.toString=function(){var p=[],I=this.j;I&&p.push(js(I,cm,!0),":");var L=this.g;return(L||I=="file")&&(p.push("//"),(I=this.o)&&p.push(js(I,cm,!0),"@"),p.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&p.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&p.push("/"),p.push(js(L,L.charAt(0)=="/"?ob:ib,!0))),(L=this.i.toString())&&p.push("?",L),(L=this.m)&&p.push("#",js(L,ab)),p.join("")};function gr(p){return new Fi(p)}function kl(p,I,L){p.j=L?Bs(I,!0):I,p.j&&(p.j=p.j.replace(/:$/,""))}function Rl(p,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);p.s=I}else p.s=null}function lm(p,I,L){I instanceof zs?(p.i=I,lb(p.i,p.h)):(L||(I=js(I,sb)),p.i=new zs(I,p.h))}function Ye(p,I,L){p.i.set(I,L)}function Nl(p){return Ye(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Bs(p,I){return p?I?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function js(p,I,L){return typeof p=="string"?(p=encodeURI(p).replace(I,rb),L&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function rb(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var cm=/[#\/\?@]/g,ib=/[#\?:]/g,ob=/[#\?]/g,sb=/[#\?@]/g,ab=/#/g;function zs(p,I){this.h=this.g=null,this.i=p||null,this.j=!!I}function qr(p){p.g||(p.g=new Map,p.h=0,p.i&&nb(p.i,function(I,L){p.add(decodeURIComponent(I.replace(/\+/g," ")),L)}))}t=zs.prototype,t.add=function(p,I){qr(this),this.i=null,p=Co(this,p);var L=this.g.get(p);return L||this.g.set(p,L=[]),L.push(I),this.h+=1,this};function um(p,I){qr(p),I=Co(p,I),p.g.has(I)&&(p.i=null,p.h-=p.g.get(I).length,p.g.delete(I))}function dm(p,I){return qr(p),I=Co(p,I),p.g.has(I)}t.forEach=function(p,I){qr(this),this.g.forEach(function(L,U){L.forEach(function(W){p.call(I,W,U,this)},this)},this)},t.na=function(){qr(this);const p=Array.from(this.g.values()),I=Array.from(this.g.keys()),L=[];for(let U=0;U<I.length;U++){const W=p[U];for(let G=0;G<W.length;G++)L.push(I[U])}return L},t.V=function(p){qr(this);let I=[];if(typeof p=="string")dm(this,p)&&(I=I.concat(this.g.get(Co(this,p))));else{p=Array.from(this.g.values());for(let L=0;L<p.length;L++)I=I.concat(p[L])}return I},t.set=function(p,I){return qr(this),this.i=null,p=Co(this,p),dm(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[I]),this.h+=1,this},t.get=function(p,I){return p?(p=this.V(p),0<p.length?String(p[0]):I):I};function hm(p,I,L){um(p,I),0<L.length&&(p.i=null,p.g.set(Co(p,I),y(L)),p.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],I=Array.from(this.g.keys());for(var L=0;L<I.length;L++){var U=I[L];const G=encodeURIComponent(String(U)),ne=this.V(U);for(U=0;U<ne.length;U++){var W=G;ne[U]!==""&&(W+="="+encodeURIComponent(String(ne[U]))),p.push(W)}}return this.i=p.join("&")};function Co(p,I){return I=String(I),p.j&&(I=I.toLowerCase()),I}function lb(p,I){I&&!p.j&&(qr(p),p.i=null,p.g.forEach(function(L,U){var W=U.toLowerCase();U!=W&&(um(this,U),hm(this,W,L))},p)),p.j=I}function cb(p,I){const L=new Vs;if(l.Image){const U=new Image;U.onload=m(Wr,L,"TestLoadImage: loaded",!0,I,U),U.onerror=m(Wr,L,"TestLoadImage: error",!1,I,U),U.onabort=m(Wr,L,"TestLoadImage: abort",!1,I,U),U.ontimeout=m(Wr,L,"TestLoadImage: timeout",!1,I,U),l.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=p}else I(!1)}function ub(p,I){const L=new Vs,U=new AbortController,W=setTimeout(()=>{U.abort(),Wr(L,"TestPingServer: timeout",!1,I)},1e4);fetch(p,{signal:U.signal}).then(G=>{clearTimeout(W),G.ok?Wr(L,"TestPingServer: ok",!0,I):Wr(L,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(W),Wr(L,"TestPingServer: error",!1,I)})}function Wr(p,I,L,U,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),U(L)}catch{}}function db(){this.g=new Ds}function hb(p,I,L){const U=L||"";try{sm(p,function(W,G){let ne=W;d(W)&&(ne=gt(W)),I.push(U+G+"="+encodeURIComponent(ne))})}catch(W){throw I.push(U+"type="+encodeURIComponent("_badmap")),W}}function Pl(p){this.l=p.Ub||null,this.j=p.eb||!1}v(Pl,Mn),Pl.prototype.g=function(){return new Ll(this.l,this.j)},Pl.prototype.i=function(p){return function(){return p}}({});function Ll(p,I){be.call(this),this.D=p,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ll,be),t=Ll.prototype,t.open=function(p,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=I,this.readyState=1,Hs(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(I.body=p),(this.D||l).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fm(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function fm(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var I=p.value?p.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!p.done}))&&(this.response=this.responseText+=I)}p.done?$s(this):Hs(this),this.readyState==3&&fm(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,$s(this))},t.Qa=function(p){this.g&&(this.response=p,$s(this))},t.ga=function(){this.g&&$s(this)};function $s(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Hs(p)}t.setRequestHeader=function(p,I){this.u.append(p,I)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],I=this.h.entries();for(var L=I.next();!L.done;)L=L.value,p.push(L[0]+": "+L[1]),L=I.next();return p.join(`\r
`)};function Hs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function pm(p){let I="";return k(p,function(L,U){I+=U,I+=":",I+=L,I+=`\r
`}),I}function jd(p,I,L){e:{for(U in L){var U=!1;break e}U=!0}U||(L=pm(L),typeof p=="string"?L!=null&&encodeURIComponent(String(L)):Ye(p,I,L))}function lt(p){be.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(lt,be);var fb=/^https?$/i,pb=["POST","PUT"];t=lt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,I,L,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);I=I?I.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Md.g(),this.v=this.o?zr(this.o):zr(Md),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(I,String(p),!0),this.B=!1}catch(G){mm(this,G);return}if(p=L||"",L=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var W in U)L.set(W,U[W]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const G of U.keys())L.set(G,U.get(G));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(L.keys()).find(G=>G.toLowerCase()=="content-type"),W=l.FormData&&p instanceof l.FormData,!(0<=Array.prototype.indexOf.call(pb,I,void 0))||U||W||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ne]of L)this.g.setRequestHeader(G,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ym(this),this.u=!0,this.g.send(p),this.u=!1}catch(G){mm(this,G)}};function mm(p,I){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=I,p.m=5,gm(p),Ml(p)}function gm(p){p.A||(p.A=!0,Ie(p,"complete"),Ie(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ie(this,"complete"),Ie(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vm(this):this.bb())},t.bb=function(){vm(this)};function vm(p){if(p.h&&typeof s<"u"&&(!p.v[1]||vr(p)!=4||p.Z()!=2)){if(p.u&&vr(p)==4)Ue(p.Ea,0,p);else if(Ie(p,"readystatechange"),vr(p)==4){p.h=!1;try{const ne=p.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var L;if(!(L=I)){var U;if(U=ne===0){var W=String(p.D).match(am)[1]||null;!W&&l.self&&l.self.location&&(W=l.self.location.protocol.slice(0,-1)),U=!fb.test(W?W.toLowerCase():"")}L=U}if(L)Ie(p,"complete"),Ie(p,"success");else{p.m=6;try{var G=2<vr(p)?p.g.statusText:""}catch{G=""}p.l=G+" ["+p.Z()+"]",gm(p)}}finally{Ml(p)}}}}function Ml(p,I){if(p.g){ym(p);const L=p.g,U=p.v[0]?()=>{}:null;p.g=null,p.v=null,I||Ie(p,"ready");try{L.onreadystatechange=U}catch{}}}function ym(p){p.I&&(l.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function vr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var I=this.g.responseText;return p&&I.indexOf(p)==0&&(I=I.substring(p.length)),dn(I)}};function _m(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function mb(p){const I={};p=(p.g&&2<=vr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<p.length;U++){if(w(p[U]))continue;var L=R(p[U]);const W=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const G=I[W]||[];I[W]=G,G.push(L)}C(I,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(p,I,L){return L&&L.internalChannelParams&&L.internalChannelParams[p]||I}function wm(p){this.Aa=0,this.i=[],this.j=new Vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,p),this.cb=qs("retryDelaySeedMs",1e4,p),this.Wa=qs("forwardChannelMaxRetries",2,p),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new tm(p&&p.concurrentRequestLimit),this.Da=new db,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wm.prototype,t.la=8,t.G=1,t.connect=function(p,I,L,U){Yt(0),this.W=p,this.H=I||{},L&&U!==void 0&&(this.H.OSID=L,this.H.OAID=U),this.F=this.X,this.I=km(this,null,this.W),Dl(this)};function zd(p){if(bm(p),p.G==3){var I=p.U++,L=gr(p.I);if(Ye(L,"SID",p.K),Ye(L,"RID",I),Ye(L,"TYPE","terminate"),Ws(p,L),I=new Hr(p,p.j,I),I.L=2,I.v=Nl(gr(L)),L=!1,l.navigator&&l.navigator.sendBeacon)try{L=l.navigator.sendBeacon(I.v.toString(),"")}catch{}!L&&l.Image&&(new Image().src=I.v,L=!0),L||(I.g=Rm(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Tl(I)}Tm(p)}function Ol(p){p.g&&(Hd(p),p.g.cancel(),p.g=null)}function bm(p){Ol(p),p.u&&(l.clearTimeout(p.u),p.u=null),Ul(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&l.clearTimeout(p.s),p.s=null)}function Dl(p){if(!nm(p.h)&&!p.s){p.s=!0;var I=p.Ga;M||z(),F||(M(),F=!0),B.add(I,p),p.B=0}}function gb(p,I){return rm(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=I.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Us(f(p.Ga,p,I),Am(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const W=new Hr(this,this.j,p);let G=this.o;if(this.S&&(G?(G=x(G),T(G,this.S)):G=this.S),this.m!==null||this.O||(W.H=G,G=null),this.P)e:{for(var I=0,L=0;L<this.i.length;L++){t:{var U=this.i[L];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(I+=U,4096<I){I=L;break e}if(I===4096||L===this.i.length-1){I=L+1;break e}}I=1e3}else I=1e3;I=Em(this,W,I),L=gr(this.I),Ye(L,"RID",p),Ye(L,"CVER",22),this.D&&Ye(L,"X-HTTP-Session-Id",this.D),Ws(this,L),G&&(this.O?I="headers="+encodeURIComponent(String(pm(G)))+"&"+I:this.m&&jd(L,this.m,G)),Bd(this.h,W),this.Ua&&Ye(L,"TYPE","init"),this.P?(Ye(L,"$req",I),Ye(L,"SID","null"),W.T=!0,Dd(W,L,null)):Dd(W,L,I),this.G=2}}else this.G==3&&(p?xm(this,p):this.i.length==0||nm(this.h)||xm(this))};function xm(p,I){var L;I?L=I.l:L=p.U++;const U=gr(p.I);Ye(U,"SID",p.K),Ye(U,"RID",L),Ye(U,"AID",p.T),Ws(p,U),p.m&&p.o&&jd(U,p.m,p.o),L=new Hr(p,p.j,L,p.B+1),p.m===null&&(L.H=p.o),I&&(p.i=I.D.concat(p.i)),I=Em(p,L,1e3),L.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Bd(p.h,L),Dd(L,U,I)}function Ws(p,I){p.H&&k(p.H,function(L,U){Ye(I,U,L)}),p.l&&sm({},function(L,U){Ye(I,U,L)})}function Em(p,I,L){L=Math.min(p.i.length,L);var U=p.l?f(p.l.Na,p.l,p):null;e:{var W=p.i;let G=-1;for(;;){const ne=["count="+L];G==-1?0<L?(G=W[0].g,ne.push("ofs="+G)):G=0:ne.push("ofs="+G);let qe=!0;for(let Rt=0;Rt<L;Rt++){let Ve=W[Rt].g;const Vt=W[Rt].map;if(Ve-=G,0>Ve)G=Math.max(0,W[Rt].g-100),qe=!1;else try{hb(Vt,ne,"req"+Ve+"_")}catch{U&&U(Vt)}}if(qe){U=ne.join("&");break e}}}return p=p.i.splice(0,L),I.D=p,U}function Sm(p){if(!p.g&&!p.u){p.Y=1;var I=p.Fa;M||z(),F||(M(),F=!0),B.add(I,p),p.v=0}}function $d(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Us(f(p.Fa,p),Am(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Im(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Us(f(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Ol(this),Im(this))};function Hd(p){p.A!=null&&(l.clearTimeout(p.A),p.A=null)}function Im(p){p.g=new Hr(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var I=gr(p.qa);Ye(I,"RID","rpc"),Ye(I,"SID",p.K),Ye(I,"AID",p.T),Ye(I,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ye(I,"TO",p.ja),Ye(I,"TYPE","xmlhttp"),Ws(p,I),p.m&&p.o&&jd(I,p.m,p.o),p.L&&(p.g.I=p.L);var L=p.g;p=p.ia,L.L=1,L.v=Nl(gr(I)),L.m=null,L.P=!0,J0(L,p)}t.Za=function(){this.C!=null&&(this.C=null,Ol(this),$d(this),Yt(19))};function Ul(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function Cm(p,I){var L=null;if(p.g==I){Ul(p),Hd(p),p.g=null;var U=2}else if(Fd(p.h,I))L=I.D,im(p.h,I),U=1;else return;if(p.G!=0){if(I.o)if(U==1){L=I.m?I.m.length:0,I=Date.now()-I.F;var W=p.B;U=Ui(),Ie(U,new K0(U,L)),Dl(p)}else Sm(p);else if(W=I.s,W==3||W==0&&0<I.X||!(U==1&&gb(p,I)||U==2&&$d(p)))switch(L&&0<L.length&&(I=p.h,I.i=I.i.concat(L)),W){case 1:Bi(p,5);break;case 4:Bi(p,10);break;case 3:Bi(p,6);break;default:Bi(p,2)}}}function Am(p,I){let L=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(L*=2),L*I}function Bi(p,I){if(p.j.info("Error code "+I),I==2){var L=f(p.fb,p),U=p.Xa;const W=!U;U=new Fi(U||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kl(U,"https"),Nl(U),W?cb(U.toString(),L):ub(U.toString(),L)}else Yt(2);p.G=0,p.l&&p.l.sa(I),Tm(p),bm(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Tm(p){if(p.G=0,p.ka=[],p.l){const I=om(p.h);(I.length!=0||p.i.length!=0)&&(E(p.ka,I),E(p.ka,p.i),p.h.i.length=0,y(p.i),p.i.length=0),p.l.ra()}}function km(p,I,L){var U=L instanceof Fi?gr(L):new Fi(L);if(U.g!="")I&&(U.g=I+"."+U.g),Rl(U,U.s);else{var W=l.location;U=W.protocol,I=I?I+"."+W.hostname:W.hostname,W=+W.port;var G=new Fi(null);U&&kl(G,U),I&&(G.g=I),W&&Rl(G,W),L&&(G.l=L),U=G}return L=p.D,I=p.ya,L&&I&&Ye(U,L,I),Ye(U,"VER",p.la),Ws(p,U),U}function Rm(p,I,L){if(I&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=p.Ca&&!p.pa?new lt(new Pl({eb:L})):new lt(p.pa),I.Ha(p.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nm(){}t=Nm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vl(){}Vl.prototype.g=function(p,I){return new pn(p,I)};function pn(p,I){be.call(this),this.g=new wm(I),this.l=p,this.h=I&&I.messageUrlParams||null,p=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(p?p["X-WebChannel-Content-Type"]=I.messageContentType:p={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(p?p["X-WebChannel-Client-Profile"]=I.va:p={"X-WebChannel-Client-Profile":I.va}),this.g.S=p,(p=I&&I.Sb)&&!w(p)&&(this.g.m=p),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!w(I)&&(this.g.D=I,p=this.h,p!==null&&I in p&&(p=this.h,I in p&&delete p[I])),this.j=new Ao(this)}v(pn,be),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){zd(this.g)},pn.prototype.o=function(p){var I=this.g;if(typeof p=="string"){var L={};L.__data__=p,p=L}else this.u&&(L={},L.__data__=gt(p),p=L);I.i.push(new Zw(I.Ya++,p)),I.G==3&&Dl(I)},pn.prototype.N=function(){this.g.l=null,delete this.j,zd(this.g),delete this.g,pn.aa.N.call(this)};function Pm(p){Cn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var I=p.__sm__;if(I){e:{for(const L in I){p=L;break e}p=void 0}(this.i=p)&&(p=this.i,I=I!==null&&p in I?I[p]:void 0),this.data=I}else this.data=p}v(Pm,Cn);function Lm(){An.call(this),this.status=1}v(Lm,An);function Ao(p){this.g=p}v(Ao,Nm),Ao.prototype.ua=function(){Ie(this.g,"a")},Ao.prototype.ta=function(p){Ie(this.g,new Pm(p))},Ao.prototype.sa=function(p){Ie(this.g,new Lm)},Ao.prototype.ra=function(){Ie(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,v4=function(){return new Vl},g4=function(){return Ui()},m4=tn,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cl.NO_ERROR=0,Cl.TIMEOUT=8,Cl.HTTP_ERROR=6,Vc=Cl,Y0.COMPLETE="complete",p4=Y0,Ze.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",be.prototype.listen=be.prototype.K,ha=Ze,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,f4=lt}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const z2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new B1("@firebase/firestore");function ra(){return ho.logLevel}function le(t,...e){if(ho.logLevel<=Re.DEBUG){const n=e.map(Z1);ho.debug(`Firestore (${Ls}): ${t}`,...n)}}function Fr(t,...e){if(ho.logLevel<=Re.ERROR){const n=e.map(Z1);ho.error(`Firestore (${Ls}): ${t}`,...n)}}function ys(t,...e){if(ho.logLevel<=Re.WARN){const n=e.map(Z1);ho.warn(`Firestore (${Ls}): ${t}`,...n)}}function Z1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+t;throw Fr(e),new Error(e)}function $e(t,e){t||ge()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class TT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kT{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _i,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _i)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new y4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Ht(e)}}class RT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new RT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);const r=o=>{o.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,le("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new PT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=MT(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function _s(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new It(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new It(0,0))}static max(){return new ye(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class tt extends Za{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const OT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Za{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return OT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(tt.fromString(e))}static fromName(e){return new fe(tt.fromString(e).popFirst(5))}static empty(){return new fe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new tt(e.slice()))}}function DT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new Ti(i,fe.empty(),e)}function UT(t){return new Ti(t.readTime,t.key,-1)}class Ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ti(ye.min(),fe.empty(),-1)}static max(){return new Ti(ye.max(),fe.empty(),-1)}}function VT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==FT)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(u=>{s[d]=u,++l,l===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new Q((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function jT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}e0.oe=-1;function vd(t){return t==null}function ku(t){return t===0&&1/t==-1/0}function zT(t){return typeof t=="number"&&Number.isInteger(t)&&!ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Pt.RED,this.left=i??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Pt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new H2(this.data.getIterator())}getIteratorFrom(e){return new H2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class H2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new Ot(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new b4("Invalid base64 string: "+o):o}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const $T=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(t){if($e(!!t),typeof t=="string"){let e=0;const n=$T.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fo(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function n0(t){const e=t.mapValue.fields.__previous_value__;return t0(e)?n0(e):e}function el(t){const e=ki(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r,i,o,s,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class tl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?t0(t)?4:WT(t)?9007199254740991:qT(t)?10:11:ge()}function hr(t,e){if(t===e)return!0;const n=po(t);if(n!==po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return el(t).isEqual(el(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ki(i.timestampValue),l=ki(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return fo(i.bytesValue).isEqual(fo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ht(i.doubleValue),l=ht(o.doubleValue);return s===l?ku(s)===ku(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return _s(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if($2(s)!==$2(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!hr(s[c],l[c])))return!1;return!0}(t,e);default:return ge()}}function nl(t,e){return(t.values||[]).find(n=>hr(n,e))!==void 0}function ws(t,e){if(t===e)return 0;const n=po(t),r=po(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return q2(t.timestampValue,e.timestampValue);case 4:return q2(el(t),el(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(o,s){const l=fo(o),c=fo(s);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),c=s.split("/");for(let d=0;d<l.length&&d<c.length;d++){const u=Fe(l[d],c[d]);if(u!==0)return u}return Fe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=Fe(ht(o.latitude),ht(s.latitude));return l!==0?l:Fe(ht(o.longitude),ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return W2(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,c,d,u;const h=o.fields||{},f=s.fields||{},m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=(c=f.value)===null||c===void 0?void 0:c.arrayValue,y=Fe(((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:W2(m,v)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===fc.mapValue&&s===fc.mapValue)return 0;if(o===fc.mapValue)return 1;if(s===fc.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),d=s.fields||{},u=Object.keys(d);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const f=Fe(c[h],u[h]);if(f!==0)return f;const m=ws(l[c[h]],d[u[h]]);if(m!==0)return m}return Fe(c.length,u.length)}(t.mapValue,e.mapValue);default:throw ge()}}function q2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=ki(t),r=ki(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function W2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=ws(n[i],r[i]);if(o)return o}return Fe(n.length,r.length)}function bs(t){return cp(t)}function cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=cp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${cp(n.fields[s])}`;return i+"}"}(t.mapValue):ge()}function up(t){return!!t&&"integerValue"in t}function r0(t){return!!t&&"arrayValue"in t}function X2(t){return!!t&&"nullValue"in t}function K2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fc(t){return!!t&&"mapValue"in t}function qT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ca(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ca(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ca(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ca(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Ca(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Eo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new on(Ca(this.value))}}function x4(t){const e=[];return Eo(t.fields,(n,r)=>{const i=new Lt([n]);if(Fc(r)){const o=x4(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Wt(e,0,ye.min(),ye.min(),ye.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new Wt(e,1,n,ye.min(),r,i,0)}static newNoDocument(e,n){return new Wt(e,2,n,ye.min(),ye.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,ye.min(),ye.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.position=e,this.inclusive=n}}function Y2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=fe.comparator(fe.fromName(s.referenceValue),n.key):r=ws(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function G2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function XT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{}class Et extends E4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YT(e,n,r):n==="array-contains"?new JT(e,r):n==="in"?new ZT(e,r):n==="not-in"?new ek(e,r):n==="array-contains-any"?new tk(e,r):new Et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GT(e,r):new QT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ws(n,this.value)):n!==null&&po(this.value)===po(n)&&this.matchesComparison(ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends E4{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new fr(e,n)}matches(e){return S4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function S4(t){return t.op==="and"}function I4(t){return KT(t)&&S4(t)}function KT(t){for(const e of t.filters)if(e instanceof fr)return!1;return!0}function dp(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+bs(t.value);if(I4(t))return t.filters.map(e=>dp(e)).join(",");{const e=t.filters.map(n=>dp(n)).join(",");return`${t.op}(${e})`}}function C4(t,e){return t instanceof Et?function(r,i){return i instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)}(t,e):t instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&C4(s,i.filters[l]),!0):!1}(t,e):void ge()}function A4(t){return t instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${bs(n.value)}`}(t):t instanceof fr?function(n){return n.op.toString()+" {"+n.getFilters().map(A4).join(" ,")+"}"}(t):"Filter"}class YT extends Et{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class GT extends Et{constructor(e,n){super(e,"in",n),this.keys=T4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QT extends Et{constructor(e,n){super(e,"not-in",n),this.keys=T4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function T4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class JT extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return r0(n)&&nl(n.arrayValue,this.value)}}class ZT extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nl(this.value.arrayValue,n)}}class ek extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nl(this.value.arrayValue,n)}}class tk extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!r0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function Q2(t,e=null,n=[],r=[],i=null,o=null,s=null){return new nk(t,e,n,r,i,o,s)}function i0(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bs(r)).join(",")),e.ue=n}return e.ue}function o0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!G2(t.startAt,e.startAt)&&G2(t.endAt,e.endAt)}function hp(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rk(t,e,n,r,i,o,s,l){return new yd(t,e,n,r,i,o,s,l)}function s0(t){return new yd(t)}function J2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ik(t){return t.collectionGroup!==null}function Aa(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Ot(Lt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Nu(o,r))}),n.has(Lt.keyField().canonicalString())||e.ce.push(new Nu(Lt.keyField(),r))}return e.ce}function ar(t){const e=_e(t);return e.le||(e.le=ok(e,Aa(t))),e.le}function ok(t,e){if(t.limitType==="F")return Q2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Nu(i.field,o)});const n=t.endAt?new Ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ru(t.startAt.position,t.startAt.inclusive):null;return Q2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fp(t,e,n){return new yd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _d(t,e){return o0(ar(t),ar(e))&&t.limitType===e.limitType}function k4(t){return`${i0(ar(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>A4(i)).join(", ")}]`),vd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bs(i)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function wd(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Aa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,c){const d=Y2(s,l,c);return s.inclusive?d<=0:d<0}(r.startAt,Aa(r),i)||r.endAt&&!function(s,l,c){const d=Y2(s,l,c);return s.inclusive?d>=0:d>0}(r.endAt,Aa(r),i))}(t,e)}function sk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R4(t){return(e,n)=>{let r=!1;for(const i of Aa(t)){const o=ak(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ak(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(o,s,l){const c=s.data.field(o),d=l.data.field(o);return c!==null&&d!==null?ws(c,d):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return w4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new st(fe.comparator);function Br(){return lk}const N4=new st(fe.comparator);function fa(...t){let e=N4;for(const n of t)e=e.insert(n.key,n);return e}function P4(t){let e=N4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yi(){return Ta()}function L4(){return Ta()}function Ta(){return new Ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const ck=new st(fe.comparator),uk=new Ot(fe.comparator);function ke(...t){let e=uk;for(const n of t)e=e.add(n);return e}const dk=new Ot(Fe);function hk(){return dk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ku(e)?"-0":e}}function M4(t){return{integerValue:""+t}}function fk(t,e){return zT(e)?M4(e):a0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(){this._=void 0}}function pk(t,e,n){return t instanceof Pu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&t0(o)&&(o=n0(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof rl?D4(t,e):t instanceof il?U4(t,e):function(i,o){const s=O4(i,o),l=Z2(s)+Z2(i.Pe);return up(s)&&up(i.Pe)?M4(l):a0(i.serializer,l)}(t,e)}function mk(t,e,n){return t instanceof rl?D4(t,e):t instanceof il?U4(t,e):n}function O4(t,e){return t instanceof Lu?function(r){return up(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Pu extends bd{}class rl extends bd{constructor(e){super(),this.elements=e}}function D4(t,e){const n=V4(e);for(const r of t.elements)n.some(i=>hr(i,r))||n.push(r);return{arrayValue:{values:n}}}class il extends bd{constructor(e){super(),this.elements=e}}function U4(t,e){let n=V4(e);for(const r of t.elements)n=n.filter(i=>!hr(i,r));return{arrayValue:{values:n}}}class Lu extends bd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Z2(t){return ht(t.integerValue||t.doubleValue)}function V4(t){return r0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rl&&i instanceof rl||r instanceof il&&i instanceof il?_s(r.elements,i.elements,hr):r instanceof Lu&&i instanceof Lu?hr(r.Pe,i.Pe):r instanceof Pu&&i instanceof Pu}(t.transform,e.transform)}class vk{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xd{}function F4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new l0(t.key,qn.none()):new bl(t.key,t.data,qn.none());{const n=t.data,r=on.empty();let i=new Ot(Lt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Di(t.key,r,new yn(i.toArray()),qn.none())}}function yk(t,e,n){t instanceof bl?function(i,o,s){const l=i.value.clone(),c=tv(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Di?function(i,o,s){if(!Bc(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=tv(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(B4(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof bl?function(o,s,l,c){if(!Bc(o.precondition,s))return l;const d=o.value.clone(),u=nv(o.fieldTransforms,c,s);return d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Di?function(o,s,l,c){if(!Bc(o.precondition,s))return l;const d=nv(o.fieldTransforms,c,s),u=s.data;return u.setAll(B4(o)),u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,l){return Bc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function _k(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=O4(r.transform,i||null);o!=null&&(n===null&&(n=on.empty()),n.set(r.field,o))}return n||null}function ev(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_s(r,i,(o,s)=>gk(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bl extends xd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Di extends xd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function B4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tv(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,mk(s,l,n[i]))}return r}function nv(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,pk(o,s,e))}return r}class l0 extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wk extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&yk(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L4();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const c=F4(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&_s(this.mutations,e.mutations,(n,r)=>ev(n,r))&&_s(this.baseMutations,e.baseMutations,(n,r)=>ev(n,r))}}class c0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return ck}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new c0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Le;function Sk(t){switch(t){default:return ge();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function j4(t){if(t===void 0)return Fr("GRPC error has no .code"),J.UNKNOWN;switch(t){case vt.OK:return J.OK;case vt.CANCELLED:return J.CANCELLED;case vt.UNKNOWN:return J.UNKNOWN;case vt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case vt.INTERNAL:return J.INTERNAL;case vt.UNAVAILABLE:return J.UNAVAILABLE;case vt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case vt.NOT_FOUND:return J.NOT_FOUND;case vt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case vt.ABORTED:return J.ABORTED;case vt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case vt.DATA_LOSS:return J.DATA_LOSS;default:return ge()}}(Le=vt||(vt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new eo([4294967295,4294967295],0);function rv(t){const e=Ik().encode(t),n=new h4;return n.update(e),new Uint8Array(n.digest())}function iv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new eo([n,r],0),new eo([i,o],0)]}class u0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pa(`Invalid padding: ${n}`);if(r<0)throw new pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=eo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(eo.fromNumber(r)));return i.compare(Ck)===1&&(i=new eo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rv(e),[r,i]=iv(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new u0(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;const n=rv(e),[r,i]=iv(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ed(ye.min(),i,new st(Fe),Br(),ke())}}class xl{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xl(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class z4{constructor(e,n){this.targetId=e,this.me=n}}class $4{constructor(e,n,r=Ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ov{constructor(){this.fe=0,this.ge=av(),this.pe=Ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),r=ke();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new xl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=av()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ak{constructor(e){this.Le=e,this.Be=new Map,this.ke=Br(),this.qe=sv(),this.Qe=new st(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(hp(o))if(r===0){const s=new fe(o.path);this.Ue(n,s,Wt.newNoDocument(s,ye.min()))}else $e(r===1);else{const s=this.Ye(n);if(s!==r){const l=this.Ze(e),c=l?this.Xe(l,e,s):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=fo(r).toUint8Array()}catch(c){if(c instanceof b4)return ys("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new u0(s,i,o)}catch(c){return ys(c instanceof pa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&hp(l.target)){const c=new fe(l.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Wt.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ke();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Ed(e,n,this.Qe,this.ke,r);return this.ke=Br(),this.qe=sv(),this.Qe=new st(Fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ov,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ot(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ov),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sv(){return new st(fe.comparator)}function av(){return new st(fe.comparator)}const Tk={asc:"ASCENDING",desc:"DESCENDING"},kk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rk={and:"AND",or:"OR"};class Nk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pp(t,e){return t.useProto3Json||vd(e)?e:{value:e}}function Mu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pk(t,e){return Mu(t,e.toTimestamp())}function lr(t){return $e(!!t),ye.fromTimestamp(function(n){const r=ki(n);return new It(r.seconds,r.nanos)}(t))}function d0(t,e){return mp(t,e).canonicalString()}function mp(t,e){const n=function(i){return new tt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q4(t){const e=tt.fromString(t);return $e(G4(e)),e}function gp(t,e){return d0(t.databaseId,e.path)}function Oh(t,e){const n=q4(e);if(n.get(1)!==t.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(X4(n))}function W4(t,e){return d0(t.databaseId,e)}function Lk(t){const e=q4(t);return e.length===4?tt.emptyPath():X4(e)}function vp(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function X4(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lv(t,e,n){return{name:gp(t,e),fields:n.value.mapValue.fields}}function Mk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,u){return d.useProto3Json?($e(u===void 0||typeof u=="string"),Ut.fromBase64String(u||"")):($e(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ut.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(d){const u=d.code===void 0?J.UNKNOWN:j4(d.code);return new he(u,d.message||"")}(s);n=new $4(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oh(t,r.document.name),o=lr(r.document.updateTime),s=r.document.createTime?lr(r.document.createTime):ye.min(),l=new on({mapValue:{fields:r.document.fields}}),c=Wt.newFoundDocument(i,o,s,l),d=r.targetIds||[],u=r.removedTargetIds||[];n=new jc(d,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Oh(t,r.document),o=r.readTime?lr(r.readTime):ye.min(),s=Wt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new jc([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Oh(t,r.document),o=r.removedTargetIds||[];n=new jc([],o,i,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Ek(i,o),l=r.targetId;n=new z4(l,s)}}return n}function Ok(t,e){let n;if(e instanceof bl)n={update:lv(t,e.key,e.value)};else if(e instanceof l0)n={delete:gp(t,e.key)};else if(e instanceof Di)n={update:lv(t,e.key,e.data),updateMask:Hk(e.fieldMask)};else{if(!(e instanceof wk))return ge();n={verify:gp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Pu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof il)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Lu)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Pk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge()}(t,e.precondition)),n}function Dk(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?lr(i.updateTime):lr(o);return s.isEqual(ye.min())&&(s=lr(o)),new vk(s,i.transformResults||[])}(n,e))):[]}function Uk(t,e){return{documents:[W4(t,e.path)]}}function Vk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=W4(t,i);const o=function(d){if(d.length!==0)return Y4(fr.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(u=>function(f){return{field:Mo(f.field),direction:jk(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=pp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function Fk(t){let e=Lk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(h){const f=K4(h);return f instanceof fr&&I4(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(f=>function(v){return new Nu(Oo(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,vd(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new Ru(m,f)}(n.startAt));let d=null;return n.endAt&&(d=function(h){const f=!h.before,m=h.values||[];return new Ru(m,f)}(n.endAt)),rk(e,i,s,o,l,"F",c,d)}function Bk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function K4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Oo(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oo(n.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Oo(n.unaryFilter.field);return Et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Oo(n.unaryFilter.field);return Et.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return Et.create(Oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fr.create(n.compositeFilter.filters.map(r=>K4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function jk(t){return Tk[t]}function zk(t){return kk[t]}function $k(t){return Rk[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function Oo(t){return Lt.fromServerFormat(t.fieldPath)}function Y4(t){return t instanceof Et?function(n){if(n.op==="=="){if(K2(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(X2(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K2(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(X2(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:zk(n.op),value:n.value}}}(t):t instanceof fr?function(n){const r=n.getFilters().map(i=>Y4(i));return r.length===1?r[0]:{compositeFilter:{op:$k(n.op),filters:r}}}(t):ge()}function Hk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function G4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n,r,i,o=ye.min(),s=ye.min(),l=Ut.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.ct=e}}function Wk(t){const e=Fk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.un=new Kk}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ti.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class Kk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ot(tt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xs(0)}static kn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.changes=new Ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ka(r.mutation,i,yn.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=Yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=fa();return o.forEach((l,c)=>{s=s.insert(l,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Br();const s=Ta(),l=function(){return Ta()}();return n.forEach((c,d)=>{const u=r.get(d.key);i.has(d.key)&&(u===void 0||u.mutation instanceof Di)?o=o.insert(d.key,d):u!==void 0?(s.set(d.key,u.mutation.getFieldMask()),ka(u.mutation,d,u.mutation.getFieldMask(),It.now())):s.set(d.key,yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,u)=>s.set(d,u)),n.forEach((d,u)=>{var h;return l.set(d,new Gk(u,(h=s.get(d))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ta();let i=new st((s,l)=>s-l),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let u=r.get(c)||yn.empty();u=l.applyToLocalView(d,u),r.set(c,u);const h=(i.get(l.batchId)||ke()).add(c);i=i.insert(l.batchId,h)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,u=c.value,h=L4();u.forEach(f=>{if(!o.has(f)){const m=F4(n.get(f),r.get(f));m!==null&&h.set(f,m),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,h))}return Q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ik(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Q.resolve(Yi());let l=-1,c=o;return s.next(d=>Q.forEach(d,(u,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(u)?Q.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,ke())).next(u=>({batchId:l,changes:P4(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=fa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=fa();return this.indexManager.getCollectionParents(e,o).next(l=>Q.forEach(l,c=>{const d=function(h,f){return new yd(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(u=>{u.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,d)=>{const u=d.getKey();s.get(u)===null&&(s=s.insert(u,Wt.newInvalidDocument(u)))});let l=fa();return s.forEach((c,d)=>{const u=o.get(c);u!==void 0&&ka(u.mutation,d,yn.empty(),It.now()),wd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lr(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Wk(i.bundledQuery),readTime:lr(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.overlays=new st(fe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yi();return Q.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Yi(),o=n.length+1,s=new fe(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new st((d,u)=>d-u);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let u=o.get(d.largestBatchId);u===null&&(u=Yi(),o=o.insert(d.largestBatchId,u)),u.set(d.getKey(),d)}}const l=Yi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,u)=>l.set(d,u)),!(l.size()>=i)););return Q.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new xk(n,r));let o=this.Ir.get(n);o===void 0&&(o=ke(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.Tr=new Ot(Ct.Er),this.dr=new Ot(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new tt([])),r=new Ct(n,e),i=new Ct(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new tt([])),r=new Ct(n,e),i=new Ct(n,e+1);let o=ke();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ot(Ct.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new bk(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new Ct(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ct(n,0),i=new Ct(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const l=this.Dr(s.wr);o.push(l)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(Fe);return n.forEach(i=>{const o=new Ct(i,0),s=new Ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{r=r.add(l.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;fe.isDocumentKey(o)||(o=o.child(""));const s=new Ct(new fe(o),0);let l=new Ot(Fe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.wr)),!0)},s),Q.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,i=>{const o=new Ct(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ct(n,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.Mr=e,this.docs=function(){return new st(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=Br();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Wt.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Br();const s=n.path,l=new fe(s.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:u}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||VT(UT(u),r)<=0||(i.has(u.key)||wd(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ge()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rR(this)}getSize(e){return Q.resolve(this.size)}}class rR extends Yk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.persistence=e,this.Nr=new Ms(n=>i0(n),o0),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new h0,this.targetCount=0,this.kr=xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Q.waitFor(o).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new e0(0),this.Kr=!1,this.Kr=!0,this.$r=new eR,this.referenceDelegate=e(this),this.Ur=new iR(this),this.indexManager=new Xk,this.remoteDocumentCache=function(i){return new nR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new qk(n),this.Gr=new Jk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new tR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new sR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sR extends BT{constructor(e){super(),this.currentSequenceNumber=e}}class f0{constructor(e){this.persistence=e,this.Jr=new h0,this.Yr=null}static Zr(e){return new f0(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=fe.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ke(),i=ke();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new p0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cI()?8:jT(Kt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new aR;return this.Xi(e,n,s).next(l=>{if(o.result=l,this.zi)return this.es(e,n,s,l.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ra()<=Re.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(ra()<=Re.DEBUG&&le("QueryEngine","Query:",Lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ra()<=Re.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):Q.resolve())}Yi(e,n){if(J2(n))return Q.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fp(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ke(...o);return this.Ji.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,s,c.readTime)?this.Yi(e,fp(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,i){return J2(n)||i.isEqual(ye.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?Q.resolve(null):(ra()<=Re.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lo(n)),this.rs(e,s,n,DT(i,-1)).next(l=>l))})}ts(e,n){let r=new Ot(R4(e));return n.forEach((i,o)=>{wd(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ra()<=Re.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ti.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new st(Fe),this._s=new Ms(o=>i0(o),o0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function uR(t,e,n,r){return new cR(t,e,n,r)}async function Q4(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let c=ke();for(const d of i){s.push(d.batchId);for(const u of d.mutations)c=c.add(u.key)}for(const d of o){l.push(d.batchId);for(const u of d.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:l}))})})}function dR(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,u){const h=d.batch,f=h.keys();let m=Q.resolve();return f.forEach(v=>{m=m.next(()=>u.getEntry(c,v)).next(y=>{const E=d.docVersions.get(v);$e(E!==null),y.version.compareTo(E)<0&&(h.applyToRemoteDocument(y,d),y.isValidDocument()&&(y.setReadTime(d.commitVersion),u.addEntry(y)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ke();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function J4(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hR(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;l.push(n.Ur.removeMatchingKeys(o,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(o,u.addedDocuments,h)));let m=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ut.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(h,m),function(y,E,g){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,m,u)&&l.push(n.Ur.updateTargetData(o,m))});let c=Br(),d=ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),l.push(fR(o,s,e.documentUpdates).next(u=>{c=u.Ps,d=u.Is})),!r.isEqual(ye.min())){const u=n.Ur.getLastRemoteSnapshotVersion(o).next(h=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(u)}return Q.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.os=i,o))}function fR(t,e,n){let r=ke(),i=ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Br();return n.forEach((l,c)=>{const d=o.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):le("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function pR(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mR(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,Q.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new li(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function yp(t,e,n){const r=_e(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!wl(s))throw s;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function cv(t,e,n){const r=_e(t);let i=ye.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,u){const h=_e(c),f=h._s.get(u);return f!==void 0?Q.resolve(h.os.get(f)):h.Ur.getTargetData(d,u)}(r,s,ar(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,l.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ye.min(),n?o:ke())).next(l=>(gR(r,sk(e),l),{documents:l,Ts:o})))}function gR(t,e,n){let r=t.us.get(e)||ye.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class uv{constructor(){this.activeTargetIds=hk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vR{constructor(){this.so=new uv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc=null;function Dh(){return pc===null?pc=function(){return 268435456+Math.round(2147483648*Math.random())}():pc++,"0x"+pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class bR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const l=Dh(),c=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,c,d,i).then(u=>(le("RestConnection",`Received RPC '${n}' ${l}: `,u),u),u=>{throw ys("RestConnection",`RPC '${n}' ${l} failed with error: `,u,"url: ",c,"request:",i),u})}Lo(n,r,i,o,s,l){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ls}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=_R[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=Dh();return new Promise((s,l)=>{const c=new f4;c.setWithCredentials(!0),c.listenOnce(p4.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vc.NO_ERROR:const u=c.getResponseJson();le(zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Vc.TIMEOUT:le(zt,`RPC '${e}' ${o} timed out`),l(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const h=c.getStatus();if(le(zt,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(E){const g=E.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(g)>=0?g:J.UNKNOWN}(m.status);l(new he(v,m.message))}else l(new he(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new he(J.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{le(zt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);le(zt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Dh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=v4(),l=g4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=o.join("");le(zt,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=s.createWebChannel(u,c);let f=!1,m=!1;const v=new wR({Io:E=>{m?le(zt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(f||(le(zt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),le(zt,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),y=(E,g,w)=>{E.listen(g,_=>{try{w(_)}catch(b){setTimeout(()=>{throw b},0)}})};return y(h,ha.EventType.OPEN,()=>{m||(le(zt,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),y(h,ha.EventType.CLOSE,()=>{m||(m=!0,le(zt,`RPC '${e}' stream ${i} transport closed`),v.So())}),y(h,ha.EventType.ERROR,E=>{m||(m=!0,ys(zt,`RPC '${e}' stream ${i} transport errored:`,E),v.So(new he(J.UNAVAILABLE,"The operation could not be completed")))}),y(h,ha.EventType.MESSAGE,E=>{var g;if(!m){const w=E.data[0];$e(!!w);const _=w,b=_.error||((g=_[0])===null||g===void 0?void 0:g.error);if(b){le(zt,`RPC '${e}' stream ${i} received error:`,b);const A=b.status;let k=function(S){const T=vt[S];if(T!==void 0)return j4(T)}(A),C=b.message;k===void 0&&(k=J.INTERNAL,C="Unknown error status: "+A+" with message "+b.message),m=!0,v.So(new he(k,C)),h.close()}else le(zt,`RPC '${e}' stream ${i} received:`,w),v.bo(w)}}),y(l,m4.STAT_EVENT,E=>{E.stat===lp.PROXY?le(zt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===lp.NOPROXY&&le(zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){return new Nk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n,r,i,o,s,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Z4(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xR extends e6{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Mk(this.serializer,e),r=function(o){if(!("targetChange"in o))return ye.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ye.min():s.readTime?lr(s.readTime):ye.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=vp(this.serializer),n.addTarget=function(o,s){let l;const c=s.target;if(l=hp(c)?{documents:Uk(o,c)}:{query:Vk(o,c)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=H4(o,s.resumeToken);const d=pp(o,s.expectedCount);d!==null&&(l.expectedCount=d)}else if(s.snapshotVersion.compareTo(ye.min())>0){l.readTime=Mu(o,s.snapshotVersion.toTimestamp());const d=pp(o,s.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=Bk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=vp(this.serializer),n.removeTarget=e,this.a_(n)}}class ER extends e6{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Dk(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=vp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ok(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,mp(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(J.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(e,mp(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(J.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class IR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{So(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=_e(c);d.L_.add(4),await El(d),d.q_.set("Unknown"),d.L_.delete(4),await Id(d)}(this))})}),this.q_=new IR(r,i)}}async function Id(t){if(So(t))for(const e of t.B_)await e(!0)}async function El(t){for(const e of t.B_)await e(!1)}function t6(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),y0(n)?v0(n):Os(n).r_()&&g0(n,e))}function m0(t,e){const n=_e(t),r=Os(n);n.N_.delete(e),r.r_()&&n6(n,e),n.N_.size===0&&(r.r_()?r.o_():So(n)&&n.q_.set("Unknown"))}function g0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Os(t).A_(e)}function n6(t,e){t.Q_.xe(e),Os(t).R_(e)}function v0(t){t.Q_=new Ak({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Os(t).start(),t.q_.v_()}function y0(t){return So(t)&&!Os(t).n_()&&t.N_.size>0}function So(t){return _e(t).L_.size===0}function r6(t){t.Q_=void 0}async function AR(t){t.q_.set("Online")}async function TR(t){t.N_.forEach((e,n)=>{g0(t,e)})}async function kR(t,e){r6(t),y0(t)?(t.q_.M_(e),v0(t)):t.q_.set("Unknown")}async function RR(t,e,n){if(t.q_.set("Online"),e instanceof $4&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ou(t,r)}else if(e instanceof jc?t.Q_.Ke(e):e instanceof z4?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const r=await J4(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const u=o.N_.get(d);u&&o.N_.set(d,u.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach((c,d)=>{const u=o.N_.get(c);if(!u)return;o.N_.set(c,u.withResumeToken(Ut.EMPTY_BYTE_STRING,u.snapshotVersion)),n6(o,c);const h=new li(u.target,c,d,u.sequenceNumber);g0(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await Ou(t,r)}}async function Ou(t,e,n){if(!wl(e))throw e;t.L_.add(1),await El(t),t.q_.set("Offline"),n||(n=()=>J4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Id(t)})}function i6(t,e){return e().catch(n=>Ou(t,n,e))}async function Cd(t){const e=_e(t),n=Ri(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;NR(e);)try{const i=await pR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,PR(e,i)}catch(i){await Ou(e,i)}o6(e)&&s6(e)}function NR(t){return So(t)&&t.O_.length<10}function PR(t,e){t.O_.push(e);const n=Ri(t);n.r_()&&n.V_&&n.m_(e.mutations)}function o6(t){return So(t)&&!Ri(t).n_()&&t.O_.length>0}function s6(t){Ri(t).start()}async function LR(t){Ri(t).p_()}async function MR(t){const e=Ri(t);for(const n of t.O_)e.m_(n.mutations)}async function OR(t,e,n){const r=t.O_.shift(),i=c0.from(r,e,n);await i6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cd(t)}async function DR(t,e){e&&Ri(t).V_&&await async function(r,i){if(function(s){return Sk(s)&&s!==J.ABORTED}(i.code)){const o=r.O_.shift();Ri(r).s_(),await i6(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Cd(r)}}(t,e),o6(t)&&s6(t)}async function hv(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=So(n);n.L_.add(3),await El(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Id(n)}async function UR(t,e){const n=_e(t);e?(n.L_.delete(2),await Id(n)):e||(n.L_.add(2),await El(n),n.q_.set("Unknown"))}function Os(t){return t.K_||(t.K_=function(n,r,i){const o=_e(n);return o.w_(),new xR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:AR.bind(null,t),Ro:TR.bind(null,t),mo:kR.bind(null,t),d_:RR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),y0(t)?v0(t):t.q_.set("Unknown")):(await t.K_.stop(),r6(t))})),t.K_}function Ri(t){return t.U_||(t.U_=function(n,r,i){const o=_e(n);return o.w_(),new ER(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:LR.bind(null,t),mo:DR.bind(null,t),f_:MR.bind(null,t),g_:OR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cd(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new _0(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w0(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),wl(t))return new he(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=fa(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new as(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof as)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.W_=new st(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Es{constructor(e,n,r,i,o,s,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new Es(e,n,as.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class FR{constructor(){this.queries=pv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_e(n),o=i.queries;i.queries=pv(),o.forEach((s,l)=>{for(const c of l.j_)c.onError(r)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function pv(){return new Ms(t=>k4(t),_d)}async function a6(t,e){const n=_e(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new VR,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=w0(s,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&b0(n)}async function l6(t,e){const n=_e(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BR(t,e){const n=_e(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.j_)l.X_(i)&&(r=!0);s.z_=i}}r&&b0(n)}function jR(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function b0(t){t.Y_.forEach(e=>{e.next()})}var _p,mv;(mv=_p||(_p={})).ea="default",mv.Cache="cache";class c6{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.key=e}}class d6{constructor(e){this.key=e}}class zR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=R4(e),this.Ra=new as(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fv,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),m=wd(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(r.track({type:3,doc:m}),E=!0):this.ga(f,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.Aa(m,c)>0||d&&this.Aa(m,d)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),E=!0):f&&!m&&(r.track({type:1,doc:f}),E=!0,(c||d)&&(l=!0)),E&&(m?(s=s.add(m),o=y?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{Ra:s,fa:r,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((u,h)=>function(m,v){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return y(m)-y(v)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new Es(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new d6(r))}),this.da.forEach(r=>{e.has(r)||n.push(new u6(r))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Es.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $R{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HR{constructor(e){this.key=e,this.va=!1}}class qR{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ms(l=>k4(l),_d),this.Ma=new Map,this.xa=new Set,this.Oa=new st(fe.comparator),this.Na=new Map,this.La=new h0,this.Ba={},this.ka=new Map,this.qa=xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WR(t,e,n=!0){const r=v6(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await h6(r,e,n,!0),i}async function XR(t,e){const n=v6(t);await h6(n,e,!0,!1)}async function h6(t,e,n,r){const i=await mR(t.localStore,ar(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await KR(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&t6(t.remoteStore,i),l}async function KR(t,e,n,r,i){t.Ka=(h,f,m)=>async function(y,E,g,w){let _=E.view.ma(g);_.ns&&(_=await cv(y.localStore,E.query,!1).then(({documents:C})=>E.view.ma(C,_)));const b=w&&w.targetChanges.get(E.targetId),A=w&&w.targetMismatches.get(E.targetId)!=null,k=E.view.applyChanges(_,y.isPrimaryClient,b,A);return vv(y,E.targetId,k.wa),k.snapshot}(t,h,f,m);const o=await cv(t.localStore,e,!0),s=new zR(e,o.Ts),l=s.ma(o.documents),c=xl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(l,t.isPrimaryClient,c);vv(t,n,d.wa);const u=new $R(e,n,s);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function YR(t,e,n){const r=_e(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!_d(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&m0(r.remoteStore,i.targetId),wp(r,i.targetId)}).catch(_l)):(wp(r,i.targetId),await yp(r.localStore,i.targetId,!0))}async function GR(t,e){const n=_e(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),m0(n.remoteStore,r.targetId))}async function QR(t,e,n){const r=iN(t);try{const i=await function(s,l){const c=_e(s),d=It.now(),u=l.reduce((m,v)=>m.add(v.key),ke());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Br(),y=ke();return c.cs.getEntries(m,u).next(E=>{v=E,v.forEach((g,w)=>{w.isValidDocument()||(y=y.add(g))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(E=>{h=E;const g=[];for(const w of l){const _=_k(w,h.get(w.key).overlayedDocument);_!=null&&g.push(new Di(w.key,_,x4(_.value.mapValue),qn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,d,g,l)}).next(E=>{f=E;const g=E.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(m,E.batchId,g)})}).then(()=>({batchId:f.batchId,changes:P4(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new st(Fe)),d=d.insert(l,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),await Sl(r,i.changes),await Cd(r.remoteStore)}catch(i){const o=w0(i,"Failed to persist write");n.reject(o)}}async function f6(t,e){const n=_e(t);try{const r=await hR(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?$e(s.va):i.removedDocuments.size>0&&($e(s.va),s.va=!1))}),await Sl(n,r,e)}catch(r){await _l(r)}}function gv(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const l=s.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const c=_e(s);c.onlineState=l;let d=!1;c.queries.forEach((u,h)=>{for(const f of h.j_)f.Z_(l)&&(d=!0)}),d&&b0(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JR(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new st(fe.comparator);s=s.insert(o,Wt.newNoDocument(o,ye.min()));const l=ke().add(o),c=new Ed(ye.min(),new Map,new st(Fe),s,l);await f6(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),x0(r)}else await yp(r.localStore,e,!1).then(()=>wp(r,e,n)).catch(_l)}async function ZR(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await dR(n.localStore,e);m6(n,r,null),p6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sl(n,i)}catch(i){await _l(i)}}async function eN(t,e,n){const r=_e(t);try{const i=await function(s,l){const c=_e(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return c.mutationQueue.lookupMutationBatch(d,l).next(h=>($e(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(d,h))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,u,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,u)).next(()=>c.localDocuments.getDocuments(d,u))})}(r.localStore,e);m6(r,e,n),p6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sl(r,i)}catch(i){await _l(i)}}function p6(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function m6(t,e,n){const r=_e(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||g6(t,r)})}function g6(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(m0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),x0(t))}function vv(t,e,n){for(const r of n)r instanceof u6?(t.La.addReference(r.key,e),tN(t,r)):r instanceof d6?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||g6(t,r.key)):ge()}function tN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),x0(t))}function x0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(tt.fromString(e)),r=t.qa.next();t.Na.set(r,new HR(n)),t.Oa=t.Oa.insert(n,r),t6(t.remoteStore,new li(ar(s0(n.path)),r,"TargetPurposeLimboResolution",e0.oe))}}async function Sl(t,e,n){const r=_e(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{s.push(r.Ka(c,e,n).then(d=>{var u;if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:(u=n==null?void 0:n.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);const h=p0.Wi(c.targetId,d);o.push(h)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(c,d){const u=_e(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Q.forEach(d,f=>Q.forEach(f.$i,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>Q.forEach(f.Ui,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!wl(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(const h of d){const f=h.targetId;if(!h.fromCache){const m=u.os.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(f,y)}}}(r.localStore,o))}async function nN(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await Q4(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(l=>{l.forEach(c=>{c.reject(new he(J.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sl(n,r.hs)}}function rN(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return ke().add(r.key);{let i=ke();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const l=n.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}function v6(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JR.bind(null,e),e.Ca.d_=BR.bind(null,e.eventManager),e.Ca.$a=jR.bind(null,e.eventManager),e}function iN(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eN.bind(null,e),e}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return uR(this.persistence,new lR,e.initialUser,this.serializer)}Ga(e){return new oR(f0.Zr,this.serializer)}Wa(e){return new vR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nN.bind(null,this.syncEngine),await UR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FR}()}createDatastore(e){const n=Sd(e.databaseInfo.databaseId),r=function(o){return new bR(o)}(e.databaseInfo);return function(o,s,l,c){return new SR(o,s,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new CR(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>gv(this.syncEngine,n,0),function(){return dv.D()?new dv:new yR}())}createSyncEngine(e,n){return function(i,o,s,l,c,d,u){const h=new qR(i,o,s,l,c,d);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=_e(i);le("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await El(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ht.UNAUTHENTICATED,this.clientId=_4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{le("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(le("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=w0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vh(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Q4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sN(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>hv(e.remoteStore,i)),t._onlineComponents=e}async function sN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ys("Error using user provided cache. Falling back to memory cache: "+n),await Vh(t,new Du)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Vh(t,new Du);return t._offlineComponents}async function _6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await yv(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await yv(t,new bp))),t._onlineComponents}function aN(t){return _6(t).then(e=>e.syncEngine)}async function xp(t){const e=await _6(t),n=e.eventManager;return n.onListen=WR.bind(null,e.syncEngine),n.onUnlisten=YR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GR.bind(null,e.syncEngine),n}function lN(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,c,d){const u=new y6({next:f=>{u.Za(),s.enqueueAndForget(()=>l6(o,h)),f.fromCache&&c.source==="server"?d.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),h=new c6(l,u,{includeMetadataChanges:!0,_a:!0});return a6(o,h)}(await xp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cN(t,e,n,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wv(t){if(!fe.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bv(t){if(fe.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function E0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=E0(t);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ad{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AT;switch(r.type){case"firstParty":return new NT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_v.get(n);r&&(le("ComponentProvider","Removing Datastore"),_v.delete(n),r.terminate())}(this),Promise.resolve()}}function uN(t,e,n,r={}){var i;const o=(t=cr(t,Ad))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Ht.MOCK_USER;else{l=k5(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ht(d)}t._authCredentials=new TT(new y4(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Il(this.firestore,e,this._query)}}class xn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class wi extends Il{constructor(e,n,r){super(e,n,s0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new fe(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function ol(t,e,...n){if(t=bt(t),b6("collection","path",e),t instanceof Ad){const r=tt.fromString(e,...n);return bv(r),new wi(t,null,r)}{if(!(t instanceof xn||t instanceof wi))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return bv(r),new wi(t.firestore,null,r)}}function S0(t,e,...n){if(t=bt(t),arguments.length===1&&(e=_4.newId()),b6("doc","path",e),t instanceof Ad){const r=tt.fromString(e,...n);return wv(r),new xn(t,null,new fe(r))}{if(!(t instanceof xn||t instanceof wi))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return wv(r),new xn(t.firestore,t instanceof wi?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Z4(this,"async_queue_retry"),this.Vu=()=>{const r=Uh();r&&le("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wl(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=_0.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Sv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class mo extends Ad{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ev,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ev(e),this._firestoreClient=void 0,await e}}}function dN(t,e){const n=typeof t=="object"?t:z1(),r=typeof t=="string"?t:"(default)",i=fd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=C5("firestore");o&&uN(i,...o)}return i}function I0(t){if(t._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hN(t),t._firestoreClient}function hN(t){var e,n,r;const i=t._freezeSettings(),o=function(l,c,d,u){return new HT(l,c,d,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,w6(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new oN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(Ut.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ss(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=/^__.*__$/;class pN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new bl(e,this.data,n,this.fieldTransforms)}}class x6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function E6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class k0{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new k0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(E6(this.Cu)&&fN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sd(e)}Qu(e,n,r,i=!1){return new k0({Cu:e,methodName:n,qu:r,path:Lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function S6(t){const e=t._freezeSettings(),n=Sd(t._databaseId);return new mN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gN(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);R0("Data must be an object, but it was:",s,r);const l=I6(r,s);let c,d;if(o.merge)c=new yn(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const h of o.mergeFields){const f=Ep(e,h,n);if(!s.contains(f))throw new he(J.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);A6(u,f)||u.push(f)}c=new yn(u),d=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,d=s.fieldTransforms;return new pN(new on(l),c,d)}class kd extends C0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function vN(t,e,n,r){const i=t.Qu(1,e,n);R0("Data must be an object, but it was:",i,r);const o=[],s=on.empty();Eo(r,(c,d)=>{const u=N0(e,c,n);d=bt(d);const h=i.Nu(u);if(d instanceof kd)o.push(u);else{const f=Rd(d,h);f!=null&&(o.push(u),s.set(u,f))}});const l=new yn(o);return new x6(s,l,i.fieldTransforms)}function yN(t,e,n,r,i,o){const s=t.Qu(1,e,n),l=[Ep(e,r,n)],c=[i];if(o.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)l.push(Ep(e,o[f])),c.push(o[f+1]);const d=[],u=on.empty();for(let f=l.length-1;f>=0;--f)if(!A6(d,l[f])){const m=l[f];let v=c[f];v=bt(v);const y=s.Nu(m);if(v instanceof kd)d.push(m);else{const E=Rd(v,y);E!=null&&(d.push(m),u.set(m,E))}}const h=new yn(d);return new x6(u,h,s.fieldTransforms)}function Rd(t,e){if(C6(t=bt(t)))return R0("Unsupported field value:",e,t),I6(t,e);if(t instanceof C0)return function(r,i){if(!E6(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let c=Rd(l,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=It.fromDate(r);return{timestampValue:Mu(i.serializer,o)}}if(r instanceof It){const o=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mu(i.serializer,o)}}if(r instanceof A0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ss)return{bytesValue:H4(i.serializer,r._byteString)};if(r instanceof xn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:d0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof T0)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return a0(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${E0(r)}`)}(t,e)}function I6(t,e){const n={};return w4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(r,i)=>{const o=Rd(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function C6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof A0||t instanceof Ss||t instanceof xn||t instanceof C0||t instanceof T0)}function R0(t,e,n){if(!C6(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=E0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ep(t,e,n){if((e=bt(e))instanceof Td)return e._internalPath;if(typeof e=="string")return N0(t,e);throw Uu("Field path arguments must be of type string or ",t,!1,void 0,n)}const _N=new RegExp("[~\\*/\\[\\]]");function N0(t,e,n){if(e.search(_N)>=0)throw Uu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Td(...e.split("."))._internalPath}catch{throw Uu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new he(J.INVALID_ARGUMENT,l+t+c)}function A6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(k6("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wN extends T6{data(){return super.data()}}function k6(t,e){return typeof e=="string"?N0(t,e):e instanceof Td?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bN{convertValue(e,n="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Eo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ht(s.doubleValue));return new T0(o)}convertGeoPoint(e){return new A0(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=n0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const n=ki(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);$e(G4(r));const i=new tl(r.get(1),r.get(3)),o=new fe(r.popFirst(5));return i.isEqual(n)||Fr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N6 extends T6{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(k6("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zc extends N6{data(e={}){return super.data(e)}}class P6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ma(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zc(this._firestore,this._userDataWriter,r.key,r,new ma(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const c=new zc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ma(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new zc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ma(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,u=-1;return l.type!==0&&(d=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),u=s.indexOf(l.doc.key)),{type:EN(l.type),doc:c,oldIndex:d,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function EN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}class P0 extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function L6(t){t=cr(t,Il);const e=cr(t.firestore,mo),n=I0(e),r=new P0(e);return R6(t._query),lN(n,t._query).then(i=>new P6(e,r,t,i))}function SN(t,e,n,...r){t=cr(t,xn);const i=cr(t.firestore,mo),o=S6(i);let s;return s=typeof(e=bt(e))=="string"||e instanceof Td?yN(o,"updateDoc",t._key,e,n,r):vN(o,"updateDoc",t._key,e),L0(i,[s.toMutation(t._key,qn.exists(!0))])}function M6(t){return L0(cr(t.firestore,mo),[new l0(t._key,qn.none())])}function O6(t,e){const n=cr(t.firestore,mo),r=S0(t),i=xN(t.converter,e);return L0(n,[gN(S6(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function IN(t,...e){var n,r,i;t=bt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Sv(e[s])||(o=e[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Sv(e[s])){const h=e[s];e[s]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,d,u;if(t instanceof xn)d=cr(t.firestore,mo),u=s0(t._key.path),c={next:h=>{e[s]&&e[s](CN(d,t,h))},error:e[s+1],complete:e[s+2]};else{const h=cr(t,Il);d=cr(h.firestore,mo),u=h._query;const f=new P0(d);c={next:m=>{e[s]&&e[s](new P6(d,f,h,m))},error:e[s+1],complete:e[s+2]},R6(t._query)}return function(f,m,v,y){const E=new y6(y),g=new c6(m,E,v);return f.asyncQueue.enqueueAndForget(async()=>a6(await xp(f),g)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>l6(await xp(f),g))}}(I0(d),u,l,c)}function L0(t,e){return function(r,i){const o=new _i;return r.asyncQueue.enqueueAndForget(async()=>QR(await aN(r),i,o)),o.promise}(I0(t),e)}function CN(t,e,n){const r=n.docs.get(e._key),i=new P0(t);return new N6(t,i,e._key,r,new ma(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ls=i})(xo),co(new Ai("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new mo(new kT(r.getProvider("auth-internal")),new LT(r.getProvider("app-check-internal")),function(d,u){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(d.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),or(z2,"4.7.3",e),or(z2,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="firebasestorage.googleapis.com",U6="storageBucket",AN=2*60*1e3,TN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends mr{constructor(e,n,r=0){super(Fh(e),`Firebase Storage: ${n} (${Fh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function Fh(t){return"storage/"+t}function M0(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(ut.UNKNOWN,t)}function kN(t){return new dt(ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function RN(t){return new dt(ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function NN(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ut.UNAUTHENTICATED,t)}function PN(){return new dt(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LN(t){return new dt(ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function MN(){return new dt(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ON(){return new dt(ut.CANCELED,"User canceled the upload/download.")}function DN(t){return new dt(ut.INVALID_URL,"Invalid URL '"+t+"'.")}function UN(t){return new dt(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function VN(){return new dt(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U6+"' property when initializing the app?")}function FN(){return new dt(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BN(){return new dt(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jN(t){return new dt(ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Sp(t){return new dt(ut.INVALID_ARGUMENT,t)}function V6(){return new dt(ut.APP_DELETED,"The Firebase app was deleted.")}function zN(t){return new dt(ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ra(t,e){return new dt(ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ia(t){throw new dt(ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_n.makeFromUrl(e,n)}catch{return new _n(e,"")}if(r.path==="")return r;throw UN(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),v={bucket:1,path:3},y=n===D6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",g=new RegExp(`^https?://${y}/${i}/${E}`,"i"),_=[{regex:l,indices:c,postModify:o},{regex:m,indices:v,postModify:d},{regex:g,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<_.length;b++){const A=_[b],k=A.regex.exec(e);if(k){const C=k[A.indices.bucket];let x=k[A.indices.path];x||(x=""),r=new _n(C,x),A.postModify(r);break}}if(r==null)throw DN(e);return r}}class $N{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t,e,n){let r=1,i=null,o=null,s=!1,l=0;function c(){return l===2}let d=!1;function u(...E){d||(d=!0,e.apply(null,E))}function h(E){i=setTimeout(()=>{i=null,t(m,c())},E)}function f(){o&&clearTimeout(o)}function m(E,...g){if(d){f();return}if(E){f(),u.call(null,E,...g);return}if(c()||s){f(),u.call(null,E,...g);return}r<64&&(r*=2);let _;l===1?(l=2,_=0):_=(r+Math.random())*1e3,h(_)}let v=!1;function y(E){v||(v=!0,f(),!d&&(i!==null?(E||(l=2),clearTimeout(i),h(0)):E||(l=1)))}return h(0),o=setTimeout(()=>{s=!0,y(!0)},n),y}function qN(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t){return t!==void 0}function XN(t){return typeof t=="object"&&!Array.isArray(t)}function O0(t){return typeof t=="string"||t instanceof String}function Iv(t){return D0()&&t instanceof Blob}function D0(){return typeof Blob<"u"}function Cv(t,e,n,r){if(r<e)throw Sp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Sp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function F6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var to;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(to||(to={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,i,o,s,l,c,d,u,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new mc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===to.NO_ERROR,c=o.getStatus();if(!l||KN(c,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===to.ABORT;r(!1,new mc(!1,null,u));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new mc(d,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());WN(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=M0();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(i.canceled){const c=this.appDelete_?V6():ON();s(c)}else{const c=MN();s(c)}};this.canceled_?n(!1,new mc(!1,null,!0)):this.backoffId_=HN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function GN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function QN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ZN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function eP(t,e,n,r,i,o,s=!0){const l=F6(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return JN(d,e),GN(d,n),QN(d,o),ZN(d,r),new YN(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nP(...t){const e=tP();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(D0())return new Blob(t);throw new dt(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){if(typeof atob>"u")throw jN("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bh{constructor(e,n){this.data=e,this.contentType=n||null}}function oP(t,e){switch(t){case nr.RAW:return new Bh(B6(e));case nr.BASE64:case nr.BASE64URL:return new Bh(j6(t,e));case nr.DATA_URL:return new Bh(aP(e),lP(e))}throw M0()}function B6(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sP(t){let e;try{e=decodeURIComponent(t)}catch{throw Ra(nr.DATA_URL,"Malformed data URL.")}return B6(e)}function j6(t,e){switch(t){case nr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ra(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case nr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ra(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iP(e)}catch(i){throw i.message.includes("polyfill")?i:Ra(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class z6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ra(nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=cP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function aP(t){const e=new z6(t);return e.base64?j6(nr.BASE64,e.rest):sP(e.rest)}function lP(t){return new z6(t).contentType}function cP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){let r=0,i="";Iv(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Iv(this.data_)){const r=this.data_,i=rP(r,e,n);return i===null?null:new oi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new oi(r,!0)}}static getBlob(...e){if(D0()){const n=e.map(r=>r instanceof oi?r.data_:r);return new oi(nP.apply(null,n))}else{const n=e.map(s=>O0(s)?oP(nr.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new oi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t){let e;try{e=JSON.parse(t)}catch{return null}return XN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function dP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function H6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t,e){return e}class Gt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||hP}}let gc=null;function fP(t){return!O0(t)||t.length<2?t:H6(t)}function q6(){if(gc)return gc;const t=[];t.push(new Gt("bucket")),t.push(new Gt("generation")),t.push(new Gt("metageneration")),t.push(new Gt("name","fullPath",!0));function e(o,s){return fP(s)}const n=new Gt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Gt("size");return i.xform=r,t.push(i),t.push(new Gt("timeCreated")),t.push(new Gt("updated")),t.push(new Gt("md5Hash",null,!0)),t.push(new Gt("cacheControl",null,!0)),t.push(new Gt("contentDisposition",null,!0)),t.push(new Gt("contentEncoding",null,!0)),t.push(new Gt("contentLanguage",null,!0)),t.push(new Gt("contentType",null,!0)),t.push(new Gt("metadata","customMetadata",!0)),gc=t,gc}function pP(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new _n(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function mP(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return pP(r,t),r}function W6(t,e,n){const r=$6(e);return r===null?null:mP(t,r,n)}function gP(t,e,n,r){const i=$6(e);if(i===null||!O0(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const u=t.bucket,h=t.fullPath,f="/b/"+s(u)+"/o/"+s(h),m=U0(f,n,r),v=F6({alt:"media",token:d});return m+v})[0]}function vP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class X6{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t){if(!t)throw M0()}function yP(t,e){function n(r,i){const o=W6(t,i,e);return K6(o!==null),o}return n}function _P(t,e){function n(r,i){const o=W6(t,i,e);return K6(o!==null),gP(o,i,t.host,t._protocol)}return n}function Y6(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=PN():i=NN():n.getStatus()===402?i=RN(t.bucket):n.getStatus()===403?i=LN(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function wP(t){const e=Y6(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=kN(t.path)),o.serverResponse=i.serverResponse,o}return n}function bP(t,e,n){const r=e.fullServerUrl(),i=U0(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new X6(i,o,_P(t,n),s);return l.errorHandler=wP(e),l}function xP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function EP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=xP(null,e)),r}function SP(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const d=EP(e,r,i),u=vP(d,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=oi.getBlob(h,r,f);if(m===null)throw FN();const v={name:d.fullPath},y=U0(o,t.host,t._protocol),E="POST",g=t.maxUploadRetryTime,w=new X6(y,E,yP(t,n),g);return w.urlParams=v,w.headers=s,w.body=m.uploadData(),w.errorHandler=Y6(e),w}class IP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=to.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=to.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=to.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ia("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ia("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ia("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ia("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ia("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class CP extends IP{initXhr(){this.xhr_.responseType="text"}}function G6(){return new CP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this._service=e,n instanceof _n?this._location=n:this._location=_n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new go(e,n)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H6(this._location.path)}get storage(){return this._service}get parent(){const e=uP(this._location.path);if(e===null)return null;const n=new _n(this._location.bucket,e);return new go(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zN(e)}}function AP(t,e,n){t._throwIfRoot("uploadBytes");const r=SP(t.storage,t._location,q6(),new oi(e,!0),n);return t.storage.makeRequestWithTokens(r,G6).then(i=>({metadata:i,ref:t}))}function TP(t){t._throwIfRoot("getDownloadURL");const e=bP(t.storage,t._location,q6());return t.storage.makeRequestWithTokens(e,G6).then(n=>{if(n===null)throw BN();return n})}function kP(t,e){const n=dP(t._location.path,e),r=new _n(t._location.bucket,n);return new go(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){return/^[A-Za-z]+:\/\//.test(t)}function NP(t,e){return new go(t,e)}function Q6(t,e){if(t instanceof V0){const n=t;if(n._bucket==null)throw VN();const r=new go(n,n._bucket);return e!=null?Q6(r,e):r}else return e!==void 0?kP(t,e):t}function PP(t,e){if(e&&RP(e)){if(t instanceof V0)return NP(t,e);throw Sp("To use ref(service, url), the first argument must be a Storage instance.")}else return Q6(t,e)}function Av(t,e){const n=e==null?void 0:e[U6];return n==null?null:_n.makeFromBucketSpec(n,t)}function LP(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:k5(i,t.app.options.projectId))}class V0{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=D6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AN,this._maxUploadRetryTime=TN,this._requests=new Set,i!=null?this._bucket=_n.makeFromBucketSpec(i,this._host):this._bucket=Av(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=Av(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new go(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new $N(V6());{const s=eP(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Tv="@firebase/storage",kv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="storage";function MP(t,e,n){return t=bt(t),AP(t,e,n)}function OP(t){return t=bt(t),TP(t)}function DP(t,e){return t=bt(t),PP(t,e)}function UP(t=z1(),e){t=bt(t);const r=fd(t,J6).getImmediate({identifier:e}),i=C5("storage");return i&&VP(r,...i),r}function VP(t,e,n,r={}){LP(t,e,n,r)}function FP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new V0(n,r,i,e,xo)}function BP(){co(new Ai(J6,FP,"PUBLIC").setMultipleInstances(!0)),or(Tv,kv,""),or(Tv,kv,"esm2017")}BP();const Z6={apiKey:"",authDomain:"family-tree-1efb3.firebaseapp.com",projectId:"family-tree-1efb3",storageBucket:"family-tree-1efb3.appspot.com",messagingSenderId:"86253009427",appId:"1:86253009427:web:0ad04b323ac3f97f429de6",measurementId:"G-P7Q5JJ3JX8"};console.log(Z6);const F0=P5(Z6),vo=dN(F0),jP=UP(F0),jh=IT(F0),zP=async(t,e)=>{let n="";if(console.log("image",e),e){const i=DP(jP,`images/${Date.now()}_${e.name}`);await MP(i,e),n=await OP(i)}const r={id:"",name:t.name,gender:t.gender,img:n||null};t.fid&&t.fid.length&&(r.fid=t.fid),t.mid&&t.mid.length&&(r.mid=t.mid),t.pids&&t.pids.length&&(r.pids=t.pids,Ip(t.pids[0],{pids:[t.id]}));try{const i=await O6(ol(vo,"familyMembers"),r);return t.pids&&t.pids.length&&Ip(t.pids[0],{pids:[i.id]}),{...r,id:i.id}}catch(i){throw console.error("Error adding document: ",i),i}},Ip=async(t,e)=>{try{await SN(S0(vo,"familyMembers",t),e)}catch(n){throw console.error("Error updating document: ",n),n}},$P=async t=>{try{await M6(S0(vo,"familyMembers",t))}catch(e){throw console.error("Error removing document: ",e),e}},HP=async t=>{try{const e=ol(vo,"rootFamilyMembers");(await L6(e)).forEach(r=>{M6(r.ref)}),await O6(ol(vo,"rootFamilyMembers"),{id:t})}catch(e){throw console.error("Error setting root family member: ",e),e}},qP=async()=>{try{return(await L6(ol(vo,"rootFamilyMembers"))).docs.map(e=>e.data())}catch(t){throw console.error("Error getting root family member: ",t),t}};function WP(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function ew(t,e){return new Promise(function(n,r){let i;return XP(t).then(function(o){try{return i=o,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const XP=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const o=new DataView(i);let s=0;if(o.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const l=o.getUint16(s);if(l===65498)break;const c=o.getUint16(s+2);if(l===65505&&o.getUint32(s+4)===1165519206){const d=s+10;let u;switch(o.getUint16(d)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(o.getUint16(d+2,u)!==42)return n("TIFF header contains invalid version");const h=o.getUint32(d+4,u),f=d+h+2+12*o.getUint16(d+h,u);for(let m=d+h+2;m<f;m+=12)if(o.getUint16(m,u)==274){if(o.getUint16(m+2,u)!==3)return n("Orientation data type is invalid");if(o.getUint32(m+4,u)!==1)return n("Orientation data count is invalid");o.setUint16(m+8,1,u);break}return e(i.slice(s,s+2+c))}s+=2+c}return e(new Blob)}),r.readAsArrayBuffer(t)});var Vu={},KP={get exports(){return Vu},set exports(t){Vu=t}};(function(t){var e,n,r={};KP.exports=r,r.parse=function(i,o){for(var s=r.bin.readUshort,l=r.bin.readUint,c=0,d={},u=new Uint8Array(i),h=u.length-4;l(u,h)!=101010256;)h--;c=h,c+=4;var f=s(u,c+=4);s(u,c+=2);var m=l(u,c+=2),v=l(u,c+=4);c+=4,c=v;for(var y=0;y<f;y++){l(u,c),c+=4,c+=4,c+=4,l(u,c+=4),m=l(u,c+=4);var E=l(u,c+=4),g=s(u,c+=4),w=s(u,c+2),_=s(u,c+4);c+=6;var b=l(u,c+=8);c+=4,c+=g+w+_,r._readLocal(u,b,d,m,E,o)}return d},r._readLocal=function(i,o,s,l,c,d){var u=r.bin.readUshort,h=r.bin.readUint;h(i,o),u(i,o+=4),u(i,o+=2);var f=u(i,o+=2);h(i,o+=2),h(i,o+=4),o+=4;var m=u(i,o+=8),v=u(i,o+=2);o+=2;var y=r.bin.readUTF8(i,o,m);if(o+=m,o+=v,d)s[y]={size:c,csize:l};else{var E=new Uint8Array(i.buffer,o);if(f==0)s[y]=new Uint8Array(E.buffer.slice(o,o+l));else{if(f!=8)throw"unknown compression method: "+f;var g=new Uint8Array(c);r.inflateRaw(E,g),s[y]=g}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var s=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[s]=120,l[s+1]=156,s+=2,s=r.F.deflateRaw(i,l,s,o.level);var c=r.adler(i,0,i.length);return l[s+0]=c>>>24&255,l[s+1]=c>>>16&255,l[s+2]=c>>>8&255,l[s+3]=c>>>0&255,new Uint8Array(l.buffer,0,s+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),l=r.F.deflateRaw(i,s,l,o.level);return new Uint8Array(s.buffer,0,l)},r.encode=function(i,o){o==null&&(o=!1);var s=0,l=r.bin.writeUint,c=r.bin.writeUshort,d={};for(var u in i){var h=!r._noNeed(u)&&!o,f=i[u],m=r.crc.crc(f,0,f.length);d[u]={cpr:h,usize:f.length,crc:m,file:h?r.deflateRaw(f):f}}for(var u in d)s+=d[u].file.length+30+46+2*r.bin.sizeUTF8(u);s+=22;var v=new Uint8Array(s),y=0,E=[];for(var u in d){var g=d[u];E.push(y),y=r._writeHeader(v,y,u,g,0)}var w=0,_=y;for(var u in d)g=d[u],E.push(y),y=r._writeHeader(v,y,u,g,1,E[w++]);var b=y-_;return l(v,y,101010256),y+=4,c(v,y+=4,w),c(v,y+=2,w),l(v,y+=2,b),l(v,y+=4,_),y+=4,y+=2,v.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,s,l,c,d){var u=r.bin.writeUint,h=r.bin.writeUshort,f=l.file;return u(i,o,c==0?67324752:33639248),o+=4,c==1&&(o+=2),h(i,o,20),h(i,o+=2,0),h(i,o+=2,l.cpr?8:0),u(i,o+=2,0),u(i,o+=4,l.crc),u(i,o+=4,f.length),u(i,o+=4,l.usize),h(i,o+=4,r.bin.sizeUTF8(s)),h(i,o+=2,0),o+=2,c==1&&(o+=2,o+=2,u(i,o+=6,d),o+=4),o+=r.bin.writeUTF8(i,o,s),c==0&&(i.set(f,o),o+=f.length),o},r.crc={table:function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var s=o,l=0;l<8;l++)1&s?s=3988292384^s>>>1:s>>>=1;i[o]=s}return i}(),update:function(i,o,s,l){for(var c=0;c<l;c++)i=r.crc.table[255&(i^o[s+c])]^i>>>8;return i},crc:function(i,o,s){return 4294967295^r.crc.update(4294967295,i,o,s)}},r.adler=function(i,o,s){for(var l=1,c=0,d=o,u=o+s;d<u;){for(var h=Math.min(d+5552,u);d<h;)c+=l+=i[d++];l%=65521,c%=65521}return c<<16|l},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,s){i[o]=255&s,i[o+1]=s>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,s){i[o]=255&s,i[o+1]=s>>8&255,i[o+2]=s>>16&255,i[o+3]=s>>24&255},readASCII:function(i,o,s){for(var l="",c=0;c<s;c++)l+=String.fromCharCode(i[o+c]);return l},writeASCII:function(i,o,s){for(var l=0;l<s.length;l++)i[o+l]=s.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,s){for(var l,c="",d=0;d<s;d++)c+="%"+r.bin.pad(i[o+d].toString(16));try{l=decodeURIComponent(c)}catch{return r.bin.readASCII(i,o,s)}return l},writeUTF8:function(i,o,s){for(var l=s.length,c=0,d=0;d<l;d++){var u=s.charCodeAt(d);if(!(4294967168&u))i[o+c]=u,c++;else if(!(4294965248&u))i[o+c]=192|u>>6,i[o+c+1]=128|u>>0&63,c+=2;else if(!(4294901760&u))i[o+c]=224|u>>12,i[o+c+1]=128|u>>6&63,i[o+c+2]=128|u>>0&63,c+=3;else{if(4292870144&u)throw"e";i[o+c]=240|u>>18,i[o+c+1]=128|u>>12&63,i[o+c+2]=128|u>>6&63,i[o+c+3]=128|u>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var o=i.length,s=0,l=0;l<o;l++){var c=i.charCodeAt(l);if(!(4294967168&c))s++;else if(!(4294965248&c))s+=2;else if(!(4294901760&c))s+=3;else{if(4292870144&c)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(i,o,s,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],d=r.F.U,u=r.F._goodIndex;r.F._hash;var h=r.F._putsE,f=0,m=s<<3,v=0,y=i.length;if(l==0){for(;f<y;)h(o,m,f+(R=Math.min(65535,y-f))==y?1:0),m=r.F._copyExact(i,f,R,o,m+8),f+=R;return m>>>3}var E=d.lits,g=d.strt,w=d.prev,_=0,b=0,A=0,k=0,C=0,x=0;for(y>2&&(g[x=r.F._hash(i,0)]=0),f=0;f<y;f++){if(C=x,f+1<y-2){x=r.F._hash(i,f+1);var S=f+1&32767;w[S]=g[x],g[x]=S}if(v<=f){(_>14e3||b>26697)&&y-f>100&&(v<f&&(E[_]=f-v,_+=2,v=f),m=r.F._writeBlock(f==y-1||v==y?1:0,E,_,k,i,A,f-A,o,m),_=b=k=0,A=f);var T=0;f<y-2&&(T=r.F._bestMatch(i,f,w,C,Math.min(c[2],y-f),c[3]));var R=T>>>16,N=65535&T;if(T!=0){N=65535&T;var P=u(R=T>>>16,d.of0);d.lhst[257+P]++;var V=u(N,d.df0);d.dhst[V]++,k+=d.exb[P]+d.dxb[V],E[_]=R<<23|f-v,E[_+1]=N<<16|P<<8|V,_+=2,v=f+R}else d.lhst[i[f]]++;b++}}for(A==f&&i.length!=0||(v<f&&(E[_]=f-v,_+=2,v=f),m=r.F._writeBlock(1,E,_,k,i,A,f-A,o,m),_=0,b=0,_=b=k=0,A=f);7&m;)m++;return m>>>3},r.F._bestMatch=function(i,o,s,l,c,d){var u=32767&o,h=s[u],f=u-h+32768&32767;if(h==u||l!=r.F._hash(i,o-f))return 0;for(var m=0,v=0,y=Math.min(32767,o);f<=y&&--d!=0&&h!=u;){if(m==0||i[o+m]==i[o+m-f]){var E=r.F._howLong(i,o,f);if(E>m){if(v=f,(m=E)>=c)break;f+2<E&&(E=f+2);for(var g=0,w=0;w<E-2;w++){var _=o-f+w+32768&32767,b=_-s[_]+32768&32767;b>g&&(g=b,h=_)}}}f+=(u=h)-(h=s[u])+32768&32767}return m<<16|v},r.F._howLong=function(i,o,s){if(i[o]!=i[o-s]||i[o+1]!=i[o+1-s]||i[o+2]!=i[o+2-s])return 0;var l=o,c=Math.min(i.length,o+258);for(o+=3;o<c&&i[o]==i[o-s];)o++;return o-l},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,s,l,c,d,u,h,f){var m,v,y,E,g,w,_,b,A,k=r.F.U,C=r.F._putsF,x=r.F._putsE;k.lhst[256]++,v=(m=r.F.getTrees())[0],y=m[1],E=m[2],g=m[3],w=m[4],_=m[5],b=m[6],A=m[7];var S=32+(f+3&7?8-(f+3&7):0)+(u<<3),T=l+r.F.contSize(k.fltree,k.lhst)+r.F.contSize(k.fdtree,k.dhst),R=l+r.F.contSize(k.ltree,k.lhst)+r.F.contSize(k.dtree,k.dhst);R+=14+3*_+r.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var N=0;N<286;N++)k.lhst[N]=0;for(N=0;N<30;N++)k.dhst[N]=0;for(N=0;N<19;N++)k.ihst[N]=0;var P=S<T&&S<R?0:T<R?1:2;if(C(h,f,i),C(h,f+1,P),f+=3,P==0){for(;7&f;)f++;f=r.F._copyExact(c,d,u,h,f)}else{var V,j;if(P==1&&(V=k.fltree,j=k.fdtree),P==2){r.F.makeCodes(k.ltree,v),r.F.revCodes(k.ltree,v),r.F.makeCodes(k.dtree,y),r.F.revCodes(k.dtree,y),r.F.makeCodes(k.itree,E),r.F.revCodes(k.itree,E),V=k.ltree,j=k.dtree,x(h,f,g-257),x(h,f+=5,w-1),x(h,f+=5,_-4),f+=4;for(var O=0;O<_;O++)x(h,f+3*O,k.itree[1+(k.ordr[O]<<1)]);f+=3*_,f=r.F._codeTiny(b,k.itree,h,f),f=r.F._codeTiny(A,k.itree,h,f)}for(var M=d,F=0;F<s;F+=2){for(var B=o[F],z=B>>>23,X=M+(8388607&B);M<X;)f=r.F._writeLit(c[M++],V,h,f);if(z!=0){var Y=o[F+1],q=Y>>16,K=Y>>8&255,H=255&Y;x(h,f=r.F._writeLit(257+K,V,h,f),z-k.of0[K]),f+=k.exb[K],C(h,f=r.F._writeLit(H,j,h,f),q-k.df0[H]),f+=k.dxb[H],M+=z}}f=r.F._writeLit(256,V,h,f)}return f},r.F._copyExact=function(i,o,s,l,c){var d=c>>>3;return l[d]=s,l[d+1]=s>>>8,l[d+2]=255-l[d],l[d+3]=255-l[d+1],d+=4,l.set(new Uint8Array(i.buffer,o,s),d),c+(s+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),s=r.F._hufTree(i.dhst,i.dtree,15),l=[],c=r.F._lenCodes(i.ltree,l),d=[],u=r.F._lenCodes(i.dtree,d),h=0;h<l.length;h+=2)i.ihst[l[h]]++;for(h=0;h<d.length;h+=2)i.ihst[d[h]]++;for(var f=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[o,s,f,c,u,m,l,d]},r.F.getSecond=function(i){for(var o=[],s=0;s<i.length;s+=2)o.push(i[s+1]);return o},r.F.nonZero=function(i){for(var o="",s=0;s<i.length;s+=2)i[s+1]!=0&&(o+=(s>>1)+",");return o},r.F.contSize=function(i,o){for(var s=0,l=0;l<o.length;l++)s+=o[l]*i[1+(l<<1)];return s},r.F._codeTiny=function(i,o,s,l){for(var c=0;c<i.length;c+=2){var d=i[c],u=i[c+1];l=r.F._writeLit(d,o,s,l);var h=d==16?2:d==17?3:7;d>15&&(r.F._putsE(s,l,u,h),l+=h)}return l},r.F._lenCodes=function(i,o){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var l=0;l<s;l+=2){var c=i[l+1],d=l+3<s?i[l+3]:-1,u=l+5<s?i[l+5]:-1,h=l==0?-1:i[l-1];if(c==0&&d==c&&u==c){for(var f=l+5;f+2<s&&i[f+2]==c;)f+=2;(m=Math.min(f+1-l>>>1,138))<11?o.push(17,m-3):o.push(18,m-11),l+=2*m-2}else if(c==h&&d==c&&u==c){for(f=l+5;f+2<s&&i[f+2]==c;)f+=2;var m=Math.min(f+1-l>>>1,6);o.push(16,m-3),l+=2*m-2}else o.push(c,0)}return s>>>1},r.F._hufTree=function(i,o,s){var l=[],c=i.length,d=o.length,u=0;for(u=0;u<d;u+=2)o[u]=0,o[u+1]=0;for(u=0;u<c;u++)i[u]!=0&&l.push({lit:u,f:i[u]});var h=l.length,f=l.slice(0);if(h==0)return 0;if(h==1){var m=l[0].lit;return f=m==0?1:0,o[1+(m<<1)]=1,o[1+(f<<1)]=1,1}l.sort(function(b,A){return b.f-A.f});var v=l[0],y=l[1],E=0,g=1,w=2;for(l[0]={lit:-1,f:v.f+y.f,l:v,r:y,d:0};g!=h-1;)v=E!=g&&(w==h||l[E].f<l[w].f)?l[E++]:l[w++],y=E!=g&&(w==h||l[E].f<l[w].f)?l[E++]:l[w++],l[g++]={lit:-1,f:v.f+y.f,l:v,r:y};var _=r.F.setDepth(l[g-1],0);for(_>s&&(r.F.restrictDepth(f,s,_),_=s),u=0;u<h;u++)o[1+(f[u].lit<<1)]=f[u].d;return _},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,s){var l=0,c=1<<s-o,d=0;for(i.sort(function(h,f){return f.d==h.d?h.f-f.f:f.d-h.d}),l=0;l<i.length&&i[l].d>o;l++){var u=i[l].d;i[l].d=o,d+=c-(1<<s-u)}for(d>>>=s-o;d>0;)(u=i[l].d)<o?(i[l].d++,d-=1<<o-u-1):l++;for(;l>=0;l--)i[l].d==o&&d<0&&(i[l].d--,d++);d!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var s=0;return o[16|s]<=i&&(s|=16),o[8|s]<=i&&(s|=8),o[4|s]<=i&&(s|=4),o[2|s]<=i&&(s|=2),o[1|s]<=i&&(s|=1),s},r.F._writeLit=function(i,o,s,l){return r.F._putsF(s,l,o[i<<1]),l+o[1+(i<<1)]},r.F.inflate=function(i,o){var s=Uint8Array;if(i[0]==3&&i[1]==0)return o||new s(0);var l=r.F,c=l._bitsF,d=l._bitsE,u=l._decodeTiny,h=l.makeCodes,f=l.codes2map,m=l._get17,v=l.U,y=o==null;y&&(o=new s(i.length>>>2<<3));for(var E,g,w=0,_=0,b=0,A=0,k=0,C=0,x=0,S=0,T=0;w==0;)if(w=c(i,T,1),_=c(i,T+1,2),T+=3,_!=0){if(y&&(o=r.F._check(o,S+(1<<17))),_==1&&(E=v.flmap,g=v.fdmap,C=511,x=31),_==2){b=d(i,T,5)+257,A=d(i,T+5,5)+1,k=d(i,T+10,4)+4,T+=14;for(var R=0;R<38;R+=2)v.itree[R]=0,v.itree[R+1]=0;var N=1;for(R=0;R<k;R++){var P=d(i,T+3*R,3);v.itree[1+(v.ordr[R]<<1)]=P,P>N&&(N=P)}T+=3*k,h(v.itree,N),f(v.itree,N,v.imap),E=v.lmap,g=v.dmap,T=u(v.imap,(1<<N)-1,b+A,i,T,v.ttree);var V=l._copyOut(v.ttree,0,b,v.ltree);C=(1<<V)-1;var j=l._copyOut(v.ttree,b,A,v.dtree);x=(1<<j)-1,h(v.ltree,V),f(v.ltree,V,E),h(v.dtree,j),f(v.dtree,j,g)}for(;;){var O=E[m(i,T)&C];T+=15&O;var M=O>>>4;if(!(M>>>8))o[S++]=M;else{if(M==256)break;var F=S+M-254;if(M>264){var B=v.ldef[M-257];F=S+(B>>>3)+d(i,T,7&B),T+=7&B}var z=g[m(i,T)&x];T+=15&z;var X=z>>>4,Y=v.ddef[X],q=(Y>>>4)+c(i,T,15&Y);for(T+=15&Y,y&&(o=r.F._check(o,S+(1<<17)));S<F;)o[S]=o[S++-q],o[S]=o[S++-q],o[S]=o[S++-q],o[S]=o[S++-q];S=F}}}else{7&T&&(T+=8-(7&T));var K=4+(T>>>3),H=i[K-4]|i[K-3]<<8;y&&(o=r.F._check(o,S+H)),o.set(new s(i.buffer,i.byteOffset+K,H),S),T=K+H<<3,S+=H}return o.length==S?o:o.slice(0,S)},r.F._check=function(i,o){var s=i.length;if(o<=s)return i;var l=new Uint8Array(Math.max(s<<1,o));return l.set(i,0),l},r.F._decodeTiny=function(i,o,s,l,c,d){for(var u=r.F._bitsE,h=r.F._get17,f=0;f<s;){var m=i[h(l,c)&o];c+=15&m;var v=m>>>4;if(v<=15)d[f]=v,f++;else{var y=0,E=0;v==16?(E=3+u(l,c,2),c+=2,y=d[f-1]):v==17?(E=3+u(l,c,3),c+=3):v==18&&(E=11+u(l,c,7),c+=7);for(var g=f+E;f<g;)d[f]=y,f++}}return c},r.F._copyOut=function(i,o,s,l){for(var c=0,d=0,u=l.length>>>1;d<s;){var h=i[d+o];l[d<<1]=0,l[1+(d<<1)]=h,h>c&&(c=h),d++}for(;d<u;)l[d<<1]=0,l[1+(d<<1)]=0,d++;return c},r.F.makeCodes=function(i,o){for(var s,l,c,d,u=r.F.U,h=i.length,f=u.bl_count,m=0;m<=o;m++)f[m]=0;for(m=1;m<h;m+=2)f[i[m]]++;var v=u.next_code;for(s=0,f[0]=0,l=1;l<=o;l++)s=s+f[l-1]<<1,v[l]=s;for(c=0;c<h;c+=2)(d=i[c+1])!=0&&(i[c]=v[d],v[d]++)},r.F.codes2map=function(i,o,s){for(var l=i.length,c=r.F.U.rev15,d=0;d<l;d+=2)if(i[d+1]!=0)for(var u=d>>1,h=i[d+1],f=u<<4|h,m=o-h,v=i[d]<<m,y=v+(1<<m);v!=y;)s[c[v]>>>15-o]=f,v++},r.F.revCodes=function(i,o){for(var s=r.F.U.rev15,l=15-o,c=0;c<i.length;c+=2){var d=i[c]<<o-i[c+1];i[c]=s[d]>>>l}},r.F._putsE=function(i,o,s){s<<=7&o;var l=o>>>3;i[l]|=s,i[l+1]|=s>>>8},r.F._putsF=function(i,o,s){s<<=7&o;var l=o>>>3;i[l]|=s,i[l+1]|=s>>>8,i[l+2]|=s>>>16},r.F._bitsE=function(i,o,s){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<s)-1},r.F._bitsF=function(i,o,s){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<s)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,o=0;o<32768;o++){var s=o;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[o]=(s>>>16|s<<16)>>>17}function l(c,d,u){for(;d--!=0;)c.push(0,u)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),l(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var YP=WP({__proto__:null,default:Vu},[Vu]);const Un=function(){var t={nextZero(u,h){for(;u[h]!=0;)h++;return h},readUshort:(u,h)=>u[h]<<8|u[h+1],writeUshort(u,h,f){u[h]=f>>8&255,u[h+1]=255&f},readUint:(u,h)=>16777216*u[h]+(u[h+1]<<16|u[h+2]<<8|u[h+3]),writeUint(u,h,f){u[h]=f>>24&255,u[h+1]=f>>16&255,u[h+2]=f>>8&255,u[h+3]=255&f},readASCII(u,h,f){let m="";for(let v=0;v<f;v++)m+=String.fromCharCode(u[h+v]);return m},writeASCII(u,h,f){for(let m=0;m<f.length;m++)u[h+m]=f.charCodeAt(m)},readBytes(u,h,f){const m=[];for(let v=0;v<f;v++)m.push(u[h+v]);return m},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,h,f){let m,v="";for(let y=0;y<f;y++)v+=`%${t.pad(u[h+y].toString(16))}`;try{m=decodeURIComponent(v)}catch{return t.readASCII(u,h,f)}return m}};function e(u,h,f,m){const v=h*f,y=o(m),E=Math.ceil(h*y/8),g=new Uint8Array(4*v),w=new Uint32Array(g.buffer),{ctype:_}=m,{depth:b}=m,A=t.readUshort;if(_==6){const B=v<<2;if(b==8)for(var k=0;k<B;k+=4)g[k]=u[k],g[k+1]=u[k+1],g[k+2]=u[k+2],g[k+3]=u[k+3];if(b==16)for(k=0;k<B;k++)g[k]=u[k<<1]}else if(_==2){const B=m.tabs.tRNS;if(B==null){if(b==8)for(k=0;k<v;k++){var C=3*k;w[k]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C]}if(b==16)for(k=0;k<v;k++)C=6*k,w[k]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C]}else{var x=B[0];const z=B[1],X=B[2];if(b==8)for(k=0;k<v;k++){var S=k<<2;C=3*k,w[k]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C],u[C]==x&&u[C+1]==z&&u[C+2]==X&&(g[S+3]=0)}if(b==16)for(k=0;k<v;k++)S=k<<2,C=6*k,w[k]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C],A(u,C)==x&&A(u,C+2)==z&&A(u,C+4)==X&&(g[S+3]=0)}}else if(_==3){const B=m.tabs.PLTE,z=m.tabs.tRNS,X=z?z.length:0;if(b==1)for(var T=0;T<f;T++){var R=T*E,N=T*h;for(k=0;k<h;k++){S=N+k<<2;var P=3*(V=u[R+(k>>3)]>>7-((7&k)<<0)&1);g[S]=B[P],g[S+1]=B[P+1],g[S+2]=B[P+2],g[S+3]=V<X?z[V]:255}}if(b==2)for(T=0;T<f;T++)for(R=T*E,N=T*h,k=0;k<h;k++)S=N+k<<2,P=3*(V=u[R+(k>>2)]>>6-((3&k)<<1)&3),g[S]=B[P],g[S+1]=B[P+1],g[S+2]=B[P+2],g[S+3]=V<X?z[V]:255;if(b==4)for(T=0;T<f;T++)for(R=T*E,N=T*h,k=0;k<h;k++)S=N+k<<2,P=3*(V=u[R+(k>>1)]>>4-((1&k)<<2)&15),g[S]=B[P],g[S+1]=B[P+1],g[S+2]=B[P+2],g[S+3]=V<X?z[V]:255;if(b==8)for(k=0;k<v;k++){var V;S=k<<2,P=3*(V=u[k]),g[S]=B[P],g[S+1]=B[P+1],g[S+2]=B[P+2],g[S+3]=V<X?z[V]:255}}else if(_==4){if(b==8)for(k=0;k<v;k++){S=k<<2;var j=u[O=k<<1];g[S]=j,g[S+1]=j,g[S+2]=j,g[S+3]=u[O+1]}if(b==16)for(k=0;k<v;k++){var O;S=k<<2,j=u[O=k<<2],g[S]=j,g[S+1]=j,g[S+2]=j,g[S+3]=u[O+2]}}else if(_==0)for(x=m.tabs.tRNS?m.tabs.tRNS:-1,T=0;T<f;T++){const B=T*E,z=T*h;if(b==1)for(var M=0;M<h;M++){var F=(j=255*(u[B+(M>>>3)]>>>7-(7&M)&1))==255*x?0:255;w[z+M]=F<<24|j<<16|j<<8|j}else if(b==2)for(M=0;M<h;M++)F=(j=85*(u[B+(M>>>2)]>>>6-((3&M)<<1)&3))==85*x?0:255,w[z+M]=F<<24|j<<16|j<<8|j;else if(b==4)for(M=0;M<h;M++)F=(j=17*(u[B+(M>>>1)]>>>4-((1&M)<<2)&15))==17*x?0:255,w[z+M]=F<<24|j<<16|j<<8|j;else if(b==8)for(M=0;M<h;M++)F=(j=u[B+M])==x?0:255,w[z+M]=F<<24|j<<16|j<<8|j;else if(b==16)for(M=0;M<h;M++)j=u[B+(M<<1)],F=A(u,B+(M<<1))==x?0:255,w[z+M]=F<<24|j<<16|j<<8|j}return g}function n(u,h,f,m){const v=o(u),y=Math.ceil(f*v/8),E=new Uint8Array((y+1+u.interlace)*m);return h=u.tabs.CgBI?i(h,E):r(h,E),u.interlace==0?h=s(h,u,0,f,m):u.interlace==1&&(h=function(w,_){const b=_.width,A=_.height,k=o(_),C=k>>3,x=Math.ceil(b*k/8),S=new Uint8Array(A*x);let T=0;const R=[0,0,4,0,2,0,1],N=[0,4,0,2,0,1,0],P=[8,8,8,4,4,2,2],V=[8,8,4,4,2,2,1];let j=0;for(;j<7;){const M=P[j],F=V[j];let B=0,z=0,X=R[j];for(;X<A;)X+=M,z++;let Y=N[j];for(;Y<b;)Y+=F,B++;const q=Math.ceil(B*k/8);s(w,_,T,B,z);let K=0,H=R[j];for(;H<A;){let te=N[j],Z=T+K*q<<3;for(;te<b;){var O;if(k==1&&(O=(O=w[Z>>3])>>7-(7&Z)&1,S[H*x+(te>>3)]|=O<<7-((7&te)<<0)),k==2&&(O=(O=w[Z>>3])>>6-(7&Z)&3,S[H*x+(te>>2)]|=O<<6-((3&te)<<1)),k==4&&(O=(O=w[Z>>3])>>4-(7&Z)&15,S[H*x+(te>>1)]|=O<<4-((1&te)<<2)),k>=8){const ae=H*x+te*C;for(let ce=0;ce<C;ce++)S[ae+ce]=w[(Z>>3)+ce]}Z+=k,te+=F}K++,H+=M}B*z!=0&&(T+=z*(1+q)),j+=1}return S}(h,u)),h}function r(u,h){return i(new Uint8Array(u.buffer,2,u.length-6),h)}var i=function(){const u={H:{}};return u.H.N=function(h,f){const m=Uint8Array;let v,y,E=0,g=0,w=0,_=0,b=0,A=0,k=0,C=0,x=0;if(h[0]==3&&h[1]==0)return f||new m(0);const S=u.H,T=S.b,R=S.e,N=S.R,P=S.n,V=S.A,j=S.Z,O=S.m,M=f==null;for(M&&(f=new m(h.length>>>2<<5));E==0;)if(E=T(h,x,1),g=T(h,x+1,2),x+=3,g!=0){if(M&&(f=u.H.W(f,C+(1<<17))),g==1&&(v=O.J,y=O.h,A=511,k=31),g==2){w=R(h,x,5)+257,_=R(h,x+5,5)+1,b=R(h,x+10,4)+4,x+=14;let B=1;for(var F=0;F<38;F+=2)O.Q[F]=0,O.Q[F+1]=0;for(F=0;F<b;F++){const Y=R(h,x+3*F,3);O.Q[1+(O.X[F]<<1)]=Y,Y>B&&(B=Y)}x+=3*b,P(O.Q,B),V(O.Q,B,O.u),v=O.w,y=O.d,x=N(O.u,(1<<B)-1,w+_,h,x,O.v);const z=S.V(O.v,0,w,O.C);A=(1<<z)-1;const X=S.V(O.v,w,_,O.D);k=(1<<X)-1,P(O.C,z),V(O.C,z,v),P(O.D,X),V(O.D,X,y)}for(;;){const B=v[j(h,x)&A];x+=15&B;const z=B>>>4;if(!(z>>>8))f[C++]=z;else{if(z==256)break;{let X=C+z-254;if(z>264){const te=O.q[z-257];X=C+(te>>>3)+R(h,x,7&te),x+=7&te}const Y=y[j(h,x)&k];x+=15&Y;const q=Y>>>4,K=O.c[q],H=(K>>>4)+T(h,x,15&K);for(x+=15&K;C<X;)f[C]=f[C++-H],f[C]=f[C++-H],f[C]=f[C++-H],f[C]=f[C++-H];C=X}}}}else{7&x&&(x+=8-(7&x));const B=4+(x>>>3),z=h[B-4]|h[B-3]<<8;M&&(f=u.H.W(f,C+z)),f.set(new m(h.buffer,h.byteOffset+B,z),C),x=B+z<<3,C+=z}return f.length==C?f:f.slice(0,C)},u.H.W=function(h,f){const m=h.length;if(f<=m)return h;const v=new Uint8Array(m<<1);return v.set(h,0),v},u.H.R=function(h,f,m,v,y,E){const g=u.H.e,w=u.H.Z;let _=0;for(;_<m;){const b=h[w(v,y)&f];y+=15&b;const A=b>>>4;if(A<=15)E[_]=A,_++;else{let k=0,C=0;A==16?(C=3+g(v,y,2),y+=2,k=E[_-1]):A==17?(C=3+g(v,y,3),y+=3):A==18&&(C=11+g(v,y,7),y+=7);const x=_+C;for(;_<x;)E[_]=k,_++}}return y},u.H.V=function(h,f,m,v){let y=0,E=0;const g=v.length>>>1;for(;E<m;){const w=h[E+f];v[E<<1]=0,v[1+(E<<1)]=w,w>y&&(y=w),E++}for(;E<g;)v[E<<1]=0,v[1+(E<<1)]=0,E++;return y},u.H.n=function(h,f){const m=u.H.m,v=h.length;let y,E,g,w;const _=m.j;for(var b=0;b<=f;b++)_[b]=0;for(b=1;b<v;b+=2)_[h[b]]++;const A=m.K;for(y=0,_[0]=0,E=1;E<=f;E++)y=y+_[E-1]<<1,A[E]=y;for(g=0;g<v;g+=2)w=h[g+1],w!=0&&(h[g]=A[w],A[w]++)},u.H.A=function(h,f,m){const v=h.length,y=u.H.m.r;for(let E=0;E<v;E+=2)if(h[E+1]!=0){const g=E>>1,w=h[E+1],_=g<<4|w,b=f-w;let A=h[E]<<b;const k=A+(1<<b);for(;A!=k;)m[y[A]>>>15-f]=_,A++}},u.H.l=function(h,f){const m=u.H.m.r,v=15-f;for(let y=0;y<h.length;y+=2){const E=h[y]<<f-h[y+1];h[y]=m[E]>>>v}},u.H.M=function(h,f,m){m<<=7&f;const v=f>>>3;h[v]|=m,h[v+1]|=m>>>8},u.H.I=function(h,f,m){m<<=7&f;const v=f>>>3;h[v]|=m,h[v+1]|=m>>>8,h[v+2]|=m>>>16},u.H.e=function(h,f,m){return(h[f>>>3]|h[1+(f>>>3)]<<8)>>>(7&f)&(1<<m)-1},u.H.b=function(h,f,m){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16)>>>(7&f)&(1<<m)-1},u.H.Z=function(h,f){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(h,f){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16|h[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=function(){const h=Uint16Array,f=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new h(65536),g:new h(32768)}}(),function(){const h=u.H.m;for(var f=0;f<32768;f++){let v=f;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,h.r[f]=(v>>>16|v<<16)>>>17}function m(v,y,E){for(;y--!=0;)v.push(0,E)}for(f=0;f<32;f++)h.q[f]=h.S[f]<<3|h.T[f],h.c[f]=h.p[f]<<4|h.z[f];m(h._,144,8),m(h._,112,9),m(h._,24,7),m(h._,8,8),u.H.n(h._,9),u.H.A(h._,9,h.J),u.H.l(h._,9),m(h.$,32,5),u.H.n(h.$,5),u.H.A(h.$,5,h.h),u.H.l(h.$,5),m(h.Q,19,0),m(h.C,286,0),m(h.D,30,0),m(h.v,320,0)}(),u.H.N}();function o(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function s(u,h,f,m,v){let y=o(h);const E=Math.ceil(m*y/8);let g,w;y=Math.ceil(y/8);let _=u[f],b=0;if(_>1&&(u[f]=[0,0,1][_-2]),_==3)for(b=y;b<E;b++)u[b+1]=u[b+1]+(u[b+1-y]>>>1)&255;for(let A=0;A<v;A++)if(g=f+A*E,w=g+A+1,_=u[w-1],b=0,_==0)for(;b<E;b++)u[g+b]=u[w+b];else if(_==1){for(;b<y;b++)u[g+b]=u[w+b];for(;b<E;b++)u[g+b]=u[w+b]+u[g+b-y]}else if(_==2)for(;b<E;b++)u[g+b]=u[w+b]+u[g+b-E];else if(_==3){for(;b<y;b++)u[g+b]=u[w+b]+(u[g+b-E]>>>1);for(;b<E;b++)u[g+b]=u[w+b]+(u[g+b-E]+u[g+b-y]>>>1)}else{for(;b<y;b++)u[g+b]=u[w+b]+l(0,u[g+b-E],0);for(;b<E;b++)u[g+b]=u[w+b]+l(u[g+b-y],u[g+b-E],u[g+b-y-E])}return u}function l(u,h,f){const m=u+h-f,v=m-u,y=m-h,E=m-f;return v*v<=y*y&&v*v<=E*E?u:y*y<=E*E?h:f}function c(u,h,f){f.width=t.readUint(u,h),h+=4,f.height=t.readUint(u,h),h+=4,f.depth=u[h],h++,f.ctype=u[h],h++,f.compress=u[h],h++,f.filter=u[h],h++,f.interlace=u[h],h++}function d(u,h,f,m,v,y,E,g,w){const _=Math.min(h,v),b=Math.min(f,y);let A=0,k=0;for(let j=0;j<b;j++)for(let O=0;O<_;O++)if(E>=0&&g>=0?(A=j*h+O<<2,k=(g+j)*v+E+O<<2):(A=(-g+j)*h-E+O<<2,k=j*v+O<<2),w==0)m[k]=u[A],m[k+1]=u[A+1],m[k+2]=u[A+2],m[k+3]=u[A+3];else if(w==1){var C=u[A+3]*.00392156862745098,x=u[A]*C,S=u[A+1]*C,T=u[A+2]*C,R=m[k+3]*(1/255),N=m[k]*R,P=m[k+1]*R,V=m[k+2]*R;const M=1-C,F=C+R*M,B=F==0?0:1/F;m[k+3]=255*F,m[k+0]=(x+N*M)*B,m[k+1]=(S+P*M)*B,m[k+2]=(T+V*M)*B}else if(w==2)C=u[A+3],x=u[A],S=u[A+1],T=u[A+2],R=m[k+3],N=m[k],P=m[k+1],V=m[k+2],C==R&&x==N&&S==P&&T==V?(m[k]=0,m[k+1]=0,m[k+2]=0,m[k+3]=0):(m[k]=x,m[k+1]=S,m[k+2]=T,m[k+3]=C);else if(w==3){if(C=u[A+3],x=u[A],S=u[A+1],T=u[A+2],R=m[k+3],N=m[k],P=m[k+1],V=m[k+2],C==R&&x==N&&S==P&&T==V)continue;if(C<220&&R>20)return!1}return!0}return{decode:function(h){const f=new Uint8Array(h);let m=8;const v=t,y=v.readUshort,E=v.readUint,g={tabs:{},frames:[]},w=new Uint8Array(f.length);let _,b=0,A=0;const k=[137,80,78,71,13,10,26,10];for(var C=0;C<8;C++)if(f[C]!=k[C])throw"The input is not a PNG file!";for(;m<f.length;){const j=v.readUint(f,m);m+=4;const O=v.readASCII(f,m,4);if(m+=4,O=="IHDR")c(f,m,g);else if(O=="iCCP"){for(var x=m;f[x]!=0;)x++;v.readASCII(f,m,x-m),f[x+1];const M=f.slice(x+2,m+j);let F=null;try{F=r(M)}catch{F=i(M)}g.tabs[O]=F}else if(O=="CgBI")g.tabs[O]=f.slice(m,m+4);else if(O=="IDAT"){for(C=0;C<j;C++)w[b+C]=f[m+C];b+=j}else if(O=="acTL")g.tabs[O]={num_frames:E(f,m),num_plays:E(f,m+4)},_=new Uint8Array(f.length);else if(O=="fcTL"){A!=0&&((V=g.frames[g.frames.length-1]).data=n(g,_.slice(0,A),V.rect.width,V.rect.height),A=0);const M={x:E(f,m+12),y:E(f,m+16),width:E(f,m+4),height:E(f,m+8)};let F=y(f,m+22);F=y(f,m+20)/(F==0?100:F);const B={rect:M,delay:Math.round(1e3*F),dispose:f[m+24],blend:f[m+25]};g.frames.push(B)}else if(O=="fdAT"){for(C=0;C<j-4;C++)_[A+C]=f[m+C+4];A+=j-4}else if(O=="pHYs")g.tabs[O]=[v.readUint(f,m),v.readUint(f,m+4),f[m+8]];else if(O=="cHRM")for(g.tabs[O]=[],C=0;C<8;C++)g.tabs[O].push(v.readUint(f,m+4*C));else if(O=="tEXt"||O=="zTXt"){g.tabs[O]==null&&(g.tabs[O]={});var S=v.nextZero(f,m),T=v.readASCII(f,m,S-m),R=m+j-S-1;if(O=="tEXt")P=v.readASCII(f,S+1,R);else{var N=r(f.slice(S+2,S+2+R));P=v.readUTF8(N,0,N.length)}g.tabs[O][T]=P}else if(O=="iTXt"){g.tabs[O]==null&&(g.tabs[O]={}),S=0,x=m,S=v.nextZero(f,x),T=v.readASCII(f,x,S-x);const M=f[x=S+1];var P;f[x+1],x+=2,S=v.nextZero(f,x),v.readASCII(f,x,S-x),x=S+1,S=v.nextZero(f,x),v.readUTF8(f,x,S-x),R=j-((x=S+1)-m),M==0?P=v.readUTF8(f,x,R):(N=r(f.slice(x,x+R)),P=v.readUTF8(N,0,N.length)),g.tabs[O][T]=P}else if(O=="PLTE")g.tabs[O]=v.readBytes(f,m,j);else if(O=="hIST"){const M=g.tabs.PLTE.length/3;for(g.tabs[O]=[],C=0;C<M;C++)g.tabs[O].push(y(f,m+2*C))}else if(O=="tRNS")g.ctype==3?g.tabs[O]=v.readBytes(f,m,j):g.ctype==0?g.tabs[O]=y(f,m):g.ctype==2&&(g.tabs[O]=[y(f,m),y(f,m+2),y(f,m+4)]);else if(O=="gAMA")g.tabs[O]=v.readUint(f,m)/1e5;else if(O=="sRGB")g.tabs[O]=f[m];else if(O=="bKGD")g.ctype==0||g.ctype==4?g.tabs[O]=[y(f,m)]:g.ctype==2||g.ctype==6?g.tabs[O]=[y(f,m),y(f,m+2),y(f,m+4)]:g.ctype==3&&(g.tabs[O]=f[m]);else if(O=="IEND")break;m+=j,v.readUint(f,m),m+=4}var V;return A!=0&&((V=g.frames[g.frames.length-1]).data=n(g,_.slice(0,A),V.rect.width,V.rect.height)),g.data=n(g,w,g.width,g.height),delete g.compress,delete g.interlace,delete g.filter,g},toRGBA8:function(h){const f=h.width,m=h.height;if(h.tabs.acTL==null)return[e(h.data,f,m,h).buffer];const v=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const y=f*m*4,E=new Uint8Array(y),g=new Uint8Array(y),w=new Uint8Array(y);for(let b=0;b<h.frames.length;b++){const A=h.frames[b],k=A.rect.x,C=A.rect.y,x=A.rect.width,S=A.rect.height,T=e(A.data,x,S,h);if(b!=0)for(var _=0;_<y;_++)w[_]=E[_];if(A.blend==0?d(T,x,S,E,f,m,k,C,0):A.blend==1&&d(T,x,S,E,f,m,k,C,1),v.push(E.buffer.slice(0)),A.dispose!=0){if(A.dispose==1)d(g,x,S,E,f,m,k,C,0);else if(A.dispose==2)for(_=0;_<y;_++)E[_]=w[_]}}return v},_paeth:l,_copyTile:d,_bin:t}}();(function(){const{_copyTile:t}=Un,{_bin:e}=Un,n=Un._paeth;var r={table:function(){const x=new Uint32Array(256);for(let S=0;S<256;S++){let T=S;for(let R=0;R<8;R++)1&T?T=3988292384^T>>>1:T>>>=1;x[S]=T}return x}(),update(x,S,T,R){for(let N=0;N<R;N++)x=r.table[255&(x^S[T+N])]^x>>>8;return x},crc:(x,S,T)=>4294967295^r.update(4294967295,x,S,T)};function i(x,S,T,R){S[T]+=x[0]*R>>4,S[T+1]+=x[1]*R>>4,S[T+2]+=x[2]*R>>4,S[T+3]+=x[3]*R>>4}function o(x){return Math.max(0,Math.min(255,x))}function s(x,S){const T=x[0]-S[0],R=x[1]-S[1],N=x[2]-S[2],P=x[3]-S[3];return T*T+R*R+N*N+P*P}function l(x,S,T,R,N,P,V){V==null&&(V=1);const j=R.length,O=[];for(var M=0;M<j;M++){const H=R[M];O.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(M=0;M<j;M++){let H=4294967295;for(var F=0,B=0;B<j;B++){var z=s(O[M],O[B]);B!=M&&z<H&&(H=z,F=B)}}const X=new Uint32Array(N.buffer),Y=new Int16Array(S*T*4),q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<q.length;M++)q[M]=255*((q[M]+.5)/16-.5);for(let H=0;H<T;H++)for(let te=0;te<S;te++){var K;M=4*(H*S+te),V!=2?K=[o(x[M]+Y[M]),o(x[M+1]+Y[M+1]),o(x[M+2]+Y[M+2]),o(x[M+3]+Y[M+3])]:(z=q[4*(3&H)+(3&te)],K=[o(x[M]+z),o(x[M+1]+z),o(x[M+2]+z),o(x[M+3]+z)]),F=0;let Z=16777215;for(B=0;B<j;B++){const oe=s(K,O[B]);oe<Z&&(Z=oe,F=B)}const ae=O[F],ce=[K[0]-ae[0],K[1]-ae[1],K[2]-ae[2],K[3]-ae[3]];V==1&&(te!=S-1&&i(ce,Y,M+4,7),H!=T-1&&(te!=0&&i(ce,Y,M+4*S-4,3),i(ce,Y,M+4*S,5),te!=S-1&&i(ce,Y,M+4*S+4,1))),P[M>>2]=F,X[M>>2]=R[F]}}function c(x,S,T,R,N){N==null&&(N={});const{crc:P}=r,V=e.writeUint,j=e.writeUshort,O=e.writeASCII;let M=8;const F=x.frames.length>1;let B,z=!1,X=33+(F?20:0);if(N.sRGB!=null&&(X+=13),N.pHYs!=null&&(X+=21),N.iCCP!=null&&(B=pako.deflate(N.iCCP),X+=21+B.length+4),x.ctype==3){for(var Y=x.plte.length,q=0;q<Y;q++)x.plte[q]>>>24!=255&&(z=!0);X+=8+3*Y+4+(z?8+1*Y+4:0)}for(var K=0;K<x.frames.length;K++)F&&(X+=38),X+=(ae=x.frames[K]).cimg.length+12,K!=0&&(X+=4);X+=12;const H=new Uint8Array(X),te=[137,80,78,71,13,10,26,10];for(q=0;q<8;q++)H[q]=te[q];if(V(H,M,13),M+=4,O(H,M,"IHDR"),M+=4,V(H,M,S),M+=4,V(H,M,T),M+=4,H[M]=x.depth,M++,H[M]=x.ctype,M++,H[M]=0,M++,H[M]=0,M++,H[M]=0,M++,V(H,M,P(H,M-17,17)),M+=4,N.sRGB!=null&&(V(H,M,1),M+=4,O(H,M,"sRGB"),M+=4,H[M]=N.sRGB,M++,V(H,M,P(H,M-5,5)),M+=4),N.iCCP!=null){const ce=13+B.length;V(H,M,ce),M+=4,O(H,M,"iCCP"),M+=4,O(H,M,"ICC profile"),M+=11,M+=2,H.set(B,M),M+=B.length,V(H,M,P(H,M-(ce+4),ce+4)),M+=4}if(N.pHYs!=null&&(V(H,M,9),M+=4,O(H,M,"pHYs"),M+=4,V(H,M,N.pHYs[0]),M+=4,V(H,M,N.pHYs[1]),M+=4,H[M]=N.pHYs[2],M++,V(H,M,P(H,M-13,13)),M+=4),F&&(V(H,M,8),M+=4,O(H,M,"acTL"),M+=4,V(H,M,x.frames.length),M+=4,V(H,M,N.loop!=null?N.loop:0),M+=4,V(H,M,P(H,M-12,12)),M+=4),x.ctype==3){for(V(H,M,3*(Y=x.plte.length)),M+=4,O(H,M,"PLTE"),M+=4,q=0;q<Y;q++){const ce=3*q,oe=x.plte[q],ie=255&oe,re=oe>>>8&255,we=oe>>>16&255;H[M+ce+0]=ie,H[M+ce+1]=re,H[M+ce+2]=we}if(M+=3*Y,V(H,M,P(H,M-3*Y-4,3*Y+4)),M+=4,z){for(V(H,M,Y),M+=4,O(H,M,"tRNS"),M+=4,q=0;q<Y;q++)H[M+q]=x.plte[q]>>>24&255;M+=Y,V(H,M,P(H,M-Y-4,Y+4)),M+=4}}let Z=0;for(K=0;K<x.frames.length;K++){var ae=x.frames[K];F&&(V(H,M,26),M+=4,O(H,M,"fcTL"),M+=4,V(H,M,Z++),M+=4,V(H,M,ae.rect.width),M+=4,V(H,M,ae.rect.height),M+=4,V(H,M,ae.rect.x),M+=4,V(H,M,ae.rect.y),M+=4,j(H,M,R[K]),M+=2,j(H,M,1e3),M+=2,H[M]=ae.dispose,M++,H[M]=ae.blend,M++,V(H,M,P(H,M-30,30)),M+=4);const ce=ae.cimg;V(H,M,(Y=ce.length)+(K==0?0:4)),M+=4;const oe=M;O(H,M,K==0?"IDAT":"fdAT"),M+=4,K!=0&&(V(H,M,Z++),M+=4),H.set(ce,M),M+=Y,V(H,M,P(H,oe,M-oe)),M+=4}return V(H,M,0),M+=4,O(H,M,"IEND"),M+=4,V(H,M,P(H,M-4,4)),M+=4,H.buffer}function d(x,S,T){for(let R=0;R<x.frames.length;R++){const N=x.frames[R];N.rect.width;const P=N.rect.height,V=new Uint8Array(P*N.bpl+P);N.cimg=m(N.img,P,N.bpp,N.bpl,V,S,T)}}function u(x,S,T,R,N){const P=N[0],V=N[1],j=N[2],O=N[3],M=N[4],F=N[5];let B=6,z=8,X=255;for(var Y=0;Y<x.length;Y++){const Me=new Uint8Array(x[Y]);for(var q=Me.length,K=0;K<q;K+=4)X&=Me[K+3]}const H=X!=255,te=function(Ee,Se,de,Te,ue,Ke){const Ne=[];for(var Pe=0;Pe<Ee.length;Pe++){const We=new Uint8Array(Ee[Pe]),pe=new Uint32Array(We.buffer);var at;let He=0,pt=0,mt=Se,gt=de,dn=Te?1:0;if(Pe!=0){const Ds=Ke||Te||Pe==1||Ne[Pe-2].dispose!=0?1:2;let Mn=0,zr=1e9;for(let Ze=0;Ze<Ds;Ze++){var be=new Uint8Array(Ee[Pe-1-Ze]);const hn=new Uint32Array(Ee[Pe-1-Ze]);let Cn=Se,An=de,tn=-1,$r=-1;for(let Yn=0;Yn<de;Yn++)for(let fn=0;fn<Se;fn++)pe[Oe=Yn*Se+fn]!=hn[Oe]&&(fn<Cn&&(Cn=fn),fn>tn&&(tn=fn),Yn<An&&(An=Yn),Yn>$r&&($r=Yn));tn==-1&&(Cn=An=tn=$r=0),ue&&((1&Cn)==1&&Cn--,(1&An)==1&&An--);const Ui=(tn-Cn+1)*($r-An+1);Ui<zr&&(zr=Ui,Mn=Ze,He=Cn,pt=An,mt=tn-Cn+1,gt=$r-An+1)}be=new Uint8Array(Ee[Pe-1-Mn]),Mn==1&&(Ne[Pe-1].dispose=2),at=new Uint8Array(mt*gt*4),t(be,Se,de,at,mt,gt,-He,-pt,0),dn=t(We,Se,de,at,mt,gt,-He,-pt,3)?1:0,dn==1?f(We,Se,de,at,{x:He,y:pt,width:mt,height:gt}):t(We,Se,de,at,mt,gt,-He,-pt,0)}else at=We.slice(0);Ne.push({rect:{x:He,y:pt,width:mt,height:gt},img:at,blend:dn,dispose:0})}if(Te)for(Pe=0;Pe<Ne.length;Pe++){if((Ue=Ne[Pe]).blend==1)continue;const We=Ue.rect,pe=Ne[Pe-1].rect,He=Math.min(We.x,pe.x),pt=Math.min(We.y,pe.y),mt={x:He,y:pt,width:Math.max(We.x+We.width,pe.x+pe.width)-He,height:Math.max(We.y+We.height,pe.y+pe.height)-pt};Ne[Pe-1].dispose=1,Pe-1!=0&&h(Ee,Se,de,Ne,Pe-1,mt,ue),h(Ee,Se,de,Ne,Pe,mt,ue)}let Ie=0;if(Ee.length!=1)for(var Oe=0;Oe<Ne.length;Oe++){var Ue;Ie+=(Ue=Ne[Oe]).rect.width*Ue.rect.height}return Ne}(x,S,T,P,V,j),Z={},ae=[],ce=[];if(R!=0){const Me=[];for(K=0;K<te.length;K++)Me.push(te[K].img.buffer);const Ee=function(ue){let Ke=0;for(var Ne=0;Ne<ue.length;Ne++)Ke+=ue[Ne].byteLength;const Pe=new Uint8Array(Ke);let at=0;for(Ne=0;Ne<ue.length;Ne++){const be=new Uint8Array(ue[Ne]),Ie=be.length;for(let Oe=0;Oe<Ie;Oe+=4){let Ue=be[Oe],We=be[Oe+1],pe=be[Oe+2];const He=be[Oe+3];He==0&&(Ue=We=pe=0),Pe[at+Oe]=Ue,Pe[at+Oe+1]=We,Pe[at+Oe+2]=pe,Pe[at+Oe+3]=He}at+=Ie}return Pe.buffer}(Me),Se=y(Ee,R);for(K=0;K<Se.plte.length;K++)ae.push(Se.plte[K].est.rgba);let de=0;for(K=0;K<te.length;K++){const Te=(ie=te[K]).img.length;var oe=new Uint8Array(Se.inds.buffer,de>>2,Te>>2);ce.push(oe);const ue=new Uint8Array(Se.abuf,de,Te);F&&l(ie.img,ie.rect.width,ie.rect.height,ae,ue,oe),ie.img.set(ue),de+=Te}}else for(Y=0;Y<te.length;Y++){var ie=te[Y];const Me=new Uint32Array(ie.img.buffer);var re=ie.rect.width;for(q=Me.length,oe=new Uint8Array(q),ce.push(oe),K=0;K<q;K++){const Ee=Me[K];if(K!=0&&Ee==Me[K-1])oe[K]=oe[K-1];else if(K>re&&Ee==Me[K-re])oe[K]=oe[K-re];else{let Se=Z[Ee];if(Se==null&&(Z[Ee]=Se=ae.length,ae.push(Ee),ae.length>=300))break;oe[K]=Se}}}const we=ae.length;for(we<=256&&M==0&&(z=we<=2?1:we<=4?2:we<=16?4:8,z=Math.max(z,O)),Y=0;Y<te.length;Y++){(ie=te[Y]).rect.x,ie.rect.y,re=ie.rect.width;const Me=ie.rect.height;let Ee=ie.img;new Uint32Array(Ee.buffer);let Se=4*re,de=4;if(we<=256&&M==0){Se=Math.ceil(z*re/8);var Ae=new Uint8Array(Se*Me);const Te=ce[Y];for(let ue=0;ue<Me;ue++){K=ue*Se;const Ke=ue*re;if(z==8)for(var ve=0;ve<re;ve++)Ae[K+ve]=Te[Ke+ve];else if(z==4)for(ve=0;ve<re;ve++)Ae[K+(ve>>1)]|=Te[Ke+ve]<<4-4*(1&ve);else if(z==2)for(ve=0;ve<re;ve++)Ae[K+(ve>>2)]|=Te[Ke+ve]<<6-2*(3&ve);else if(z==1)for(ve=0;ve<re;ve++)Ae[K+(ve>>3)]|=Te[Ke+ve]<<7-1*(7&ve)}Ee=Ae,B=3,de=1}else if(H==0&&te.length==1){Ae=new Uint8Array(re*Me*3);const Te=re*Me;for(K=0;K<Te;K++){const ue=3*K,Ke=4*K;Ae[ue]=Ee[Ke],Ae[ue+1]=Ee[Ke+1],Ae[ue+2]=Ee[Ke+2]}Ee=Ae,B=2,de=3,Se=3*re}ie.img=Ee,ie.bpl=Se,ie.bpp=de}return{ctype:B,depth:z,plte:ae,frames:te}}function h(x,S,T,R,N,P,V){const j=Uint8Array,O=Uint32Array,M=new j(x[N-1]),F=new O(x[N-1]),B=N+1<x.length?new j(x[N+1]):null,z=new j(x[N]),X=new O(z.buffer);let Y=S,q=T,K=-1,H=-1;for(let Z=0;Z<P.height;Z++)for(let ae=0;ae<P.width;ae++){const ce=P.x+ae,oe=P.y+Z,ie=oe*S+ce,re=X[ie];re==0||R[N-1].dispose==0&&F[ie]==re&&(B==null||B[4*ie+3]!=0)||(ce<Y&&(Y=ce),ce>K&&(K=ce),oe<q&&(q=oe),oe>H&&(H=oe))}K==-1&&(Y=q=K=H=0),V&&((1&Y)==1&&Y--,(1&q)==1&&q--),P={x:Y,y:q,width:K-Y+1,height:H-q+1};const te=R[N];te.rect=P,te.blend=1,te.img=new Uint8Array(P.width*P.height*4),R[N-1].dispose==0?(t(M,S,T,te.img,P.width,P.height,-P.x,-P.y,0),f(z,S,T,te.img,P)):t(z,S,T,te.img,P.width,P.height,-P.x,-P.y,0)}function f(x,S,T,R,N){t(x,S,T,R,N.width,N.height,-N.x,-N.y,2)}function m(x,S,T,R,N,P,V){const j=[];let O,M=[0,1,2,3,4];P!=-1?M=[P]:(S*R>5e5||T==1)&&(M=[0]),V&&(O={level:0});const F=YP;for(var B=0;B<M.length;B++){for(let Y=0;Y<S;Y++)v(N,x,Y,R,T,M[B]);j.push(F.deflate(N,O))}let z,X=1e9;for(B=0;B<j.length;B++)j[B].length<X&&(z=B,X=j[B].length);return j[z]}function v(x,S,T,R,N,P){const V=T*R;let j=V+T;if(x[j]=P,j++,P==0)if(R<500)for(var O=0;O<R;O++)x[j+O]=S[V+O];else x.set(new Uint8Array(S.buffer,V,R),j);else if(P==1){for(O=0;O<N;O++)x[j+O]=S[V+O];for(O=N;O<R;O++)x[j+O]=S[V+O]-S[V+O-N]+256&255}else if(T==0){for(O=0;O<N;O++)x[j+O]=S[V+O];if(P==2)for(O=N;O<R;O++)x[j+O]=S[V+O];if(P==3)for(O=N;O<R;O++)x[j+O]=S[V+O]-(S[V+O-N]>>1)+256&255;if(P==4)for(O=N;O<R;O++)x[j+O]=S[V+O]-n(S[V+O-N],0,0)+256&255}else{if(P==2)for(O=0;O<R;O++)x[j+O]=S[V+O]+256-S[V+O-R]&255;if(P==3){for(O=0;O<N;O++)x[j+O]=S[V+O]+256-(S[V+O-R]>>1)&255;for(O=N;O<R;O++)x[j+O]=S[V+O]+256-(S[V+O-R]+S[V+O-N]>>1)&255}if(P==4){for(O=0;O<N;O++)x[j+O]=S[V+O]+256-n(0,S[V+O-R],0)&255;for(O=N;O<R;O++)x[j+O]=S[V+O]+256-n(S[V+O-N],S[V+O-R],S[V+O-N-R])&255}}}function y(x,S){const T=new Uint8Array(x),R=T.slice(0),N=new Uint32Array(R.buffer),P=E(R,S),V=P[0],j=P[1],O=T.length,M=new Uint8Array(O>>2);let F;if(T.length<2e7)for(var B=0;B<O;B+=4)F=g(V,z=T[B]*(1/255),X=T[B+1]*(1/255),Y=T[B+2]*(1/255),q=T[B+3]*(1/255)),M[B>>2]=F.ind,N[B>>2]=F.est.rgba;else for(B=0;B<O;B+=4){var z=T[B]*.00392156862745098,X=T[B+1]*(1/255),Y=T[B+2]*(1/255),q=T[B+3]*(1/255);for(F=V;F.left;)F=w(F.est,z,X,Y,q)<=0?F.left:F.right;M[B>>2]=F.ind,N[B>>2]=F.est.rgba}return{abuf:R.buffer,inds:M,plte:j}}function E(x,S,T){T==null&&(T=1e-4);const R=new Uint32Array(x.buffer),N={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};N.bst=A(x,N.i0,N.i1),N.est=k(N.bst);const P=[N];for(;P.length<S;){let j=0,O=0;for(var V=0;V<P.length;V++)P[V].est.L>j&&(j=P[V].est.L,O=V);if(j<T)break;const M=P[O],F=_(x,R,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=F||M.i1<=F){M.est.L=0;continue}const B={i0:M.i0,i1:F,bst:null,est:null,tdst:0,left:null,right:null};B.bst=A(x,B.i0,B.i1),B.est=k(B.bst);const z={i0:F,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:M.bst.N-B.bst.N},V=0;V<16;V++)z.bst.R[V]=M.bst.R[V]-B.bst.R[V];for(V=0;V<4;V++)z.bst.m[V]=M.bst.m[V]-B.bst.m[V];z.est=k(z.bst),M.left=B,M.right=z,P[O]=B,P.push(z)}for(P.sort((j,O)=>O.bst.N-j.bst.N),V=0;V<P.length;V++)P[V].ind=V;return[N,P]}function g(x,S,T,R,N){if(x.left==null)return x.tdst=function(B,z,X,Y,q){const K=z-B[0],H=X-B[1],te=Y-B[2],Z=q-B[3];return K*K+H*H+te*te+Z*Z}(x.est.q,S,T,R,N),x;const P=w(x.est,S,T,R,N);let V=x.left,j=x.right;P>0&&(V=x.right,j=x.left);const O=g(V,S,T,R,N);if(O.tdst<=P*P)return O;const M=g(j,S,T,R,N);return M.tdst<O.tdst?M:O}function w(x,S,T,R,N){const{e:P}=x;return P[0]*S+P[1]*T+P[2]*R+P[3]*N-x.eMq}function _(x,S,T,R,N,P){for(R-=4;T<R;){for(;b(x,T,N)<=P;)T+=4;for(;b(x,R,N)>P;)R-=4;if(T>=R)break;const V=S[T>>2];S[T>>2]=S[R>>2],S[R>>2]=V,T+=4,R-=4}for(;b(x,T,N)>P;)T-=4;return T+4}function b(x,S,T){return x[S]*T[0]+x[S+1]*T[1]+x[S+2]*T[2]+x[S+3]*T[3]}function A(x,S,T){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[0,0,0,0],P=T-S>>2;for(let V=S;V<T;V+=4){const j=x[V]*.00392156862745098,O=x[V+1]*(1/255),M=x[V+2]*(1/255),F=x[V+3]*(1/255);N[0]+=j,N[1]+=O,N[2]+=M,N[3]+=F,R[0]+=j*j,R[1]+=j*O,R[2]+=j*M,R[3]+=j*F,R[5]+=O*O,R[6]+=O*M,R[7]+=O*F,R[10]+=M*M,R[11]+=M*F,R[15]+=F*F}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:N,N:P}}function k(x){const{R:S}=x,{m:T}=x,{N:R}=x,N=T[0],P=T[1],V=T[2],j=T[3],O=R==0?0:1/R,M=[S[0]-N*N*O,S[1]-N*P*O,S[2]-N*V*O,S[3]-N*j*O,S[4]-P*N*O,S[5]-P*P*O,S[6]-P*V*O,S[7]-P*j*O,S[8]-V*N*O,S[9]-V*P*O,S[10]-V*V*O,S[11]-V*j*O,S[12]-j*N*O,S[13]-j*P*O,S[14]-j*V*O,S[15]-j*j*O],F=M,B=C;let z=[Math.random(),Math.random(),Math.random(),Math.random()],X=0,Y=0;if(R!=0)for(let K=0;K<16&&(z=B.multVec(F,z),Y=Math.sqrt(B.dot(z,z)),z=B.sml(1/Y,z),!(K!=0&&Math.abs(Y-X)<1e-9));K++)X=Y;const q=[N*O,P*O,V*O,j*O];return{Cov:M,q,e:z,L:X,eMq255:B.dot(B.sml(255,q),z),eMq:B.dot(z,q),rgba:(Math.round(255*q[3])<<24|Math.round(255*q[2])<<16|Math.round(255*q[1])<<8|Math.round(255*q[0])<<0)>>>0}}var C={multVec:(x,S)=>[x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],x[4]*S[0]+x[5]*S[1]+x[6]*S[2]+x[7]*S[3],x[8]*S[0]+x[9]*S[1]+x[10]*S[2]+x[11]*S[3],x[12]*S[0]+x[13]*S[1]+x[14]*S[2]+x[15]*S[3]],dot:(x,S)=>x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],sml:(x,S)=>[x*S[0],x*S[1],x*S[2],x*S[3]]};Un.encode=function(S,T,R,N,P,V,j){N==null&&(N=0),j==null&&(j=!1);const O=u(S,T,R,N,[!1,!1,!1,0,j,!1]);return d(O,-1),c(O,T,R,P,V)},Un.encodeLL=function(S,T,R,N,P,V,j,O){const M={ctype:0+(N==1?0:2)+(P==0?0:4),depth:V,frames:[]},F=(N+P)*V,B=F*T;for(let z=0;z<S.length;z++)M.frames.push({rect:{x:0,y:0,width:T,height:R},img:new Uint8Array(S[z]),blend:0,dispose:1,bpp:Math.ceil(F/8),bpl:Math.ceil(B/8)});return d(M,0,!0),c(M,T,R,j,O)},Un.encode.compress=u,Un.encode.dither=l,Un.quantize=y,Un.quantize.getKDtree=E,Un.quantize.getNearest=g})();const tw={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,o=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(o.data.buffer),l=(32*n+31)/32<<2,c=l*r,d=122+c,u=new ArrayBuffer(d),h=new DataView(u),f=1<<20;let m,v,y,E,g=f,w=0,_=0,b=0;function A(x){h.setUint16(_,x,!0),_+=2}function k(x){h.setUint32(_,x,!0),_+=4}function C(x){_+=x}A(19778),k(d),C(4),k(122),k(108),k(n),k(-r>>>0),A(1),A(32),k(3),k(c),k(2835),k(2835),C(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function x(){for(;w<r&&g>0;){for(E=122+w*l,m=0;m<i;)g--,v=s[b++],y=v>>>24,h.setUint32(E+m,v<<8|y),m+=4;w++}b<s.length?(g=f,setTimeout(x,tw._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var rn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},GP={[rn.CHROME]:16384,[rn.FIREFOX]:11180,[rn.DESKTOP_SAFARI]:16384,[rn.IE]:8192,[rn.IOS]:4096,[rn.ETC]:8192};const B0=typeof window<"u",nw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Fu=B0&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),QP=(B0||nw)&&(Fu&&Fu.getOriginalSymbol(window,"File")||typeof File<"u"&&File),rw=(B0||nw)&&(Fu&&Fu.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function j0(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),o=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let l=s.length;const c=new Uint8Array(l);for(;l--;)c[l]=s.charCodeAt(l);const d=new Blob([c],{type:o});d.name=e,d.lastModified=n,r(d)})}function iw(t){return new Promise((e,n)=>{const r=new rw;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function ow(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Gi(){if(Gi.cachedResult!==void 0)return Gi.cachedResult;let t=rn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=rn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=rn.IOS:/Safari/i.test(e)?t=rn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=rn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=rn.IE),Gi.cachedResult=t,Gi.cachedResult}function sw(t,e){const n=Gi(),r=GP[n];let i=t,o=e,s=i*o;const l=i>o?o/i:i/o;for(;s>r*r;){const c=(r+i)/2,d=(r+o)/2;c<d?(o=d,i=d*l):(o=c*l,i=c),s=i*o}return{width:i,height:o}}function Nd(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function aw(t,e){const{width:n,height:r}=sw(t.width,t.height),[i,o]=Nd(n,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(t,0,0,i.width,i.height),i}function $c(){return $c.cachedResult!==void 0||($c.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),$c.cachedResult}function Bu(t,e={}){return new Promise(function(n,r){let i,o;var s=function(){try{return o=aw(i,e.fileType||t.type),n([i,o])}catch(c){return r(c)}},l=function(c){try{var d=function(u){try{throw u}catch(h){return r(h)}};try{let u;return iw(t).then(function(h){try{return u=h,ow(u).then(function(f){try{return i=f,function(){try{return s()}catch(m){return r(m)}}()}catch(m){return d(m)}},d)}catch(f){return d(f)}},d)}catch(u){d(u)}}catch(u){return r(u)}};try{if($c()||[rn.DESKTOP_SAFARI,rn.MOBILE_SAFARI].includes(Gi()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return i=c,s()}catch{return l()}},l)}catch{l()}})}function ju(t,e,n,r,i=1){return new Promise(function(o,s){let l;if(e==="image/png"){let h,f,m;return h=t.getContext("2d"),{data:f}=h.getImageData(0,0,t.width,t.height),m=Un.encode([f.buffer],t.width,t.height,4096*i),l=new Blob([m],{type:e}),l.name=n,l.lastModified=r,c.call(this)}{let h=function(){return c.call(this)};var d=h;if(e==="image/bmp")return new Promise(f=>tw.toBlob(t,f)).then((function(f){try{return l=f,l.name=n,l.lastModified=r,h.call(this)}catch(m){return s(m)}}).bind(this),s);{let f=function(){return h.call(this)};var u=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(m){try{return l=m,l.name=n,l.lastModified=r,f.call(this)}catch(v){return s(v)}}).bind(this),s);{let m;return m=t.toDataURL(e,i),j0(m,n,r).then((function(v){try{return l=v,f.call(this)}catch(y){return s(y)}}).bind(this),s)}}}function c(){return o(l)}})}function Zn(t){t.width=0,t.height=0}function Ko(){return new Promise(function(t,e){let n,r,i,o;return Ko.cachedResult!==void 0?t(Ko.cachedResult):j0("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,Bu(n).then(function(l){try{return r=l[1],ju(r,n.type,n.name,n.lastModified).then(function(c){try{return i=c,Zn(r),Bu(i).then(function(d){try{return o=d[0],Ko.cachedResult=o.width===1&&o.height===2,t(Ko.cachedResult)}catch(u){return e(u)}},e)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)})}function lw(t){return new Promise((e,n)=>{const r=new rw;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const s=o.byteLength;let l=2;for(;l<s;){if(o.getUint16(l+2,!1)<=8)return e(-1);const c=o.getUint16(l,!1);if(l+=2,c==65505){if(o.getUint32(l+=2,!1)!=1165519206)return e(-1);const d=o.getUint16(l+=6,!1)==18761;l+=o.getUint32(l+4,d);const u=o.getUint16(l,d);l+=2;for(let h=0;h<u;h++)if(o.getUint16(l+12*h,d)==274)return e(o.getUint16(l+12*h+8,d))}else{if((65280&c)!=65280)break;l+=o.getUint16(l,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function cw(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let o,s=t;return isFinite(i)&&(n>i||r>i)&&([s,o]=Nd(n,r),n>r?(s.width=i,s.height=r/n*i):(s.width=n/r*i,s.height=i),o.drawImage(t,0,0,s.width,s.height),Zn(t)),s}function uw(t,e){const{width:n}=t,{height:r}=t,[i,o]=Nd(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(t,0,0,n,r),Zn(t),i}function Rv(t,e,n=0){return new Promise(function(r,i){let o,s,l,c,d,u,h,f,m,v,y,E,g,w,_,b,A,k,C,x;function S(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=R,e.onProgress(Math.min(o,100))}function T(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(R,o),100),e.onProgress(o)}return o=n,s=e.maxIteration||10,l=1024*e.maxSizeMB*1024,S(),Bu(t,e).then((function(R){try{return[,c]=R,S(),d=cw(c,e),S(),new Promise(function(N,P){var V;if(!(V=e.exifOrientation))return lw(t).then((function(O){try{return V=O,j.call(this)}catch(M){return P(M)}}).bind(this),P);function j(){return N(V)}return j.call(this)}).then((function(N){try{return u=N,S(),Ko().then((function(P){try{return h=P?d:uw(d,u),S(),f=e.initialQuality||1,m=e.fileType||t.type,ju(h,m,t.name,t.lastModified,f).then((function(V){try{{let F=function(){if(s--&&(_>l||_>g)){let z,X;return z=x?.95*C.width:C.width,X=x?.95*C.height:C.height,[A,k]=Nd(z,X),k.drawImage(C,0,0,z,X),f*=m==="image/png"?.85:.95,ju(A,m,t.name,t.lastModified,f).then(function(Y){try{return b=Y,Zn(C),C=A,_=b.size,T(Math.min(99,Math.floor((w-_)/(w-l)*100))),F}catch(q){return i(q)}},i)}return[1]},B=function(){return Zn(C),Zn(A),Zn(d),Zn(h),Zn(c),T(100),r(b)};var O=F,M=B;if(v=V,S(),y=v.size>l,E=v.size>t.size,!y&&!E)return T(100),r(v);var j;return g=t.size,w=v.size,_=w,C=h,x=!e.alwaysKeepResolution&&y,(j=(function(z){for(;z;){if(z.then)return void z.then(j,i);try{if(z.pop){if(z.length)return z.pop()?B.call(this):z;z=F}else z=z.call(this)}catch(X){return i(X)}}}).bind(this))(F)}}catch(F){return i(F)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)})}const JP=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let zh;function ZP(t,e){return new Promise((n,r)=>{zh||(zh=function(s){const l=[];return l.push(s),URL.createObjectURL(new Blob(l))}(JP));const i=new Worker(zh);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void i.terminate();n(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function $t(t,e){return new Promise(function(n,r){let i,o,s,l,c,d;if(i={...e},s=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{s=m,typeof l=="function"&&l(s)},!(t instanceof Blob||t instanceof QP))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||d)return Rv(t,i).then((function(m){try{return o=m,f.call(this)}catch(v){return r(v)}}).bind(this),r);var u=(function(){try{return f.call(this)}catch(m){return r(m)}}).bind(this),h=function(m){try{return Rv(t,i).then(function(v){try{return o=v,u()}catch(y){return r(y)}},r)}catch(v){return r(v)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ZP(t,i).then(function(m){try{return o=m,u()}catch{return h()}},h)}catch{h()}function f(){try{o.name=t.name,o.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(o=ew(t,o))}catch{}return n(o)}})}$t.getDataUrlFromFile=iw,$t.getFilefromDataUrl=j0,$t.loadImage=ow,$t.drawImageInCanvas=aw,$t.drawFileInCanvas=Bu,$t.canvasToFile=ju,$t.getExifOrientation=lw,$t.handleMaxWidthOrHeight=cw,$t.followExifOrientation=uw,$t.cleanupCanvasMemory=Zn,$t.isAutoOrientationInBrowser=Ko,$t.approximateBelowMaximumCanvasSizeOfBrowser=sw,$t.copyExifWithoutOrientation=ew,$t.getBrowserName=Gi,$t.version="2.0.2";const eL=1,tL=1e6;let $h=0;function nL(){return $h=($h+1)%Number.MAX_SAFE_INTEGER,$h.toString()}const Hh=new Map,Nv=t=>{if(Hh.has(t))return;const e=setTimeout(()=>{Hh.delete(t),Na({type:"REMOVE_TOAST",toastId:t})},tL);Hh.set(t,e)},rL=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,eL)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Nv(n):t.toasts.forEach(r=>{Nv(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Hc=[];let qc={toasts:[]};function Na(t){qc=rL(qc,t),Hc.forEach(e=>{e(qc)})}function iL({...t}){const e=nL(),n=i=>Na({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Na({type:"DISMISS_TOAST",toastId:e});return Na({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function z0(){const[t,e]=D.useState(qc);return D.useEffect(()=>(Hc.push(e),()=>{const n=Hc.indexOf(e);n>-1&&Hc.splice(n,1)}),[t]),{...t,toast:iL,dismiss:n=>Na({type:"DISMISS_TOAST",toastId:n})}}const oL=({onSubmit:t,onCancel:e,existingNodes:n})=>{const[r,i]=D.useState(""),[o,s]=D.useState(""),[l,c]=D.useState(null),[d,u]=D.useState(null),[h,f]=D.useState(null),[m,v]=D.useState(null),[y,E]=D.useState(!1),{toast:g}=z0();function w(){g({title:"Insufficient permissions",description:"please, contact admin",variant:"destructive"})}const _=async A=>{if(A.preventDefault(),!y){E(!0);try{const C=await zP({id:"",name:r,gender:o,fid:d&&d!=="unassigned"?[d]:void 0,mid:h&&h!=="unassigned"?[h]:void 0,pids:m&&m!=="unassigned"?[m]:[],img:null},l);t(C)}catch(k){k.code=="permission-denied"&&w(),console.error("Error adding family member: ",k)}finally{E(!1)}}},b=async A=>{if(A&&A.target&&A.target&&A.target.files&&A.target.files.length>0){const k=A.target.files[0],x=await $t(k,{maxSizeMB:.2,useWebWorker:!0});console.log(x),c(x);return}c(null)};return $.jsxs("form",{onSubmit:_,className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx($i,{htmlFor:"name",children:"Name"}),$.jsx(jf,{id:"name",value:r,onChange:A=>i(A.target.value),required:!0})]}),$.jsxs("div",{children:[$.jsx($i,{htmlFor:"gender",children:"Gender"}),$.jsxs(lc,{onValueChange:s,children:[$.jsx(ua,{children:$.jsx(cc,{placeholder:"Select gender"})}),$.jsxs(da,{children:[$.jsx(_r,{value:"male",children:"Male"}),$.jsx(_r,{value:"female",children:"Female"})]})]})]}),$.jsxs("div",{children:[$.jsx($i,{htmlFor:"image",children:"Image"}),$.jsx(jf,{id:"image",type:"file",accept:"image/*",onChange:b})]}),$.jsxs("div",{children:[$.jsx($i,{htmlFor:"fatherId",children:"Father"}),$.jsxs(lc,{onValueChange:u,children:[$.jsx(ua,{children:$.jsx(cc,{placeholder:"Select father"})}),$.jsxs(da,{children:[$.jsx(_r,{value:"unassigned",children:"None"}),n.filter(A=>A.gender==="male").map(A=>$.jsx(_r,{value:A.id,children:A.name},A.id))]})]})]}),$.jsxs("div",{children:[$.jsx($i,{htmlFor:"motherId",children:"Mother"}),$.jsxs(lc,{onValueChange:f,children:[$.jsx(ua,{children:$.jsx(cc,{placeholder:"Select mother"})}),$.jsxs(da,{children:[$.jsx(_r,{value:"unassigned",children:"None"}),n.filter(A=>A.gender==="female").map(A=>$.jsx(_r,{value:A.id,children:A.name},A.id))]})]})]}),$.jsxs("div",{children:[$.jsx($i,{htmlFor:"partnerId",children:"Partner"}),$.jsxs(lc,{onValueChange:v,children:[$.jsx(ua,{children:$.jsx(cc,{placeholder:"Select partner"})}),$.jsxs(da,{children:[$.jsx(_r,{value:"unassigned",children:"None"}),n.map(A=>$.jsx(_r,{value:A.id,children:A.name},A.id))]})]})]}),$.jsxs("div",{className:"flex justify-between",children:[$.jsx(Ir,{type:"submit",disabled:y,children:y?"Adding...":"Add Member"}),$.jsx(Ir,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})},sL=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,o]=D.useState(null);return D.useEffect(()=>{const s=IN(ol(vo,"familyMembers"),l=>{try{const c=l.docs.map(d=>{const u=d.data();return{id:d.id,name:u.name||"",gender:u.gender||"",img:u.img||"",pids:u.pids||[],fid:u.fid||[],mid:u.mid||[]}});console.log("Fetched nodes: ",c),e(c),r(!1)}catch(c){console.error("Error fetching family members:",c),o("Failed to fetch family members"),r(!1)}},l=>{console.error("Firestore subscription error:",l),o("Failed to subscribe to family members"),r(!1)});return()=>s()},[]),{nodes:t,loading:n,error:i}},Pv=t=>{let e;const n=new Set,r=(d,u)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const f=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,f))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d))},c=e=t(r,i,l);return l},aL=t=>t?Pv(t):Pv,lL=t=>t;function cL(t,e=lL){const n=Jn.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Jn.useDebugValue(n),n}const Lv=t=>{const e=aL(t),n=r=>cL(e,r);return Object.assign(n,e),n},uL=t=>t?Lv(t):Lv,Cp=uL(t=>({family:null,setFamily:e=>t(()=>({family:e})),isOpen:!1,setIsOpen:e=>t(()=>({isOpen:e})),user:null,setUser:e=>t(()=>({user:e}))})),dL=()=>{const t=D.useRef(null),e=D.useRef(null),{nodes:n,loading:r,error:i}=sL(),[o,s]=D.useState(!1),[l,c]=D.useState(""),{toast:d}=z0(),u=Cp(b=>b.user),[h,f]=D.useState(null),[m,v]=D.useState(!1);D.useEffect(()=>{async function b(){const A=await qP();A.length>0?f(A[0].id):f(null)}b()},[]),D.useEffect(()=>{if(t.current&&n.length>0&&!r)try{e.current&&(e.current.destroy(),t.current.innerHTML="");const b=n.map(k=>{var x,S;const C={id:k.id,name:k.name??"",gender:k.gender??""};return k.img&&(C.img=k.img),((x=k.fid)==null?void 0:x.length)>0&&(C.fid=k.fid),((S=k.mid)==null?void 0:S.length)>0&&(C.mid=k.mid),k.pids&&(C.pids=k.pids),C}),A=new nt(t.current,{nodes:b,template:"rabin",nodeBinding:{field_0:"name",img_0:"img"},levelSeparation:100,siblingSeparation:50,subtreeSeparation:100,toolbar:{zoom:!0,fit:!0},roots:h?[h]:[]});e.current=A,e.current.onUpdateNode(E),c("Family tree initialized successfully")}catch(b){console.error("Error initializing family tree:",b),c(`Error initializing family tree: ${b}`)}},[n,r]);function y(){d({title:"Insufficient permissions",description:"please, contact admin",variant:"destructive"})}const E=async b=>{if(console.log("Edit node:",b),b.updateNodesData.length>0&&b.updateNodesData.forEach(k=>{Ip(k.id,{name:k.name,gender:k.gender,img:k.img}).catch(C=>{C.code=="permission-denied"?(console.error("Insufficient permissions to update the document."),y()):console.error("Error updating document: ",C)})}),b.removeNodeId!==null)try{const A=await $P(b.removeNodeId.toString());return console.log("Document successfully removed!"),console.log(A),!0}catch(A){A.code=="permission-denied"?y():console.error("Error removing document: ",A)}return!1},g=()=>{console.log("Add new member"),s(!0)},w=()=>{!e.current||!h||HP(h).then(()=>{var b;!e.current||!h||(e.current.config.roots=[h],(b=e.current)==null||b.draw())}).catch(b=>{console.error("Error setting root family member: ",b)})},_=b=>{s(!1),console.log("New member added:",b)};return r?$.jsxs("div",{className:"loading-container",children:[$.jsx("div",{className:"spinner"}),$.jsx("p",{children:"Loading..."})]}):i?$.jsxs("div",{children:["Error loading family tree data: ",i]}):$.jsxs("div",{className:"flex flex-col md:flex-row w-full h-screen",children:[$.jsx("div",{className:"w-full h-full "+(m?"md:w-3/4":""),style:{height:"100vh"},ref:t}),u&&$.jsx($.Fragment,{children:m?$.jsxs("div",{className:"w-full md:w-1/4 p-4 bg-gray-100",children:[$.jsx("div",{children:$.jsx(Ir,{onClick:()=>v(!1),children:$.jsx(Hx,{})})}),$.jsxs("div",{className:"mb-4",children:[$.jsx("label",{htmlFor:"rootNodeSelect",className:"block mb-2",children:"Select Root Node:"}),$.jsx("select",{id:"rootNodeSelect",className:"w-full p-2 border border-gray-300 rounded",onChange:b=>{const A=b.target.value;f(A)},children:n.map(b=>$.jsx("option",{value:b.id,selected:h===b.id,children:b.name},b.id))}),$.jsx(Ir,{className:"mb-4",onClick:w,children:"Set as Root Node"})]}),$.jsx(Ir,{onClick:g,className:"mb-4",children:"Add Member"}),o&&$.jsx(oL,{onSubmit:_,onCancel:()=>s(!1),existingNodes:n})]}):$.jsx(Ir,{className:"mt-7 mr-5 absolute top-14 ml-3",onClick:()=>v(!0),variant:"default",size:"icon",children:$.jsx(Kx,{})})})]})};var $0="Avatar",[hL,GL]=A1($0),[fL,dw]=hL($0),hw=D.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,o]=D.useState("idle");return $.jsx(fL,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:$.jsx(je.span,{...r,ref:e})})});hw.displayName=$0;var fw="AvatarImage",pw=D.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...o}=t,s=dw(fw,n),l=pL(r,o.referrerPolicy),c=un(d=>{i(d),s.onImageLoadingStatusChange(d)});return kt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?$.jsx(je.img,{...o,ref:e,src:r}):null});pw.displayName=fw;var mw="AvatarFallback",gw=D.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,o=dw(mw,n),[s,l]=D.useState(r===void 0);return D.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),s&&o.imageLoadingStatus!=="loaded"?$.jsx(je.span,{...i,ref:e}):null});gw.displayName=mw;function pL(t,e){const[n,r]=D.useState("idle");return kt(()=>{if(!t){r("error");return}let i=!0;const o=new window.Image,s=l=>()=>{i&&r(l)};return r("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=t,e&&(o.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var vw=hw,yw=pw,_w=gw;const ww=D.forwardRef(({className:t,...e},n)=>$.jsx(vw,{ref:n,className:wt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));ww.displayName=vw.displayName;const bw=D.forwardRef(({className:t,...e},n)=>$.jsx(yw,{ref:n,className:wt("aspect-square h-full w-full",t),...e}));bw.displayName=yw.displayName;const xw=D.forwardRef(({className:t,...e},n)=>$.jsx(_w,{ref:n,className:wt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));xw.displayName=_w.displayName;const mL=new xr,gL=()=>{const t=Cp(i=>i.user),e=Cp(i=>i.setUser);D.useEffect(()=>{pA(jh,i=>{e(i),console.log("currentUser",i)})},[]);const n=async()=>{try{await MA(jh,mL)}catch(i){console.error("Error logging in: ",i)}},r=async()=>{try{await jh.signOut(),e(null)}catch(i){console.error("Error logging out: ",i)}};return $.jsx("div",{className:"absolute z-10 m-3 mt-32",children:t?$.jsxs("div",{children:[$.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[$.jsxs(ww,{children:[$.jsx(bw,{src:t.photoURL,alt:"user avatar"}),$.jsx(xw,{children:t.displayName[0]})]}),$.jsx("h6",{children:t.displayName})]}),$.jsx(Ir,{onClick:r,children:"Logout"})]}):$.jsx(Ir,{onClick:n,children:"Login with Google"})})};function vL(t,e){return D.useReducer((n,r)=>e[n][r]??n,t)}var Ew=t=>{const{present:e,children:n}=t,r=yL(e),i=typeof n=="function"?n({present:r.isPresent}):D.Children.only(n),o=_t(r.ref,_L(i));return typeof n=="function"||r.isPresent?D.cloneElement(i,{ref:o}):null};Ew.displayName="Presence";function yL(t){const[e,n]=D.useState(),r=D.useRef({}),i=D.useRef(t),o=D.useRef("none"),s=t?"mounted":"unmounted",[l,c]=vL(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const d=vc(r.current);o.current=l==="mounted"?d:"none"},[l]),kt(()=>{const d=r.current,u=i.current;if(u!==t){const f=o.current,m=vc(d);t?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),kt(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,h=m=>{const y=vc(r.current).includes(m.animationName);if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},f=m=>{m.target===e&&(o.current=vc(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:D.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function vc(t){return(t==null?void 0:t.animationName)||"none"}function _L(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var H0="ToastProvider",[q0,wL,bL]=s_("Toast"),[Sw,QL]=A1("Toast",[bL]),[xL,Pd]=Sw(H0),Iw=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=t,[l,c]=D.useState(null),[d,u]=D.useState(0),h=D.useRef(!1),f=D.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${H0}\`. Expected non-empty \`string\`.`),$.jsx(q0.Provider,{scope:e,children:$.jsx(xL,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:D.useCallback(()=>u(m=>m+1),[]),onToastRemove:D.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:s})})};Iw.displayName=H0;var Cw="ToastViewport",EL=["F8"],Ap="toast.viewportPause",Tp="toast.viewportResume",Aw=D.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=EL,label:i="Notifications ({hotkey})",...o}=t,s=Pd(Cw,n),l=wL(n),c=D.useRef(null),d=D.useRef(null),u=D.useRef(null),h=D.useRef(null),f=_t(e,h,s.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=s.toastCount>0;D.useEffect(()=>{const E=g=>{var _;r.length!==0&&r.every(b=>g[b]||g.code===b)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),D.useEffect(()=>{const E=c.current,g=h.current;if(v&&E&&g){const w=()=>{if(!s.isClosePausedRef.current){const k=new CustomEvent(Ap);g.dispatchEvent(k),s.isClosePausedRef.current=!0}},_=()=>{if(s.isClosePausedRef.current){const k=new CustomEvent(Tp);g.dispatchEvent(k),s.isClosePausedRef.current=!1}},b=k=>{!E.contains(k.relatedTarget)&&_()},A=()=>{E.contains(document.activeElement)||_()};return E.addEventListener("focusin",w),E.addEventListener("focusout",b),E.addEventListener("pointermove",w),E.addEventListener("pointerleave",A),window.addEventListener("blur",w),window.addEventListener("focus",_),()=>{E.removeEventListener("focusin",w),E.removeEventListener("focusout",b),E.removeEventListener("pointermove",w),E.removeEventListener("pointerleave",A),window.removeEventListener("blur",w),window.removeEventListener("focus",_)}}},[v,s.isClosePausedRef]);const y=D.useCallback(({tabbingDirection:E})=>{const w=l().map(_=>{const b=_.ref.current,A=[b,...DL(b)];return E==="forwards"?A:A.reverse()});return(E==="forwards"?w.reverse():w).flat()},[l]);return D.useEffect(()=>{const E=h.current;if(E){const g=w=>{var A,k,C;const _=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!_){const x=document.activeElement,S=w.shiftKey;if(w.target===E&&S){(A=d.current)==null||A.focus();return}const N=y({tabbingDirection:S?"backwards":"forwards"}),P=N.findIndex(V=>V===x);qh(N.slice(P+1))?w.preventDefault():S?(k=d.current)==null||k.focus():(C=u.current)==null||C.focus()}};return E.addEventListener("keydown",g),()=>E.removeEventListener("keydown",g)}},[l,y]),$.jsxs(l9,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&$.jsx(kp,{ref:d,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"forwards"});qh(E)}}),$.jsx(q0.Slot,{scope:n,children:$.jsx(je.ol,{tabIndex:-1,...o,ref:f})}),v&&$.jsx(kp,{ref:u,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"backwards"});qh(E)}})]})});Aw.displayName=Cw;var Tw="ToastFocusProxy",kp=D.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=Pd(Tw,n);return $.jsx(ad,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{var d;const l=s.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&r()}})});kp.displayName=Tw;var Ld="Toast",SL="toast.swipeStart",IL="toast.swipeMove",CL="toast.swipeCancel",AL="toast.swipeEnd",kw=D.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...s}=t,[l=!0,c]=Xf({prop:r,defaultProp:i,onChange:o});return $.jsx(Ew,{present:n||l,children:$.jsx(RL,{open:l,...s,ref:e,onClose:()=>c(!1),onPause:un(t.onPause),onResume:un(t.onResume),onSwipeStart:Be(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Be(t.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Be(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Be(t.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});kw.displayName=Ld;var[TL,kL]=Sw(Ld,{onClose(){}}),RL=D.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,y=Pd(Ld,n),[E,g]=D.useState(null),w=_t(e,V=>g(V)),_=D.useRef(null),b=D.useRef(null),A=i||y.duration,k=D.useRef(0),C=D.useRef(A),x=D.useRef(0),{onToastAdd:S,onToastRemove:T}=y,R=un(()=>{var j;(E==null?void 0:E.contains(document.activeElement))&&((j=y.viewport)==null||j.focus()),s()}),N=D.useCallback(V=>{!V||V===1/0||(window.clearTimeout(x.current),k.current=new Date().getTime(),x.current=window.setTimeout(R,V))},[R]);D.useEffect(()=>{const V=y.viewport;if(V){const j=()=>{N(C.current),d==null||d()},O=()=>{const M=new Date().getTime()-k.current;C.current=C.current-M,window.clearTimeout(x.current),c==null||c()};return V.addEventListener(Ap,O),V.addEventListener(Tp,j),()=>{V.removeEventListener(Ap,O),V.removeEventListener(Tp,j)}}},[y.viewport,A,c,d,N]),D.useEffect(()=>{o&&!y.isClosePausedRef.current&&N(A)},[o,A,y.isClosePausedRef,N]),D.useEffect(()=>(S(),()=>T()),[S,T]);const P=D.useMemo(()=>E?Dw(E):null,[E]);return y.viewport?$.jsxs($.Fragment,{children:[P&&$.jsx(NL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),$.jsx(TL,{scope:n,onClose:R,children:wo.createPortal($.jsx(q0.ItemSlot,{scope:n,children:$.jsx(a9,{asChild:!0,onEscapeKeyDown:Be(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||R(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:$.jsx(je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Be(t.onKeyDown,V=>{V.key==="Escape"&&(l==null||l(V.nativeEvent),V.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Be(t.onPointerDown,V=>{V.button===0&&(_.current={x:V.clientX,y:V.clientY})}),onPointerMove:Be(t.onPointerMove,V=>{if(!_.current)return;const j=V.clientX-_.current.x,O=V.clientY-_.current.y,M=!!b.current,F=["left","right"].includes(y.swipeDirection),B=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,z=F?B(0,j):0,X=F?0:B(0,O),Y=V.pointerType==="touch"?10:2,q={x:z,y:X},K={originalEvent:V,delta:q};M?(b.current=q,yc(IL,h,K,{discrete:!1})):Mv(q,y.swipeDirection,Y)?(b.current=q,yc(SL,u,K,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(j)>Y||Math.abs(O)>Y)&&(_.current=null)}),onPointerUp:Be(t.onPointerUp,V=>{const j=b.current,O=V.target;if(O.hasPointerCapture(V.pointerId)&&O.releasePointerCapture(V.pointerId),b.current=null,_.current=null,j){const M=V.currentTarget,F={originalEvent:V,delta:j};Mv(j,y.swipeDirection,y.swipeThreshold)?yc(AL,m,F,{discrete:!0}):yc(CL,f,F,{discrete:!0}),M.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),NL=t=>{const{__scopeToast:e,children:n,...r}=t,i=Pd(Ld,e),[o,s]=D.useState(!1),[l,c]=D.useState(!1);return ML(()=>s(!0)),D.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:$.jsx(V1,{asChild:!0,children:$.jsx(ad,{...r,children:o&&$.jsxs($.Fragment,{children:[i.label," ",n]})})})},PL="ToastTitle",Rw=D.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return $.jsx(je.div,{...r,ref:e})});Rw.displayName=PL;var LL="ToastDescription",Nw=D.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return $.jsx(je.div,{...r,ref:e})});Nw.displayName=LL;var Pw="ToastAction",Lw=D.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?$.jsx(Ow,{altText:n,asChild:!0,children:$.jsx(W0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Pw}\`. Expected non-empty \`string\`.`),null)});Lw.displayName=Pw;var Mw="ToastClose",W0=D.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=kL(Mw,n);return $.jsx(Ow,{asChild:!0,children:$.jsx(je.button,{type:"button",...r,ref:e,onClick:Be(t.onClick,i.onClose)})})});W0.displayName=Mw;var Ow=D.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return $.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Dw(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),OL(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...Dw(r))}}),e}function yc(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?r_(i,o):i.dispatchEvent(o)}var Mv=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function ML(t=()=>{}){const e=un(t);kt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function OL(t){return t.nodeType===t.ELEMENT_NODE}function DL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function qh(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var UL=Iw,Uw=Aw,Vw=kw,Fw=Rw,Bw=Nw,jw=Lw,zw=W0;const VL=UL,$w=D.forwardRef(({className:t,...e},n)=>$.jsx(Uw,{ref:n,className:wt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$w.displayName=Uw.displayName;const FL=I1("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Hw=D.forwardRef(({className:t,variant:e,...n},r)=>$.jsx(Vw,{ref:r,className:wt(FL({variant:e}),t),...n}));Hw.displayName=Vw.displayName;const BL=D.forwardRef(({className:t,...e},n)=>$.jsx(jw,{ref:n,className:wt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));BL.displayName=jw.displayName;const qw=D.forwardRef(({className:t,...e},n)=>$.jsx(zw,{ref:n,className:wt("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:$.jsx(Wx,{className:"h-4 w-4"})}));qw.displayName=zw.displayName;const Ww=D.forwardRef(({className:t,...e},n)=>$.jsx(Fw,{ref:n,className:wt("text-sm font-semibold [&+div]:text-xs",t),...e}));Ww.displayName=Fw.displayName;const Xw=D.forwardRef(({className:t,...e},n)=>$.jsx(Bw,{ref:n,className:wt("text-sm opacity-90",t),...e}));Xw.displayName=Bw.displayName;function jL(){const{toasts:t}=z0();return $.jsxs(VL,{children:[t.map(function({id:e,title:n,description:r,action:i,...o}){return $.jsxs(Hw,{...o,children:[$.jsxs("div",{className:"grid gap-1",children:[n&&$.jsx(Ww,{children:n}),r&&$.jsx(Xw,{children:r})]}),i,$.jsx(qw,{})]},e)}),$.jsx($w,{})]})}const zL=()=>$.jsxs("div",{className:"App",children:[$.jsx(gL,{}),$.jsx(dL,{}),$.jsx(jL,{})]});K3(document.getElementById("root")).render($.jsx(D.StrictMode,{children:$.jsx(zL,{})}))});export default $L();
